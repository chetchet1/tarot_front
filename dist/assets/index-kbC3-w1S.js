const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Settings-18BS6KDU.js","./Settings-BD9VkuPv.css","./TestPremium-BzELazlQ.js","./TestPremium-Cpv2XbZl.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function po(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Ne={},Zs=[],xt=()=>{},Nu=()=>!1,xr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),go=t=>t.startsWith("onUpdate:"),et=Object.assign,mo=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Ku=Object.prototype.hasOwnProperty,De=(t,e)=>Ku.call(t,e),de=Array.isArray,en=t=>Xn(t)==="[object Map]",dn=t=>Xn(t)==="[object Set]",zo=t=>Xn(t)==="[object Date]",ke=t=>typeof t=="function",Je=t=>typeof t=="string",Mt=t=>typeof t=="symbol",Ke=t=>t!==null&&typeof t=="object",$l=t=>(Ke(t)||ke(t))&&ke(t.then)&&ke(t.catch),Pl=Object.prototype.toString,Xn=t=>Pl.call(t),Fu=t=>Xn(t).slice(8,-1),El=t=>Xn(t)==="[object Object]",vo=t=>Je(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$n=po(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Bu=/-(\w)/g,Et=Nr(t=>t.replace(Bu,(e,s)=>s?s.toUpperCase():"")),Hu=/\B([A-Z])/g,Ds=Nr(t=>t.replace(Hu,"-$1").toLowerCase()),Kr=Nr(t=>t.charAt(0).toUpperCase()+t.slice(1)),ai=Nr(t=>t?`on${Kr(t)}`:""),ps=(t,e)=>!Object.is(t,e),mr=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Ui=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},_r=t=>{const e=parseFloat(t);return isNaN(e)?t:e},zu=t=>{const e=Je(t)?Number(t):NaN;return isNaN(e)?t:e};let Vo;const Fr=()=>Vo||(Vo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function St(t){if(de(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=Je(n)?Gu(n):St(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(Je(t)||Ke(t))return t}const Vu=/;(?![^(]*\))/g,qu=/:([^]+)/,Wu=/\/\*[^]*?\*\//g;function Gu(t){const e={};return t.replace(Wu,"").split(Vu).forEach(s=>{if(s){const n=s.split(qu);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function H(t){let e="";if(Je(t))e=t;else if(de(t))for(let s=0;s<t.length;s++){const n=H(t[s]);n&&(e+=n+" ")}else if(Ke(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Ju="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qu=po(Ju);function Tl(t){return!!t||t===""}function Yu(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=Ls(t[n],e[n]);return s}function Ls(t,e){if(t===e)return!0;let s=zo(t),n=zo(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=Mt(t),n=Mt(e),s||n)return t===e;if(s=de(t),n=de(e),s||n)return s&&n?Yu(t,e):!1;if(s=Ke(t),n=Ke(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Ls(t[o],e[o]))return!1}}return String(t)===String(e)}function yo(t,e){return t.findIndex(s=>Ls(s,e))}const Al=t=>!!(t&&t.__v_isRef===!0),$=t=>Je(t)?t:t==null?"":de(t)||Ke(t)&&(t.toString===Pl||!ke(t.toString))?Al(t)?$(t.value):JSON.stringify(t,Il,2):String(t),Il=(t,e)=>Al(e)?Il(t,e.value):en(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[li(n,i)+" =>"]=r,s),{})}:dn(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>li(s))}:Mt(e)?li(e):Ke(e)&&!de(e)&&!El(e)?String(e):e,li=(t,e="")=>{var s;return Mt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let at;class Rl{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=at,!e&&at&&(this.index=(at.scopes||(at.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=at;try{return at=this,e()}finally{at=s}}}on(){++this._on===1&&(this.prevScope=at,at=this)}off(){this._on>0&&--this._on===0&&(at=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ml(t){return new Rl(t)}function Ol(){return at}function Xu(t,e=!1){at&&at.cleanups.push(t)}let Be;const ci=new WeakSet;class jl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,at&&at.active&&at.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ci.has(this)&&(ci.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Dl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qo(this),Ul(this);const e=Be,s=Rt;Be=this,Rt=!0;try{return this.fn()}finally{xl(this),Be=e,Rt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)_o(e);this.deps=this.depsTail=void 0,qo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ci.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xi(this)&&this.run()}get dirty(){return xi(this)}}let Ll=0,Pn,En;function Dl(t,e=!1){if(t.flags|=8,e){t.next=En,En=t;return}t.next=Pn,Pn=t}function wo(){Ll++}function bo(){if(--Ll>0)return;if(En){let e=En;for(En=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Pn;){let e=Pn;for(Pn=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Ul(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xl(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),_o(n),Zu(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function xi(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Nl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Nl(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===xn)||(t.globalVersion=xn,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!xi(t))))return;t.flags|=2;const e=t.dep,s=Be,n=Rt;Be=t,Rt=!0;try{Ul(t);const r=t.fn(t._value);(e.version===0||ps(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Be=s,Rt=n,xl(t),t.flags&=-3}}function _o(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)_o(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Zu(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Rt=!0;const Kl=[];function Xt(){Kl.push(Rt),Rt=!1}function Zt(){const t=Kl.pop();Rt=t===void 0?!0:t}function qo(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Be;Be=void 0;try{e()}finally{Be=s}}}let xn=0;class ed{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ko{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Be||!Rt||Be===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Be)s=this.activeLink=new ed(Be,this),Be.deps?(s.prevDep=Be.depsTail,Be.depsTail.nextDep=s,Be.depsTail=s):Be.deps=Be.depsTail=s,Fl(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Be.depsTail,s.nextDep=void 0,Be.depsTail.nextDep=s,Be.depsTail=s,Be.deps===s&&(Be.deps=n)}return s}trigger(e){this.version++,xn++,this.notify(e)}notify(e){wo();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{bo()}}}function Fl(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Fl(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const kr=new WeakMap,Os=Symbol(""),Ni=Symbol(""),Nn=Symbol("");function lt(t,e,s){if(Rt&&Be){let n=kr.get(t);n||kr.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new ko),r.map=n,r.key=s),r.track()}}function qt(t,e,s,n,r,i){const o=kr.get(t);if(!o){xn++;return}const a=c=>{c&&c.trigger()};if(wo(),e==="clear")o.forEach(a);else{const c=de(t),u=c&&vo(s);if(c&&s==="length"){const d=Number(n);o.forEach((f,v)=>{(v==="length"||v===Nn||!Mt(v)&&v>=d)&&a(f)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),u&&a(o.get(Nn)),e){case"add":c?u&&a(o.get("length")):(a(o.get(Os)),en(t)&&a(o.get(Ni)));break;case"delete":c||(a(o.get(Os)),en(t)&&a(o.get(Ni)));break;case"set":en(t)&&a(o.get(Os));break}}bo()}function td(t,e){const s=kr.get(t);return s&&s.get(e)}function Fs(t){const e=Oe(t);return e===t?e:(lt(e,"iterate",Nn),Ct(t)?e:e.map(rt))}function Br(t){return lt(t=Oe(t),"iterate",Nn),t}const sd={__proto__:null,[Symbol.iterator](){return ui(this,Symbol.iterator,rt)},concat(...t){return Fs(this).concat(...t.map(e=>de(e)?Fs(e):e))},entries(){return ui(this,"entries",t=>(t[1]=rt(t[1]),t))},every(t,e){return Kt(this,"every",t,e,void 0,arguments)},filter(t,e){return Kt(this,"filter",t,e,s=>s.map(rt),arguments)},find(t,e){return Kt(this,"find",t,e,rt,arguments)},findIndex(t,e){return Kt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Kt(this,"findLast",t,e,rt,arguments)},findLastIndex(t,e){return Kt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Kt(this,"forEach",t,e,void 0,arguments)},includes(...t){return di(this,"includes",t)},indexOf(...t){return di(this,"indexOf",t)},join(t){return Fs(this).join(t)},lastIndexOf(...t){return di(this,"lastIndexOf",t)},map(t,e){return Kt(this,"map",t,e,void 0,arguments)},pop(){return gn(this,"pop")},push(...t){return gn(this,"push",t)},reduce(t,...e){return Wo(this,"reduce",t,e)},reduceRight(t,...e){return Wo(this,"reduceRight",t,e)},shift(){return gn(this,"shift")},some(t,e){return Kt(this,"some",t,e,void 0,arguments)},splice(...t){return gn(this,"splice",t)},toReversed(){return Fs(this).toReversed()},toSorted(t){return Fs(this).toSorted(t)},toSpliced(...t){return Fs(this).toSpliced(...t)},unshift(...t){return gn(this,"unshift",t)},values(){return ui(this,"values",rt)}};function ui(t,e,s){const n=Br(t),r=n[e]();return n!==t&&!Ct(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=s(i.value)),i}),r}const nd=Array.prototype;function Kt(t,e,s,n,r,i){const o=Br(t),a=o!==t&&!Ct(t),c=o[e];if(c!==nd[e]){const f=c.apply(t,i);return a?rt(f):f}let u=s;o!==t&&(a?u=function(f,v){return s.call(this,rt(f),v,t)}:s.length>2&&(u=function(f,v){return s.call(this,f,v,t)}));const d=c.call(o,u,n);return a&&r?r(d):d}function Wo(t,e,s,n){const r=Br(t);let i=s;return r!==t&&(Ct(t)?s.length>3&&(i=function(o,a,c){return s.call(this,o,a,c,t)}):i=function(o,a,c){return s.call(this,o,rt(a),c,t)}),r[e](i,...n)}function di(t,e,s){const n=Oe(t);lt(n,"iterate",Nn);const r=n[e](...s);return(r===-1||r===!1)&&$o(s[0])?(s[0]=Oe(s[0]),n[e](...s)):r}function gn(t,e,s=[]){Xt(),wo();const n=Oe(t)[e].apply(t,s);return bo(),Zt(),n}const rd=po("__proto__,__v_isRef,__isVue"),Bl=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Mt));function id(t){Mt(t)||(t=String(t));const e=Oe(this);return lt(e,"has",t),e.hasOwnProperty(t)}class Hl{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?gd:Wl:i?ql:Vl).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=de(e);if(!r){let c;if(o&&(c=sd[s]))return c;if(s==="hasOwnProperty")return id}const a=Reflect.get(e,s,Ge(e)?e:n);return(Mt(s)?Bl.has(s):rd(s))||(r||lt(e,"get",s),i)?a:Ge(a)?o&&vo(s)?a:a.value:Ke(a)?r?Jl(a):Zn(a):a}}class zl extends Hl{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];if(!this._isShallow){const c=ms(i);if(!Ct(n)&&!ms(n)&&(i=Oe(i),n=Oe(n)),!de(e)&&Ge(i)&&!Ge(n))return c?!1:(i.value=n,!0)}const o=de(e)&&vo(s)?Number(s)<e.length:De(e,s),a=Reflect.set(e,s,n,Ge(e)?e:r);return e===Oe(r)&&(o?ps(n,i)&&qt(e,"set",s,n):qt(e,"add",s,n)),a}deleteProperty(e,s){const n=De(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&qt(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!Mt(s)||!Bl.has(s))&&lt(e,"has",s),n}ownKeys(e){return lt(e,"iterate",de(e)?"length":Os),Reflect.ownKeys(e)}}class od extends Hl{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const ad=new zl,ld=new od,cd=new zl(!0);const Ki=t=>t,ir=t=>Reflect.getPrototypeOf(t);function ud(t,e,s){return function(...n){const r=this.__v_raw,i=Oe(r),o=en(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...n),d=s?Ki:e?Sr:rt;return!e&&lt(i,"iterate",c?Ni:Os),{next(){const{value:f,done:v}=u.next();return v?{value:f,done:v}:{value:a?[d(f[0]),d(f[1])]:d(f),done:v}},[Symbol.iterator](){return this}}}}function or(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function dd(t,e){const s={get(r){const i=this.__v_raw,o=Oe(i),a=Oe(r);t||(ps(r,a)&&lt(o,"get",r),lt(o,"get",a));const{has:c}=ir(o),u=e?Ki:t?Sr:rt;if(c.call(o,r))return u(i.get(r));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&lt(Oe(r),"iterate",Os),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Oe(i),a=Oe(r);return t||(ps(r,a)&&lt(o,"has",r),lt(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,c=Oe(a),u=e?Ki:t?Sr:rt;return!t&&lt(c,"iterate",Os),a.forEach((d,f)=>r.call(i,u(d),u(f),o))}};return et(s,t?{add:or("add"),set:or("set"),delete:or("delete"),clear:or("clear")}:{add(r){!e&&!Ct(r)&&!ms(r)&&(r=Oe(r));const i=Oe(this);return ir(i).has.call(i,r)||(i.add(r),qt(i,"add",r,r)),this},set(r,i){!e&&!Ct(i)&&!ms(i)&&(i=Oe(i));const o=Oe(this),{has:a,get:c}=ir(o);let u=a.call(o,r);u||(r=Oe(r),u=a.call(o,r));const d=c.call(o,r);return o.set(r,i),u?ps(i,d)&&qt(o,"set",r,i):qt(o,"add",r,i),this},delete(r){const i=Oe(this),{has:o,get:a}=ir(i);let c=o.call(i,r);c||(r=Oe(r),c=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return c&&qt(i,"delete",r,void 0),u},clear(){const r=Oe(this),i=r.size!==0,o=r.clear();return i&&qt(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=ud(r,t,e)}),s}function So(t,e){const s=dd(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(De(s,r)&&r in n?s:n,r,i)}const hd={get:So(!1,!1)},fd={get:So(!1,!0)},pd={get:So(!0,!1)};const Vl=new WeakMap,ql=new WeakMap,Wl=new WeakMap,gd=new WeakMap;function md(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vd(t){return t.__v_skip||!Object.isExtensible(t)?0:md(Fu(t))}function Zn(t){return ms(t)?t:Co(t,!1,ad,hd,Vl)}function Gl(t){return Co(t,!1,cd,fd,ql)}function Jl(t){return Co(t,!0,ld,pd,Wl)}function Co(t,e,s,n,r){if(!Ke(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=vd(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?n:s);return r.set(t,a),a}function gs(t){return ms(t)?gs(t.__v_raw):!!(t&&t.__v_isReactive)}function ms(t){return!!(t&&t.__v_isReadonly)}function Ct(t){return!!(t&&t.__v_isShallow)}function $o(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function Po(t){return!De(t,"__v_skip")&&Object.isExtensible(t)&&Ui(t,"__v_skip",!0),t}const rt=t=>Ke(t)?Zn(t):t,Sr=t=>Ke(t)?Jl(t):t;function Ge(t){return t?t.__v_isRef===!0:!1}function W(t){return Ql(t,!1)}function yd(t){return Ql(t,!0)}function Ql(t,e){return Ge(t)?t:new wd(t,e)}class wd{constructor(e,s){this.dep=new ko,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Oe(e),this._value=s?e:rt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||Ct(e)||ms(e);e=n?e:Oe(e),ps(e,s)&&(this._rawValue=e,this._value=n?e:rt(e),this.dep.trigger())}}function pe(t){return Ge(t)?t.value:t}const bd={get:(t,e,s)=>e==="__v_raw"?t:pe(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return Ge(r)&&!Ge(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function Yl(t){return gs(t)?t:new Proxy(t,bd)}function _d(t){const e=de(t)?new Array(t.length):{};for(const s in t)e[s]=Sd(t,s);return e}class kd{constructor(e,s,n){this._object=e,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return td(Oe(this._object),this._key)}}function Sd(t,e,s){const n=t[e];return Ge(n)?n:new kd(t,e,s)}class Cd{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new ko(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return Dl(this,!0),!0}get value(){const e=this.dep.track();return Nl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function $d(t,e,s=!1){let n,r;return ke(t)?n=t:(n=t.get,r=t.set),new Cd(n,r,s)}const ar={},Cr=new WeakMap;let Es;function Pd(t,e=!1,s=Es){if(s){let n=Cr.get(s);n||Cr.set(s,n=[]),n.push(t)}}function Ed(t,e,s=Ne){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:a,call:c}=s,u=T=>r?T:Ct(T)||r===!1||r===0?Wt(T,1):Wt(T);let d,f,v,p,h=!1,m=!1;if(Ge(t)?(f=()=>t.value,h=Ct(t)):gs(t)?(f=()=>u(t),h=!0):de(t)?(m=!0,h=t.some(T=>gs(T)||Ct(T)),f=()=>t.map(T=>{if(Ge(T))return T.value;if(gs(T))return u(T);if(ke(T))return c?c(T,2):T()})):ke(t)?e?f=c?()=>c(t,2):t:f=()=>{if(v){Xt();try{v()}finally{Zt()}}const T=Es;Es=d;try{return c?c(t,3,[p]):t(p)}finally{Es=T}}:f=xt,e&&r){const T=f,O=r===!0?1/0:r;f=()=>Wt(T(),O)}const C=Ol(),k=()=>{d.stop(),C&&C.active&&mo(C.effects,d)};if(i&&e){const T=e;e=(...O)=>{T(...O),k()}}let A=m?new Array(t.length).fill(ar):ar;const S=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(e){const O=d.run();if(r||h||(m?O.some((E,R)=>ps(E,A[R])):ps(O,A))){v&&v();const E=Es;Es=d;try{const R=[O,A===ar?void 0:m&&A[0]===ar?[]:A,p];A=O,c?c(e,3,R):e(...R)}finally{Es=E}}}else d.run()};return a&&a(S),d=new jl(f),d.scheduler=o?()=>o(S,!1):S,p=T=>Pd(T,!1,d),v=d.onStop=()=>{const T=Cr.get(d);if(T){if(c)c(T,4);else for(const O of T)O();Cr.delete(d)}},e?n?S(!0):A=d.run():o?o(S.bind(null,!0),!0):d.run(),k.pause=d.pause.bind(d),k.resume=d.resume.bind(d),k.stop=k,k}function Wt(t,e=1/0,s){if(e<=0||!Ke(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,Ge(t))Wt(t.value,e,s);else if(de(t))for(let n=0;n<t.length;n++)Wt(t[n],e,s);else if(dn(t)||en(t))t.forEach(n=>{Wt(n,e,s)});else if(El(t)){for(const n in t)Wt(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Wt(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function er(t,e,s,n){try{return n?t(...n):t()}catch(r){Hr(r,e,s)}}function Ot(t,e,s,n){if(ke(t)){const r=er(t,e,s,n);return r&&$l(r)&&r.catch(i=>{Hr(i,e,s)}),r}if(de(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Ot(t[i],e,s,n));return r}}function Hr(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ne;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,c,u)===!1)return}a=a.parent}if(i){Xt(),er(i,null,10,[t,c,u]),Zt();return}}Td(t,s,r,n,o)}function Td(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const ht=[];let Dt=-1;const tn=[];let as=null,Gs=0;const Xl=Promise.resolve();let $r=null;function Us(t){const e=$r||Xl;return t?e.then(this?t.bind(this):t):e}function Ad(t){let e=Dt+1,s=ht.length;for(;e<s;){const n=e+s>>>1,r=ht[n],i=Kn(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function Eo(t){if(!(t.flags&1)){const e=Kn(t),s=ht[ht.length-1];!s||!(t.flags&2)&&e>=Kn(s)?ht.push(t):ht.splice(Ad(e),0,t),t.flags|=1,Zl()}}function Zl(){$r||($r=Xl.then(tc))}function Id(t){de(t)?tn.push(...t):as&&t.id===-1?as.splice(Gs+1,0,t):t.flags&1||(tn.push(t),t.flags|=1),Zl()}function Go(t,e,s=Dt+1){for(;s<ht.length;s++){const n=ht[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;ht.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ec(t){if(tn.length){const e=[...new Set(tn)].sort((s,n)=>Kn(s)-Kn(n));if(tn.length=0,as){as.push(...e);return}for(as=e,Gs=0;Gs<as.length;Gs++){const s=as[Gs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}as=null,Gs=0}}const Kn=t=>t.id==null?t.flags&2?-1:1/0:t.id;function tc(t){try{for(Dt=0;Dt<ht.length;Dt++){const e=ht[Dt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),er(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Dt<ht.length;Dt++){const e=ht[Dt];e&&(e.flags&=-2)}Dt=-1,ht.length=0,ec(),$r=null,(ht.length||tn.length)&&tc()}}let it=null,sc=null;function Pr(t){const e=it;return it=t,sc=t&&t.type.__scopeId||null,e}function Pe(t,e=it,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&ia(-1);const i=Pr(e);let o;try{o=t(...r)}finally{Pr(i),n._d&&ia(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function _t(t,e){if(it===null)return t;const s=Jr(it),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,c=Ne]=e[r];i&&(ke(i)&&(i={mounted:i,updated:i}),i.deep&&Wt(o),n.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function bs(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[n];c&&(Xt(),Ot(c,s,8,[t.el,a,t,e]),Zt())}}const Rd=Symbol("_vte"),nc=t=>t.__isTeleport,ls=Symbol("_leaveCb"),lr=Symbol("_enterCb");function Md(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return mt(()=>{t.isMounted=!0}),dc(()=>{t.isUnmounting=!0}),t}const bt=[Function,Array],rc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bt,onEnter:bt,onAfterEnter:bt,onEnterCancelled:bt,onBeforeLeave:bt,onLeave:bt,onAfterLeave:bt,onLeaveCancelled:bt,onBeforeAppear:bt,onAppear:bt,onAfterAppear:bt,onAppearCancelled:bt},ic=t=>{const e=t.subTree;return e.component?ic(e.component):e},Od={name:"BaseTransition",props:rc,setup(t,{slots:e}){const s=Mo(),n=Md();return()=>{const r=e.default&&lc(e.default(),!0);if(!r||!r.length)return;const i=oc(r),o=Oe(t),{mode:a}=o;if(n.isLeaving)return hi(i);const c=Jo(i);if(!c)return hi(i);let u=Fi(c,o,n,s,f=>u=f);c.type!==ct&&Fn(c,u);let d=s.subTree&&Jo(s.subTree);if(d&&d.type!==ct&&!As(c,d)&&ic(s).type!==ct){let f=Fi(d,o,n,s);if(Fn(d,f),a==="out-in"&&c.type!==ct)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,d=void 0},hi(i);a==="in-out"&&c.type!==ct?f.delayLeave=(v,p,h)=>{const m=ac(n,d);m[String(d.key)]=d,v[ls]=()=>{p(),v[ls]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{h(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function oc(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==ct){e=s;break}}return e}const jd=Od;function ac(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function Fi(t,e,s,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:v,onLeave:p,onAfterLeave:h,onLeaveCancelled:m,onBeforeAppear:C,onAppear:k,onAfterAppear:A,onAppearCancelled:S}=e,T=String(t.key),O=ac(s,t),E=(I,j)=>{I&&Ot(I,n,9,j)},R=(I,j)=>{const q=j[1];E(I,j),de(I)?I.every(K=>K.length<=1)&&q():I.length<=1&&q()},N={mode:o,persisted:a,beforeEnter(I){let j=c;if(!s.isMounted)if(i)j=C||c;else return;I[ls]&&I[ls](!0);const q=O[T];q&&As(t,q)&&q.el[ls]&&q.el[ls](),E(j,[I])},enter(I){let j=u,q=d,K=f;if(!s.isMounted)if(i)j=k||u,q=A||d,K=S||f;else return;let B=!1;const G=I[lr]=he=>{B||(B=!0,he?E(K,[I]):E(q,[I]),N.delayedLeave&&N.delayedLeave(),I[lr]=void 0)};j?R(j,[I,G]):G()},leave(I,j){const q=String(t.key);if(I[lr]&&I[lr](!0),s.isUnmounting)return j();E(v,[I]);let K=!1;const B=I[ls]=G=>{K||(K=!0,j(),G?E(m,[I]):E(h,[I]),I[ls]=void 0,O[q]===t&&delete O[q])};O[q]=t,p?R(p,[I,B]):B()},clone(I){const j=Fi(I,e,s,n,r);return r&&r(j),j}};return N}function hi(t){if(zr(t))return t=vs(t),t.children=null,t}function Jo(t){if(!zr(t))return nc(t.type)&&t.children?oc(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&ke(s.default))return s.default()}}function Fn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Fn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function lc(t,e=!1,s){let n=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=s==null?o.key:String(s)+String(o.key!=null?o.key:i);o.type===be?(o.patchFlag&128&&r++,n=n.concat(lc(o.children,e,a))):(e||o.type!==ct)&&n.push(a!=null?vs(o,{key:a}):o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Qe(t,e){return ke(t)?et({name:t.name},e,{setup:t}):t}function cc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Tn(t,e,s,n,r=!1){if(de(t)){t.forEach((h,m)=>Tn(h,e&&(de(e)?e[m]:e),s,n,r));return}if(sn(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Tn(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?Jr(n.component):n.el,o=r?null:i,{i:a,r:c}=t,u=e&&e.r,d=a.refs===Ne?a.refs={}:a.refs,f=a.setupState,v=Oe(f),p=f===Ne?()=>!1:h=>De(v,h);if(u!=null&&u!==c&&(Je(u)?(d[u]=null,p(u)&&(f[u]=null)):Ge(u)&&(u.value=null)),ke(c))er(c,a,12,[o,d]);else{const h=Je(c),m=Ge(c);if(h||m){const C=()=>{if(t.f){const k=h?p(c)?f[c]:d[c]:c.value;r?de(k)&&mo(k,i):de(k)?k.includes(i)||k.push(i):h?(d[c]=[i],p(c)&&(f[c]=d[c])):(c.value=[i],t.k&&(d[t.k]=c.value))}else h?(d[c]=o,p(c)&&(f[c]=o)):m&&(c.value=o,t.k&&(d[t.k]=o))};o?(C.id=-1,vt(C,s)):C()}}}Fr().requestIdleCallback;Fr().cancelIdleCallback;const sn=t=>!!t.type.__asyncLoader,zr=t=>t.type.__isKeepAlive;function Ld(t,e){uc(t,"a",e)}function Dd(t,e){uc(t,"da",e)}function uc(t,e,s=ut){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Vr(e,n,s),s){let r=s.parent;for(;r&&r.parent;)zr(r.parent.vnode)&&Ud(n,e,s,r),r=r.parent}}function Ud(t,e,s,n){const r=Vr(e,t,n,!0);tr(()=>{mo(n[e],r)},s)}function Vr(t,e,s=ut,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Xt();const a=sr(s),c=Ot(e,s,t,o);return a(),Zt(),c});return n?r.unshift(i):r.push(i),i}}const es=t=>(e,s=ut)=>{(!Vn||t==="sp")&&Vr(t,(...n)=>e(...n),s)},xd=es("bm"),mt=es("m"),Nd=es("bu"),Kd=es("u"),dc=es("bum"),tr=es("um"),Fd=es("sp"),Bd=es("rtg"),Hd=es("rtc");function zd(t,e=ut){Vr("ec",t,e)}const Vd="components";function qr(t,e){return Wd(Vd,t,!0,e)||t}const qd=Symbol.for("v-ndc");function Wd(t,e,s=!0,n=!1){const r=it||ut;if(r){const i=r.type;{const a=jh(i,!1);if(a&&(a===e||a===Et(e)||a===Kr(Et(e))))return i}const o=Qo(r[t]||i[t],e)||Qo(r.appContext[t],e);return!o&&n?i:o}}function Qo(t,e){return t&&(t[e]||t[Et(e)]||t[Kr(Et(e))])}function xe(t,e,s,n){let r;const i=s,o=de(t);if(o||Je(t)){const a=o&&gs(t);let c=!1,u=!1;a&&(c=!Ct(t),u=ms(t),t=Br(t)),r=new Array(t.length);for(let d=0,f=t.length;d<f;d++)r[d]=e(c?u?Sr(rt(t[d])):rt(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ke(t))if(t[Symbol.iterator])r=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const d=a[c];r[c]=e(t[d],d,c,i)}}else r=[];return r}function To(t,e,s={},n,r){if(it.ce||it.parent&&sn(it.parent)&&it.parent.ce)return s.name=e,w(),ft(be,null,[fe("slot",s,n)],64);let i=t[e];i&&i._c&&(i._d=!1),w();const o=i&&hc(i(s)),a=s.key||o&&o.key,c=ft(be,{key:(a&&!Mt(a)?a:`_${e}`)+(!o&&n?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function hc(t){return t.some(e=>Hn(e)?!(e.type===ct||e.type===be&&!hc(e.children)):!0)?t:null}const Bi=t=>t?Mc(t)?Jr(t):Bi(t.parent):null,An=et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bi(t.parent),$root:t=>Bi(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>pc(t),$forceUpdate:t=>t.f||(t.f=()=>{Eo(t.update)}),$nextTick:t=>t.n||(t.n=Us.bind(t.proxy)),$watch:t=>gh.bind(t)}),fi=(t,e)=>t!==Ne&&!t.__isScriptSetup&&De(t,e),Gd={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(fi(n,e))return o[e]=1,n[e];if(r!==Ne&&De(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&De(u,e))return o[e]=3,i[e];if(s!==Ne&&De(s,e))return o[e]=4,s[e];Hi&&(o[e]=0)}}const d=An[e];let f,v;if(d)return e==="$attrs"&&lt(t.attrs,"get",""),d(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(s!==Ne&&De(s,e))return o[e]=4,s[e];if(v=c.config.globalProperties,De(v,e))return v[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return fi(r,e)?(r[e]=s,!0):n!==Ne&&De(n,e)?(n[e]=s,!0):De(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:i}},o){let a;return!!s[o]||t!==Ne&&De(t,o)||fi(e,o)||(a=i[0])&&De(a,o)||De(n,o)||De(An,o)||De(r.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:De(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Yo(t){return de(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Hi=!0;function Jd(t){const e=pc(t),s=t.proxy,n=t.ctx;Hi=!1,e.beforeCreate&&Xo(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:u,created:d,beforeMount:f,mounted:v,beforeUpdate:p,updated:h,activated:m,deactivated:C,beforeDestroy:k,beforeUnmount:A,destroyed:S,unmounted:T,render:O,renderTracked:E,renderTriggered:R,errorCaptured:N,serverPrefetch:I,expose:j,inheritAttrs:q,components:K,directives:B,filters:G}=e;if(u&&Qd(u,n,null),o)for(const Q in o){const ue=o[Q];ke(ue)&&(n[Q]=ue.bind(s))}if(r){const Q=r.call(s,s);Ke(Q)&&(t.data=Zn(Q))}if(Hi=!0,i)for(const Q in i){const ue=i[Q],J=ke(ue)?ue.bind(s,s):ke(ue.get)?ue.get.bind(s,s):xt,se=!ke(ue)&&ke(ue.set)?ue.set.bind(s):xt,ge=ye({get:J,set:se});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>ge.value,set:me=>ge.value=me})}if(a)for(const Q in a)fc(a[Q],n,s,Q);if(c){const Q=ke(c)?c.call(s):c;Reflect.ownKeys(Q).forEach(ue=>{vr(ue,Q[ue])})}d&&Xo(d,t,"c");function ce(Q,ue){de(ue)?ue.forEach(J=>Q(J.bind(s))):ue&&Q(ue.bind(s))}if(ce(xd,f),ce(mt,v),ce(Nd,p),ce(Kd,h),ce(Ld,m),ce(Dd,C),ce(zd,N),ce(Hd,E),ce(Bd,R),ce(dc,A),ce(tr,T),ce(Fd,I),de(j))if(j.length){const Q=t.exposed||(t.exposed={});j.forEach(ue=>{Object.defineProperty(Q,ue,{get:()=>s[ue],set:J=>s[ue]=J,enumerable:!0})})}else t.exposed||(t.exposed={});O&&t.render===xt&&(t.render=O),q!=null&&(t.inheritAttrs=q),K&&(t.components=K),B&&(t.directives=B),I&&cc(t)}function Qd(t,e,s=xt){de(t)&&(t=zi(t));for(const n in t){const r=t[n];let i;Ke(r)?"default"in r?i=$t(r.from||n,r.default,!0):i=$t(r.from||n):i=$t(r),Ge(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function Xo(t,e,s){Ot(de(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function fc(t,e,s,n){let r=n.includes(".")?Ec(s,n):()=>s[n];if(Je(t)){const i=e[t];ke(i)&&Qt(r,i)}else if(ke(t))Qt(r,t.bind(s));else if(Ke(t))if(de(t))t.forEach(i=>fc(i,e,s,n));else{const i=ke(t.handler)?t.handler.bind(s):e[t.handler];ke(i)&&Qt(r,i,t)}}function pc(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!s&&!n?c=e:(c={},r.length&&r.forEach(u=>Er(c,u,o,!0)),Er(c,e,o)),Ke(e)&&i.set(e,c),c}function Er(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&Er(t,i,s,!0),r&&r.forEach(o=>Er(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const a=Yd[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Yd={data:Zo,props:ea,emits:ea,methods:Sn,computed:Sn,beforeCreate:dt,created:dt,beforeMount:dt,mounted:dt,beforeUpdate:dt,updated:dt,beforeDestroy:dt,beforeUnmount:dt,destroyed:dt,unmounted:dt,activated:dt,deactivated:dt,errorCaptured:dt,serverPrefetch:dt,components:Sn,directives:Sn,watch:Zd,provide:Zo,inject:Xd};function Zo(t,e){return e?t?function(){return et(ke(t)?t.call(this,this):t,ke(e)?e.call(this,this):e)}:e:t}function Xd(t,e){return Sn(zi(t),zi(e))}function zi(t){if(de(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function dt(t,e){return t?[...new Set([].concat(t,e))]:e}function Sn(t,e){return t?et(Object.create(null),t,e):e}function ea(t,e){return t?de(t)&&de(e)?[...new Set([...t,...e])]:et(Object.create(null),Yo(t),Yo(e??{})):e}function Zd(t,e){if(!t)return e;if(!e)return t;const s=et(Object.create(null),t);for(const n in e)s[n]=dt(t[n],e[n]);return s}function gc(){return{app:null,config:{isNativeTag:Nu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eh=0;function th(t,e){return function(n,r=null){ke(n)||(n=et({},n)),r!=null&&!Ke(r)&&(r=null);const i=gc(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:eh++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Dh,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&ke(d.install)?(o.add(d),d.install(u,...f)):ke(d)&&(o.add(d),d(u,...f))),u},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),u},component(d,f){return f?(i.components[d]=f,u):i.components[d]},directive(d,f){return f?(i.directives[d]=f,u):i.directives[d]},mount(d,f,v){if(!c){const p=u._ceVNode||fe(n,r);return p.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),t(p,d,v),c=!0,u._container=d,d.__vue_app__=u,Jr(p.component)}},onUnmount(d){a.push(d)},unmount(){c&&(Ot(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,f){return i.provides[d]=f,u},runWithContext(d){const f=js;js=u;try{return d()}finally{js=f}}};return u}}let js=null;function vr(t,e){if(ut){let s=ut.provides;const n=ut.parent&&ut.parent.provides;n===s&&(s=ut.provides=Object.create(n)),s[t]=e}}function $t(t,e,s=!1){const n=Mo();if(n||js){let r=js?js._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&ke(e)?e.call(n&&n.proxy):e}}function sh(){return!!(Mo()||js)}const mc={},vc=()=>Object.create(mc),yc=t=>Object.getPrototypeOf(t)===mc;function nh(t,e,s,n=!1){const r={},i=vc();t.propsDefaults=Object.create(null),wc(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);s?t.props=n?r:Gl(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function rh(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Oe(r),[c]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let v=d[f];if(Wr(t.emitsOptions,v))continue;const p=e[v];if(c)if(De(i,v))p!==i[v]&&(i[v]=p,u=!0);else{const h=Et(v);r[h]=Vi(c,a,h,p,t,!1)}else p!==i[v]&&(i[v]=p,u=!0)}}}else{wc(t,e,r,i)&&(u=!0);let d;for(const f in a)(!e||!De(e,f)&&((d=Ds(f))===f||!De(e,d)))&&(c?s&&(s[f]!==void 0||s[d]!==void 0)&&(r[f]=Vi(c,a,f,void 0,t,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!De(e,f))&&(delete i[f],u=!0)}u&&qt(t.attrs,"set","")}function wc(t,e,s,n){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if($n(c))continue;const u=e[c];let d;r&&De(r,d=Et(c))?!i||!i.includes(d)?s[d]=u:(a||(a={}))[d]=u:Wr(t.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,o=!0)}if(i){const c=Oe(s),u=a||Ne;for(let d=0;d<i.length;d++){const f=i[d];s[f]=Vi(r,c,f,u[f],t,!De(u,f))}}return o}function Vi(t,e,s,n,r,i){const o=t[s];if(o!=null){const a=De(o,"default");if(a&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ke(c)){const{propsDefaults:u}=r;if(s in u)n=u[s];else{const d=sr(r);n=u[s]=c.call(null,e),d()}}else n=c;r.ce&&r.ce._setProp(s,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===Ds(s))&&(n=!0))}return n}const ih=new WeakMap;function bc(t,e,s=!1){const n=s?ih:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!ke(t)){const d=f=>{c=!0;const[v,p]=bc(f,e,!0);et(o,v),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return Ke(t)&&n.set(t,Zs),Zs;if(de(i))for(let d=0;d<i.length;d++){const f=Et(i[d]);ta(f)&&(o[f]=Ne)}else if(i)for(const d in i){const f=Et(d);if(ta(f)){const v=i[d],p=o[f]=de(v)||ke(v)?{type:v}:et({},v),h=p.type;let m=!1,C=!0;if(de(h))for(let k=0;k<h.length;++k){const A=h[k],S=ke(A)&&A.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(C=!1)}else m=ke(h)&&h.name==="Boolean";p[0]=m,p[1]=C,(m||De(p,"default"))&&a.push(f)}}const u=[o,a];return Ke(t)&&n.set(t,u),u}function ta(t){return t[0]!=="$"&&!$n(t)}const Ao=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",Io=t=>de(t)?t.map(Ut):[Ut(t)],oh=(t,e,s)=>{if(e._n)return e;const n=Pe((...r)=>Io(e(...r)),s);return n._c=!1,n},_c=(t,e,s)=>{const n=t._ctx;for(const r in t){if(Ao(r))continue;const i=t[r];if(ke(i))e[r]=oh(r,i,n);else if(i!=null){const o=Io(i);e[r]=()=>o}}},kc=(t,e)=>{const s=Io(e);t.slots.default=()=>s},Sc=(t,e,s)=>{for(const n in e)(s||!Ao(n))&&(t[n]=e[n])},ah=(t,e,s)=>{const n=t.slots=vc();if(t.vnode.shapeFlag&32){const r=e.__;r&&Ui(n,"__",r,!0);const i=e._;i?(Sc(n,e,s),s&&Ui(n,"_",i,!0)):_c(e,n)}else e&&kc(t,e)},lh=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,o=Ne;if(n.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:Sc(r,e,s):(i=!e.$stable,_c(e,r)),o=e}else e&&(kc(t,e),o={default:1});if(i)for(const a in r)!Ao(a)&&o[a]==null&&delete r[a]},vt=kh;function ch(t){return uh(t)}function uh(t,e){const s=Fr();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:v,setScopeId:p=xt,insertStaticContent:h}=t,m=(g,y,_,P=null,D=null,x=null,X=void 0,F=null,V=!!y.dynamicChildren)=>{if(g===y)return;g&&!As(g,y)&&(P=L(g),me(g,D,x,!0),g=null),y.patchFlag===-2&&(V=!1,y.dynamicChildren=null);const{type:U,ref:z,shapeFlag:Y}=y;switch(U){case Gr:C(g,y,_,P);break;case ct:k(g,y,_,P);break;case yr:g==null&&A(y,_,P,X);break;case be:K(g,y,_,P,D,x,X,F,V);break;default:Y&1?O(g,y,_,P,D,x,X,F,V):Y&6?B(g,y,_,P,D,x,X,F,V):(Y&64||Y&128)&&U.process(g,y,_,P,D,x,X,F,V,ae)}z!=null&&D?Tn(z,g&&g.ref,x,y||g,!y):z==null&&g&&g.ref!=null&&Tn(g.ref,null,x,g,!0)},C=(g,y,_,P)=>{if(g==null)n(y.el=a(y.children),_,P);else{const D=y.el=g.el;y.children!==g.children&&u(D,y.children)}},k=(g,y,_,P)=>{g==null?n(y.el=c(y.children||""),_,P):y.el=g.el},A=(g,y,_,P)=>{[g.el,g.anchor]=h(g.children,y,_,P,g.el,g.anchor)},S=({el:g,anchor:y},_,P)=>{let D;for(;g&&g!==y;)D=v(g),n(g,_,P),g=D;n(y,_,P)},T=({el:g,anchor:y})=>{let _;for(;g&&g!==y;)_=v(g),r(g),g=_;r(y)},O=(g,y,_,P,D,x,X,F,V)=>{y.type==="svg"?X="svg":y.type==="math"&&(X="mathml"),g==null?E(y,_,P,D,x,X,F,V):I(g,y,D,x,X,F,V)},E=(g,y,_,P,D,x,X,F)=>{let V,U;const{props:z,shapeFlag:Y,transition:Z,dirs:ne}=g;if(V=g.el=o(g.type,x,z&&z.is,z),Y&8?d(V,g.children):Y&16&&N(g.children,V,null,P,D,pi(g,x),X,F),ne&&bs(g,null,P,"created"),R(V,g,g.scopeId,X,P),z){for(const Ce in z)Ce!=="value"&&!$n(Ce)&&i(V,Ce,null,z[Ce],x,P);"value"in z&&i(V,"value",null,z.value,x),(U=z.onVnodeBeforeMount)&&Lt(U,P,g)}ne&&bs(g,null,P,"beforeMount");const ie=dh(D,Z);ie&&Z.beforeEnter(V),n(V,y,_),((U=z&&z.onVnodeMounted)||ie||ne)&&vt(()=>{U&&Lt(U,P,g),ie&&Z.enter(V),ne&&bs(g,null,P,"mounted")},D)},R=(g,y,_,P,D)=>{if(_&&p(g,_),P)for(let x=0;x<P.length;x++)p(g,P[x]);if(D){let x=D.subTree;if(y===x||Ac(x.type)&&(x.ssContent===y||x.ssFallback===y)){const X=D.vnode;R(g,X,X.scopeId,X.slotScopeIds,D.parent)}}},N=(g,y,_,P,D,x,X,F,V=0)=>{for(let U=V;U<g.length;U++){const z=g[U]=F?cs(g[U]):Ut(g[U]);m(null,z,y,_,P,D,x,X,F)}},I=(g,y,_,P,D,x,X)=>{const F=y.el=g.el;let{patchFlag:V,dynamicChildren:U,dirs:z}=y;V|=g.patchFlag&16;const Y=g.props||Ne,Z=y.props||Ne;let ne;if(_&&_s(_,!1),(ne=Z.onVnodeBeforeUpdate)&&Lt(ne,_,y,g),z&&bs(y,g,_,"beforeUpdate"),_&&_s(_,!0),(Y.innerHTML&&Z.innerHTML==null||Y.textContent&&Z.textContent==null)&&d(F,""),U?j(g.dynamicChildren,U,F,_,P,pi(y,D),x):X||ue(g,y,F,null,_,P,pi(y,D),x,!1),V>0){if(V&16)q(F,Y,Z,_,D);else if(V&2&&Y.class!==Z.class&&i(F,"class",null,Z.class,D),V&4&&i(F,"style",Y.style,Z.style,D),V&8){const ie=y.dynamicProps;for(let Ce=0;Ce<ie.length;Ce++){const we=ie[Ce],Se=Y[we],re=Z[we];(re!==Se||we==="value")&&i(F,we,Se,re,D,_)}}V&1&&g.children!==y.children&&d(F,y.children)}else!X&&U==null&&q(F,Y,Z,_,D);((ne=Z.onVnodeUpdated)||z)&&vt(()=>{ne&&Lt(ne,_,y,g),z&&bs(y,g,_,"updated")},P)},j=(g,y,_,P,D,x,X)=>{for(let F=0;F<y.length;F++){const V=g[F],U=y[F],z=V.el&&(V.type===be||!As(V,U)||V.shapeFlag&198)?f(V.el):_;m(V,U,z,null,P,D,x,X,!0)}},q=(g,y,_,P,D)=>{if(y!==_){if(y!==Ne)for(const x in y)!$n(x)&&!(x in _)&&i(g,x,y[x],null,D,P);for(const x in _){if($n(x))continue;const X=_[x],F=y[x];X!==F&&x!=="value"&&i(g,x,F,X,D,P)}"value"in _&&i(g,"value",y.value,_.value,D)}},K=(g,y,_,P,D,x,X,F,V)=>{const U=y.el=g?g.el:a(""),z=y.anchor=g?g.anchor:a("");let{patchFlag:Y,dynamicChildren:Z,slotScopeIds:ne}=y;ne&&(F=F?F.concat(ne):ne),g==null?(n(U,_,P),n(z,_,P),N(y.children||[],_,z,D,x,X,F,V)):Y>0&&Y&64&&Z&&g.dynamicChildren?(j(g.dynamicChildren,Z,_,D,x,X,F),(y.key!=null||D&&y===D.subTree)&&Cc(g,y,!0)):ue(g,y,_,z,D,x,X,F,V)},B=(g,y,_,P,D,x,X,F,V)=>{y.slotScopeIds=F,g==null?y.shapeFlag&512?D.ctx.activate(y,_,P,X,V):G(y,_,P,D,x,X,V):he(g,y,V)},G=(g,y,_,P,D,x,X)=>{const F=g.component=Ah(g,P,D);if(zr(g)&&(F.ctx.renderer=ae),Ih(F,!1,X),F.asyncDep){if(D&&D.registerDep(F,ce,X),!g.el){const V=F.subTree=fe(ct);k(null,V,y,_),g.placeholder=V.el}}else ce(F,g,y,_,D,x,X)},he=(g,y,_)=>{const P=y.component=g.component;if(bh(g,y,_))if(P.asyncDep&&!P.asyncResolved){Q(P,y,_);return}else P.next=y,P.update();else y.el=g.el,P.vnode=y},ce=(g,y,_,P,D,x,X)=>{const F=()=>{if(g.isMounted){let{next:Y,bu:Z,u:ne,parent:ie,vnode:Ce}=g;{const _e=$c(g);if(_e){Y&&(Y.el=Ce.el,Q(g,Y,X)),_e.asyncDep.then(()=>{g.isUnmounted||F()});return}}let we=Y,Se;_s(g,!1),Y?(Y.el=Ce.el,Q(g,Y,X)):Y=Ce,Z&&mr(Z),(Se=Y.props&&Y.props.onVnodeBeforeUpdate)&&Lt(Se,ie,Y,Ce),_s(g,!0);const re=na(g),oe=g.subTree;g.subTree=re,m(oe,re,f(oe.el),L(oe),g,D,x),Y.el=re.el,we===null&&_h(g,re.el),ne&&vt(ne,D),(Se=Y.props&&Y.props.onVnodeUpdated)&&vt(()=>Lt(Se,ie,Y,Ce),D)}else{let Y;const{el:Z,props:ne}=y,{bm:ie,m:Ce,parent:we,root:Se,type:re}=g,oe=sn(y);_s(g,!1),ie&&mr(ie),!oe&&(Y=ne&&ne.onVnodeBeforeMount)&&Lt(Y,we,y),_s(g,!0);{Se.ce&&Se.ce._def.shadowRoot!==!1&&Se.ce._injectChildStyle(re);const _e=g.subTree=na(g);m(null,_e,_,P,g,D,x),y.el=_e.el}if(Ce&&vt(Ce,D),!oe&&(Y=ne&&ne.onVnodeMounted)){const _e=y;vt(()=>Lt(Y,we,_e),D)}(y.shapeFlag&256||we&&sn(we.vnode)&&we.vnode.shapeFlag&256)&&g.a&&vt(g.a,D),g.isMounted=!0,y=_=P=null}};g.scope.on();const V=g.effect=new jl(F);g.scope.off();const U=g.update=V.run.bind(V),z=g.job=V.runIfDirty.bind(V);z.i=g,z.id=g.uid,V.scheduler=()=>Eo(z),_s(g,!0),U()},Q=(g,y,_)=>{y.component=g;const P=g.vnode.props;g.vnode=y,g.next=null,rh(g,y.props,P,_),lh(g,y.children,_),Xt(),Go(g),Zt()},ue=(g,y,_,P,D,x,X,F,V=!1)=>{const U=g&&g.children,z=g?g.shapeFlag:0,Y=y.children,{patchFlag:Z,shapeFlag:ne}=y;if(Z>0){if(Z&128){se(U,Y,_,P,D,x,X,F,V);return}else if(Z&256){J(U,Y,_,P,D,x,X,F,V);return}}ne&8?(z&16&&ve(U,D,x),Y!==U&&d(_,Y)):z&16?ne&16?se(U,Y,_,P,D,x,X,F,V):ve(U,D,x,!0):(z&8&&d(_,""),ne&16&&N(Y,_,P,D,x,X,F,V))},J=(g,y,_,P,D,x,X,F,V)=>{g=g||Zs,y=y||Zs;const U=g.length,z=y.length,Y=Math.min(U,z);let Z;for(Z=0;Z<Y;Z++){const ne=y[Z]=V?cs(y[Z]):Ut(y[Z]);m(g[Z],ne,_,null,D,x,X,F,V)}U>z?ve(g,D,x,!0,!1,Y):N(y,_,P,D,x,X,F,V,Y)},se=(g,y,_,P,D,x,X,F,V)=>{let U=0;const z=y.length;let Y=g.length-1,Z=z-1;for(;U<=Y&&U<=Z;){const ne=g[U],ie=y[U]=V?cs(y[U]):Ut(y[U]);if(As(ne,ie))m(ne,ie,_,null,D,x,X,F,V);else break;U++}for(;U<=Y&&U<=Z;){const ne=g[Y],ie=y[Z]=V?cs(y[Z]):Ut(y[Z]);if(As(ne,ie))m(ne,ie,_,null,D,x,X,F,V);else break;Y--,Z--}if(U>Y){if(U<=Z){const ne=Z+1,ie=ne<z?y[ne].el:P;for(;U<=Z;)m(null,y[U]=V?cs(y[U]):Ut(y[U]),_,ie,D,x,X,F,V),U++}}else if(U>Z)for(;U<=Y;)me(g[U],D,x,!0),U++;else{const ne=U,ie=U,Ce=new Map;for(U=ie;U<=Z;U++){const He=y[U]=V?cs(y[U]):Ut(y[U]);He.key!=null&&Ce.set(He.key,U)}let we,Se=0;const re=Z-ie+1;let oe=!1,_e=0;const qe=new Array(re);for(U=0;U<re;U++)qe[U]=0;for(U=ne;U<=Y;U++){const He=g[U];if(Se>=re){me(He,D,x,!0);continue}let ze;if(He.key!=null)ze=Ce.get(He.key);else for(we=ie;we<=Z;we++)if(qe[we-ie]===0&&As(He,y[we])){ze=we;break}ze===void 0?me(He,D,x,!0):(qe[ze-ie]=U+1,ze>=_e?_e=ze:oe=!0,m(He,y[ze],_,null,D,x,X,F,V),Se++)}const st=oe?hh(qe):Zs;for(we=st.length-1,U=re-1;U>=0;U--){const He=ie+U,ze=y[He],Ye=y[He+1],nt=He+1<z?Ye.el||Ye.placeholder:P;qe[U]===0?m(null,ze,_,nt,D,x,X,F,V):oe&&(we<0||U!==st[we]?ge(ze,_,nt,2):we--)}}},ge=(g,y,_,P,D=null)=>{const{el:x,type:X,transition:F,children:V,shapeFlag:U}=g;if(U&6){ge(g.component.subTree,y,_,P);return}if(U&128){g.suspense.move(y,_,P);return}if(U&64){X.move(g,y,_,ae);return}if(X===be){n(x,y,_);for(let Y=0;Y<V.length;Y++)ge(V[Y],y,_,P);n(g.anchor,y,_);return}if(X===yr){S(g,y,_);return}if(P!==2&&U&1&&F)if(P===0)F.beforeEnter(x),n(x,y,_),vt(()=>F.enter(x),D);else{const{leave:Y,delayLeave:Z,afterLeave:ne}=F,ie=()=>{g.ctx.isUnmounted?r(x):n(x,y,_)},Ce=()=>{Y(x,()=>{ie(),ne&&ne()})};Z?Z(x,ie,Ce):Ce()}else n(x,y,_)},me=(g,y,_,P=!1,D=!1)=>{const{type:x,props:X,ref:F,children:V,dynamicChildren:U,shapeFlag:z,patchFlag:Y,dirs:Z,cacheIndex:ne}=g;if(Y===-2&&(D=!1),F!=null&&(Xt(),Tn(F,null,_,g,!0),Zt()),ne!=null&&(y.renderCache[ne]=void 0),z&256){y.ctx.deactivate(g);return}const ie=z&1&&Z,Ce=!sn(g);let we;if(Ce&&(we=X&&X.onVnodeBeforeUnmount)&&Lt(we,y,g),z&6)je(g.component,_,P);else{if(z&128){g.suspense.unmount(_,P);return}ie&&bs(g,null,y,"beforeUnmount"),z&64?g.type.remove(g,y,_,ae,P):U&&!U.hasOnce&&(x!==be||Y>0&&Y&64)?ve(U,y,_,!1,!0):(x===be&&Y&384||!D&&z&16)&&ve(V,y,_),P&&Ue(g)}(Ce&&(we=X&&X.onVnodeUnmounted)||ie)&&vt(()=>{we&&Lt(we,y,g),ie&&bs(g,null,y,"unmounted")},_)},Ue=g=>{const{type:y,el:_,anchor:P,transition:D}=g;if(y===be){Ee(_,P);return}if(y===yr){T(g);return}const x=()=>{r(_),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(g.shapeFlag&1&&D&&!D.persisted){const{leave:X,delayLeave:F}=D,V=()=>X(_,x);F?F(g.el,x,V):V()}else x()},Ee=(g,y)=>{let _;for(;g!==y;)_=v(g),r(g),g=_;r(y)},je=(g,y,_)=>{const{bum:P,scope:D,job:x,subTree:X,um:F,m:V,a:U,parent:z,slots:{__:Y}}=g;sa(V),sa(U),P&&mr(P),z&&de(Y)&&Y.forEach(Z=>{z.renderCache[Z]=void 0}),D.stop(),x&&(x.flags|=8,me(X,g,y,_)),F&&vt(F,y),vt(()=>{g.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},ve=(g,y,_,P=!1,D=!1,x=0)=>{for(let X=x;X<g.length;X++)me(g[X],y,_,P,D)},L=g=>{if(g.shapeFlag&6)return L(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const y=v(g.anchor||g.el),_=y&&y[Rd];return _?v(_):y};let te=!1;const ee=(g,y,_)=>{g==null?y._vnode&&me(y._vnode,null,null,!0):m(y._vnode||null,g,y,null,null,null,_),y._vnode=g,te||(te=!0,Go(),ec(),te=!1)},ae={p:m,um:me,m:ge,r:Ue,mt:G,mc:N,pc:ue,pbc:j,n:L,o:t};return{render:ee,hydrate:void 0,createApp:th(ee)}}function pi({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function _s({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function dh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Cc(t,e,s=!1){const n=t.children,r=e.children;if(de(n)&&de(r))for(let i=0;i<n.length;i++){const o=n[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=cs(r[i]),a.el=o.el),!s&&a.patchFlag!==-2&&Cc(o,a)),a.type===Gr&&(a.el=o.el),a.type===ct&&!a.el&&(a.el=o.el)}}function hh(t){const e=t.slice(),s=[0];let n,r,i,o,a;const c=t.length;for(n=0;n<c;n++){const u=t[n];if(u!==0){if(r=s[s.length-1],t[r]<u){e[n]=r,s.push(n);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<u?i=a+1:o=a;u<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function $c(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:$c(e)}function sa(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const fh=Symbol.for("v-scx"),ph=()=>$t(fh);function Qt(t,e,s){return Pc(t,e,s)}function Pc(t,e,s=Ne){const{immediate:n,deep:r,flush:i,once:o}=s,a=et({},s),c=e&&n||!e&&i!=="post";let u;if(Vn){if(i==="sync"){const p=ph();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=xt,p.resume=xt,p.pause=xt,p}}const d=ut;a.call=(p,h,m)=>Ot(p,d,h,m);let f=!1;i==="post"?a.scheduler=p=>{vt(p,d&&d.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(p,h)=>{h?p():Eo(p)}),a.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const v=Ed(t,e,a);return Vn&&(u?u.push(v):c&&v()),v}function gh(t,e,s){const n=this.proxy,r=Je(t)?t.includes(".")?Ec(n,t):()=>n[t]:t.bind(n,n);let i;ke(e)?i=e:(i=e.handler,s=e);const o=sr(this),a=Pc(r,i.bind(n),s);return o(),a}function Ec(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const mh=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Et(e)}Modifiers`]||t[`${Ds(e)}Modifiers`];function vh(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||Ne;let r=s;const i=e.startsWith("update:"),o=i&&mh(n,e.slice(7));o&&(o.trim&&(r=s.map(d=>Je(d)?d.trim():d)),o.number&&(r=s.map(_r)));let a,c=n[a=ai(e)]||n[a=ai(Et(e))];!c&&i&&(c=n[a=ai(Ds(e))]),c&&Ot(c,t,6,r);const u=n[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ot(u,t,6,r)}}function Tc(t,e,s=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!ke(t)){const c=u=>{const d=Tc(u,e,!0);d&&(a=!0,et(o,d))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Ke(t)&&n.set(t,null),null):(de(i)?i.forEach(c=>o[c]=null):et(o,i),Ke(t)&&n.set(t,o),o)}function Wr(t,e){return!t||!xr(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(t,e[0].toLowerCase()+e.slice(1))||De(t,Ds(e))||De(t,e))}function na(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:d,props:f,data:v,setupState:p,ctx:h,inheritAttrs:m}=t,C=Pr(t);let k,A;try{if(s.shapeFlag&4){const T=r||n,O=T;k=Ut(u.call(O,T,d,f,p,v,h)),A=a}else{const T=e;k=Ut(T.length>1?T(f,{attrs:a,slots:o,emit:c}):T(f,null)),A=e.props?a:yh(a)}}catch(T){In.length=0,Hr(T,t,1),k=fe(ct)}let S=k;if(A&&m!==!1){const T=Object.keys(A),{shapeFlag:O}=S;T.length&&O&7&&(i&&T.some(go)&&(A=wh(A,i)),S=vs(S,A,!1,!0))}return s.dirs&&(S=vs(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&Fn(S,s.transition),k=S,Pr(C),k}const yh=t=>{let e;for(const s in t)(s==="class"||s==="style"||xr(s))&&((e||(e={}))[s]=t[s]);return e},wh=(t,e)=>{const s={};for(const n in t)(!go(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function bh(t,e,s){const{props:n,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?ra(n,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const v=d[f];if(o[v]!==n[v]&&!Wr(u,v))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?ra(n,o,u):!0:!!o;return!1}function ra(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!Wr(s,i))return!0}return!1}function _h({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const Ac=t=>t.__isSuspense;function kh(t,e){e&&e.pendingBranch?de(t)?e.effects.push(...t):e.effects.push(t):Id(t)}const be=Symbol.for("v-fgt"),Gr=Symbol.for("v-txt"),ct=Symbol.for("v-cmt"),yr=Symbol.for("v-stc"),In=[];let wt=null;function w(t=!1){In.push(wt=t?null:[])}function Sh(){In.pop(),wt=In[In.length-1]||null}let Bn=1;function ia(t,e=!1){Bn+=t,t<0&&wt&&e&&(wt.hasOnce=!0)}function Ic(t){return t.dynamicChildren=Bn>0?wt||Zs:null,Sh(),Bn>0&&wt&&wt.push(t),t}function b(t,e,s,n,r,i){return Ic(l(t,e,s,n,r,i,!0))}function ft(t,e,s,n,r){return Ic(fe(t,e,s,n,r,!0))}function Hn(t){return t?t.__v_isVNode===!0:!1}function As(t,e){return t.type===e.type&&t.key===e.key}const Rc=({key:t})=>t??null,wr=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Je(t)||Ge(t)||ke(t)?{i:it,r:t,k:e,f:!!s}:t:null);function l(t,e=null,s=null,n=0,r=null,i=t===be?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Rc(e),ref:e&&wr(e),scopeId:sc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:it};return a?(Ro(c,s),i&128&&t.normalize(c)):s&&(c.shapeFlag|=Je(s)?8:16),Bn>0&&!o&&wt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&wt.push(c),c}const fe=Ch;function Ch(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===qd)&&(t=ct),Hn(t)){const a=vs(t,e,!0);return s&&Ro(a,s),Bn>0&&!i&&wt&&(a.shapeFlag&6?wt[wt.indexOf(t)]=a:wt.push(a)),a.patchFlag=-2,a}if(Lh(t)&&(t=t.__vccOpts),e){e=$h(e);let{class:a,style:c}=e;a&&!Je(a)&&(e.class=H(a)),Ke(c)&&($o(c)&&!de(c)&&(c=et({},c)),e.style=St(c))}const o=Je(t)?1:Ac(t)?128:nc(t)?64:Ke(t)?4:ke(t)?2:0;return l(t,e,s,n,r,o,i,!0)}function $h(t){return t?$o(t)||yc(t)?et({},t):t:null}function vs(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=t,u=e?Ph(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Rc(u),ref:e&&e.ref?s&&i?de(i)?i.concat(wr(e)):[i,wr(e)]:wr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==be?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vs(t.ssContent),ssFallback:t.ssFallback&&vs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&n&&Fn(d,c.clone(d)),d}function Ae(t=" ",e=0){return fe(Gr,null,t,e)}function zn(t,e){const s=fe(yr,null,t);return s.staticCount=e,s}function M(t="",e=!1){return e?(w(),ft(ct,null,t)):fe(ct,null,t)}function Ut(t){return t==null||typeof t=="boolean"?fe(ct):de(t)?fe(be,null,t.slice()):Hn(t)?cs(t):fe(Gr,null,String(t))}function cs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vs(t)}function Ro(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(de(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Ro(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!yc(e)?e._ctx=it:r===3&&it&&(it.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ke(e)?(e={default:e,_ctx:it},s=32):(e=String(e),n&64?(s=16,e=[Ae(e)]):s=8);t.children=e,t.shapeFlag|=s}function Ph(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=H([e.class,n.class]));else if(r==="style")e.style=St([e.style,n.style]);else if(xr(r)){const i=e[r],o=n[r];o&&i!==o&&!(de(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=n[r])}return e}function Lt(t,e,s,n=null){Ot(t,e,7,[s,n])}const Eh=gc();let Th=0;function Ah(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||Eh,i={uid:Th++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Rl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bc(n,r),emitsOptions:Tc(n,r),emit:null,emitted:null,propsDefaults:Ne,inheritAttrs:n.inheritAttrs,ctx:Ne,data:Ne,props:Ne,attrs:Ne,slots:Ne,refs:Ne,setupState:Ne,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=vh.bind(null,i),t.ce&&t.ce(i),i}let ut=null;const Mo=()=>ut||it;let Tr,qi;{const t=Fr(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Tr=e("__VUE_INSTANCE_SETTERS__",s=>ut=s),qi=e("__VUE_SSR_SETTERS__",s=>Vn=s)}const sr=t=>{const e=ut;return Tr(t),t.scope.on(),()=>{t.scope.off(),Tr(e)}},oa=()=>{ut&&ut.scope.off(),Tr(null)};function Mc(t){return t.vnode.shapeFlag&4}let Vn=!1;function Ih(t,e=!1,s=!1){e&&qi(e);const{props:n,children:r}=t.vnode,i=Mc(t);nh(t,n,i,e),ah(t,r,s||e);const o=i?Rh(t,e):void 0;return e&&qi(!1),o}function Rh(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Gd);const{setup:n}=s;if(n){Xt();const r=t.setupContext=n.length>1?Oh(t):null,i=sr(t),o=er(n,t,0,[t.props,r]),a=$l(o);if(Zt(),i(),(a||t.sp)&&!sn(t)&&cc(t),a){if(o.then(oa,oa),e)return o.then(c=>{aa(t,c)}).catch(c=>{Hr(c,t,0)});t.asyncDep=o}else aa(t,o)}else Oc(t)}function aa(t,e,s){ke(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ke(e)&&(t.setupState=Yl(e)),Oc(t)}function Oc(t,e,s){const n=t.type;t.render||(t.render=n.render||xt);{const r=sr(t);Xt();try{Jd(t)}finally{Zt(),r()}}}const Mh={get(t,e){return lt(t,"get",""),t[e]}};function Oh(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Mh),slots:t.slots,emit:t.emit,expose:e}}function Jr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Yl(Po(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in An)return An[s](t)},has(e,s){return s in e||s in An}})):t.proxy}function jh(t,e=!0){return ke(t)?t.displayName||t.name:t.name||e&&t.__name}function Lh(t){return ke(t)&&"__vccOpts"in t}const ye=(t,e)=>$d(t,e,Vn);function yt(t,e,s){const n=arguments.length;return n===2?Ke(e)&&!de(e)?Hn(e)?fe(t,null,[e]):fe(t,e):fe(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Hn(s)&&(s=[s]),fe(t,e,s))}const Dh="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wi;const la=typeof window<"u"&&window.trustedTypes;if(la)try{Wi=la.createPolicy("vue",{createHTML:t=>t})}catch{}const jc=Wi?t=>Wi.createHTML(t):t=>t,Uh="http://www.w3.org/2000/svg",xh="http://www.w3.org/1998/Math/MathML",zt=typeof document<"u"?document:null,ca=zt&&zt.createElement("template"),Nh={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?zt.createElementNS(Uh,t):e==="mathml"?zt.createElementNS(xh,t):s?zt.createElement(t,{is:s}):zt.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>zt.createTextNode(t),createComment:t=>zt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>zt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const o=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{ca.innerHTML=jc(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=ca.content;if(n==="svg"||n==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},ts="transition",mn="animation",qn=Symbol("_vtc"),Lc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Kh=et({},rc,Lc),Fh=t=>(t.displayName="Transition",t.props=Kh,t),Me=Fh((t,{slots:e})=>yt(jd,Bh(t),e)),ks=(t,e=[])=>{de(t)?t.forEach(s=>s(...e)):t&&t(...e)},ua=t=>t?de(t)?t.some(e=>e.length>1):t.length>1:!1;function Bh(t){const e={};for(const K in t)K in Lc||(e[K]=t[K]);if(t.css===!1)return e;const{name:s="v",type:n,duration:r,enterFromClass:i=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:d=a,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:v=`${s}-leave-active`,leaveToClass:p=`${s}-leave-to`}=t,h=Hh(r),m=h&&h[0],C=h&&h[1],{onBeforeEnter:k,onEnter:A,onEnterCancelled:S,onLeave:T,onLeaveCancelled:O,onBeforeAppear:E=k,onAppear:R=A,onAppearCancelled:N=S}=e,I=(K,B,G,he)=>{K._enterCancelled=he,Ss(K,B?d:a),Ss(K,B?u:o),G&&G()},j=(K,B)=>{K._isLeaving=!1,Ss(K,f),Ss(K,p),Ss(K,v),B&&B()},q=K=>(B,G)=>{const he=K?R:A,ce=()=>I(B,K,G);ks(he,[B,ce]),da(()=>{Ss(B,K?c:i),Ft(B,K?d:a),ua(he)||ha(B,n,m,ce)})};return et(e,{onBeforeEnter(K){ks(k,[K]),Ft(K,i),Ft(K,o)},onBeforeAppear(K){ks(E,[K]),Ft(K,c),Ft(K,u)},onEnter:q(!1),onAppear:q(!0),onLeave(K,B){K._isLeaving=!0;const G=()=>j(K,B);Ft(K,f),K._enterCancelled?(Ft(K,v),ga()):(ga(),Ft(K,v)),da(()=>{K._isLeaving&&(Ss(K,f),Ft(K,p),ua(T)||ha(K,n,C,G))}),ks(T,[K,G])},onEnterCancelled(K){I(K,!1,void 0,!0),ks(S,[K])},onAppearCancelled(K){I(K,!0,void 0,!0),ks(N,[K])},onLeaveCancelled(K){j(K),ks(O,[K])}})}function Hh(t){if(t==null)return null;if(Ke(t))return[gi(t.enter),gi(t.leave)];{const e=gi(t);return[e,e]}}function gi(t){return zu(t)}function Ft(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[qn]||(t[qn]=new Set)).add(e)}function Ss(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const s=t[qn];s&&(s.delete(e),s.size||(t[qn]=void 0))}function da(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let zh=0;function ha(t,e,s,n){const r=t._endId=++zh,i=()=>{r===t._endId&&n()};if(s!=null)return setTimeout(i,s);const{type:o,timeout:a,propCount:c}=Vh(t,e);if(!o)return n();const u=o+"end";let d=0;const f=()=>{t.removeEventListener(u,v),i()},v=p=>{p.target===t&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},a+1),t.addEventListener(u,v)}function Vh(t,e){const s=window.getComputedStyle(t),n=h=>(s[h]||"").split(", "),r=n(`${ts}Delay`),i=n(`${ts}Duration`),o=fa(r,i),a=n(`${mn}Delay`),c=n(`${mn}Duration`),u=fa(a,c);let d=null,f=0,v=0;e===ts?o>0&&(d=ts,f=o,v=i.length):e===mn?u>0&&(d=mn,f=u,v=c.length):(f=Math.max(o,u),d=f>0?o>u?ts:mn:null,v=d?d===ts?i.length:c.length:0);const p=d===ts&&/\b(transform|all)(,|$)/.test(n(`${ts}Property`).toString());return{type:d,timeout:f,propCount:v,hasTransform:p}}function fa(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,n)=>pa(s)+pa(t[n])))}function pa(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ga(){return document.body.offsetHeight}function qh(t,e,s){const n=t[qn];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Ar=Symbol("_vod"),Dc=Symbol("_vsh"),mi={beforeMount(t,{value:e},{transition:s}){t[Ar]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):vn(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),vn(t,!0),n.enter(t)):n.leave(t,()=>{vn(t,!1)}):vn(t,e))},beforeUnmount(t,{value:e}){vn(t,e)}};function vn(t,e){t.style.display=e?t[Ar]:"none",t[Dc]=!e}const Wh=Symbol(""),Gh=/(^|;)\s*display\s*:/;function Jh(t,e,s){const n=t.style,r=Je(s);let i=!1;if(s&&!r){if(e)if(Je(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&br(n,a,"")}else for(const o in e)s[o]==null&&br(n,o,"");for(const o in s)o==="display"&&(i=!0),br(n,o,s[o])}else if(r){if(e!==s){const o=n[Wh];o&&(s+=";"+o),n.cssText=s,i=Gh.test(s)}}else e&&t.removeAttribute("style");Ar in t&&(t[Ar]=i?n.display:"",t[Dc]&&(n.display="none"))}const ma=/\s*!important$/;function br(t,e,s){if(de(s))s.forEach(n=>br(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=Qh(t,e);ma.test(s)?t.setProperty(Ds(n),s.replace(ma,""),"important"):t[n]=s}}const va=["Webkit","Moz","ms"],vi={};function Qh(t,e){const s=vi[e];if(s)return s;let n=Et(e);if(n!=="filter"&&n in t)return vi[e]=n;n=Kr(n);for(let r=0;r<va.length;r++){const i=va[r]+n;if(i in t)return vi[e]=i}return e}const ya="http://www.w3.org/1999/xlink";function wa(t,e,s,n,r,i=Qu(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(ya,e.slice(6,e.length)):t.setAttributeNS(ya,e,s):s==null||i&&!Tl(s)?t.removeAttribute(e):t.setAttribute(e,i?"":Mt(s)?String(s):s)}function ba(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?jc(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(a!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Tl(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(r||e)}function Gt(t,e,s,n){t.addEventListener(e,s,n)}function Yh(t,e,s,n){t.removeEventListener(e,s,n)}const _a=Symbol("_vei");function Xh(t,e,s,n,r=null){const i=t[_a]||(t[_a]={}),o=i[e];if(n&&o)o.value=n;else{const[a,c]=Zh(e);if(n){const u=i[e]=sf(n,r);Gt(t,a,u,c)}else o&&(Yh(t,a,o,c),i[e]=void 0)}}const ka=/(?:Once|Passive|Capture)$/;function Zh(t){let e;if(ka.test(t)){e={};let n;for(;n=t.match(ka);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ds(t.slice(2)),e]}let yi=0;const ef=Promise.resolve(),tf=()=>yi||(ef.then(()=>yi=0),yi=Date.now());function sf(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Ot(nf(n,s.value),e,5,[n])};return s.value=t,s.attached=tf(),s}function nf(t,e){if(de(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Sa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,rf=(t,e,s,n,r,i)=>{const o=r==="svg";e==="class"?qh(t,n,o):e==="style"?Jh(t,s,n):xr(e)?go(e)||Xh(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):of(t,e,n,o))?(ba(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&wa(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Je(n))?ba(t,Et(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),wa(t,e,n,o))};function of(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Sa(e)&&ke(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Sa(e)&&Je(s)?!1:e in t}const ys=t=>{const e=t.props["onUpdate:modelValue"]||!1;return de(e)?s=>mr(e,s):e};function af(t){t.target.composing=!0}function Ca(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Pt=Symbol("_assign"),fs={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[Pt]=ys(r);const i=n||r.props&&r.props.type==="number";Gt(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;s&&(a=a.trim()),i&&(a=_r(a)),t[Pt](a)}),s&&Gt(t,"change",()=>{t.value=t.value.trim()}),e||(Gt(t,"compositionstart",af),Gt(t,"compositionend",Ca),Gt(t,"change",Ca))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},o){if(t[Pt]=ys(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?_r(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===c)||(t.value=c))}},Uc={deep:!0,created(t,e,s){t[Pt]=ys(s),Gt(t,"change",()=>{const n=t._modelValue,r=rn(t),i=t.checked,o=t[Pt];if(de(n)){const a=yo(n,r),c=a!==-1;if(i&&!c)o(n.concat(r));else if(!i&&c){const u=[...n];u.splice(a,1),o(u)}}else if(dn(n)){const a=new Set(n);i?a.add(r):a.delete(r),o(a)}else o(Nc(t,i))})},mounted:$a,beforeUpdate(t,e,s){t[Pt]=ys(s),$a(t,e,s)}};function $a(t,{value:e,oldValue:s},n){t._modelValue=e;let r;if(de(e))r=yo(e,n.props.value)>-1;else if(dn(e))r=e.has(n.props.value);else{if(e===s)return;r=Ls(e,Nc(t,!0))}t.checked!==r&&(t.checked=r)}const lf={created(t,{value:e},s){t.checked=Ls(e,s.props.value),t[Pt]=ys(s),Gt(t,"change",()=>{t[Pt](rn(t))})},beforeUpdate(t,{value:e,oldValue:s},n){t[Pt]=ys(n),e!==s&&(t.checked=Ls(e,n.props.value))}},xc={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const r=dn(e);Gt(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?_r(rn(o)):rn(o));t[Pt](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Us(()=>{t._assigning=!1})}),t[Pt]=ys(n)},mounted(t,{value:e}){Pa(t,e)},beforeUpdate(t,e,s){t[Pt]=ys(s)},updated(t,{value:e}){t._assigning||Pa(t,e)}};function Pa(t,e){const s=t.multiple,n=de(e);if(!(s&&!n&&!dn(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=rn(o);if(s)if(n){const c=typeof a;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=yo(e,a)>-1}else o.selected=e.has(a);else if(Ls(rn(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function rn(t){return"_value"in t?t._value:t.value}function Nc(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const cf={created(t,e,s){cr(t,e,s,null,"created")},mounted(t,e,s){cr(t,e,s,null,"mounted")},beforeUpdate(t,e,s,n){cr(t,e,s,n,"beforeUpdate")},updated(t,e,s,n){cr(t,e,s,n,"updated")}};function uf(t,e){switch(t){case"SELECT":return xc;case"TEXTAREA":return fs;default:switch(e){case"checkbox":return Uc;case"radio":return lf;default:return fs}}}function cr(t,e,s,n,r){const o=uf(t.tagName,s.props&&s.props.type)[r];o&&o(t,e,s,n)}const df=["ctrl","shift","alt","meta"],hf={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>df.some(s=>t[`${s}Key`]&&!e.includes(s))},Yt=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=hf[e[o]];if(a&&a(r,e))return}return t(r,...i)})},ff=et({patchProp:rf},Nh);let Ea;function Kc(){return Ea||(Ea=ch(ff))}const wi=(...t)=>{Kc().render(...t)},Fc=(...t)=>{const e=Kc().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=gf(n);if(!r)return;const i=e._component;!ke(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=s(r,!1,pf(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function pf(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function gf(t){return Je(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Bc;const Qr=t=>Bc=t,Hc=Symbol();function Gi(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Rn;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Rn||(Rn={}));function mf(){const t=Ml(!0),e=t.run(()=>W({}));let s=[],n=[];const r=Po({install(i){Qr(r),r._a=i,i.provide(Hc,r),i.config.globalProperties.$pinia=r,n.forEach(o=>s.push(o)),n=[]},use(i){return this._a?s.push(i):n.push(i),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return r}const zc=()=>{};function Ta(t,e,s,n=zc){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!s&&Ol()&&Xu(r),r}function Bs(t,...e){t.slice().forEach(s=>{s(...e)})}const vf=t=>t(),Aa=Symbol(),bi=Symbol();function Ji(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,n)=>t.set(n,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const n=e[s],r=t[s];Gi(r)&&Gi(n)&&t.hasOwnProperty(s)&&!Ge(n)&&!gs(n)?t[s]=Ji(r,n):t[s]=n}return t}const yf=Symbol();function wf(t){return!Gi(t)||!t.hasOwnProperty(yf)}const{assign:is}=Object;function bf(t){return!!(Ge(t)&&t.effect)}function _f(t,e,s,n){const{state:r,actions:i,getters:o}=e,a=s.state.value[t];let c;function u(){a||(s.state.value[t]=r?r():{});const d=_d(s.state.value[t]);return is(d,i,Object.keys(o||{}).reduce((f,v)=>(f[v]=Po(ye(()=>{Qr(s);const p=s._s.get(t);return o[v].call(p,p)})),f),{}))}return c=Vc(t,u,e,s,n,!0),c}function Vc(t,e,s={},n,r,i){let o;const a=is({actions:{}},s),c={deep:!0};let u,d,f=[],v=[],p;const h=n.state.value[t];!i&&!h&&(n.state.value[t]={}),W({});let m;function C(N){let I;u=d=!1,typeof N=="function"?(N(n.state.value[t]),I={type:Rn.patchFunction,storeId:t,events:p}):(Ji(n.state.value[t],N),I={type:Rn.patchObject,payload:N,storeId:t,events:p});const j=m=Symbol();Us().then(()=>{m===j&&(u=!0)}),d=!0,Bs(f,I,n.state.value[t])}const k=i?function(){const{state:I}=s,j=I?I():{};this.$patch(q=>{is(q,j)})}:zc;function A(){o.stop(),f=[],v=[],n._s.delete(t)}const S=(N,I="")=>{if(Aa in N)return N[bi]=I,N;const j=function(){Qr(n);const q=Array.from(arguments),K=[],B=[];function G(Q){K.push(Q)}function he(Q){B.push(Q)}Bs(v,{args:q,name:j[bi],store:O,after:G,onError:he});let ce;try{ce=N.apply(this&&this.$id===t?this:O,q)}catch(Q){throw Bs(B,Q),Q}return ce instanceof Promise?ce.then(Q=>(Bs(K,Q),Q)).catch(Q=>(Bs(B,Q),Promise.reject(Q))):(Bs(K,ce),ce)};return j[Aa]=!0,j[bi]=I,j},T={_p:n,$id:t,$onAction:Ta.bind(null,v),$patch:C,$reset:k,$subscribe(N,I={}){const j=Ta(f,N,I.detached,()=>q()),q=o.run(()=>Qt(()=>n.state.value[t],K=>{(I.flush==="sync"?d:u)&&N({storeId:t,type:Rn.direct,events:p},K)},is({},c,I)));return j},$dispose:A},O=Zn(T);n._s.set(t,O);const R=(n._a&&n._a.runWithContext||vf)(()=>n._e.run(()=>(o=Ml()).run(()=>e({action:S}))));for(const N in R){const I=R[N];if(Ge(I)&&!bf(I)||gs(I))i||(h&&wf(I)&&(Ge(I)?I.value=h[N]:Ji(I,h[N])),n.state.value[t][N]=I);else if(typeof I=="function"){const j=S(I,N);R[N]=j,a.actions[N]=I}}return is(O,R),is(Oe(O),R),Object.defineProperty(O,"$state",{get:()=>n.state.value[t],set:N=>{C(I=>{is(I,N)})}}),n._p.forEach(N=>{is(O,o.run(()=>N({store:O,app:n._a,pinia:n,options:a})))}),h&&i&&s.hydrate&&s.hydrate(O.$state,h),u=!0,d=!0,O}/*! #__NO_SIDE_EFFECTS__ */function qc(t,e,s){let n,r;const i=typeof e=="function";typeof t=="string"?(n=t,r=i?s:e):(r=t,n=t.id);function o(a,c){const u=sh();return a=a||(u?$t(Hc,null):null),a&&Qr(a),a=Bc,a._s.has(n)||(i?Vc(n,e,r,a):_f(n,r,a)),a._s.get(n)}return o.$id=n,o}const kf="modulepreload",Sf=function(t,e){return new URL(t,e).href},Ia={},Ie=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(s.map(u=>{if(u=Sf(u,n),u in Ia)return;Ia[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let h=o.length-1;h>=0;h--){const m=o[h];if(m.href===u&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":kf,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((h,m)=>{p.addEventListener("load",h),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Cf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ie(async()=>{const{default:n}=await Promise.resolve().then(()=>hn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class Oo extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class $f extends Oo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ra extends Oo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ma extends Oo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qi;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qi||(Qi={}));var Pf=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class Ef{constructor(e,{headers:s={},customFetch:n,region:r=Qi.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=Cf(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return Pf(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let a={},{region:c}=s;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:d}).catch(m=>{throw new $f(m)}),v=f.headers.get("x-relay-error");if(v&&v==="true")throw new Ra(f);if(!f.ok)throw new Ma(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return p==="application/json"?h=yield f.json():p==="application/octet-stream"?h=yield f.blob():p==="text/event-stream"?h=f:p==="multipart/form-data"?h=yield f.formData():h=yield f.text(),{data:h,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof Ma||r instanceof Ra?r.context:void 0}}})}}var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var gt={},jo={},Yr={},nr={},Xr={},Zr={},Af=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},on=Af();const If=on.fetch,Wc=on.fetch.bind(on),Gc=on.Headers,Rf=on.Request,Mf=on.Response,hn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gc,Request:Rf,Response:Mf,default:Wc,fetch:If},Symbol.toStringTag,{value:"Module"})),Of=Tf(hn);var ei={};Object.defineProperty(ei,"__esModule",{value:!0});let jf=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ei.default=jf;var Jc=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zr,"__esModule",{value:!0});const Lf=Jc(Of),Df=Jc(ei);let Uf=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Lf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let u=null,d=null,f=null,v=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const k=await i.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=k:d=JSON.parse(k))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),C=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&C&&C.length>1&&(f=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,v=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const m=await i.text();try{u=JSON.parse(m),Array.isArray(u)&&i.status===404&&(d=[],u=null,v=200,p="OK")}catch{i.status===404&&m===""?(v=204,p="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,v=200,p="OK"),u&&this.shouldThrowOnError)throw new Df.default(u)}return{error:u,data:d,count:f,status:v,statusText:p}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};Zr.default=Uf;var xf=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xr,"__esModule",{value:!0});const Nf=xf(Zr);let Kf=class extends Nf.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xr.default=Kf;var Ff=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nr,"__esModule",{value:!0});const Bf=Ff(Xr);let Hf=class extends Bf.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};nr.default=Hf;var zf=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yr,"__esModule",{value:!0});const yn=zf(nr);let Vf=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new yn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new yn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new yn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new yn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new yn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Yr.default=Vf;var ti={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.version=void 0;si.version="0.0.0-automated";Object.defineProperty(ti,"__esModule",{value:!0});ti.DEFAULT_HEADERS=void 0;const qf=si;ti.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${qf.version}`};var Qc=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jo,"__esModule",{value:!0});const Wf=Qc(Yr),Gf=Qc(nr),Jf=ti;let Qf=class Yc{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Jf.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new Wf.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Yc(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(o="POST",c=s);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Gf.default({method:o,url:a,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};jo.default=Qf;var fn=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gt,"__esModule",{value:!0});gt.PostgrestError=gt.PostgrestBuilder=gt.PostgrestTransformBuilder=gt.PostgrestFilterBuilder=gt.PostgrestQueryBuilder=gt.PostgrestClient=void 0;const Xc=fn(jo);gt.PostgrestClient=Xc.default;const Zc=fn(Yr);gt.PostgrestQueryBuilder=Zc.default;const eu=fn(nr);gt.PostgrestFilterBuilder=eu.default;const tu=fn(Xr);gt.PostgrestTransformBuilder=tu.default;const su=fn(Zr);gt.PostgrestBuilder=su.default;const nu=fn(ei);gt.PostgrestError=nu.default;var Yf=gt.default={PostgrestClient:Xc.default,PostgrestQueryBuilder:Zc.default,PostgrestFilterBuilder:eu.default,PostgrestTransformBuilder:tu.default,PostgrestBuilder:su.default,PostgrestError:nu.default};const{PostgrestClient:Xf,PostgrestQueryBuilder:fE,PostgrestFilterBuilder:pE,PostgrestTransformBuilder:gE,PostgrestBuilder:mE,PostgrestError:vE}=Yf;function Zf(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const ep=Zf(),tp="2.11.15",sp=`realtime-js/${tp}`,np="1.0.0",ru=1e4,rp=1e3;var Mn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Mn||(Mn={}));var ot;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ot||(ot={}));var It;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(It||(It={}));var Yi;(function(t){t.websocket="websocket"})(Yi||(Yi={}));var Is;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Is||(Is={}));class ip{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class iu{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Fe||(Fe={}));const Oa=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=op(o,t,e,r),i),{})},op=(t,e,s,n)=>{const r=e.find(a=>a.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?ou(i,o):Xi(o)},ou=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return up(e,s)}switch(t){case Fe.bool:return ap(e);case Fe.float4:case Fe.float8:case Fe.int2:case Fe.int4:case Fe.int8:case Fe.numeric:case Fe.oid:return lp(e);case Fe.json:case Fe.jsonb:return cp(e);case Fe.timestamp:return dp(e);case Fe.abstime:case Fe.date:case Fe.daterange:case Fe.int4range:case Fe.int8range:case Fe.money:case Fe.reltime:case Fe.text:case Fe.time:case Fe.timestamptz:case Fe.timetz:case Fe.tsrange:case Fe.tstzrange:return Xi(e);default:return Xi(e)}},Xi=t=>t,ap=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},lp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},cp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},up=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ou(e,a))}return t},dp=t=>typeof t=="string"?t.replace(" ","T"):t,au=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class _i{constructor(e,s,n={},r=ru){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ja;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ja||(ja={}));class On{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=On.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=On.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=On.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),a={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const v=d.map(C=>C.presence_ref),p=f.map(C=>C.presence_ref),h=d.filter(C=>p.indexOf(C.presence_ref)<0),m=f.filter(C=>v.indexOf(C.presence_ref)<0);h.length>0&&(a[u]=h),m.length>0&&(c[u]=m)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const f=e[a].map(p=>p.presence_ref),v=d.filter(p=>f.indexOf(p.presence_ref)<0);e[a].unshift(...v)}n(a,d,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[a]=u,r(a,u,c),u.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var La;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(La||(La={}));var Da;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Da||(Da={}));var Vt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Vt||(Vt={}));class Lo{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new _i(this,It.join,this.params,this.timeout),this.rejoinTimer=new iu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(It.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new On(this),this.broadcastEndpointURL=au(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==ot.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Vt.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Vt.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(Vt.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,p=(f=v==null?void 0:v.length)!==null&&f!==void 0?f:0,h=[];for(let m=0;m<p;m++){const C=v[m],{filter:{event:k,schema:A,table:S,filter:T}}=C,O=d&&d[m];if(O&&O.event===k&&O.schema===A&&O.table===S&&O.filter===T)h.push(Object.assign(Object.assign({},C),{id:O.id}));else{this.unsubscribe(),this.state=ot.errored,e==null||e(Vt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=h,e&&e(Vt.SUBSCRIBED);return}}).receive("error",d=>{this.state=ot.errored,e==null||e(Vt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Vt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ot.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(It.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new _i(this,It.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new _i(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=It;if(n&&[a,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let v=this._onMessage(o,s,n);if(s&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var h,m,C;return((h=p.filter)===null||h===void 0?void 0:h.event)==="*"||((C=(m=p.filter)===null||m===void 0?void 0:m.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(p=>p.callback(v,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var h,m,C,k,A,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const T=p.id,O=(h=p.filter)===null||h===void 0?void 0:h.event;return T&&((m=s.ids)===null||m===void 0?void 0:m.includes(T))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((C=s.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const T=(A=(k=p==null?void 0:p.filter)===null||k===void 0?void 0:k.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return T==="*"||T===((S=s==null?void 0:s.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof v=="object"&&"ids"in v){const h=v.data,{schema:m,table:C,commit_timestamp:k,type:A,errors:S}=h;v=Object.assign(Object.assign({},{schema:m,table:C,commit_timestamp:k,eventType:A,new:{},old:{},errors:S}),this._getPayloadRecords(h))}p.callback(v,n)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Lo.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(It.close,{},e)}_onError(e){this._on(It.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Oa(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Oa(e.columns,e.old_record)),s}}const Ua=()=>{},hp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fp{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ru,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ua,this.ref=0,this.logger=Ua,this.conn=null,this.sendBuffer=[],this.serializer=new ip,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Ie(async()=>{const{default:c}=await Promise.resolve().then(()=>hn);return{default:c}},void 0,import.meta.url).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Yi.websocket}`,this.httpEndpoint=au(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new iu(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=ep),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:np}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Mn.connecting:return Is.Connecting;case Mn.open:return Is.Open;case Mn.closing:return Is.Closing;default:return Is.Closed}}isConnected(){return this.connectionState()===Is.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new Lo(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:sp};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(It.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(rp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:o}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(It.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([hp],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Do extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ze(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class pp extends Do{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Zi extends Do{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var gp=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const lu=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ie(async()=>{const{default:n}=await Promise.resolve().then(()=>hn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},mp=()=>gp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ie(()=>Promise.resolve().then(()=>hn),void 0,import.meta.url)).Response:Response}),eo=t=>{if(Array.isArray(t))return t.map(s=>eo(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=eo(n)}),e};var xs=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const ki=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vp=(t,e,s)=>xs(void 0,void 0,void 0,function*(){const n=yield mp();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{e(new pp(ki(r),t.status||500))}).catch(r=>{e(new Zi(ki(r),r))}):e(new Zi(ki(t),t))}),yp=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function rr(t,e,s,n,r,i){return xs(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,yp(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>vp(c,a,n))})})}function Ir(t,e,s,n){return xs(this,void 0,void 0,function*(){return rr(t,"GET",e,s,n)})}function us(t,e,s,n,r){return xs(this,void 0,void 0,function*(){return rr(t,"POST",e,n,r,s)})}function wp(t,e,s,n,r){return xs(this,void 0,void 0,function*(){return rr(t,"PUT",e,n,r,s)})}function bp(t,e,s,n){return xs(this,void 0,void 0,function*(){return rr(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function cu(t,e,s,n,r){return xs(this,void 0,void 0,function*(){return rr(t,"DELETE",e,n,r,s)})}var pt=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const _p={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kp{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=lu(r)}uploadOrUpdate(e,s,n,r){return pt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},xa),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),v=yield f.json();return f.ok?{data:{path:u,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(i){if(Ze(i))return{data:null,error:i};throw i}})}upload(e,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let c;const u=Object.assign({upsert:xa.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:d}),v=yield f.json();return f.ok?{data:{path:i,fullPath:v.Key},error:null}:{data:null,error:v}}catch(c){if(Ze(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield us(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Do("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}update(e,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return pt(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}copy(e,s,n){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield us(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield us(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return pt(this,void 0,void 0,function*(){try{const r=yield us(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}download(e,s){return pt(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ir(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ze(a))return{data:null,error:a};throw a}})}info(e){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Ir(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:eo(n),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}exists(e){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield bp(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ze(n)&&n instanceof Zi){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return pt(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}list(e,s,n){return pt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},_p),s),{prefix:e||""});return{data:yield us(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Sp="2.7.1",Cp={"X-Client-Info":`storage-js/${Sp}`};var Hs=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class $p{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},Cp),s),this.fetch=lu(n)}listBuckets(){return Hs(this,void 0,void 0,function*(){try{return{data:yield Ir(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ze(e))return{data:null,error:e};throw e}})}getBucket(e){return Hs(this,void 0,void 0,function*(){try{return{data:yield Ir(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Hs(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Hs(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Hs(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Hs(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}}class Pp extends $p{constructor(e,s={},n){super(e,s,n)}from(e){return new kp(this.url,this.headers,e,this.fetch)}}const Ep="2.52.1";let Cn="";typeof Deno<"u"?Cn="deno":typeof document<"u"?Cn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cn="react-native":Cn="node";const Tp={"X-Client-Info":`supabase-js-${Cn}/${Ep}`},Ap={headers:Tp},Ip={schema:"public"},Rp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mp={};var Op=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const jp=t=>{let e;return t?e=t:typeof fetch>"u"?e=Wc:e=fetch,(...s)=>e(...s)},Lp=()=>typeof Headers>"u"?Gc:Headers,Dp=(t,e,s)=>{const n=jp(s),r=Lp();return(i,o)=>Op(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Up=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};function xp(t){return t.endsWith("/")?t:t+"/"}function Np(t,e){var s,n;const{db:r,auth:i,realtime:o,global:a}=t,{db:c,auth:u,realtime:d,global:f}=e,v={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Up(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}const uu="2.71.1",Js=30*1e3,to=3,Si=to*Js,Kp="http://localhost:9999",Fp="supabase.auth.token",Bp={"X-Client-Info":`gotrue-js/${uu}`},so="X-Supabase-Api-Version",du={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zp=10*60*1e3;class Uo extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Vp extends Uo{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function qp(t){return $e(t)&&t.name==="AuthApiError"}class hu extends Uo{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class ws extends Uo{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class os extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Wp(t){return $e(t)&&t.name==="AuthSessionMissingError"}class ur extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dr extends ws{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hr extends ws{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gp(t){return $e(t)&&t.name==="AuthImplicitGrantRedirectError"}class Na extends ws{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class no extends ws{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Ci(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class Ka extends ws{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class ro extends ws{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fa=` 	
\r=`.split(""),Jp=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Fa.length;e+=1)t[Fa[e].charCodeAt(0)]=-2;for(let e=0;e<Rr.length;e+=1)t[Rr[e].charCodeAt(0)]=e;return t})();function Ba(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Rr[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Rr[n]),e.queuedBits-=6}}function fu(t,e,s){const n=Jp[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ha(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{Xp(o,n,s)};for(let o=0;o<t.length;o+=1)fu(t.charCodeAt(o),r,i);return e.join("")}function Qp(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Yp(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}Qp(n,e)}}function Xp(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Zp(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)fu(t.charCodeAt(r),s,n);return new Uint8Array(e)}function eg(t){const e=[];return Yp(t,s=>e.push(s)),new Uint8Array(e)}function tg(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>Ba(r,s,n)),Ba(null,s,n),e.join("")}function sg(t){return Math.round(Date.now()/1e3)+t}function ng(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const At=()=>typeof window<"u"&&typeof document<"u",Cs={tested:!1,writable:!1},pu=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cs.tested)return Cs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Cs.tested=!0,Cs.writable=!0}catch{Cs.tested=!0,Cs.writable=!1}return Cs.writable};function rg(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const gu=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ie(async()=>{const{default:n}=await Promise.resolve().then(()=>hn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},ig=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Qs=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},$s=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ss=async(t,e)=>{await t.removeItem(e)};class ni{constructor(){this.promise=new ni.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}ni.promiseConstructor=Promise;function $i(t){const e=t.split(".");if(e.length!==3)throw new ro("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Hp.test(e[n]))throw new ro("JWT not in base64url format");return{header:JSON.parse(Ha(e[0])),payload:JSON.parse(Ha(e[1])),signature:Zp(e[2]),raw:{header:e[0],payload:e[1]}}}async function og(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ag(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function lg(t){return("0"+t.toString(16)).substr(-2)}function cg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,lg).join("")}async function ug(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function dg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await ug(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zs(t,e,s=!1){const n=cg();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Qs(t,`${e}-code-verifier`,r);const i=await dg(n);return[i,n===i?"plain":"s256"]}const hg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fg(t){const e=t.headers.get(so);if(!e||!e.match(hg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function pg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function gg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vs(t){if(!mg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pi(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function za(t){return JSON.parse(JSON.stringify(t))}var vg=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const Ts=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yg=[502,503,504];async function Va(t){var e;if(!ig(t))throw new no(Ts(t),0);if(yg.includes(t.status))throw new no(Ts(t),t.status);let s;try{s=await t.json()}catch(i){throw new hu(Ts(i),i)}let n;const r=fg(t);if(r&&r.getTime()>=du["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Ka(Ts(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new os}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ka(Ts(s),t.status,s.weak_password.reasons);throw new Vp(Ts(s),t.status||500,n)}const wg=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function Te(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[so]||(i[so]=du["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await bg(t,e,s+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function bg(t,e,s,n,r,i){const o=wg(e,n,r,i);let a;try{a=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new no(Ts(c),0)}if(a.ok||await Va(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(c){await Va(c)}}function Ht(t){var e;let s=null;Cg(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=sg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function qa(t){const e=Ht(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function hs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _g(t){return{data:t,error:null}}function kg(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=vg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Sg(t){return t}function Cg(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ei=["global","local","others"];var $g=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class Pg{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=gu(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Ei[0]){if(Ei.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ei.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:hs})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=$g(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:kg,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if($e(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hs})}catch(s){if($e(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Sg});if(d.error)throw d.error;const f=await d.json(),v=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(h=>{const m=parseInt(h.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(h.split(";")[1].split("=")[1]);u[`${C}Page`]=m}),u.total=parseInt(v)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if($e(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Vs(e);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hs})}catch(s){if($e(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Vs(e);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:hs})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Vs(e);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:hs})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Vs(e.userId);try{const{data:s,error:n}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if($e(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Vs(e.userId),Vs(e.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}}}function Wa(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Eg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qs={debug:!!(globalThis&&pu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Tg extends mu{}async function Ag(t,e,s){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Tg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Eg();const Ig={url:Kp,storageKey:Fp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Bp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ga(t,e,s){return await s()}const Ws={};class Wn{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wn.nextInstanceID,Wn.nextInstanceID+=1,this.instanceID>0&&At()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ig),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Pg({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=gu(r.fetch),this.lock=r.lock||Ga,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:At()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Ag:this.lock=Ga,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:pu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wa(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Wa(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Ws[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Ws[this.storageKey]=Object.assign(Object.assign({},Ws[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Ws[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ws[this.storageKey]=Object.assign(Object.assign({},Ws[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${uu}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=rg(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),At()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Gp(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return $e(s)?{error:s}:{error:new hu("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ht}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if($e(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:d,password:f,options:v}=e;let p=null,h=null;this.flowType==="pkce"&&([p,h]=await zs(this.storage,this.storageKey)),i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:d,password:f,data:(s=v==null?void 0:v.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:p,code_challenge_method:h},xform:Ht})}else if("phone"in e){const{phone:d,password:f,options:v}=e;i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(r=v==null?void 0:v.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ht})}else throw new dr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if($e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qa})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qa})}else throw new dr("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ur}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,a,c,u,d,f,v,p;let h,m;if("message"in e)h=e.message,m=e.signature;else{const{chain:C,wallet:k,statement:A,options:S}=e;let T;if(At())if(typeof k=="object")T=k;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))T=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=k}const O=new URL((s=S==null?void 0:S.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in T&&T.signIn){const E=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),A?{statement:A}:null));let R;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")R=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)R=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)h=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),m=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${O.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(r=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=S==null?void 0:S.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((f=(d=S==null?void 0:S.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...S.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const E=await T.signMessage(new TextEncoder().encode(h),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=E}}try{const{data:C,error:k}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:tg(m)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ht});if(k)throw k;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new ur}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:k})}catch(C){if($e(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const s=await $s(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ht});if(await ss(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ur}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if($e(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,a=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Ht}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ur}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await zs(this.storage,this.storageKey));const{error:f}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new dr("You must provide either an email or phone number.")}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Ht});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await zs(this.storage,this.storageKey)),await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:_g})}catch(i){if($e(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new os;const{error:r}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await Te(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await Te(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new dr("You must provide either an email or phone number and a type")}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await $s(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Si:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await $s(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Pi()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hs}):await this._useSession(async s=>{var n,r,i;const{data:o,error:a}=s;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new os}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:hs})})}catch(s){if($e(s))return Wp(s)&&(await this._removeSession(),await ss(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new os;const o=r.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await zs(this.storage,this.storageKey));const{data:u,error:d}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:hs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new os;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=$i(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if($e(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new os;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!At())throw new hr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new hr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Na("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hr("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Na("No code detected.");const{data:A,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!i||!a||!o||!u)throw new hr("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let v=d+f;c&&(v=parseInt(c));const p=v-d;p*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const h=v-f;d-h>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",h,v,d):d-h<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",h,v,d);const{data:m,error:C}=await this._getUser(i);if(C)throw C;const k={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:v,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(n){if($e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await $s(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(qp(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ss(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=ng(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await zs(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if($e(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,a,c,u,d;const{data:f,error:v}=i;if(v)throw v;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return At()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if($e(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if($e(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await ag(async r=>(r>0&&await og(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ht})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Ci(i)&&Date.now()+o-n<Js})}catch(n){if(this._debug(s,"error",n),$e(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),At()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await $s(this.storage,this.storageKey);if(r&&this.userStorage){let o=await $s(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Qs(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Pi()}else if(r&&!r.user&&!r.user){const o=await $s(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await ss(this.storage,this.storageKey+"-user"),await Qs(this.storage,this.storageKey,r)):r.user=Pi()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Si;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Si}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Ci(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(r.access_token);!a&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ni;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new os;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),$e(i)){const o={session:null,error:i};return Ci(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Qs(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=za(r);await Qs(this.storage,this.storageKey,i)}else{const r=za(s);await Qs(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await ss(this.storage,this.storageKey),await ss(this.storage,this.storageKey+"-code-verifier"),await ss(this.storage,this.storageKey+"-user"),this.userStorage&&await ss(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&At()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Js}ms, refresh threshold is ${to} ticks`),r<=to&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof mu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await zs(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if($e(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if($e(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:a}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if($e(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if($e(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=$i(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(a=>a.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+zp>r)return n;const{data:i,error:o}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:p,error:h}=await this.getSession();if(h||!p.session)return{data:null,error:h};n=p.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:c}}=$i(n);s!=null&&s.allowExpired||pg(i.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:r,signature:o},error:null}}const d=gg(r.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,eg(`${a}.${c}`)))throw new ro("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}}Wn.nextInstanceID=0;const Rg=Wn;class Mg extends Rg{constructor(e){super(e)}}var Og=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class jg{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=xp(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Ip,realtime:Mp,auth:Object.assign(Object.assign({},Rp),{storageKey:u}),global:Ap},f=Np(n??{},d);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(v,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=Dp(s,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Xf(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Ef(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Pp(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Og(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:a,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mg({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:a,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new fp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Lg=(t,e,s)=>new jg(t,e,s);function Dg(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Dg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ug=!0,Ja={url:"https://yxywzsmggvxxujuplyly.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl4eXd6c21nZ3Z4eHVqdXBseWx5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1NTk2ODUsImV4cCI6MjA2OTEzNTY4NX0.8w3JYOmbmJKdzz9H0_GfgspIfb0SfjjOvkyxPNvFVSM"};/*! Capacitor: https://capacitorjs.com/ - MIT License */const xg=t=>{const e=new Map;e.set("web",{name:"web"});const s=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(i,o)=>{s.platforms.set(i,o)},r=i=>{s.platforms.has(i)&&(s.currentPlatform=s.platforms.get(i))};return s.addPlatform=n,s.setPlatform=r,s},Ng=t=>t.CapacitorPlatforms=xg(t),vu=Ng(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});vu.addPlatform;vu.setPlatform;var an;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(an||(an={}));class Ti extends Error{constructor(e,s,n){super(e),this.message=e,this.code=s,this.data=n}}const Kg=t=>{var e,s;return t!=null&&t.androidBridge?"android":!((s=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},Fg=t=>{var e,s,n,r,i;const o=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},c=a.Plugins=a.Plugins||{},u=t.CapacitorPlatforms,d=()=>o!==null?o.name:Kg(t),f=((e=u==null?void 0:u.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||d,v=()=>f()!=="web",p=((s=u==null?void 0:u.currentPlatform)===null||s===void 0?void 0:s.isNativePlatform)||v,h=R=>{const N=T.get(R);return!!(N!=null&&N.platforms.has(f())||k(R))},m=((n=u==null?void 0:u.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||h,C=R=>{var N;return(N=a.PluginHeaders)===null||N===void 0?void 0:N.find(I=>I.name===R)},k=((r=u==null?void 0:u.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||C,A=R=>t.console.error(R),S=(R,N,I)=>Promise.reject(`${I} does not have an implementation of "${N}".`),T=new Map,O=(R,N={})=>{const I=T.get(R);if(I)return console.warn(`Capacitor plugin "${R}" already registered. Cannot register plugins twice.`),I.proxy;const j=f(),q=k(R);let K;const B=async()=>(!K&&j in N?K=typeof N[j]=="function"?K=await N[j]():K=N[j]:o!==null&&!K&&"web"in N&&(K=typeof N.web=="function"?K=await N.web():K=N.web),K),G=(se,ge)=>{var me,Ue;if(q){const Ee=q==null?void 0:q.methods.find(je=>ge===je.name);if(Ee)return Ee.rtype==="promise"?je=>a.nativePromise(R,ge.toString(),je):(je,ve)=>a.nativeCallback(R,ge.toString(),je,ve);if(se)return(me=se[ge])===null||me===void 0?void 0:me.bind(se)}else{if(se)return(Ue=se[ge])===null||Ue===void 0?void 0:Ue.bind(se);throw new Ti(`"${R}" plugin is not implemented on ${j}`,an.Unimplemented)}},he=se=>{let ge;const me=(...Ue)=>{const Ee=B().then(je=>{const ve=G(je,se);if(ve){const L=ve(...Ue);return ge=L==null?void 0:L.remove,L}else throw new Ti(`"${R}.${se}()" is not implemented on ${j}`,an.Unimplemented)});return se==="addListener"&&(Ee.remove=async()=>ge()),Ee};return me.toString=()=>`${se.toString()}() { [capacitor code] }`,Object.defineProperty(me,"name",{value:se,writable:!1,configurable:!1}),me},ce=he("addListener"),Q=he("removeListener"),ue=(se,ge)=>{const me=ce({eventName:se},ge),Ue=async()=>{const je=await me;Q({eventName:se,callbackId:je},ge)},Ee=new Promise(je=>me.then(()=>je({remove:Ue})));return Ee.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Ue()},Ee},J=new Proxy({},{get(se,ge){switch(ge){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return q?ue:ce;case"removeListener":return Q;default:return he(ge)}}});return c[R]=J,T.set(R,{name:R,proxy:J,platforms:new Set([...Object.keys(N),...q?[j]:[]])}),J},E=((i=u==null?void 0:u.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||O;return a.convertFileSrc||(a.convertFileSrc=R=>R),a.getPlatform=f,a.handleError=A,a.isNativePlatform=p,a.isPluginAvailable=m,a.pluginMethodNoop=S,a.registerPlugin=E,a.Exception=Ti,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},Bg=t=>t.Capacitor=Fg(t),We=Bg(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ns=We.registerPlugin;We.Plugins;class yu{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,s){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(s);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const i=async()=>this.removeListener(e,s),o=Promise.resolve({remove:i});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),o}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,s){const n=this.listeners[e];n&&n.forEach(r=>r(s))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:n=>{this.notifyListeners(s,n)}}}unimplemented(e="not implemented"){return new We.Exception(e,an.Unimplemented)}unavailable(e="not available"){return new We.Exception(e,an.Unavailable)}async removeListener(e,s){const n=this.listeners[e];if(!n)return;const r=n.indexOf(s);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Qa=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ya=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Hg extends yu{async getCookies(){const e=document.cookie,s={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[r,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=Ya(r).trim(),i=Ya(i).trim(),s[r]=i}),s}async setCookie(e){try{const s=Qa(e.key),n=Qa(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${s}=${n||""}${r}; path=${i}; ${o};`}catch(s){return Promise.reject(s)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Ns("CapacitorCookies",{web:()=>new Hg});const zg=async t=>new Promise((e,s)=>{const n=new FileReader;n.onload=()=>{const r=n.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},n.onerror=r=>s(r),n.readAsDataURL(t)}),Vg=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(r=>r.toLocaleLowerCase()).reduce((r,i,o)=>(r[i]=t[e[o]],r),{})},qg=(t,e=!0)=>t?Object.entries(t).reduce((n,r)=>{const[i,o]=r;let a,c;return Array.isArray(o)?(c="",o.forEach(u=>{a=e?encodeURIComponent(u):u,c+=`${i}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(o):o,c=`${i}=${a}`),`${n}&${c}`},"").substr(1):null,Wg=(t,e={})=>{const s=Object.assign({method:t.method||"GET",headers:t.headers},e),r=Vg(t.headers)["content-type"]||"";if(typeof t.data=="string")s.body=t.data;else if(r.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);s.body=i.toString()}else if(r.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,c)=>{i.append(c,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);s.body=i;const o=new Headers(s.headers);o.delete("content-type"),s.headers=o}else(r.includes("application/json")||typeof t.data=="object")&&(s.body=JSON.stringify(t.data));return s};class Gg extends yu{async request(e){const s=Wg(e,e.webFetchExtra),n=qg(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,i=await fetch(r,s),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let c,u;switch(a){case"arraybuffer":case"blob":u=await i.blob(),c=await zg(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const d={};return i.headers.forEach((f,v)=>{d[v]=f}),{data:c,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Ns("CapacitorHttp",{web:()=>new Gg});const le=Lg(Ja.url,Ja.anonKey,{auth:{autoRefreshToken:!0,persistSession:!We.isNativePlatform(),detectSessionInUrl:!0,storage:We.isNativePlatform()?{getItem:async t=>null,setItem:async(t,e)=>{},removeItem:async t=>{}}:void 0}});console.log("Supabase   :",!!le);console.log("Supabase auth:",!!le.auth);console.log("Supabase URL :",le.supabaseUrl);var Cl;console.log("Supabase Key :",((Cl=le.supabaseKey)==null?void 0:Cl.substring(0,20))+"...");const Xe={supabase:le,async getCurrentUser(){try{console.log("authService.getCurrentUser ");const t=new Promise((o,a)=>{setTimeout(()=>a(new Error("Timeout")),5e3)}),e=le.auth.getSession(),{data:{session:s},error:n}=await Promise.race([e,t]);if(n)return console.log("  :",n.message),null;if(!s||!s.user)return console.log("  "),null;const r=new Date().getTime(),i=s.expires_at?s.expires_at*1e3:0;return i>0&&r>i?(console.log(" "),null):(console.log("getCurrentUser :",s.user),s.user)}catch(t){return console.log("getCurrentUser :",t.message),null}},async signUp(t,e,s){console.log(" Supabase  :",{email:t,userData:s});try{t==="chetchet@nate.com"&&console.log("  rate limit , 1      ");const n=`${window.location.origin}/auth/callback`;console.log("   with redirectTo:",n);const{data:r,error:i}=await le.auth.signUp({email:t,password:e,options:{emailRedirectTo:n,data:s||{}}});if(console.log("   :",r),console.log("  :",i),i)throw i.message.includes("rate limit")||i.status===429?(console.error("    . 1      "),new Error("   . 1       .")):(console.error(" Supabase   :",{message:i.message,status:i.status,statusText:i.statusText,details:i}),i);return console.log("  "),r}catch(n){throw console.error("  :",n),n}},async signIn(t,e){var s;console.log("  :",t);try{console.log(" Supabase URL:",le.supabaseUrl),console.log(" Supabase Key :",((s=le.supabaseKey)==null?void 0:s.substring(0,20))+"...");const{data:n,error:r}=await le.auth.signInWithPassword({email:t,password:e});if(console.log("   :",n),console.log("  :",r),r)throw console.error(" Supabase   :",{message:r.message,status:r.status,statusText:r.statusText,details:r}),r.message.includes("Invalid login credentials")?new Error("    ."):r.message.includes("Email not confirmed")?new Error("   .  ."):r.message.includes("Database error querying schema")?(console.error("    -    ."),new Error("   .    .")):new Error(r.message||"   .");if(n.user){console.log("  ,   ...");try{const{data:i,error:o}=await le.from("profiles").select("id, email, name, is_premium").eq("id",n.user.id).single();o?console.warn("   :",o.message):console.log("   :",i)}catch(i){console.warn("    :",i)}}return console.log("  "),n}catch(n){throw console.error("  :",n),n}},async signInWithGoogle(){try{const t=We.isNativePlatform()?"com.tarotgarden.app://auth/callback":`${window.location.origin}/auth/callback`;console.log(" Google OAuth , redirectTo:",t);const{data:e,error:s}=await le.auth.signInWithOAuth({provider:"google",options:{redirectTo:t,queryParams:{access_type:"offline",prompt:"consent"}}});if(s)throw console.error(" Google OAuth :",s),s;return console.log(" Google OAuth URL :",e.url),e}catch(t){throw console.error(" Google  :",t),t}},async signInWithGitHub(){const{data:t,error:e}=await le.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e;return t},async signInWithDiscord(){const{data:t,error:e}=await le.auth.signInWithOAuth({provider:"discord",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e;return t},async signOut(){const{error:t}=await le.auth.signOut();if(t)throw t},async refreshSession(){const{data:t,error:e}=await le.auth.refreshSession();if(e)throw e;return t},async resetPassword(t){const{error:e}=await le.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/auth/reset-password`});if(e)throw e},async updatePassword(t){const{error:e}=await le.auth.updateUser({password:t});if(e)throw e},async updateProfile(t){const{error:e}=await le.auth.updateUser({data:t});if(e)throw e},onAuthStateChange(t){return le.auth.onAuthStateChange(t)},async resendConfirmation(t){const{error:e}=await le.auth.resend({type:"signup",email:t});if(e)throw e}},Jg={async getAllCards(){const{data:t,error:e}=await le.from("tarot_cards").select("*").order("id");if(e)throw console.error("   :",e),e;return console.log("   :",(t==null?void 0:t.length)+""),t},async getMajorArcana(){const{data:t,error:e}=await le.from("tarot_cards").select("*").eq("arcana","major").order("number");if(e)throw e;return t},async getMinorArcana(){const{data:t,error:e}=await le.from("tarot_cards").select("*").eq("arcana","minor").order("id");if(e)throw e;return t},async getCardsBySuit(t){const{data:e,error:s}=await le.from("tarot_cards").select("*").eq("suit",t).order("number");if(s)throw s;return e}},Qg={async getAllSpreads(){const{data:t,error:e}=await le.from("tarot_spreads").select("*").order("card_count");if(e)throw console.error("   :",e),e;return console.log("   :",(t==null?void 0:t.length)+""),t},async getFreeSpreads(){const{data:t,error:e}=await le.from("tarot_spreads").select("*").eq("is_premium",!1).order("card_count");if(e)throw e;return t},async getSpreadsByTopic(t){const{data:e,error:s}=await le.from("tarot_spreads").select("*").contains("topics",[t]).order("card_count");if(s)throw s;return e}},fr={async createSubscription(t){var n;const{data:e,error:s}=await le.from("subscriptions").insert({...t,start_date:t.start_date.toISOString(),end_date:((n=t.end_date)==null?void 0:n.toISOString())??null}).select().single();if(s)throw s;return e},async getCurrentSubscription(t){const{data:e,error:s}=await le.from("subscriptions").select("*").eq("user_id",t).order("start_date",{ascending:!1}).limit(1).maybeSingle();if(s)throw s;return e},async cancelSubscription(t){const{data:e,error:s}=await le.from("subscriptions").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return e}},Ve=qc("user",()=>{const t=W(null),e=ye(()=>!!t.value&&!t.value.isAnonymous),s=ye(()=>{var J;return((J=t.value)==null?void 0:J.isPremium)||!1}),n=W(!1),r=W(!1),i=W(0),o=W(null),a=ye(()=>!0),c=()=>(d(),{canUse:!0,remaining:-1,total:-1,used:i.value}),u=()=>new Date().toDateString(),d=()=>{const J=u();o.value!==J&&(i.value=0,o.value=J,f())},f=()=>{const J={count:i.value,date:o.value};localStorage.setItem("tarot_free_readings",JSON.stringify(J))},v=()=>{try{const J=localStorage.getItem("tarot_free_readings");if(J){const se=JSON.parse(J);i.value=se.count||0,o.value=se.date,d()}else o.value=u(),i.value=0,f()}catch(J){console.error("    :",J),o.value=u(),i.value=0,f()}},p=()=>{s.value||(d(),i.value++,f())},h=()=>{i.value=0,o.value=u(),f()},m=async J=>{var se;try{const ge=await Xe.getCurrentUser();if(!ge||ge.id!==J)return console.log("       "),!1;const{data:{user:me}}=await Xe.supabase.auth.getUser();if(((se=me==null?void 0:me.user_metadata)==null?void 0:se.is_premium)!==void 0)return me.user_metadata.is_premium;const{data:Ue,error:Ee}=await Xe.supabase.from("profiles").select("is_premium").eq("id",J).maybeSingle();return Ee?(console.log("   (   ):",Ee.message),!1):(Ue==null?void 0:Ue.is_premium)||!1}catch(ge){return console.log("    :",ge.message),!1}},C=async(J,se)=>{try{const{data:ge}=await Xe.supabase.from("profiles").select("id").eq("id",J).maybeSingle();if(!ge){console.log("  :",J);const{error:me}=await Xe.supabase.from("profiles").insert({id:J,email:se,is_premium:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(me)return console.error("  :",me),!1;console.log("  ")}return!0}catch(ge){return console.error(" / :",ge),!1}},k=async(J,se=!0)=>{try{await C(J);const{error:ge}=await Xe.supabase.from("profiles").update({is_premium:se}).eq("id",J);if(ge)throw ge;return t.value&&(t.value.isPremium=se,E()),console.log(` ${J}   ${se} `),!0}catch(ge){return console.error("   :",ge),!1}},A=async()=>{t.value&&!t.value.isAnonymous?await k(t.value.id,!0)&&console.log("  "):t.value&&(t.value.isPremium=!0,E())},S=async()=>{t.value&&!t.value.isAnonymous?await k(t.value.id,!1)&&console.log("  "):t.value&&(t.value.isPremium=!1,E())},T=async()=>{if(t.value&&!t.value.isAnonymous){const J=await m(t.value.id);return t.value.isPremium=J,E(),console.log("  :",J),J}return!1},O=()=>({id:`anon_${Date.now()}`,createdAt:new Date,lastLoginAt:new Date,isAnonymous:!0,isPremium:!1,preferences:{theme:"dark",language:"ko",notifications:{dailyReading:!0,weeklyInsight:!1,promotions:!0,newFeatures:!1,weeklyReport:!1},soundEnabled:!0,vibrationEnabled:!0,autoSaveReadings:!0,privateProfile:!1}}),E=()=>{try{t.value&&(localStorage.setItem("tarot_user",JSON.stringify(t.value)),console.log("  :",t.value.isAnonymous?"":""))}catch(J){console.error("  :",J)}},R=()=>{console.log("  ");try{const J=localStorage.getItem("tarot_user");if(J){const se=JSON.parse(J);if(se&&typeof se=="object"&&se.id){t.value=se,console.log("  :",se.isAnonymous?"":"");return}}console.log("  ,    "),t.value=O(),E()}catch(J){console.error("  :",J),t.value=O(),E()}};return{currentUser:t,isLoggedIn:e,isPremium:s,isLoading:n,isInitialized:r,freeReadingsToday:i,canUseFreeReading:a,getFreeReadingStatus:c,initializeUser:async()=>{var J,se,ge,me,Ue,Ee;console.log("===    ===");try{n.value=!0,v(),R(),console.log("    :",(J=t.value)!=null&&J.isAnonymous?"":"");const je=!We.isNativePlatform();console.log("Supabase   :",je?"  - ":"  - ");try{let ve=null;if(je)ve=await Xe.getCurrentUser(),console.log("Supabase   :",ve?"logged_in":"not_logged_in");else{const{data:{session:L}}=await Xe.supabase.auth.getSession();L!=null&&L.user&&(ve=L.user,console.log("  :",ve.email))}if(ve&&ve.email_confirmed_at){console.log("  ,   ..."),await C(ve.id,ve.email);let L=!1;try{L=await m(ve.id),console.log(" :",L)}catch(te){console.warn("   :",te)}t.value={id:ve.id,email:ve.email,name:((se=ve.user_metadata)==null?void 0:se.name)||ve.email.split("@")[0],phone:(ge=ve.user_metadata)==null?void 0:ge.phone,avatarUrl:(me=ve.user_metadata)==null?void 0:me.avatar_url,createdAt:new Date(ve.created_at),lastLoginAt:new Date,isAnonymous:!1,isPremium:L,preferences:((Ue=t.value)==null?void 0:Ue.preferences)||{theme:"dark",language:"ko",notifications:{dailyReading:!0,weeklyInsight:!0,promotions:!0,newFeatures:!0,weeklyReport:!1},soundEnabled:!0,vibrationEnabled:!0,autoSaveReadings:!0,privateProfile:!1}},E(),console.log("    ")}else ve&&!ve.email_confirmed_at?(console.log("   -   "),((Ee=t.value)==null?void 0:Ee.isAnonymous)!==!1&&(t.value=O(),E())):(console.log("  "),t.value&&!t.value.isAnonymous&&(console.log("      "),t.value=O(),E()))}catch(ve){console.warn("Supabase    (  ):",ve.message)}We.isNativePlatform()||Xe.onAuthStateChange(async(ve,L)=>{var te,ee,ae,Re;if(console.log("  :",ve),ve==="SIGNED_IN"&&(L!=null&&L.user)){const g=L.user;await C(g.id,g.email);let y=!1;try{y=await m(g.id)}catch(_){console.warn("     :",_)}t.value={id:g.id,email:g.email,name:((te=g.user_metadata)==null?void 0:te.name)||g.email.split("@")[0],phone:(ee=g.user_metadata)==null?void 0:ee.phone,avatarUrl:(ae=g.user_metadata)==null?void 0:ae.avatar_url,createdAt:new Date(g.created_at),lastLoginAt:new Date,isAnonymous:!1,isPremium:y,preferences:((Re=t.value)==null?void 0:Re.preferences)||{theme:"dark",language:"ko",notifications:{dailyReading:!0,weeklyInsight:!0,promotions:!0,newFeatures:!0,weeklyReport:!1},soundEnabled:!0,vibrationEnabled:!0,autoSaveReadings:!0,privateProfile:!1}},E(),console.log("   ")}else ve==="SIGNED_OUT"&&(console.log("  "),t.value=O(),E())})}catch(je){console.error("  :",je),t.value||(t.value=O(),E())}finally{n.value=!1,r.value=!0,console.log("  ")}},login:async(J,se)=>{var ge,me,Ue;try{n.value=!0;const{user:Ee}=await Xe.signIn(J,se);if(Ee){await C(Ee.id,Ee.email);const je=await m(Ee.id);console.log("   :",je),t.value={id:Ee.id,email:Ee.email,name:((ge=Ee.user_metadata)==null?void 0:ge.name)||J.split("@")[0],phone:(me=Ee.user_metadata)==null?void 0:me.phone,avatarUrl:(Ue=Ee.user_metadata)==null?void 0:Ue.avatar_url,createdAt:new Date(Ee.created_at),lastLoginAt:new Date,isAnonymous:!1,isPremium:je,preferences:{theme:"dark",language:"ko",notifications:{dailyReading:!0,weeklyInsight:!0,promotions:!0,newFeatures:!0,weeklyReport:!1},soundEnabled:!0,vibrationEnabled:!0,autoSaveReadings:!0,privateProfile:!1}},E()}}catch(Ee){throw console.error(" :",Ee),Ee}finally{n.value=!1}},signUp:async(J,se,ge)=>{try{n.value=!0;const{user:me}=await Xe.signUp(J,se,ge);me&&console.log(" :",{email:J,userData:ge})}catch(me){throw console.error(" :",me),me}finally{n.value=!1}},signInWithGoogle:async()=>{try{n.value=!0;const{oauthService:J}=await Ie(async()=>{const{oauthService:se}=await Promise.resolve().then(()=>am);return{oauthService:se}},void 0,import.meta.url);await J.signInWithGoogle()}catch(J){throw console.error("Google  :",J),n.value=!1,J}},signInWithGitHub:async()=>{try{n.value=!0,await Xe.signInWithGitHub()}catch(J){throw console.error("GitHub  :",J),n.value=!1,J}},logout:async()=>{try{n.value=!0,await Xe.signOut(),t.value=O(),E()}catch(J){console.error(" :",J),t.value=O(),E()}finally{n.value=!1}},updatePreferences:async J=>{if(t.value)try{const se={...t.value.preferences,...J};t.value.preferences=se,E()}catch(se){throw console.error("  :",se),se}},updateProfile:async J=>{if(!(!t.value||t.value.isAnonymous))try{J.name&&(t.value.name=J.name),J.phone&&(t.value.phone=J.phone),J.avatarUrl&&(t.value.avatarUrl=J.avatarUrl),E()}catch(se){throw console.error("  :",se),se}},updateSubscription:async J=>{if(!(!t.value||t.value.isAnonymous))try{t.value.subscription=J,t.value.isPremium=J.status==="active",E()}catch(se){throw console.error("   :",se),se}},resetPassword:async J=>{try{await Xe.resetPassword(J),console.log("   :",J)}catch(se){throw console.error("  :",se),se}},resendVerificationEmail:async J=>{try{await Xe.resendConfirmation(J),console.log("  :",J)}catch(se){throw console.error("   :",se),se}},incrementFreeReading:p,resetFreeReadings:h,upgradeToPremium:A,downgradeToPremium:S,refreshPremiumStatus:T,setTestAccountPremium:k,checkPremiumStatus:m,ensureProfileExists:C}}),Mr=Object.freeze(Object.defineProperty({__proto__:null,useUserStore:Ve},Symbol.toStringTag,{value:"Module"})),Yg={key:0,class:"premium-test-panel"},Xg={class:"panel-content"},Zg={class:"user-info"},em={class:"actions"},tm=["disabled"],sm=["disabled"],nm={key:0,class:"free-readings-info"},rm={class:"reading-stats"},im=Qe({__name:"PremiumTestPanel",setup(t){const e=W(!1);let s=null;const n=ye(()=>(s==null?void 0:s.isPremium)||!1),r=ye(()=>(s==null?void 0:s.currentUser)||null),i=ye(()=>r.value?r.value.isAnonymous?" ":`${r.value.email} (${r.value.name})`:""),o=ye(()=>{const v=(s==null?void 0:s.getFreeReadingStatus())||{used:0,total:-1,remaining:-1};return{used:v.used,total:v.total===-1?"":v.total,remaining:v.remaining===-1?"":v.remaining}}),a=()=>{e.value=!e.value};window.addEventListener("toggle-test-panel",()=>{e.value=!e.value});const c=async()=>{if(s)try{await s.upgradeToPremium(),alert(" ! ")}catch(v){alert(" : "+v)}},u=async()=>{if(s)try{await s.downgradeToPremium(),alert("  ! ")}catch(v){alert(" : "+v)}},d=async()=>{if(s)try{await s.refreshPremiumStatus(),alert(" ! ")}catch(v){alert(" : "+v)}},f=()=>{s&&(s.resetFreeReadings(),alert("   ! "))};return mt(()=>{s=Ve()}),(v,p)=>e.value?(w(),b("div",Yg,[l("div",{class:"panel-header"},[p[0]||(p[0]=l("h3",null,"   ",-1)),l("button",{class:"close-btn",onClick:a},"")]),l("div",Xg,[l("div",Zg,[l("p",null,[p[1]||(p[1]=l("strong",null,":",-1)),Ae(" "+$(i.value),1)]),l("p",null,[p[2]||(p[2]=l("strong",null," :",-1)),l("span",{class:H({premium:n.value,free:!n.value})},$(n.value?" ":" "),3)])]),l("div",em,[l("button",{class:"btn premium-btn",onClick:c,disabled:n.value},"    ",8,tm),l("button",{class:"btn downgrade-btn",onClick:u,disabled:!n.value},"    ",8,sm),l("button",{class:"btn refresh-btn",onClick:d},"    ")]),n.value?M("",!0):(w(),b("div",nm,[p[3]||(p[3]=l("h4",null,"  ",-1)),l("div",rm,[l("p",null," : "+$(o.value.used)+" / "+$(o.value.total),1),l("p",null," : "+$(o.value.remaining),1),l("button",{class:"btn reset-btn",onClick:f},"     ")])]))])])):M("",!0)}}),tt=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},om=tt(im,[["__scopeId","data-v-d1cf42c6"]]),Xa=Ns("Browser",{web:()=>Ie(()=>import("./web-saKmwaP9.js"),[],import.meta.url).then(t=>new t.BrowserWeb)}),ln=Ns("App",{web:()=>Ie(()=>import("./web-C9OJGGJo.js"),[],import.meta.url).then(t=>new t.AppWeb)}),Ai=Object.freeze(Object.defineProperty({__proto__:null,App:ln},Symbol.toStringTag,{value:"Module"})),jn={async setupDeepLinkListener(){We.isNativePlatform()&&ln.addListener("appUrlOpen",async t=>{if(console.log(" Deep link received:",t.url),t.url.includes("auth/callback")||t.url.includes("login-callback")){console.log(" Processing OAuth callback...");try{let e=null,s=null;if(t.url.includes("#")){const n=t.url.split("#")[1],r=new URLSearchParams(n);e=r.get("access_token"),s=r.get("refresh_token")}if(!e&&t.url.includes("?")){const n=t.url.split("?")[1],r=new URLSearchParams(n);e=r.get("access_token"),s=r.get("refresh_token")}if(console.log(" Tokens found:",{access_token:e?"Yes":"No",refresh_token:s?"Yes":"No"}),e&&s){try{await Xa.close()}catch{console.log(" Browser already closed")}await this.setSession(e,s),console.log(" Dispatching oauth-success event"),window.dispatchEvent(new CustomEvent("oauth-success")),this.authSuccessCallback&&this.authSuccessCallback()}else console.log(" No tokens in URL, checking session..."),await this.restoreSession()&&(console.log(" Session restored, dispatching oauth-success event"),window.dispatchEvent(new CustomEvent("oauth-success")),this.authSuccessCallback&&this.authSuccessCallback())}catch(e){console.error(" OAuth callback processing error:",e)}}})},async setSession(t,e){var s;try{const{data:n,error:r}=await le.auth.setSession({access_token:t,refresh_token:e});if(r)throw r;if(console.log("   :",(s=n.user)==null?void 0:s.email),We.isNativePlatform()){console.log("  OAuth: localStorage ");const i=localStorage.getItem("tarot_user");if(i)try{JSON.parse(i).isAnonymous||(localStorage.removeItem("tarot_user"),console.log("    "))}catch(o){console.error(" localStorage  :",o)}}return n}catch(n){throw console.error("   :",n),n}},async signInWithGoogle(){try{if(We.isNativePlatform()){const t="com.tarotgarden.app://auth/callback",{data:e,error:s}=await le.auth.signInWithOAuth({provider:"google",options:{redirectTo:t,queryParams:{access_type:"offline",prompt:"consent"}}});if(s)throw s;return await Xa.open({url:e.url,presentationStyle:"popover",toolbarColor:"#1E1B4B"}),{success:!0,url:e.url}}else{const t=`${window.location.origin}/auth/callback`,{data:e,error:s}=await le.auth.signInWithOAuth({provider:"google",options:{redirectTo:t}});if(s)throw s;return{success:!0,url:e.url}}}catch(t){throw console.error(" Google OAuth :",t),t}},authSuccessCallback:null,setAuthSuccessCallback(t){this.authSuccessCallback=t},async restoreSession(){var t,e,s,n;try{if(We.isNativePlatform()){console.log("  : OAuth  ");const{data:{session:c},error:u}=await le.auth.getSession();return c?(console.log(" OAuth  :",(t=c.user)==null?void 0:t.email),c):(console.log(" :  "),null)}const{data:{session:r},error:i}=await le.auth.getSession();if(i)throw i;if(r)return console.log("   :",(e=r.user)==null?void 0:e.email),r;const{data:o,error:a}=await le.auth.refreshSession();return a?(console.log("  refresh :",a.message),null):(console.log("  refresh :",(n=(s=o.session)==null?void 0:s.user)==null?void 0:n.email),o.session)}catch(r){return console.error("   :",r),null}},async checkAuthStatus(){try{const{data:{user:t},error:e}=await le.auth.getUser();return e||!t?(console.log("   "),{isAuthenticated:!1,user:null}):(console.log("  :",t.email),{isAuthenticated:!0,user:t})}catch(t){return console.error("    :",t),{isAuthenticated:!1,user:null}}}},am=Object.freeze(Object.defineProperty({__proto__:null,oauthService:jn},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ys=typeof document<"u";function wu(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function lm(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&wu(t.default)}const Le=Object.assign;function Ii(t,e){const s={};for(const n in e){const r=e[n];s[n]=jt(r)?r.map(t):t(r)}return s}const Ln=()=>{},jt=Array.isArray,bu=/#/g,cm=/&/g,um=/\//g,dm=/=/g,hm=/\?/g,_u=/\+/g,fm=/%5B/g,pm=/%5D/g,ku=/%5E/g,gm=/%60/g,Su=/%7B/g,mm=/%7C/g,Cu=/%7D/g,vm=/%20/g;function xo(t){return encodeURI(""+t).replace(mm,"|").replace(fm,"[").replace(pm,"]")}function ym(t){return xo(t).replace(Su,"{").replace(Cu,"}").replace(ku,"^")}function io(t){return xo(t).replace(_u,"%2B").replace(vm,"+").replace(bu,"%23").replace(cm,"%26").replace(gm,"`").replace(Su,"{").replace(Cu,"}").replace(ku,"^")}function wm(t){return io(t).replace(dm,"%3D")}function bm(t){return xo(t).replace(bu,"%23").replace(hm,"%3F")}function _m(t){return t==null?"":bm(t).replace(um,"%2F")}function Gn(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const km=/\/$/,Sm=t=>t.replace(km,"");function Ri(t,e,s="/"){let n,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(n=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=t(i)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=Em(n??e,s),{fullPath:n+(i&&"?")+i+o,path:n,query:r,hash:Gn(o)}}function Cm(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function Za(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function $m(t,e,s){const n=e.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&cn(e.matched[n],s.matched[r])&&$u(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function cn(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function $u(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Pm(t[s],e[s]))return!1;return!0}function Pm(t,e){return jt(t)?el(t,e):jt(e)?el(e,t):t===e}function el(t,e){return jt(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function Em(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=s.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(o).join("/")}const ns={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Jn;(function(t){t.pop="pop",t.push="push"})(Jn||(Jn={}));var Dn;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Dn||(Dn={}));function Tm(t){if(!t)if(Ys){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Sm(t)}const Am=/^[^#]+#/;function Im(t,e){return t.replace(Am,"#")+e}function Rm(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const ri=()=>({left:window.scrollX,top:window.scrollY});function Mm(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;e=Rm(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function tl(t,e){return(history.state?history.state.position-e:-1)+t}const oo=new Map;function Om(t,e){oo.set(t,e)}function jm(t){const e=oo.get(t);return oo.delete(t),e}let Lm=()=>location.protocol+"//"+location.host;function Pu(t,e){const{pathname:s,search:n,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),Za(c,"")}return Za(s,t)+n+r}function Dm(t,e,s,n){let r=[],i=[],o=null;const a=({state:v})=>{const p=Pu(t,location),h=s.value,m=e.value;let C=0;if(v){if(s.value=p,e.value=v,o&&o===h){o=null;return}C=m?v.position-m.position:0}else n(p);r.forEach(k=>{k(s.value,h,{delta:C,type:Jn.pop,direction:C?C>0?Dn.forward:Dn.back:Dn.unknown})})};function c(){o=s.value}function u(v){r.push(v);const p=()=>{const h=r.indexOf(v);h>-1&&r.splice(h,1)};return i.push(p),p}function d(){const{history:v}=window;v.state&&v.replaceState(Le({},v.state,{scroll:ri()}),"")}function f(){for(const v of i)v();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function sl(t,e,s,n=!1,r=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:r?ri():null}}function Um(t){const{history:e,location:s}=window,n={value:Pu(t,s)},r={value:e.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,d){const f=t.indexOf("#"),v=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+c:Lm()+t+c;try{e[d?"replaceState":"pushState"](u,"",v),r.value=u}catch(p){console.error(p),s[d?"replace":"assign"](v)}}function o(c,u){const d=Le({},e.state,sl(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,d,!0),n.value=c}function a(c,u){const d=Le({},r.value,e.state,{forward:c,scroll:ri()});i(d.current,d,!0);const f=Le({},sl(n.value,c,null),{position:d.position+1},u);i(c,f,!1),n.value=c}return{location:n,state:r,push:a,replace:o}}function xm(t){t=Tm(t);const e=Um(t),s=Dm(t,e.state,e.location,e.replace);function n(i,o=!0){o||s.pauseListeners(),history.go(i)}const r=Le({location:"",base:t,go:n,createHref:Im.bind(null,t)},e,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Nm(t){return typeof t=="string"||t&&typeof t=="object"}function Eu(t){return typeof t=="string"||typeof t=="symbol"}const Tu=Symbol("");var nl;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(nl||(nl={}));function un(t,e){return Le(new Error,{type:t,[Tu]:!0},e)}function Bt(t,e){return t instanceof Error&&Tu in t&&(e==null||!!(t.type&e))}const rl="[^/]+?",Km={sensitive:!1,strict:!1,start:!0,end:!0},Fm=/[.+*?^${}()[\]/\\]/g;function Bm(t,e){const s=Le({},Km,e),n=[];let r=s.start?"^":"";const i=[];for(const u of t){const d=u.length?[]:[90];s.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const v=u[f];let p=40+(s.sensitive?.25:0);if(v.type===0)f||(r+="/"),r+=v.value.replace(Fm,"\\$&"),p+=40;else if(v.type===1){const{value:h,repeatable:m,optional:C,regexp:k}=v;i.push({name:h,repeatable:m,optional:C});const A=k||rl;if(A!==rl){p+=10;try{new RegExp(`(${A})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${h}" (${A}): `+T.message)}}let S=m?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;f||(S=C&&u.length<2?`(?:/${S})`:"/"+S),C&&(S+="?"),r+=S,p+=20,C&&(p+=-8),m&&(p+=-20),A===".*"&&(p+=-50)}d.push(p)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,s.sensitive?"":"i");function a(u){const d=u.match(o),f={};if(!d)return null;for(let v=1;v<d.length;v++){const p=d[v]||"",h=i[v-1];f[h.name]=p&&h.repeatable?p.split("/"):p}return f}function c(u){let d="",f=!1;for(const v of t){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const p of v)if(p.type===0)d+=p.value;else if(p.type===1){const{value:h,repeatable:m,optional:C}=p,k=h in u?u[h]:"";if(jt(k)&&!m)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const A=jt(k)?k.join("/"):k;if(!A)if(C)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${h}"`);d+=A}}return d||"/"}return{re:o,score:n,keys:i,parse:a,stringify:c}}function Hm(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Au(t,e){let s=0;const n=t.score,r=e.score;for(;s<n.length&&s<r.length;){const i=Hm(n[s],r[s]);if(i)return i;s++}if(Math.abs(r.length-n.length)===1){if(il(n))return 1;if(il(r))return-1}return r.length-n.length}function il(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const zm={type:0,value:""},Vm=/[a-zA-Z0-9_]/;function qm(t){if(!t)return[[]];if(t==="/")return[[zm]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${u}": ${p}`)}let s=0,n=s;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,u="",d="";function f(){u&&(s===0?i.push({type:0,value:u}):s===1||s===2||s===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function v(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),s=1):v();break;case 4:v(),s=n;break;case 1:c==="("?s=2:Vm.test(c)?v():(f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:s=3:d+=c;break;case 3:f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,d="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}function Wm(t,e,s){const n=Bm(qm(t.path),s),r=Le(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Gm(t,e){const s=[],n=new Map;e=cl({strict:!1,end:!0,sensitive:!1},e);function r(f){return n.get(f)}function i(f,v,p){const h=!p,m=al(f);m.aliasOf=p&&p.record;const C=cl(e,f),k=[m];if("alias"in f){const T=typeof f.alias=="string"?[f.alias]:f.alias;for(const O of T)k.push(al(Le({},m,{components:p?p.record.components:m.components,path:O,aliasOf:p?p.record:m})))}let A,S;for(const T of k){const{path:O}=T;if(v&&O[0]!=="/"){const E=v.record.path,R=E[E.length-1]==="/"?"":"/";T.path=v.record.path+(O&&R+O)}if(A=Wm(T,v,C),p?p.alias.push(A):(S=S||A,S!==A&&S.alias.push(A),h&&f.name&&!ll(A)&&o(f.name)),Iu(A)&&c(A),m.children){const E=m.children;for(let R=0;R<E.length;R++)i(E[R],A,p&&p.children[R])}p=p||A}return S?()=>{o(S)}:Ln}function o(f){if(Eu(f)){const v=n.get(f);v&&(n.delete(f),s.splice(s.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=s.indexOf(f);v>-1&&(s.splice(v,1),f.record.name&&n.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return s}function c(f){const v=Ym(f,s);s.splice(v,0,f),f.record.name&&!ll(f)&&n.set(f.record.name,f)}function u(f,v){let p,h={},m,C;if("name"in f&&f.name){if(p=n.get(f.name),!p)throw un(1,{location:f});C=p.record.name,h=Le(ol(v.params,p.keys.filter(S=>!S.optional).concat(p.parent?p.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),f.params&&ol(f.params,p.keys.map(S=>S.name))),m=p.stringify(h)}else if(f.path!=null)m=f.path,p=s.find(S=>S.re.test(m)),p&&(h=p.parse(m),C=p.record.name);else{if(p=v.name?n.get(v.name):s.find(S=>S.re.test(v.path)),!p)throw un(1,{location:f,currentLocation:v});C=p.record.name,h=Le({},v.params,f.params),m=p.stringify(h)}const k=[];let A=p;for(;A;)k.unshift(A.record),A=A.parent;return{name:C,path:m,params:h,matched:k,meta:Qm(k)}}t.forEach(f=>i(f));function d(){s.length=0,n.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:r}}function ol(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function al(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Jm(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Jm(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function ll(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Qm(t){return t.reduce((e,s)=>Le(e,s.meta),{})}function cl(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}function Ym(t,e){let s=0,n=e.length;for(;s!==n;){const i=s+n>>1;Au(t,e[i])<0?n=i:s=i+1}const r=Xm(t);return r&&(n=e.lastIndexOf(r,n-1)),n}function Xm(t){let e=t;for(;e=e.parent;)if(Iu(e)&&Au(t,e)===0)return e}function Iu({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Zm(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(_u," "),o=i.indexOf("="),a=Gn(o<0?i:i.slice(0,o)),c=o<0?null:Gn(i.slice(o+1));if(a in e){let u=e[a];jt(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function ul(t){let e="";for(let s in t){const n=t[s];if(s=wm(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(jt(n)?n.map(i=>i&&io(i)):[n&&io(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+s,i!=null&&(e+="="+i))})}return e}function ev(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=jt(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const tv=Symbol(""),dl=Symbol(""),ii=Symbol(""),No=Symbol(""),ao=Symbol("");function wn(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function ds(t,e,s,n,r,i=o=>o()){const o=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,c)=>{const u=v=>{v===!1?c(un(4,{from:s,to:e})):v instanceof Error?c(v):Nm(v)?c(un(2,{from:e,to:v})):(o&&n.enterCallbacks[r]===o&&typeof v=="function"&&o.push(v),a())},d=i(()=>t.call(n&&n.instances[r],e,s,u));let f=Promise.resolve(d);t.length<3&&(f=f.then(u)),f.catch(v=>c(v))})}function Mi(t,e,s,n,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(wu(c)){const d=(c.__vccOpts||c)[e];d&&i.push(ds(d,s,n,o,a,r))}else{let u=c();i.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=lm(d)?d.default:d;o.mods[a]=d,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&ds(p,s,n,o,a,r)()}))}}return i}function hl(t){const e=$t(ii),s=$t(No),n=ye(()=>{const c=pe(t.to);return e.resolve(c)}),r=ye(()=>{const{matched:c}=n.value,{length:u}=c,d=c[u-1],f=s.matched;if(!d||!f.length)return-1;const v=f.findIndex(cn.bind(null,d));if(v>-1)return v;const p=fl(c[u-2]);return u>1&&fl(d)===p&&f[f.length-1].path!==p?f.findIndex(cn.bind(null,c[u-2])):v}),i=ye(()=>r.value>-1&&ov(s.params,n.value.params)),o=ye(()=>r.value>-1&&r.value===s.matched.length-1&&$u(s.params,n.value.params));function a(c={}){if(iv(c)){const u=e[pe(t.replace)?"replace":"push"](pe(t.to)).catch(Ln);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:ye(()=>n.value.href),isActive:i,isExactActive:o,navigate:a}}function sv(t){return t.length===1?t[0]:t}const nv=Qe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:hl,setup(t,{slots:e}){const s=Zn(hl(t)),{options:n}=$t(ii),r=ye(()=>({[pl(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[pl(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&sv(e.default(s));return t.custom?i:yt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},i)}}}),rv=nv;function iv(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ov(t,e){for(const s in e){const n=e[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!jt(r)||r.length!==n.length||n.some((i,o)=>i!==r[o]))return!1}return!0}function fl(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const pl=(t,e,s)=>t??e??s,av=Qe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=$t(ao),r=ye(()=>t.route||n.value),i=$t(dl,0),o=ye(()=>{let u=pe(i);const{matched:d}=r.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),a=ye(()=>r.value.matched[o.value]);vr(dl,ye(()=>o.value+1)),vr(tv,a),vr(ao,r);const c=W();return Qt(()=>[c.value,a.value,t.name],([u,d,f],[v,p,h])=>{d&&(d.instances[f]=u,p&&p!==d&&u&&u===v&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),u&&d&&(!p||!cn(d,p)||!v)&&(d.enterCallbacks[f]||[]).forEach(m=>m(u))},{flush:"post"}),()=>{const u=r.value,d=t.name,f=a.value,v=f&&f.components[d];if(!v)return gl(s.default,{Component:v,route:u});const p=f.props[d],h=p?p===!0?u.params:typeof p=="function"?p(u):p:null,C=yt(v,Le({},h,e,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return gl(s.default,{Component:C,route:u})||C}}});function gl(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const lv=av;function cv(t){const e=Gm(t.routes,t),s=t.parseQuery||Zm,n=t.stringifyQuery||ul,r=t.history,i=wn(),o=wn(),a=wn(),c=yd(ns);let u=ns;Ys&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ii.bind(null,L=>""+L),f=Ii.bind(null,_m),v=Ii.bind(null,Gn);function p(L,te){let ee,ae;return Eu(L)?(ee=e.getRecordMatcher(L),ae=te):ae=L,e.addRoute(ae,ee)}function h(L){const te=e.getRecordMatcher(L);te&&e.removeRoute(te)}function m(){return e.getRoutes().map(L=>L.record)}function C(L){return!!e.getRecordMatcher(L)}function k(L,te){if(te=Le({},te||c.value),typeof L=="string"){const _=Ri(s,L,te.path),P=e.resolve({path:_.path},te),D=r.createHref(_.fullPath);return Le(_,P,{params:v(P.params),hash:Gn(_.hash),redirectedFrom:void 0,href:D})}let ee;if(L.path!=null)ee=Le({},L,{path:Ri(s,L.path,te.path).path});else{const _=Le({},L.params);for(const P in _)_[P]==null&&delete _[P];ee=Le({},L,{params:f(_)}),te.params=f(te.params)}const ae=e.resolve(ee,te),Re=L.hash||"";ae.params=d(v(ae.params));const g=Cm(n,Le({},L,{hash:ym(Re),path:ae.path})),y=r.createHref(g);return Le({fullPath:g,hash:Re,query:n===ul?ev(L.query):L.query||{}},ae,{redirectedFrom:void 0,href:y})}function A(L){return typeof L=="string"?Ri(s,L,c.value.path):Le({},L)}function S(L,te){if(u!==L)return un(8,{from:te,to:L})}function T(L){return R(L)}function O(L){return T(Le(A(L),{replace:!0}))}function E(L){const te=L.matched[L.matched.length-1];if(te&&te.redirect){const{redirect:ee}=te;let ae=typeof ee=="function"?ee(L):ee;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=A(ae):{path:ae},ae.params={}),Le({query:L.query,hash:L.hash,params:ae.path!=null?{}:L.params},ae)}}function R(L,te){const ee=u=k(L),ae=c.value,Re=L.state,g=L.force,y=L.replace===!0,_=E(ee);if(_)return R(Le(A(_),{state:typeof _=="object"?Le({},Re,_.state):Re,force:g,replace:y}),te||ee);const P=ee;P.redirectedFrom=te;let D;return!g&&$m(n,ae,ee)&&(D=un(16,{to:P,from:ae}),ge(ae,ae,!0,!1)),(D?Promise.resolve(D):j(P,ae)).catch(x=>Bt(x)?Bt(x,2)?x:se(x):ue(x,P,ae)).then(x=>{if(x){if(Bt(x,2))return R(Le({replace:y},A(x.to),{state:typeof x.to=="object"?Le({},Re,x.to.state):Re,force:g}),te||P)}else x=K(P,ae,!0,y,Re);return q(P,ae,x),x})}function N(L,te){const ee=S(L,te);return ee?Promise.reject(ee):Promise.resolve()}function I(L){const te=Ee.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(L):L()}function j(L,te){let ee;const[ae,Re,g]=uv(L,te);ee=Mi(ae.reverse(),"beforeRouteLeave",L,te);for(const _ of ae)_.leaveGuards.forEach(P=>{ee.push(ds(P,L,te))});const y=N.bind(null,L,te);return ee.push(y),ve(ee).then(()=>{ee=[];for(const _ of i.list())ee.push(ds(_,L,te));return ee.push(y),ve(ee)}).then(()=>{ee=Mi(Re,"beforeRouteUpdate",L,te);for(const _ of Re)_.updateGuards.forEach(P=>{ee.push(ds(P,L,te))});return ee.push(y),ve(ee)}).then(()=>{ee=[];for(const _ of g)if(_.beforeEnter)if(jt(_.beforeEnter))for(const P of _.beforeEnter)ee.push(ds(P,L,te));else ee.push(ds(_.beforeEnter,L,te));return ee.push(y),ve(ee)}).then(()=>(L.matched.forEach(_=>_.enterCallbacks={}),ee=Mi(g,"beforeRouteEnter",L,te,I),ee.push(y),ve(ee))).then(()=>{ee=[];for(const _ of o.list())ee.push(ds(_,L,te));return ee.push(y),ve(ee)}).catch(_=>Bt(_,8)?_:Promise.reject(_))}function q(L,te,ee){a.list().forEach(ae=>I(()=>ae(L,te,ee)))}function K(L,te,ee,ae,Re){const g=S(L,te);if(g)return g;const y=te===ns,_=Ys?history.state:{};ee&&(ae||y?r.replace(L.fullPath,Le({scroll:y&&_&&_.scroll},Re)):r.push(L.fullPath,Re)),c.value=L,ge(L,te,ee,y),se()}let B;function G(){B||(B=r.listen((L,te,ee)=>{if(!je.listening)return;const ae=k(L),Re=E(ae);if(Re){R(Le(Re,{replace:!0,force:!0}),ae).catch(Ln);return}u=ae;const g=c.value;Ys&&Om(tl(g.fullPath,ee.delta),ri()),j(ae,g).catch(y=>Bt(y,12)?y:Bt(y,2)?(R(Le(A(y.to),{force:!0}),ae).then(_=>{Bt(_,20)&&!ee.delta&&ee.type===Jn.pop&&r.go(-1,!1)}).catch(Ln),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),ue(y,ae,g))).then(y=>{y=y||K(ae,g,!1),y&&(ee.delta&&!Bt(y,8)?r.go(-ee.delta,!1):ee.type===Jn.pop&&Bt(y,20)&&r.go(-1,!1)),q(ae,g,y)}).catch(Ln)}))}let he=wn(),ce=wn(),Q;function ue(L,te,ee){se(L);const ae=ce.list();return ae.length?ae.forEach(Re=>Re(L,te,ee)):console.error(L),Promise.reject(L)}function J(){return Q&&c.value!==ns?Promise.resolve():new Promise((L,te)=>{he.add([L,te])})}function se(L){return Q||(Q=!L,G(),he.list().forEach(([te,ee])=>L?ee(L):te()),he.reset()),L}function ge(L,te,ee,ae){const{scrollBehavior:Re}=t;if(!Ys||!Re)return Promise.resolve();const g=!ee&&jm(tl(L.fullPath,0))||(ae||!ee)&&history.state&&history.state.scroll||null;return Us().then(()=>Re(L,te,g)).then(y=>y&&Mm(y)).catch(y=>ue(y,L,te))}const me=L=>r.go(L);let Ue;const Ee=new Set,je={currentRoute:c,listening:!0,addRoute:p,removeRoute:h,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:m,resolve:k,options:t,push:T,replace:O,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ce.add,isReady:J,install(L){const te=this;L.component("RouterLink",rv),L.component("RouterView",lv),L.config.globalProperties.$router=te,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>pe(c)}),Ys&&!Ue&&c.value===ns&&(Ue=!0,T(r.location).catch(Re=>{}));const ee={};for(const Re in ns)Object.defineProperty(ee,Re,{get:()=>c.value[Re],enumerable:!0});L.provide(ii,te),L.provide(No,Gl(ee)),L.provide(ao,c);const ae=L.unmount;Ee.add(L),L.unmount=function(){Ee.delete(L),Ee.size<1&&(u=ns,B&&B(),B=null,c.value=ns,Ue=!1,Q=!1),ae()}}};function ve(L){return L.reduce((te,ee)=>te.then(()=>I(ee)),Promise.resolve())}return je}function uv(t,e){const s=[],n=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>cn(u,a))?n.push(a):s.push(a));const c=t.matched[o];c&&(e.matched.find(u=>cn(u,c))||r.push(c))}return[s,n,r]}function Nt(){return $t(ii)}function dv(t){return $t(No)}const hv={async logAuthState(){var e,s,n;console.log("===     ==="),console.log(":",We.isNativePlatform()?"":"");try{const{data:{session:r}}=await le.auth.getSession();console.log("Supabase :",r?{user:(e=r.user)==null?void 0:e.email,provider:(n=(s=r.user)==null?void 0:s.app_metadata)==null?void 0:n.provider,expiresAt:new Date(r.expires_at*1e3).toLocaleString()}:"null")}catch(r){console.error("Supabase   :",r)}const t=localStorage.getItem("tarot_user");if(t)try{const r=JSON.parse(t);console.log("localStorage :",{id:r.id,isAnonymous:r.isAnonymous,email:r.email||"none",isPremium:r.isPremium})}catch(r){console.error("localStorage  :",r)}else console.log("localStorage : null");console.log("===   ===")},async clearSession(){console.log("   ...");try{await le.auth.signOut(),console.log(" Supabase  ")}catch(t){console.error(" Supabase  :",t)}localStorage.removeItem("tarot_user"),localStorage.removeItem("supabase.auth.token"),console.log(" localStorage  "),await this.logAuthState()}};typeof window<"u"&&(window.authDebug=hv);const fv={id:"app"},pv=Qe({__name:"App",setup(t){const e=W(!1),s=Nt();return mt(async()=>{if(console.log("   "),We.isNativePlatform()){console.log("    -   ");try{const{data:{session:n}}=await Xe.supabase.auth.getSession();if(!n){console.log("  : OAuth  ");const r=localStorage.getItem("tarot_user");r&&(JSON.parse(r).isAnonymous||(console.log("    -   "),localStorage.removeItem("tarot_user")))}}catch(n){console.error("   :",n)}await jn.setupDeepLinkListener(),jn.setAuthSuccessCallback(async()=>{console.log(" OAuth   - userStore    ");const{useUserStore:n}=await Ie(async()=>{const{useUserStore:i}=await Promise.resolve().then(()=>Mr);return{useUserStore:i}},void 0,import.meta.url),r=n();await r.initializeUser(),setTimeout(()=>{r.currentUser&&!r.currentUser.isAnonymous?s.push("/app"):s.push("/")},100)}),ln.addListener("appUrlOpen",async n=>{var r,i;if(console.log(" Deep link opened:",n.url),n.url&&(n.url.includes("auth/callback")||n.url.includes("login-callback"))){console.log(" Processing OAuth callback from initial URL...");try{let o=null,a=null;if(n.url.includes("#")){const c=n.url.split("#")[1],u=new URLSearchParams(c);o=u.get("access_token"),a=u.get("refresh_token")}if(console.log(" Tokens extracted:",{access_token:o?"Yes":"No",refresh_token:a?"Yes":"No"}),o&&a){console.log(" Setting session with tokens...");try{const{data:c,error:u}=await Xe.supabase.auth.setSession({access_token:o,refresh_token:a});if(console.log(" Session response:",{hasData:!!c,hasSession:!!(c!=null&&c.session),hasError:!!u,error:u==null?void 0:u.message}),!u&&(c!=null&&c.session)){console.log(" Session set successfully:",(r=c.session.user)==null?void 0:r.email),window.dispatchEvent(new CustomEvent("oauth-success"));const{useUserStore:d}=await Ie(async()=>{const{useUserStore:v}=await Promise.resolve().then(()=>Mr);return{useUserStore:v}},void 0,import.meta.url),f=d();await f.initializeUser(),console.log(" userStore :",{currentUser:f.currentUser,isLoggedIn:f.isLoggedIn,isAnonymous:(i=f.currentUser)==null?void 0:i.isAnonymous}),setTimeout(()=>{f.currentUser&&!f.currentUser.isAnonymous?(console.log("  : /app"),s.push("/app")):(console.log("  : /"),s.push("/"))},500)}else console.error(" Failed to set session:",u||"No session data"),u!=null&&u.message&&window.dispatchEvent(new CustomEvent("oauth-error",{detail:{message:u.message}}))}catch(c){console.error(" Exception during session setup:",c)}}else console.log(" Missing tokens:",{access_token:!!o,refresh_token:!!a})}catch(o){console.error(" OAuth processing error:",o)}}}),ln.addListener("appStateChange",async n=>{var r;if(n.isActive){console.log("   -  ");const i=await jn.restoreSession();i&&console.log("   :",(r=i.user)==null?void 0:r.email)}})}if(We.isNativePlatform())console.log("  :    ");else try{const n=await Xe.getCurrentUser();n?console.log("   :",n.email):console.log("   ")}catch(n){console.error("   :",n)}}),(n,r)=>{const i=qr("router-view");return w(),b("div",fv,[fe(i),e.value?(w(),ft(om,{key:0})):M("",!0)])}}}),gv={class:"p-6 pb-4"},mv=["innerHTML"],vv={key:0,class:"mb-2 text-lg font-semibold text-center text-gray-900 dark:text-white"},yv={class:"text-sm text-center text-gray-600 dark:text-gray-300 whitespace-pre-line"},wv={class:"flex border-t border-gray-200 dark:border-gray-700"},bv=Qe({__name:"Alert",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"info"},title:{type:String,default:""},message:{type:String,required:!0},confirmText:{type:String,default:""},cancelText:{type:String,default:""},showConfirm:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!1},closeOnBackdrop:{type:Boolean,default:!0}},emits:["confirm","cancel","close"],setup(t,{emit:e}){const s=t,n=e,r=ye(()=>""),i=ye(()=>{switch(s.type){case"success":return`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>`;case"warning":return`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
      </svg>`;case"error":return`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>`;default:return`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
      </svg>`}}),o=ye(()=>{switch(s.type){case"success":return"bg-green-100 dark:bg-green-900";case"warning":return"bg-yellow-100 dark:bg-yellow-900";case"error":return"bg-red-100 dark:bg-red-900";default:return"bg-blue-100 dark:bg-blue-900"}}),a=ye(()=>{switch(s.type){case"success":return"text-green-600 dark:text-green-400";case"warning":return"text-yellow-600 dark:text-yellow-400";case"error":return"text-red-600 dark:text-red-400";default:return"text-blue-600 dark:text-blue-400"}}),c=ye(()=>{switch(s.type){case"success":return"text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20";case"warning":return"text-yellow-600 dark:text-yellow-400 hover:bg-yellow-50 dark:hover:bg-yellow-900/20";case"error":return"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20";default:return"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}}),u=()=>{n("confirm"),n("close")},d=()=>{n("cancel"),n("close")},f=()=>{s.closeOnBackdrop&&d()};return(v,p)=>(w(),ft(Me,{"enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:Pe(()=>[t.visible?(w(),b("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:f},[l("div",{class:H(["w-full max-w-sm bg-white dark:bg-gray-800 rounded-lg shadow-xl transform transition-all",r.value]),onClick:p[0]||(p[0]=Yt(()=>{},["stop"]))},[l("div",gv,[l("div",{class:H(["flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full",o.value])},[l("div",{innerHTML:i.value,class:H(a.value)},null,10,mv)],2),t.title?(w(),b("h3",vv,$(t.title),1)):M("",!0),l("p",yv,$(t.message),1)]),l("div",wv,[t.showCancel?(w(),b("button",{key:0,onClick:d,class:H(["flex-1 px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",{"border-r border-gray-200 dark:border-gray-700":t.showConfirm}])},$(t.cancelText),3)):M("",!0),t.showConfirm?(w(),b("button",{key:1,onClick:u,class:H(["flex-1 px-4 py-3 text-sm font-medium transition-colors",c.value])},$(t.confirmText),3)):M("",!0)])],2)])):M("",!0)]),_:1}))}});function Qn(){const t=e=>new Promise(s=>{const n=document.createElement("div");document.body.appendChild(n);const r=W(!0),i=()=>{r.value=!1,setTimeout(()=>{wi(null,n),document.body.removeChild(n),s(!0)},200)},o=()=>{r.value=!1,setTimeout(()=>{wi(null,n),document.body.removeChild(n),s(!1)},200)},a=yt(bv,{...e,visible:r.value,showConfirm:!0,onConfirm:i,onCancel:o,onClose:o});wi(a,n)});return{alert:(e,s)=>t({type:"info",message:e,title:s}),success:(e,s)=>t({type:"success",message:e,title:s}),warning:(e,s)=>t({type:"warning",message:e,title:s}),error:(e,s)=>t({type:"error",message:e,title:s}),confirm:(e,s)=>t({type:"info",message:e,title:s,showCancel:!0,confirmText:"",cancelText:""})}}const _v={name:"LoginModal",components:{},props:{isVisible:{type:Boolean,default:!1},initialMode:{type:String,default:"login"}},emits:["close","success","show-email-verification"],setup(t,{emit:e}){const s=Ve(),n=Qn();console.log("LoginModal setup "),console.log("props.isVisible:",t.isVisible),Qt(()=>t.isVisible,(E,R)=>{console.log(` LoginModal isVisible : ${R} -> ${E}`)},{immediate:!0});const r=W(t.initialMode==="login"),i=W(!1),o=W(!1),a=W(!1),c=W(""),u=W(""),d=W(""),f=W({name:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),v=W({}),p=()=>(v.value={},/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.value.email)||(v.value.email="   "),r.value||(f.value.name.trim()||(v.value.name=" "),/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(f.value.password)||(v.value.password="8 , , ,   "),f.value.password!==f.value.confirmPassword&&(v.value.confirmPassword="  "),f.value.agreeTerms||(v.value.agreeTerms="  ")),Object.keys(v.value).length===0),h=async()=>{if(p()){i.value=!0,c.value="",u.value="";try{r.value?(await s.login(f.value.email,f.value.password),u.value=" !  ...",setTimeout(()=>{e("success","login"),O()},500)):(await s.signUp(f.value.email,f.value.password,{name:f.value.name}),e("show-email-verification",f.value.email),O())}catch(E){c.value=A(E.message)}finally{i.value=!1}}},m=async()=>{i.value=!0,c.value="";let E,R,N;try{E=async()=>{console.log(" OAuth success event received!"),u.value=" !  ...",i.value=!1,N&&clearTimeout(N),window.removeEventListener("oauth-success",E),window.removeEventListener("oauth-error",R);try{await s.initializeUser(),console.log(" userStore  ")}catch(I){console.error(" userStore  :",I)}setTimeout(()=>{e("success","oauth"),O()},500)},R=I=>{var j;console.error(" OAuth error event:",I.detail),c.value=((j=I.detail)==null?void 0:j.message)||"Google    .",i.value=!1,N&&clearTimeout(N),window.removeEventListener("oauth-success",E),window.removeEventListener("oauth-error",R)},window.addEventListener("oauth-success",E),window.addEventListener("oauth-error",R),await s.signInWithGoogle(),N=setTimeout(()=>{i.value&&(console.log(" OAuth timeout - resetting loading state"),i.value=!1,c.value="  .  .",window.removeEventListener("oauth-success",E),window.removeEventListener("oauth-error",R))},3e4)}catch(I){console.error("Google  :",I),c.value="Google    .",i.value=!1,E&&window.removeEventListener("oauth-success",E),R&&window.removeEventListener("oauth-error",R),N&&clearTimeout(N)}},C=async()=>{await n.info(`      .
   .`," ")},k=async()=>{if(d.value){i.value=!0;try{await s.resetPassword(d.value),u.value="   .",a.value=!1,d.value=""}catch(E){c.value=A(E.message)}finally{i.value=!1}}},A=E=>({"Invalid login credentials":"    ","User already registered":"  ","Password should be at least 6 characters":"  6  ","Invalid email":"   "})[E]||" .  .",S=()=>{console.log("LoginModal  "),O()},T=()=>{r.value=!r.value,c.value="",u.value="",v.value={};const E=f.value.email;f.value={name:"",email:E,password:"",confirmPassword:"",agreeTerms:!1}},O=()=>{e("close"),c.value="",u.value="",v.value={},a.value=!1,f.value={name:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}};return Qt(()=>t.initialMode,E=>{r.value=E==="login"}),{isLoginMode:r,isLoading:i,showPassword:o,showForgotPassword:a,errorMessage:c,successMessage:u,resetEmail:d,formData:f,errors:v,handleEmailAuth:h,handleGoogleLogin:m,handleKakaoLogin:C,handlePasswordReset:k,toggleMode:T,closeModal:O,handleOverlayClick:S}}},kv={class:"login-modal"},Sv={class:"modal-header"},Cv={class:"modal-title"},$v={key:0,class:"error-message"},Pv={key:1,class:"success-message"},Ev={class:"social-login-section"},Tv=["disabled"],Av=["disabled"],Iv={key:0,class:"form-group"},Rv={key:0,class:"field-error"},Mv={class:"form-group"},Ov={key:0,class:"field-error"},jv={class:"form-group"},Lv={class:"password-input"},Dv=["type"],Uv={key:0,class:"field-error"},xv={key:1,class:"password-hint"},Nv={key:1,class:"form-group"},Kv={key:0,class:"field-error"},Fv={key:2,class:"terms-section"},Bv={class:"checkbox-option"},Hv={key:0,class:"field-error"},zv=["disabled"],Vv={key:0},qv={key:1},Wv={class:"modal-footer"},Gv={class:"mode-switch"},Jv={key:0},Qv={key:1},Yv={key:0,class:"forgot-password"},Xv={key:2,class:"forgot-password-modal"},Zv={class:"modal-content"},ey={class:"button-group"},ty=["disabled"];function sy(t,e,s,n,r,i){return w(),ft(Me,{name:"modal"},{default:Pe(()=>[s.isVisible?(w(),b("div",{key:0,class:"modal-overlay",onClick:e[18]||(e[18]=(...o)=>n.handleOverlayClick&&n.handleOverlayClick(...o))},[l("div",{class:"modal-container",onClick:e[17]||(e[17]=Yt(()=>{},["stop"]))},[l("div",kv,[l("div",Sv,[l("h2",Cv,$(n.isLoginMode?"":""),1),l("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>n.closeModal&&n.closeModal(...o))},"")]),n.errorMessage?(w(),b("div",$v,$(n.errorMessage),1)):M("",!0),n.successMessage?(w(),b("div",Pv,$(n.successMessage),1)):M("",!0),l("div",Ev,[l("button",{class:"social-btn google-btn",onClick:e[1]||(e[1]=(...o)=>n.handleGoogleLogin&&n.handleGoogleLogin(...o)),disabled:n.isLoading},[e[19]||(e[19]=l("svg",{width:"20",height:"20",viewBox:"0 0 48 48",class:"social-icon"},[l("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),l("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),l("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),l("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),l("path",{fill:"none",d:"M0 0h48v48H0z"})],-1)),Ae(" Google "+$(n.isLoginMode?"":""),1)],8,Tv),l("button",{class:"social-btn kakao-btn",onClick:e[2]||(e[2]=(...o)=>n.handleKakaoLogin&&n.handleKakaoLogin(...o)),disabled:n.isLoading},[e[20]||(e[20]=l("svg",{width:"20",height:"20",viewBox:"0 0 48 48",class:"social-icon"},[l("path",{fill:"#3C1E1E",d:"M24 4C12.95 4 4 11.15 4 20c0 5.62 3.58 10.54 9 13.41-.4 1.48-1.44 5.35-1.64 6.19-.25 1.05.39 1.03.82.75.34-.22 5.39-3.68 7.59-5.19 1.38.19 2.79.29 4.23.29 11.05 0 20-7.15 20-16C44 11.15 35.05 4 24 4z"})],-1)),Ae("  "+$(n.isLoginMode?"":"")+" ",1),e[21]||(e[21]=l("span",{class:"coming-soon"},"",-1))],8,Av)]),e[31]||(e[31]=l("div",{class:"divider"},[l("span",null,"")],-1)),l("form",{onSubmit:e[9]||(e[9]=Yt((...o)=>n.handleEmailAuth&&n.handleEmailAuth(...o),["prevent"])),class:"email-form"},[n.isLoginMode?M("",!0):(w(),b("div",Iv,[e[22]||(e[22]=l("label",{for:"name"},"",-1)),_t(l("input",{id:"name","onUpdate:modelValue":e[3]||(e[3]=o=>n.formData.name=o),type:"text",placeholder:" ",class:H({error:n.errors.name})},null,2),[[fs,n.formData.name]]),n.errors.name?(w(),b("span",Rv,$(n.errors.name),1)):M("",!0)])),l("div",Mv,[e[23]||(e[23]=l("label",{for:"email"},"",-1)),_t(l("input",{id:"email","onUpdate:modelValue":e[4]||(e[4]=o=>n.formData.email=o),type:"email",placeholder:" ",class:H({error:n.errors.email}),required:""},null,2),[[fs,n.formData.email]]),n.errors.email?(w(),b("span",Ov,$(n.errors.email),1)):M("",!0)]),l("div",jv,[e[24]||(e[24]=l("label",{for:"password"},"",-1)),l("div",Lv,[_t(l("input",{id:"password","onUpdate:modelValue":e[5]||(e[5]=o=>n.formData.password=o),type:n.showPassword?"text":"password",placeholder:" ",class:H({error:n.errors.password}),required:""},null,10,Dv),[[cf,n.formData.password]]),l("button",{type:"button",class:"password-toggle",onClick:e[6]||(e[6]=o=>n.showPassword=!n.showPassword)},$(n.showPassword?"":""),1)]),n.errors.password?(w(),b("span",Uv,$(n.errors.password),1)):M("",!0),n.isLoginMode?M("",!0):(w(),b("div",xv," 8 , , ,   "))]),n.isLoginMode?M("",!0):(w(),b("div",Nv,[e[25]||(e[25]=l("label",{for:"confirmPassword"}," ",-1)),_t(l("input",{id:"confirmPassword","onUpdate:modelValue":e[7]||(e[7]=o=>n.formData.confirmPassword=o),type:"password",placeholder:"  ",class:H({error:n.errors.confirmPassword}),required:""},null,2),[[fs,n.formData.confirmPassword]]),n.errors.confirmPassword?(w(),b("span",Kv,$(n.errors.confirmPassword),1)):M("",!0)])),n.isLoginMode?M("",!0):(w(),b("div",Fv,[l("label",Bv,[_t(l("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=o=>n.formData.agreeTerms=o),class:H({error:n.errors.agreeTerms}),required:""},null,2),[[Uc,n.formData.agreeTerms]]),e[26]||(e[26]=l("span",null,"    ",-1))]),n.errors.agreeTerms?(w(),b("span",Hv,$(n.errors.agreeTerms),1)):M("",!0)])),l("button",{type:"submit",class:"submit-btn",disabled:n.isLoading},[n.isLoading?(w(),b("span",Vv,"...")):(w(),b("span",qv,$(n.isLoginMode?"":""),1))],8,zv)],32),l("div",Wv,[l("div",Gv,[n.isLoginMode?(w(),b("span",Jv,[e[27]||(e[27]=Ae("  ? ",-1)),l("button",{onClick:e[10]||(e[10]=(...o)=>n.toggleMode&&n.toggleMode(...o)),class:"link-btn"},"")])):(w(),b("span",Qv,[e[28]||(e[28]=Ae("   ? ",-1)),l("button",{onClick:e[11]||(e[11]=(...o)=>n.toggleMode&&n.toggleMode(...o)),class:"link-btn"},"")]))]),n.isLoginMode?(w(),b("div",Yv,[l("button",{onClick:e[12]||(e[12]=o=>n.showForgotPassword=!0),class:"link-btn"},"  ? ")])):M("",!0)]),n.showForgotPassword?(w(),b("div",Xv,[l("div",{class:"modal-overlay",onClick:e[13]||(e[13]=o=>n.showForgotPassword=!1)}),l("div",Zv,[e[29]||(e[29]=l("h3",null," ",-1)),e[30]||(e[30]=l("p",null,"    .",-1)),l("form",{onSubmit:e[16]||(e[16]=Yt((...o)=>n.handlePasswordReset&&n.handlePasswordReset(...o),["prevent"]))},[_t(l("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>n.resetEmail=o),type:"email",placeholder:" ",required:""},null,512),[[fs,n.resetEmail]]),l("div",ey,[l("button",{type:"button",onClick:e[15]||(e[15]=o=>n.showForgotPassword=!1)},""),l("button",{type:"submit",disabled:n.isLoading},"",8,ty)])],32)])])):M("",!0)])])])):M("",!0)]),_:1})}const Ru=tt(_v,[["render",sy],["__scopeId","data-v-bbf3c3d1"]]),ny={class:"verification-modal"},ry={class:"modal-content"},iy={class:"verification-info"},oy={class:"verification-message"},ay={class:"action-buttons"},ly=["disabled"],cy={key:0},uy={key:1},dy={key:2},hy={key:0,class:"success-message"},fy={key:1,class:"error-message"},py={__name:"EmailVerificationModal",props:{isVisible:{type:Boolean,default:!1},email:{type:String,required:!0}},emits:["close","go-to-login"],setup(t,{emit:e}){const s=t,n=e,r=Ve(),i=W(!1),o=W(0),a=W(!1),c=W("");let u=null;const d=()=>{const A=document.querySelector(".verification-modal"),S=document.querySelector(".modal-overlay");if(A&&S){const T=window.innerWidth,O=window.innerHeight;T<=320?(A.style.fontSize="14px",S.style.alignItems="flex-start"):T<=480||T<=640?(A.style.fontSize="15px",S.style.alignItems="flex-start"):(A.style.fontSize="16px",S.style.alignItems="flex-start"),O<=600&&(S.style.alignItems="flex-start",S.style.paddingTop="8px",S.style.paddingBottom="8px"),document.documentElement.style.setProperty("--viewport-width",`${T}px`),document.documentElement.style.setProperty("--viewport-height",`${O}px`)}},f=()=>{o.value=60,u=setInterval(()=>{o.value--,o.value<=0&&(clearInterval(u),u=null)},1e3)},v=async()=>{if(!(i.value||o.value>0)){i.value=!0,c.value="",a.value=!1;try{await r.resendVerificationEmail(s.email),a.value=!0,f(),setTimeout(()=>{a.value=!1},3e3)}catch(A){c.value="  .    .",console.error(" :",A)}finally{i.value=!1}}},p=()=>{n("go-to-login"),m()},h=()=>{m()},m=()=>{n("close"),c.value="",a.value=!1,u&&(clearInterval(u),u=null,o.value=0)};let C=null;const k=()=>{clearTimeout(C),C=setTimeout(d,100)};return Qt(()=>s.isVisible,A=>{if(A)Us(()=>{d(),window.addEventListener("resize",k,{passive:!0}),window.addEventListener("orientationchange",k,{passive:!0});const S=window.visualViewport;S&&S.addEventListener("resize",k,{passive:!0})});else{window.removeEventListener("resize",k),window.removeEventListener("orientationchange",k);const S=window.visualViewport;S&&S.removeEventListener("resize",k),C&&(clearTimeout(C),C=null)}}),tr(()=>{u&&(clearInterval(u),u=null),C&&(clearTimeout(C),C=null),window.removeEventListener("resize",k),window.removeEventListener("orientationchange",k);const A=window.visualViewport;A&&A.removeEventListener("resize",k)}),(A,S)=>(w(),ft(Me,{name:"modal"},{default:Pe(()=>[t.isVisible?(w(),b("div",{key:0,class:"modal-overlay",onClick:h},[l("div",{class:"modal-container",onClick:S[0]||(S[0]=Yt(()=>{},["stop"]))},[l("div",ny,[l("div",{class:"modal-header"},[S[1]||(S[1]=l("div",{class:"icon-container"},[l("div",{class:"email-icon"},"")],-1)),S[2]||(S[2]=l("h2",{class:"modal-title"}," ",-1)),l("button",{class:"close-btn",onClick:m},"")]),l("div",ry,[l("div",iy,[S[4]||(S[4]=l("h3",null," !",-1)),l("p",oy,[l("strong",null,$(t.email),1),S[3]||(S[3]=Ae("   . ",-1))]),S[5]||(S[5]=l("div",{class:"steps"},[l("div",{class:"step"},[l("span",{class:"step-number"},"1"),l("span",{class:"step-text"},"  ")]),l("div",{class:"step"},[l("span",{class:"step-number"},"2"),l("span",{class:"step-text"},"  ")]),l("div",{class:"step"},[l("span",{class:"step-number"},"3"),l("span",{class:"step-text"},"  ")])],-1)),S[6]||(S[6]=l("div",{class:"warning-box"},[l("div",{class:"warning-icon"},""),l("div",{class:"warning-text"},[l("p",null,[l("strong",null,"  ?")]),l("ul",null,[l("li",null," "),l("li",null,"    "),l("li",null,"     ")])])],-1))]),l("div",ay,[l("button",{class:"resend-btn",onClick:v,disabled:i.value||o.value>0},[o.value>0?(w(),b("span",cy,"   ("+$(o.value)+") ",1)):i.value?(w(),b("span",uy,"  ... ")):(w(),b("span",dy,"     "))],8,ly),l("button",{class:"login-btn",onClick:p},"  ")]),a.value?(w(),b("div",hy,"     ! ")):M("",!0),c.value?(w(),b("div",fy,$(c.value),1)):M("",!0)])])])])):M("",!0)]),_:1}))}},gy=tt(py,[["__scopeId","data-v-d2405328"]]),my={class:"home"},vy={class:"header"},yy={class:"header-content"},wy={class:"auth-buttons"},by={class:"main-content"},_y={class:"hero-section"},ky={class:"hero-content"},Sy={class:"hero-cta"},Cy=Qe({__name:"Home",setup(t){const e=Nt(),s=Ve(),n=W(!1),r=W("login"),i=W(!1),o=W("");mt(async()=>{console.log("   "),s.isInitialized||await s.initializeUser(),s.currentUser&&!s.currentUser.isAnonymous?(console.log("   ,   "),e.push("/app")):s.currentUser&&console.log("     ")});const a=(p="login")=>{console.log("   :",p),r.value=p,n.value=!0},c=()=>{console.log("   "),n.value=!1},u=p=>{console.log("  :",p),c(),e.push("/app")},d=p=>{console.log("    :",p),o.value=p,i.value=!0},f=()=>{console.log("    "),i.value=!1,o.value=""},v=()=>{f(),a("login")};return(p,h)=>(w(),b("div",my,[l("header",vy,[l("div",yy,[h[3]||(h[3]=l("div",{class:"logo-section"},[l("h1",{class:"app-title"},"  "),l("p",{class:"tagline"},"     ")],-1)),l("div",wy,[l("button",{onClick:h[0]||(h[0]=m=>a("login")),class:"btn btn-login"},"  "),l("button",{onClick:h[1]||(h[1]=m=>a("signup")),class:"btn btn-signup"},"  ")])])]),l("main",by,[l("section",_y,[l("div",ky,[h[5]||(h[5]=l("h2",{class:"hero-title"},[Ae("   "),l("br"),l("span",{class:"highlight"}," "),Ae("  ")],-1)),h[6]||(h[6]=l("p",{class:"hero-description"},[Ae("     "),l("br"),Ae("    ")],-1)),l("div",Sy,[l("button",{onClick:h[2]||(h[2]=m=>a("signup")),class:"cta-button"},"    "),h[4]||(h[4]=l("p",{class:"cta-note"},"     ",-1))])]),h[7]||(h[7]=zn('<div class="hero-visual" data-v-8de8d0d9><div class="floating-cards" data-v-8de8d0d9><div class="card-item" data-v-8de8d0d9></div><div class="card-item" data-v-8de8d0d9></div><div class="card-item" data-v-8de8d0d9></div><div class="card-item" data-v-8de8d0d9></div><div class="card-item" data-v-8de8d0d9></div></div></div>',1))]),h[8]||(h[8]=zn('<section class="features-section" data-v-8de8d0d9><h3 class="section-title" data-v-8de8d0d9>  </h3><div class="features-grid" data-v-8de8d0d9><div class="feature-card" data-v-8de8d0d9><div class="feature-icon" data-v-8de8d0d9></div><h4 data-v-8de8d0d9> </h4><p data-v-8de8d0d9>       </p></div><div class="feature-card" data-v-8de8d0d9><div class="feature-icon" data-v-8de8d0d9></div><h4 data-v-8de8d0d9> </h4><p data-v-8de8d0d9>     </p></div><div class="feature-card" data-v-8de8d0d9><div class="feature-icon" data-v-8de8d0d9></div><h4 data-v-8de8d0d9> </h4><p data-v-8de8d0d9>3, 5,      </p></div><div class="feature-card" data-v-8de8d0d9><div class="feature-icon" data-v-8de8d0d9></div><h4 data-v-8de8d0d9> </h4><p data-v-8de8d0d9>     </p></div></div></section>',1))]),fe(Ru,{isVisible:n.value,initialMode:r.value,onClose:c,onSuccess:u,onShowEmailVerification:d},null,8,["isVisible","initialMode"]),fe(gy,{isVisible:i.value,email:o.value,onClose:f,onGoToLogin:v},null,8,["isVisible","email"])]))}}),$y=tt(Cy,[["__scopeId","data-v-8de8d0d9"]]),Or=[{id:"one_card",spreadId:"one_card",name:"One Card Spread",nameKr:"  ",description:"       ",cardCount:1,positions:[{position:1,name:"",description:"   ",x:50,y:50}],isPremium:!1,topics:["general","love","career","money","health"]},{id:"three_card_timeline",spreadId:"three_card_timeline",name:"Past-Present-Future",nameKr:"--",description:"     ",cardCount:3,positions:[{position:1,name:"",description:"     ",x:20,y:50},{position:2,name:"",description:"  ",x:50,y:50},{position:3,name:"",description:"  ",x:80,y:50}],isPremium:!1,topics:["general","love","career","money"]},{id:"seven_star",spreadId:"seven_star",name:"Seven Star",nameKr:" ",description:"7      ",cardCount:7,positions:[{position:1,name:" ",description:"    ",x:50,y:20},{position:2,name:" ",description:"    ",x:50,y:50},{position:3,name:" ",description:"   ",x:20,y:35},{position:4,name:" ",description:"  ",x:80,y:35},{position:5,name:" ",description:"    ",x:20,y:65},{position:6,name:"",description:"  ",x:80,y:65},{position:7,name:" ",description:" ",x:50,y:80}],isPremium:!0,topics:["general","love","career","money"]},{id:"celtic_cross",spreadId:"celtic_cross",name:"Celtic Cross",nameKr:" ",description:"   10  ",cardCount:10,positions:[{position:1,name:"",description:"   ",x:40,y:50},{position:2,name:"",description:"  ",x:40,y:50},{position:3,name:"",description:"   ",x:40,y:80},{position:4,name:"",description:"  ",x:15,y:50},{position:5,name:" ",description:"   ",x:40,y:20},{position:6,name:"",description:"  ",x:65,y:50},{position:7,name:"",description:"   ",x:85,y:80},{position:8,name:"",description:"   ",x:85,y:60},{position:9,name:" ",description:"   ",x:85,y:40},{position:10,name:" ",description:"    ",x:85,y:20}],isPremium:!0,topics:["general","love","career","money"]},{id:"cup_of_relationship",spreadId:"cup_of_relationship",name:"Cup of Relationship",nameKr:"  ",description:"    11  ",cardCount:11,positions:[{position:1,name:"",description:"   ",x:20,y:80},{position:2,name:"",description:"   ",x:80,y:80},{position:3,name:" ",description:"    ",x:50,y:75},{position:4,name:" ",description:"  ",x:35,y:60},{position:5,name:"  ",description:"    ",x:50,y:50},{position:6,name:"  ",description:"    ",x:65,y:60},{position:7,name:"   ?",description:"    ",x:25,y:40},{position:8,name:"   ?",description:"    ",x:75,y:40},{position:9,name:"   ?",description:"   ",x:35,y:20},{position:10,name:"   ?",description:"   ",x:65,y:20},{position:11,name:"",description:"  ",x:50,y:5}],isPremium:!0,topics:["love"]},{id:"career_path",spreadId:"career_path",name:"Career Path",nameKr:" ",description:"   7 ",cardCount:7,positions:[{position:1,name:" ",description:"  ",x:50,y:50},{position:2,name:"",description:"  ",x:25,y:30},{position:3,name:"",description:"  ",x:75,y:30},{position:4,name:"",description:" ",x:25,y:70},{position:5,name:"",description:"  ",x:75,y:70},{position:6,name:"",description:"  ",x:50,y:20},{position:7,name:"",description:" ",x:50,y:80}],isPremium:!0,topics:["career"]}],bn=t=>Or.find(e=>e.spreadId===t),_n=t=>Or.filter(e=>e.topics.includes(t));class Py{constructor(e,s){this.cards=e,this.topic=s}async generateInterpretation(){const e=this.cards.map((c,u)=>({meaning:this.getPositionMeaning(c,u),card:c})),s=this.generateOverallPattern(),n=this.analyzeRelationships(),r=this.extractKeywords(),i=this.generateAdvice(),o=this.generateElementAnalysis(),a=this.generateTimelineAnalysis();return{positions:e,overallPattern:s,relationships:n,keywords:r,advice:i,elementAnalysis:o,timelineAnalysis:a}}getPositionMeaning(e,s){var o,a,c,u;const r=["  ","  ","  ","  ","  ","  ","  ","  "," ","  "][s],i=((a=(o=e.meanings)==null?void 0:o[this.topic])==null?void 0:a[e.orientation])||((u=(c=e.meanings)==null?void 0:c.general)==null?void 0:u[e.orientation])||"     .";return`${r}: ${i}`}generateOverallPattern(){const e=this.cards.filter(r=>r.arcana==="major").length,s=this.cards.filter(r=>r.orientation==="upright").length;let n="";return e>=5?n="    . ":e>=3?n="   . ":n="    . ",s>=7?n+="    .":s<=3?n+="  ,   .":n+=" ,   .",n}analyzeRelationships(){const e=[];this.cards[2].suit===this.cards[0].suit&&this.cards[2].arcana==="minor"&&this.cards[0].arcana==="minor"&&e.push("       ."),this.cards[0].orientation===this.cards[5].orientation&&e.push("      ."),this.cards[6].orientation!==this.cards[8].orientation&&e.push("      .");const s=this.analyzeElements();return s.dominant&&e.push(`${s.dominant}     .`),e}analyzeElements(){const e={fire:0,water:0,air:0,earth:0},s={wands:"fire",cups:"water",swords:"air",pentacles:"earth"};this.cards.forEach(r=>{r.suit&&s[r.suit]&&e[s[r.suit]]++});const n=Object.entries(e).sort(([,r],[,i])=>i-r)[0];return{dominant:n[1]>=3?n[0]:null,counts:e}}extractKeywords(){const e=new Set;return this.cards.forEach(s=>{s.keywords&&s.keywords[s.orientation]&&s.keywords[s.orientation].forEach(n=>e.add(n))}),Array.from(e).slice(0,10)}generateAdvice(){const e=this.cards[9],s=this.cards[6];let n="";return e.orientation==="upright"?n="    . ":n="     ,    . ",s.orientation==="upright"?n+="   ,   .":n+="     .",n}generateElementAnalysis(){const e=this.analyzeElements(),s=[],{fire:n,water:r,air:i,earth:o}=e.counts;return n>=3&&s.push("()   - , ,   ."),r>=3&&s.push("()   - , ,   ."),i>=3&&s.push("()   - , ,   ."),o>=3&&s.push("()   - , ,   ."),n===0&&s.push("()   -      ."),r===0&&s.push("()   -    ."),i===0&&s.push("()   -    ."),o===0&&s.push("()   -    ."),this.cards.filter(c=>c.arcana==="major").length>=4&&s.push("   -   ,  ."),s}generateTimelineAnalysis(){const e=[this.cards[2],this.cards[3]],s=[this.cards[0],this.cards[1]],n=[this.cards[4],this.cards[5],this.cards[9]];return{past:{energy:this.analyzeTimeEnergy(e),lesson:"    "},present:{energy:this.analyzeTimeEnergy(s),challenge:"   "},future:{energy:this.analyzeTimeEnergy(n),potential:"  "},flow:this.analyzeTimeFlow(e,s,n),advice:this.generateTimelineAdvice(e,s,n)}}analyzeTimeEnergy(e){const s=e.filter(r=>r.orientation==="upright").length,n=e.filter(r=>r.arcana==="major").length;return s===e.length?"   ":s===0?"   ":n>=2?"   ":" "}analyzeTimeFlow(e,s,n){const r=e.filter(a=>a.orientation==="upright").length,i=s.filter(a=>a.orientation==="upright").length,o=n.filter(a=>a.orientation==="upright").length;return r<i&&i<o?"        .":r>i&&i>o?"   ,        .":"     ."}generateTimelineAdvice(e,s,n){return n[2].orientation==="upright"?"        .":"   ,    ."}}const Ey=t=>{const e={};t.forEach((n,r)=>{const i=r+1;let o="";switch(i){case 1:o=Ps(n,"present_situation");break;case 2:o=Iy(n,t[0]);break;case 3:o=Ps(n,"distant_past");break;case 4:o=Ps(n,"recent_past");break;case 5:o=Ps(n,"possible_future");break;case 6:o=Ps(n,"immediate_future");break;case 7:o=Ps(n,"your_approach");break;case 8:o=Ps(n,"external_influences");break;case 9:o=Ry(n);break;case 10:o=My(n,t);break}e[`position_${i}`]=o});const s=Oy(t,e);return{interpretations:e,overallStory:s,specialInsights:e0(t)}},Ty=t=>{const e={};t.forEach((n,r)=>{const i=r+1;let o="";switch(i){case 1:o=getStarInfluenceInterpretation(n,"past_star");break;case 2:o=getStarInfluenceInterpretation(n,"present_star");break;case 3:o=getHiddenInfluenceInterpretation(n);break;case 4:o=getDesireInterpretation(n,"conscious");break;case 5:o=getDesireInterpretation(n,"unconscious");break;case 6:o=getStarAdviceInterpretation(n);break;case 7:o=getStarOutcomeInterpretation(n,t);break}e[`star_${i}`]=o});const s=jy(t);return{interpretations:e,constellationReading:s,cosmicGuidance:t0(t)}},Ay=t=>{const e={};t.forEach((n,r)=>{const i=r+1;let o="";switch(i){case 1:o=getEmotionalStateInterpretation(n,"your_feelings");break;case 2:o=getEmotionalStateInterpretation(n,"partner_feelings");break;case 3:o=getRelationshipFoundationInterpretation(n);break;case 4:o=getCommunicationInterpretation(n);break;case 5:o=getIntimacyInterpretation(n);break;case 6:o=getObstacleInterpretation(n);break;case 7:o=getRelationshipFutureInterpretation(n,t);break}e[`cup_${i}`]=o});const s=Ly(t);return{interpretations:e,loveHarmony:s,relationshipAdvice:s0(t)}};function Ps(t,e){const s=t.card,n=t.orientation,r=lo(s,n,t.topic),i=Dy(s,n,e),o=Uy(s,n),a=xy(s,n,e),c=Ny(s),u=Ky(s),d=Fy(s),f=By(s),v=Hy(s),p=zy(s),h=Vy(s,n);return{basic:r,deeper:i,shadow:o,advice:a,timing:c,symbols:u,numerology:d,elements:f,chakras:v,crystals:p,affirmation:h}}function Iy(t,e){const s=t.card,n=e.card,r=Xy(n,s),i=o0(),o=a0(s,t.orientation);return{challengeNature:`  ${Yy(s)}  .`,interaction:r,conflictType:i,resolution:o,hiddenOpportunity:l0(),transformationPath:c0(s,t.orientation)}}function Ry(t){const e=t.card,s=t.orientation,n=s==="upright"?getHopeAspect(e):getShadowHope(e),r=s==="upright"?getUnderlyingFear(e):getDeepFear(e);return{hope:n,fear:r,balance:`   ${n.theme}()   ${r.theme}()   .`,integration:getIntegrationAdvice(n,r),unconsciousPattern:getUnconsciousPattern(e)}}function My(t,e){const s=t.card,n=t.orientation;analyzeEnergyFlow(e);const r=estimateTimeline(s,e);return extractKeyLessons(e),{outcome:getOutcomeMeaning(s,n),probability:calculateOutcomeProbability(e),timeline:r,keyFactors:identifyKeyFactors(e),alternativePaths:getAlternativePaths(s,e),finalAdvice:generateFinalAdvice(s,n,e),spiritualMessage:getSpiritualMessage(s),nextSteps:getNextSteps(s,n)}}function Oy(t,e){const s=qy(t),n=Jy(t),r=findNumerologicalPattern(t);let i=`    ${s.primary}   .

`;return i+=` : ${e.position_3.basic} , `,i+=`${e.position_4.basic}   ${e.position_1.basic}  .

`,i+=`     ${e.position_2.challengeNature}. `,i+=` ${e.position_2.interaction}

`,i+=` : ${e.position_6.basic}   , `,i+=` ${e.position_5.basic}   .

`,i+=` : ${e.position_7.basic}   `,i+=`${e.position_9.balance}

`,i+=` : ${e.position_8.basic}      .

`,i+=`: ${e.position_10.outcome} `,i+=`${e.position_10.finalAdvice}

`,n.imbalance&&(i+=`  : ${n.message}
`),r.pattern&&(i+=`  : ${r.message}
`),i}function jy(t){const e=t.map(i=>getStarEnergy(i.card)),s=findDominantElement(e),n=generateCosmicMessage(t);let r=` 7    :

`;return r+=`   (): ${e[0].message}
`,r+=`   (): ${e[1].message}
`,r+=`   ( ): ${e[2].message}
`,r+=`   (): ${e[3].message}
`,r+=`   (): ${e[4].message}
`,r+=`   (): ${e[5].message}
`,r+=`   (): ${e[6].message}

`,r+=`  : ${n}
`,r+=`  : ${s.description}
`,r}function Ly(t){const e=getEmotionalEnergy(t[0]),s=getEmotionalEnergy(t[1]),n=calculateCompatibility(e,s),r=analyzeFoundationStrength(t[2]),i=analyzeCommunicationQuality(t[3]),o=analyzeIntimacyLevel(t[4]),a=analyzeObstacleImpact(t[5]);return{overallHarmony:calculateOverallHarmony(n,r,i,o,a),yourEnergy:e,partnerEnergy:s,compatibility:n,strengths:identifyRelationshipStrengths(t),challenges:identifyRelationshipChallenges(t),growthAreas:identifyGrowthAreas(t),soulConnection:analyzeSoulConnection(t),karmicLessons:identifyKarmicLessons(t)}}function lo(t,e,s){const n=t.card||t;if(n.meanings){if(n.meanings[s]&&n.meanings[s][e])return n.meanings[s][e];if(n.meanings.general&&n.meanings.general[e])return n.meanings.general[e]}return`${n.nameKr||n.name_kr||n.name||"   "}  ${e==="upright"?"":""} .`}function Dy(t,e,s){var i;const n={present_situation:{major:"         .",cups:"      .",wands:"      .",swords:"     .",pentacles:",     ."}},r=t.suit||"major";return((i=n[s])==null?void 0:i[r])||"   ."}function Uy(t,e){return e==="reversed"?`   ${t.nameKr}      .`:"    ,      ."}function xy(t,e,s){return{present_situation:"    ,      .",distant_past:"     ,  .",recent_past:"    ,    .",possible_future:"          .",immediate_future:"   ,     .",your_approach:"    .   .",external_influences:"   ,   .",hopes_fears:"    ,     .",final_outcome:"   ,    ."}[s]||"     ."}function Ny(t){const e={Ace:" , 1-3 ",Two:" , 2 ",Three:", 3-3",Four:", 4-4",Five:", 5-5",Six:", 6-6",Seven:" , 7-7",Eight:", 8 ",Nine:" , 9-9",Ten:"  , 10-10",Page:" ,  ",Knight:" , 2-4",Queen:" , 3-6",King:" , 6-1"};if(t.arcana==="major")return"  ,    ";const s=t.name.split(" ")[0];return e[s]||"     "}function Ky(t){const e=[];if(t.arcana==="major"){const s={0:[" ",""," "],1:["","",""],2:["","",""],3:["","",""],4:["","",""],5:[""," ",""],6:["","",""],7:["","",""],8:[" ","",""],9:[" ","",""],10:[" ","",""]};e.push(...s[t.number]||[])}else{const s={cups:["","",""],wands:["","",""],swords:["","",""],pentacles:["","",""]};e.push(...s[t.suit]||[])}return e}function Fy(t){return t.number===void 0||t.number===null?"":{0:"  ",1:" , , ",2:", , ",3:", , ",4:", , ",5:", , ",6:", , ",7:",  , ",8:" , , ",9:", , ",10:"   ",11:",  ,  ",12:",  ,  ",13:", , ",14:", , ",15:" ,  ",16:" , , ",17:", ,  ",18:", , ",19:", , ",20:", , ",21:", ,  "}[t.number]||` ${t.number} `}function By(t){const e={cups:" - , , , ",wands:" - , , , ",swords:" - , , , ",pentacles:" - , , , "};return t.suit?e[t.suit]||"":t.arcana==="major"?{0:" -  ",1:"  ",2:" -  ",3:" -  ",4:" -  "}[t.number]||" ":""}function Hy(t){var r;const e={cups:{Ace:"  -  ",Two:"  -  ",Three:"  -  "},wands:{Ace:"  -  ",Two:"  -  "},swords:{Ace:"  -  ",Two:"3   -  "},pentacles:{Ace:"  -  ",Two:"  -  "}},s={0:"  -  ",1:"  -  ",2:"3   -  ",3:"  -  ",4:"  -  ",5:"  -  ",6:"  -  ",7:"  -  ",8:"  -   ",9:"3   -  ",10:"  -  "};if(t.arcana==="major")return s[t.number]||"  -  ";const n=t.name.split(" ")[0];return((r=e[t.suit])==null?void 0:r[n])||"  "}function zy(t){const e={cups:["","",""],wands:["",""," "],swords:[" ","",""],pentacles:["","",""]},s={0:[" ",""],1:["",""],2:["",""],3:["",""],4:[" ",""]};return t.arcana==="major"?s[t.number]||[""," "]:e[t.suit]||[" "]}function Vy(t,e){const s=` ${t.nameKr}  .`;return e==="upright"?`${s}      .`:`${s}     .`}function qy(t){const e=[];let s=0;const n={cups:0,wands:0,swords:0,pentacles:0};t.forEach(({card:i})=>{i.arcana==="major"?(s++,e.push(Wy(i))):n[i.suit]++});const r=Object.entries(n).sort(([,i],[,o])=>o-i)[0];return{primary:s>3?"  ":Gy(r[0]),secondary:e,balance:analyzeThemeBalance(n,s)}}function Wy(t){return{0:"   ",1:"  ",2:"  ",3:" ",4:" ",5:"  ",6:" ",7:" ",8:"  ",9:" ",10:" ",11:" ",12:"  ",13:" ",14:" ",15:" ",16:" ",17:" ",18:" ",19:" ",20:" ",21:" "}[t.number]||" "}function Gy(t){return{cups:"  ",wands:"  ",swords:"  ",pentacles:"  "}[t]||" "}function Jy(t){const e={water:0,fire:0,air:0,earth:0};t.forEach(({card:r})=>{if(r.suit){const i={cups:"water",wands:"fire",swords:"air",pentacles:"earth"};e[i[r.suit]]++}});const s=Object.entries(e).sort(([,r],[,i])=>i-r)[0],n=Object.entries(e).filter(([,r])=>r===0).map(([r])=>r);return{dominant:s[0],missing:n,imbalance:n.length>0,message:Qy(e)}}function Qy(t){const e=Object.values(t).reduce((s,n)=>s+n,0);return t.water>e/2?"    .      .":t.fire>e/2?"   .       .":t.air>e/2?"    .    .":t.earth>e/2?"   .      .":"     ."}function Yy(t){return`${t.nameKr}`}function Xy(t,e){return t.suit===e.suit?"     .":Zy(t.suit,e.suit)}function Zy(t,e){const s={"cups-wands":"    -    .","cups-swords":"    -    .","cups-pentacles":"    -   .","wands-swords":"    -    .","wands-pentacles":"    -    .","swords-pentacles":"    -     ."},n=[t,e].sort().join("-");return s[n]||"      ."}function e0(t){return{soulLesson:identifySoulLesson(t),karmicDebt:identifyKarmicDebt(t),spiritualGifts:identifySpiritualGifts(t),shadowWork:identifyShadowWork(t),timeline:estimateOverallTimeline(t),actionSteps:generateActionSteps(t)}}function t0(t){return{stellarAlignment:analyzeStarAlignment(t),cosmicTiming:determineCosmicTiming(t),universalMessage:extractUniversalMessage(t),starSeedActivation:checkStarSeedActivation(t),dimensionalShift:analyzeDimensionalShift(t)}}function s0(t){return{communicationTips:generateCommunicationTips(t),intimacyGuidance:generateIntimacyGuidance(t),conflictResolution:generateConflictResolution(t),growthOpportunities:identifyGrowthOpportunities(t),soulContractInsights:analyzeSoulContract(t),healingRecommendations:generateHealingRecommendations(t)}}function n0(t,e,s){const n=e.map((r,i)=>({card:r.card,position:r.position,orientation:r.orientation,spread:t,topic:s}));switch(t){case"celtic_cross":return Ey(n);case"seven_star":return Ty(n);case"cup_of_relationship":return Ay(n);default:return{message:"     ."}}}function r0(t,e,s,n){if(e.spreadId==="one_card"||e.spreadId==="three_card_timeline")return{overallMessage:ml(t,s),cards:t.map((i,o)=>{var u,d,f,v,p;const a=i.card||i,c=((d=(u=a.meanings)==null?void 0:u[s])==null?void 0:d[i.orientation])||((v=(f=a.meanings)==null?void 0:f.general)==null?void 0:v[i.orientation])||`${a.nameKr||a.name}  .`;return{...i,interpretation:{basic:c,advice:i0(i,e.spreadId,o),keywords:((p=a.keywords)==null?void 0:p[i.orientation])||[]}}})};if(!n)return{overallMessage:ml(t,s),cards:t.map(i=>({...i,interpretation:{basic:lo(i.card||i,i.orientation,s)}}))};const r=n0(e.spreadId,t,s);return{overallMessage:r.overallStory||r.constellationReading||r.loveHarmony.overallHarmony,cards:t.map((i,o)=>({...i,interpretation:{basic:lo(i.card,i.orientation,s),deeper:r.interpretations[`position_${o+1}`]||r.interpretations[`star_${o+1}`]||r.interpretations[`cup_${o+1}`],premium:!0}})),premiumInsights:r.specialInsights||r.cosmicGuidance||r.relationshipAdvice,isPremium:!0}}function ml(t,e){const s={general:"       .",love:"     .",career:"     .",money:"    .",health:"    ."};return s[e]||s.general}function i0(t,e,s){t.card;const n=t.orientation||"upright";if(e==="one_card")return n==="upright"?"        .":"      .";if(e==="three_card_timeline"){const i=["","",""][s]||"";if(i==="")return"     ,  .";if(i==="")return"    ,      .";if(i==="")return n==="upright"?"    .    .":"     ,      ."}return"     ."}function o0(t,e){return"     "}function a0(t,e){return e==="upright"?"       .":"       ."}function l0(t){return"      ."}function c0(t,e){return"         ."}const u0=[{cards:["The Fool","The World"],meaning:"  .     .",advice:" ,   .",keywords:["","",""]},{cards:["The Lovers","Two of Cups"],meaning:"     .",advice:"    .",keywords:["","",""]},{cards:["Death","The Tower"],meaning:"   .      .",advice:"    .",keywords:["",""," "]},{cards:["The Star","The Sun"],meaning:"   .   .",advice:"     .",keywords:["","",""]},{cards:["The Hermit","The High Priestess"],meaning:"     .",advice:"      .",keywords:[" ","",""]},{cards:["Three of Pentacles","The Emperor"],meaning:"      .",advice:"   .",keywords:["","",""]},{cards:["Nine of Cups","Ten of Cups"],meaning:"     .",advice:"    .",keywords:["","",""]},{cards:["Five of Swords","Five of Cups"],meaning:"    .",advice:"     .",keywords:["","",""]}],vl={"cups-cups":{meaning:"   .  .",element:"    ."},"wands-wands":{meaning:"   .  .",element:"    ."},"swords-swords":{meaning:"     .",element:"    ."},"pentacles-pentacles":{meaning:"     .",element:"    ."},"cups-wands":{meaning:"   .   .",element:"     ."},"swords-pentacles":{meaning:"     .",element:"    ."}};class Mu{static analyzeCardPair(e,s){const n=this.findSpecialCombination([e.name,s.name]);if(n)return{type:"special",...n};if(e.suit&&s.suit){const r=`${e.suit}-${s.suit}`,i=vl[r]||vl[`${s.suit}-${e.suit}`];if(i)return{type:"suit",...i}}if(e.number!==void 0&&s.number!==void 0){const r=this.analyzeNumberRelation(e.number,s.number);if(r)return{type:"number",...r}}return e.arcana!==s.arcana?{type:"arcana_mix",meaning:"    .",advice:"     ."}:null}static analyzeCardPattern(e){const s={majorDominant:0,suitBalance:{},numberSequence:[],elementBalance:{},uprightReversed:{upright:0,reversed:0}};return e.forEach(n=>{n.arcana==="major"&&s.majorDominant++,n.suit&&(s.suitBalance[n.suit]=(s.suitBalance[n.suit]||0)+1),n.number!==void 0&&s.numberSequence.push(n.number),s.uprightReversed[n.orientation]++}),this.interpretPatterns(s,e.length)}static findSpecialCombination(e){return u0.find(s=>s.cards.every(n=>e.includes(n))||s.cards.every((n,r)=>n===e[r]))||null}static analyzeNumberRelation(e,s){const n=Math.abs(e-s);return n===0?{meaning:"      .",advice:` ${e}   .`}:n===1?{meaning:"     .",advice:"   ."}:e+s===10?{meaning:"  (10)   .",advice:"   ."}:null}static interpretPatterns(e,s){const n=[];e.majorDominant/s>.5&&n.push({type:"major_dominant",meaning:"   .   .",advice:"     ."});const i=Object.entries(e.suitBalance).sort(([,a],[,c])=>c-a)[0];if(i&&i[1]>=s*.4){const a={cups:"    .",wands:"   .",swords:"    .",pentacles:"   ."};n.push({type:"suit_dominant",suit:i[0],meaning:a[i[0]],advice:"    ."})}if(e.uprightReversed.reversed/s>.6&&n.push({type:"reversed_dominant",meaning:"    .",advice:"  ,   ."}),e.numberSequence.length>=3){const a=this.analyzeNumberSequence(e.numberSequence);a&&n.push(a)}return n}static analyzeNumberSequence(e){const s=[...e].sort((a,c)=>a-c),n=e.every((a,c)=>c===0||a>=e[c-1]),r=e.every((a,c)=>c===0||a<=e[c-1]);if(n&&s[s.length-1]-s[0]===s.length-1)return{type:"ascending_sequence",meaning:"    .",advice:"   ."};if(r)return{type:"descending_sequence",meaning:"   .",advice:"    ."};const i={};e.forEach(a=>{i[a]=(i[a]||0)+1});const o=Object.entries(i).find(([a,c])=>c>=2);return o?{type:"repeated_number",number:o[0],meaning:` ${o[0]}   .`,advice:"     ."}:null}static analyzeTimelineInfluence(e,s,n){const r={past:this.summarizeCards(e),present:this.summarizeCard(s),future:this.summarizeCards(n),flow:"",advice:""};return r.past.energy==="negative"&&r.future.energy==="positive"?(r.flow="      .",r.advice="     ."):r.past.energy==="positive"&&r.future.energy==="negative"?(r.flow="   .",r.advice="      ."):(r.flow="   .",r.advice="     ."),r}static summarizeCard(e){return{energy:e.orientation==="upright"?"positive":"challenging",theme:e.arcana==="major"?"spiritual":"practical",element:this.getCardElement(e)}}static summarizeCards(e){const s={energy:"",dominantTheme:"",elements:[]},n=e.filter(i=>i.orientation==="upright").length;s.energy=n>e.length/2?"positive":"challenging";const r=e.filter(i=>i.arcana==="major").length;return s.dominantTheme=r>e.length/2?"spiritual":"practical",s.elements=e.map(i=>this.getCardElement(i)),s}static getCardElement(e){const s={cups:"",wands:"",swords:"",pentacles:""};return e.suit?s[e.suit]:{0:"",1:"",2:"",3:"",4:""}[e.number]||""}}class d0{static enhanceInterpretation(e,s,n){var o;const i={basic:((o=e.meanings[s])==null?void 0:o[e.orientation])||e.meanings.general[e.orientation],detailed:"",practical:"",spiritual:"",timing:"",advice:""};switch(s){case"love":i.detailed=this.getLoveDetailed(e,n),i.practical=this.getLovePractical(e),i.spiritual=this.getLoveSpiritual(e),i.timing=this.getLoveTiming(e),i.advice=this.getLoveAdvice(e);break;case"career":i.detailed=this.getCareerDetailed(e,n),i.practical=this.getCareerPractical(e),i.spiritual=this.getCareerSpiritual(e),i.timing=this.getCareerTiming(e),i.advice=this.getCareerAdvice(e);break;case"money":i.detailed=this.getMoneyDetailed(e,n),i.practical=this.getMoneyPractical(e),i.spiritual=this.getMoneySpiritual(e),i.timing=this.getMoneyTiming(e),i.advice=this.getMoneyAdvice(e);break;case"health":i.detailed=this.getHealthDetailed(e,n),i.practical=this.getHealthPractical(e),i.spiritual=this.getHealthSpiritual(e),i.timing=this.getHealthTiming(e),i.advice=this.getHealthAdvice(e);break}return i}static getLoveDetailed(e,s){var r;return((r={"The Lovers":{upright:"   .     .",reversed:"     ."},"Two of Cups":{upright:"     .",reversed:"      ."}}[e.name])==null?void 0:r[e.orientation])||`${e.nameKr}   ${e.orientation==="upright"?"":""}  .`}static getLovePractical(e){return e.suit==="cups"?"      .":e.suit==="pentacles"?"     .":"   ."}static getLoveSpiritual(e){return e.arcana==="major"?"       .":"    ."}static getLoveTiming(e){const s={Ace:"    - 1-3 ",Two:"   - 2-4 ",Three:"   - 3 "},n=e.name.split(" ")[0];return s[n]||"     ."}static getLoveAdvice(e){return e.orientation==="upright"?"        .":"    ."}static getCareerDetailed(e,s){return`${e.nameKr}    .`}static getCareerPractical(e){return"  ."}static getCareerSpiritual(e){return"    ."}static getCareerTiming(e){return"    ."}static getCareerAdvice(e){return"    ."}static getMoneyDetailed(e,s){return`${e.nameKr}     .`}static getMoneyPractical(e){return"   ."}static getMoneySpiritual(e){return"    ."}static getMoneyTiming(e){return"    ."}static getMoneyAdvice(e){return"   ."}static getHealthDetailed(e,s){return`${e.nameKr}      .`}static getHealthPractical(e){return"    ."}static getHealthSpiritual(e){return" ,    ."}static getHealthTiming(e){return"     ."}static getHealthAdvice(e){return"   ."}}class yl{static analyzeTimelineInfluence(e,s,n){const r=this.analyzePastEnergy(e),i=this.analyzePresentEnergy(s),o=this.analyzeFutureEnergy(n),a=this.analyzeEnergyFlow(r,i,o);return{past:r,present:i,future:o,flow:a.description,advice:a.advice}}static analyzePastEnergy(e){const s=this.getDominantSuit(e),n=e.filter(i=>i.arcana==="major").length;let r="";return n>=2?r="  ":s==="cups"?r="  ":s==="wands"?r=" ":s==="swords"?r=" ":s==="pentacles"?r="  ":r="  ",{energy:r,cards:e}}static analyzePresentEnergy(e){let s="";return e.arcana==="major"?s=`${e.nameKr}  `:s={cups:"  ",wands:"  ",swords:"  ",pentacles:" "}[e.suit]||" ",e.orientation==="reversed"&&(s+=" "),{energy:s,card:e}}static analyzeFutureEnergy(e){const s=e.filter(i=>i.orientation==="upright").length,n=e.filter(i=>i.arcana==="major").length;let r="";return s===e.length?r="  ":s===0?r="  ":n>=1?r="  ":r="  ",{energy:r,cards:e}}static analyzeEnergyFlow(e,s,n){let r="",i="";return e.energy.includes("")&&s.energy.includes("")?(r="     .",i="   ."):e.energy.includes("")&&n.energy.includes("")?(r="    .",i="   ."):(r="    .",i="   ."),{description:r,advice:i}}static getDominantSuit(e){var r;const s={cups:0,wands:0,swords:0,pentacles:0};e.forEach(i=>{i.suit&&s[i.suit]++});const n=Math.max(...Object.values(s));return n===0?null:((r=Object.entries(s).find(([i,o])=>o===n))==null?void 0:r[0])||null}}Mu.analyzeTimelineInfluence=yl.analyzeTimelineInfluence.bind(yl);class h0{constructor(e){this.userProfile=e}enhanceInterpretation(e,s){return{personal:this.getPersonalMessage(e),zodiacConnection:this.getZodiacConnection(e),numerological:this.getNumerologicalInsight(e),seasonal:this.getSeasonalMessage(e),lifePhase:this.getLifePhaseGuidance(e)}}getPersonalMessage(e){return!this.userProfile.readingHistory||this.userProfile.readingHistory.length===0?"        .":this.analyzePreviousReadings().includes(e.name)?`${e.nameKr}   .     .`:"     ."}getZodiacConnection(e){var r;return this.userProfile.zodiacSign?((r={Aries:{"The Emperor":"  .    .","The Tower":"    .","Ace of Wands":"    ."},Taurus:{"The Hierophant":"  .   .","The Empress":"   .","King of Pentacles":"   ."},Gemini:{"The Lovers":"  .   .","The Magician":"  .","Eight of Swords":"  ."}}[this.userProfile.zodiacSign])==null?void 0:r[e.name])||`${this.userProfile.zodiacSign}  ${e.nameKr}  .`:""}getNumerologicalInsight(e){if(!this.userProfile.lifePathNumber)return"";const n={1:"    .",2:"     .",3:"    .",4:"     .",5:"     .",6:"   .",7:"    .",8:"    .",9:"    .",11:"     .",22:"      ."}[this.userProfile.lifePathNumber]||"";return e.number!==void 0&&e.number===this.userProfile.lifePathNumber?` ${this.userProfile.lifePathNumber}   !  . ${n}`:n}getSeasonalMessage(e){var o;const n=new Date().getMonth();let r="";return n>=2&&n<=4?r="spring":n>=5&&n<=7?r="summer":n>=8&&n<=10?r="autumn":r="winter",((o={spring:{"The Fool":"    .","Ace of Wands":"    .","Three of Cups":"    ."},summer:{"The Sun":"    .","Eight of Pentacles":"     .","The Star":"    ."},autumn:{Death:"    .","Nine of Pentacles":"     .","The Hermit":"    ."},winter:{"The Hermit":"     .","Four of Swords":"   .","The World":"     ."}}[r])==null?void 0:o[e.name])||`   ${e.nameKr}  .`}getLifePhaseGuidance(e){if(!this.userProfile.birthDate)return"";const s=this.calculateAge(this.userProfile.birthDate);let n="";return s<21?n="youth":s<35?n="youngAdult":s<50?n="midlife":s<65?n="mature":n="elder",{youth:"       .",youngAdult:"     .",midlife:"      .",mature:"    .",elder:"       ."}[n]}analyzePreviousReadings(){if(!this.userProfile.readingHistory)return[];const e=[];return this.userProfile.readingHistory.forEach(s=>{s.cards.forEach(n=>{e.push(n.name)})}),e}calculateAge(e){const s=new Date;let n=s.getFullYear()-e.getFullYear();const r=s.getMonth()-e.getMonth();return(r<0||r===0&&s.getDate()<e.getDate())&&n--,n}}class f0{static calculate(e){const s=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();let i=this.reduceNumber(s)+this.reduceNumber(n)+this.reduceNumber(r);return i===11||i===22||i===33?i:this.reduceNumber(i)}static reduceNumber(e){let s=e;for(;s>9&&s!==11&&s!==22&&s!==33;)s=s.toString().split("").reduce((n,r)=>n+parseInt(r),0);return s}}class p0{static getZodiacSign(e){const s=e.getMonth()+1,n=e.getDate();return s===3&&n>=21||s===4&&n<=19?"Aries":s===4&&n>=20||s===5&&n<=20?"Taurus":s===5&&n>=21||s===6&&n<=20?"Gemini":s===6&&n>=21||s===7&&n<=22?"Cancer":s===7&&n>=23||s===8&&n<=22?"Leo":s===8&&n>=23||s===9&&n<=22?"Virgo":s===9&&n>=23||s===10&&n<=22?"Libra":s===10&&n>=23||s===11&&n<=21?"Scorpio":s===11&&n>=22||s===12&&n<=21?"Sagittarius":s===12&&n>=22||s===1&&n<=19?"Capricorn":s===1&&n>=20||s===2&&n<=18?"Aquarius":"Pisces"}}class pr{static generateDeepInterpretation(e){const s=e.cards,n=e.topic||"general",r=s.filter(c=>c.arcana==="major").length,i=s.filter(c=>c.orientation==="upright").length;s.length-i;const o=this.analyzeElements(s),a=this.analyzeNumbers(s);return{layers:this.generateLayers(s,n,o),synthesis:this.generateSynthesis(s,n,r,i),keyInsights:this.generateKeyInsights(s,n,o,a),actionPlan:this.generateActionPlan(s,n),affirmations:this.generateAffirmations(s,n)}}static analyzeCardCombinations(e){const s=[];return s.push(...this.checkSpecialCombinations(e)),s.push(...this.checkSuitCombinations(e)),s.push(...this.checkNumberRelationships(e)),s.push(...this.checkElementCombinations(e)),s}static analyzeCardPattern(e){const s=e.filter(i=>i.arcana==="major").length,n=e.filter(i=>i.orientation==="upright").length,r=e.length-n;return s>=e.length*.6?{name:" ",description:"      .",implication:"     .      ."}:n===e.length?{name:"",description:"      .",implication:"   .        ."}:r===e.length?{name:" ",description:"       .",implication:"  .      ."}:Math.abs(n-r)<=1?{name:" ",description:"      .",implication:" ,     ."}:null}static generateProbabilityAnalysis(e,s){const n=e.filter(f=>f.orientation==="upright").length,r=e.filter(f=>f.arcana==="major").length;let i=n/e.length*60,o=(e.length-n)/e.length*40;i+=r/e.length*20,(s==="love"&&e.some(f=>f.name.includes("Lovers")||f.name.includes("Cups"))||s==="career"&&e.some(f=>f.name.includes("Pentacles")||f.name.includes("Emperor")))&&(i+=10);const a=Math.min(90,Math.max(10,Math.round(i))),c=Math.min(70,Math.max(10,Math.round(o+(100-i)/3))),u=100-a-c;let d="";return a>=70?d="   .   ,   .":a>=50?d="      .":c>=50?d=" .      .":d=" .      .",{successProbability:a,challengeProbability:c,uncertaintyLevel:u,recommendation:d}}static analyzeElements(e){const s={fire:0,water:0,air:0,earth:0,spirit:0};return e.forEach(n=>{if(n.element){const r=n.element.toLowerCase();r in s&&s[r]++}else if(n.suit)switch(n.suit){case"wands":s.fire++;break;case"cups":s.water++;break;case"swords":s.air++;break;case"pentacles":s.earth++;break}else n.arcana==="major"&&s.spirit++}),s}static analyzeNumbers(e){const s={};return e.forEach(n=>{n.number!==void 0&&n.number!==null&&(s[n.number]=(s[n.number]||0)+1)}),s}static generateLayers(e,s,n){const r={};r.psychological={consciousPatterns:this.generateConsciousPatterns(e,s),unconsciousPatterns:this.generateUnconsciousPatterns(e,s),growthOpportunities:this.generateGrowthOpportunities(e,s)},r.spiritual={soulLessons:this.generateSoulLessons(e,s),spiritualGifts:this.generateSpiritualGifts(e),chakraActivations:this.generateChakraActivations(e,n)};const i=e.filter(o=>o.orientation==="reversed");return i.length>0&&(r.shadow={hiddenAspects:i.slice(0,3).map(o=>({card:o.nameKr||o.name,message:this.generateShadowMessage(o,s)}))}),r}static generateConsciousPatterns(e,s){const n=[],r=e.filter(i=>i.arcana==="major"&&i.orientation==="upright");return r.some(i=>i.name.includes("Emperor")||i.name.includes("Empress"))&&n.push("   "),r.some(i=>i.name.includes("Lovers")||i.name.includes("Star"))&&n.push("   "),s==="love"?n.push("    "):s==="career"&&n.push("    "),n}static generateUnconsciousPatterns(e,s){const n=[];return e.filter(i=>i.orientation==="reversed").length>e.length/2&&n.push("   "),e.some(i=>i.name.includes("Moon")||i.name.includes("High Priestess"))&&n.push(" "),e.some(i=>i.name.includes("Death")||i.name.includes("Tower"))&&n.push("   "),n}static generateGrowthOpportunities(e,s){const n=[];return e.some(i=>i.name.includes("Fool"))&&n.push("    "),e.some(i=>i.name.includes("Hermit"))&&n.push("    "),e.filter(i=>i.orientation==="reversed").length>0&&n.push("    "),n}static generateSoulLessons(e,s){const n=[],r=e.filter(i=>i.arcana==="major");return r.some(i=>i.name.includes("World"))&&n.push("    "),r.some(i=>i.name.includes("Wheel of Fortune"))&&n.push("   "),s==="love"&&n.push("    "),n}static generateSpiritualGifts(e){const s=[];return e.some(n=>n.name.includes("Magician"))&&s.push("  "),e.some(n=>n.name.includes("High Priestess"))&&s.push("  "),e.some(n=>n.name.includes("Star"))&&s.push("   "),s}static generateChakraActivations(e,s){const n=[];return s.earth>2&&n.push("  -   "),s.water>2&&n.push("  -   "),s.fire>2&&n.push("  -   "),s.air>2&&n.push("  -   "),s.spirit>2&&n.push("  -   "),n}static generateShadowMessage(e,s){e.nameKr||e.name;const n={"The Fool":"    ","The Magician":"    ","The High Priestess":"   ","The Empress":"  ","The Emperor":"   ","The Lovers":"   ",Death:"   ","The Devil":"   "};for(const[r,i]of Object.entries(n))if(e.name.includes(r))return i;return s==="love"?"    ":s==="career"?"    ":"     "}static generateSynthesis(e,s,n,r){let i="";const o=r/e.length;return n/e.length>.5&&(i+="      .      . "),o>.7?i+="     .    . ":o<.3?i+=" ,       . ":i+="    .   . ",s==="love"?i+="  ,   .        ,    .":s==="career"?i+="       .       .":i+="   .    ,    .",i}static generateKeyInsights(e,s,n,r){const i=[];switch(Object.entries(n).reduce((a,c)=>n[a]>n[c[0]]?a:c[0])){case"fire":i.push("      ");break;case"water":i.push("      ");break;case"air":i.push("     ");break;case"earth":i.push("    ");break;case"spirit":i.push("    ");break}return Object.entries(r).forEach(([a,c])=>{if(c>=2){const u=parseInt(a);u===1?i.push("     "):u===2?i.push("   "):u===3?i.push("  "):u===7?i.push("    "):u===10&&i.push("      ")}}),e.some(a=>a.name.includes("Death"))&&e.some(a=>a.name.includes("Fool"))&&i.push("     "),e.some(a=>a.name.includes("Sun"))&&e.some(a=>a.name.includes("Moon"))&&i.push("     "),i}static generateActionPlan(e,s){var r,i,o,a,c,u,d,f,v;const n={immediate:[],weekly:[],monthly:[]};return e.some(p=>p.name.includes("Fool")||p.name.includes("Magician"))&&((r=n.immediate)==null||r.push("   ")),e.some(p=>p.orientation==="reversed")&&((i=n.immediate)==null||i.push("      ")),s==="love"&&((o=n.immediate)==null||o.push("    ")),e.some(p=>p.name.includes("Hermit"))&&((a=n.weekly)==null||a.push("    ")),e.some(p=>p.suit==="pentacles")&&((c=n.weekly)==null||c.push("     ")),(u=n.weekly)==null||u.push("       "),e.some(p=>p.name.includes("World")||p.name.includes("Ten"))&&((d=n.monthly)==null||d.push("     ")),(f=n.monthly)==null||f.push("        "),(v=n.monthly)==null||v.push("     "),n}static generateAffirmations(e,s){const n=[];return n.push("    "),s==="love"?n.push("   ,   "):s==="career"?n.push("     "):s==="money"&&n.push("   ,   "),e.some(r=>r.name.includes("Star"))&&n.push("    "),e.some(r=>r.name.includes("Strength"))&&n.push("      "),n}static checkSpecialCombinations(e){const s=[],n=e.map(r=>r.name);return n.includes("The Fool")&&n.includes("The Magician")&&n.includes("The World")&&s.push({type:"special",meaning:"   - , ,   ",advice:"   .     "}),n.includes("The Lovers")&&n.includes("The Sun")&&s.push({type:"special",meaning:"   ",advice:"    "}),n.includes("Death")&&n.includes("The Tower")&&s.push({type:"special",meaning:"   ",advice:"       "}),s}static checkSuitCombinations(e){const s=[],n={};return e.forEach(r=>{r.suit&&(n[r.suit]=(n[r.suit]||0)+1)}),Object.entries(n).forEach(([r,i])=>{if(i>=3){let o="",a="";switch(r){case"cups":o="    ",a="     ";break;case"wands":o="    ",a="    ";break;case"swords":o="     ",a="    ";break;case"pentacles":o="     ",a="    ";break}s.push({type:"suit",meaning:o,advice:a})}}),s}static checkNumberRelationships(e){const s=[],n=e.map(a=>a.number).filter(a=>a!=null),r=[...new Set(n)].sort((a,c)=>a-c);let i=1;for(let a=1;a<r.length;a++)if(r[a]===r[a-1]+1?i++:i=1,i>=3){s.push({type:"number",meaning:"    ",advice:"    "});break}const o={};return n.forEach(a=>{o[a]=(o[a]||0)+1}),Object.entries(o).forEach(([a,c])=>{if(c>=2){const u=parseInt(a);u===1?s.push({type:"number",meaning:"     ",advice:"     "}):u===10&&s.push({type:"number",meaning:"    ",advice:"    "})}}),s}static checkElementCombinations(e){const s=[],n=this.analyzeElements(e);return n.fire>=2&&n.water>=2&&s.push({type:"element",meaning:"() ()   ",advice:"     "}),n.air>=2&&n.earth>=2&&s.push({type:"element",meaning:"() ()  ",advice:"    "}),n.fire>0&&n.water>0&&n.air>0&&n.earth>0&&s.push({type:"element",meaning:"      ",advice:"     "}),s}}class Ko{constructor(e,s){this.topic=e,this.cards=s}getCardEnergy(e){if(this.topic==="love")return this.getLoveCardEnergy(e);if(this.topic==="career")return this.getCareerCardEnergy(e);if(e.arcana==="major")return{0:"  ",1:"  ",2:"  ",3:"  ",4:"  ",5:"  ",6:"  ",7:"  ",8:" ",9:"  ",10:" ",11:"  ",12:"   ",13:"  ",14:"  ",15:"  ",16:"  ",17:"  ",18:"  ",19:"  ",20:"  ",21:"  "}[e.number]||" ";{const s={wands:" ",cups:" ",swords:" ",pentacles:" "},n={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:"",13:"",14:""},r=s[e.suit||""]||"",i=n[e.number]||"";return`${r} ${i} `}}getLoveCardEnergy(e){if(e.arcana==="major")return{0:"  ",1:" ",2:"  ",3:" ",4:" ",5:" ",6:" ",7:" ",8:" ",9:"  ",10:" ",11:" ",12:"  ",13:" ",14:" ",15:" ",16:" ",17:" ",18:" ",19:" ",20:" ",21:" "}[e.number]||" ";{const s={wands:"",cups:"",swords:"",pentacles:""},n={1:" ",2:"  ",3:" ",4:" ",5:" ",6:" ",7:" ",8:" ",9:" ",10:" ",11:" ",12:" ",13:" ",14:" "},r=s[e.suit||""]||"",i=n[e.number]||"";return`${r} ${i}`}}getCareerCardEnergy(e){if(e.arcana==="major")return{0:"  ",1:" ",2:" ",3:" ",4:" ",5:" ",6:" ",7:"  ",8:" ",9:" ",10:" ",11:" ",12:" ",13:" ",14:"",15:" ",16:" ",17:" ",18:"",19:" ",20:" ",21:" "}[e.number]||" ";{const s={wands:"",cups:"",swords:"",pentacles:""},n={1:" ",2:"",3:"",4:" ",5:" ",6:"",7:"",8:"",9:" ",10:" ",11:" ",12:"",13:"",14:""},r=s[e.suit||""]||"",i=n[e.number]||"";return`${r} ${i}`}}analyzePatterns(){const e=[];this.cards.filter(r=>r.arcana==="major").length>=Math.ceil(this.cards.length*.6)&&e.push({pattern_name:" ",description:"       .",positions:this.cards.filter(r=>r.arcana==="major").map(r=>r.position.position)});const n=this.groupBySuit();for(const[r,i]of Object.entries(n))i.length>=3&&e.push({pattern_name:`${this.getSuitName(r)}  `,description:this.getSuitDescription(r),positions:i.map(o=>o.position.position)});return e}groupBySuit(){const e={};return this.cards.forEach(s=>{s.suit&&(e[s.suit]||(e[s.suit]=[]),e[s.suit].push(s))}),e}getSuitName(e){return{wands:"",cups:"",swords:"",pentacles:""}[e]||e}getSuitDescription(e){return this.topic==="love"?{wands:"      .",cups:"     .",swords:"      .",pentacles:"    ."}[e]||"":this.topic==="career"?{wands:"    .",cups:"   .",swords:"    .",pentacles:"    ."}[e]||"":{wands:"     .",cups:"     .",swords:" ,     .",pentacles:",     ."}[e]||""}findSynergies(){const e=[];for(let s=0;s<this.cards.length;s++)for(let n=s+1;n<this.cards.length;n++){const r=this.checkSynergy(this.cards[s],this.cards[n]);r&&e.push({card1Name:this.getCardEnergy(this.cards[s]),card2Name:this.getCardEnergy(this.cards[n]),positions:[this.cards[s].position.position,this.cards[n].position.position],description:r})}return e}checkSynergy(e,s){if(e.arcana==="major"&&s.arcana==="major"){if(e.number===6&&s.number===15||e.number===15&&s.number===6)return"  .      .";if(e.number===19&&s.number===18||e.number===18&&s.number===19)return"   .    .";if(e.number===13&&s.number===20||e.number===20&&s.number===13)return"    .    ."}return e.arcana==="minor"&&s.arcana==="minor"&&e.number===s.number?`${e.number}  .     .`:null}generateTopicMessage(){return""}async generateInterpretation(){const e=this.analyzePatterns(),s=this.findSynergies(),n=this.generateTopicMessage(),r=await this.generateActionSuggestions(),i=await this.generatePositionMeanings();return{overallMessage:n,combinationPatterns:e,synergies:s,actionSuggestions:r,positionMeanings:i}}async generateActionSuggestions(){return[]}async generatePositionMeanings(){return[]}}class g0 extends Ko{constructor(e,s){super(e,s),this.positions=s.map(n=>n.position)}analyzePatterns(){const e=super.analyzePatterns(),s=[],n=this.cards.find(d=>d.position.position===4),r=this.cards.filter(d=>[1,2].includes(d.position.position)),i=this.cards.find(d=>d.position.position===6);if(n&&r.length>0&&i){const d=this.analyzeTimeline(n,r,i);d&&s.push(d)}const o=this.cards.find(d=>d.position.position===1),a=this.cards.find(d=>d.position.position===2);o&&a&&(o.suit===a.suit?s.push({pattern_name:" ",description:`${this.getSuitName(o.suit)}    .`,positions:[1,2],topicMeaning:"   ."}):o.arcana==="major"&&a.arcana==="major"&&s.push({pattern_name:"  ",description:"      .",positions:[1,2],topicMeaning:"   ."}));const c=this.cards.find(d=>d.position.position===7),u=this.cards.find(d=>d.position.position===8);if(c&&u){const d=this.analyzePerception(c,u);d&&s.push(d)}return[...e,...s]}analyzeTimeline(e,s,n){return e.arcana==="minor"&&n.arcana==="major"?{pattern_name:" ",description:"     .",positions:[4,1,2,6],topicMeaning:"    ."}:e.suit===n.suit?{pattern_name:" ",description:`${this.getSuitName(e.suit)}     .`,positions:[4,6],topicMeaning:"     ."}:null}analyzePerception(e,s){return e.number===s.number&&e.arcana==="minor"?{pattern_name:" ",description:"    .",positions:[7,8],topicMeaning:"    ."}:e.arcana==="major"&&s.arcana==="minor"?{pattern_name:" ",description:"      .",positions:[7,8],topicMeaning:"     ."}:null}generateTopicMessage(){const e=this.cards.filter(r=>[1,2].includes(r.position.position)),s=this.cards.find(r=>r.position.position===10);let n="";switch(this.topic){case"love":n=this.generateLoveMessage(e,s);break;case"career":n=this.generateCareerMessage(e,s);break;case"general":default:n=this.generateGeneralMessage(e,s)}return n}generateLoveMessage(e,s){let n="   . ";const r=e.find(o=>o.position.position===1),i=e.find(o=>o.position.position===2);if(r){const o=this.getCardEnergy(r);n+=`  ${o} . `,r.suit==="cups"&&(n+="      . ")}if(i){const o=this.getCardEnergy(i);n+=` ${o}  ,   . `}if(s){const o=this.getCardEnergy(s);s.orientation==="upright"?n+=` ${o}   .`:n+=`  ${o}   .`}return n}generateCareerMessage(e,s){let n="    . ";const r=e.find(o=>o.position.position===1),i=e.find(o=>o.position.position===2);if(r){const o=this.getCardEnergy(r);n+=`    ${o} . `,r.suit==="pentacles"?n+="    . ":r.suit==="wands"&&(n+="   . ")}if(i){const o=this.getCardEnergy(i);n+=`${o}       . `}return s&&s.arcana==="major"&&(n+="    ."),n}generateGeneralMessage(e,s){let n="     . ";this.cards.filter(o=>o.arcana==="major").length>=5&&(n+="    . ");const i=e.find(o=>o.position.position===1);if(i){const o=this.getCardEnergy(i);n+=` ${o}. `}if(s){const o=this.getCardEnergy(s);n+=`  ${o}  .`}return n}async generatePositionMeanings(){const e=[];for(const s of this.cards){const n=this.getPositionName(s.position.position),r=await this.getCelticPositionMeaning(s,n);e.push({position:s.position.position,positionName:n,cardName:s.nameKr,meaning:r})}return e}getPositionName(e){return{1:" ",2:" ",3:" ",4:"",5:" ",6:" ",7:"  ",8:"  ",9:" ",10:" "}[e]||`${e} `}async getCelticPositionMeaning(e,s){const n=e.position.position,r=this.getCardInterpretation(e,n),i=this.getCardEnergy(e),o=this.getTopicContext(n);return`${s} ${i} . ${r} ${o}`}getTopicContext(e){return this.topic==="love"?{1:"     .",2:"   .",3:"    .",4:"    .",5:"     .",6:"   .",7:"   .",8:"   .",9:"    .",10:"   ."}[e]||"":this.topic==="career"&&{1:"    .",2:"   .",3:"   .",4:"    .",5:"   .",6:"   .",7:"   .",8:"   .",9:"   .",10:"    ."}[e]||""}async generateActionSuggestions(){const e=[],s=[1,2,6,10];for(const n of s){const r=this.cards.find(i=>i.position.position===n);if(r){const i=this.getActionForPosition(r,n);e.push({position:n,cardName:r.nameKr,action:i.action,context:i.context})}}return e}getActionForPosition(e,s){const n=this.getCardEnergy(e);return{1:{action:`  ${n}  `,context:"    "},2:{action:`  ${n}  `,context:"  "},6:{action:` ${n} `,context:"   "},10:{action:` ${n}   `,context:"     "}}[s]||{action:"   ",context:""}}findSynergies(){const e=super.findSynergies(),s=this.cards.find(u=>u.position.position===4),n=this.cards.find(u=>u.position.position===1),r=this.cards.find(u=>u.position.position===6);s&&n&&r&&s.suit===n.suit&&n.suit===r.suit&&e.push({card1Name:`  ${this.getSuitName(s.suit)} `,card2Name:` ${this.getSuitName(r.suit)} `,positions:[4,1,6],description:`${this.getSuitName(s.suit)}      .`});const i=this.cards.find(u=>u.position.position===1),o=this.cards.find(u=>u.position.position===10);i&&o&&i.number===o.number&&i.arcana==="minor"&&e.push({card1Name:"  ",card2Name:"  ",positions:[1,10],description:"      .    ."});const a=this.cards.find(u=>u.position.position===9),c=this.cards.find(u=>u.position.position===10);return a&&c&&a.suit===c.suit&&e.push({card1Name:" ",card2Name:" ",positions:[9,10],description:"      .     ."}),e}getCardInterpretation(e,s){return e.arcana==="major"?this.getMajorCardInterpretation(e,s):this.getMinorCardInterpretation(e,s)}getMajorCardInterpretation(e,s){return this.topic==="love"?{0:"  ,   ",1:"   ",2:" ,   ",3:" ,  ",4:" ,   ",5:" ,   ",6:" ,  ",7:" ,  ",8:" ,   ",9:" ,  ",10:" ,   ",11:" ,  ",12:"  ,  ",13:"   ",14:" ,   ",15:" ,  ",16:"  ,  ",17:" ,  ",18:" ,  ",19:" ,  ",20:" ,  ",21:" ,  "}[e.number]||"  ":this.topic==="career"?{0:"  ,  ",1:"  , ",2:" ,  ",3:" ,  ",4:"  ,  ",5:" ,  ",6:" ,  ",7:"   ",8:" ,  ",9:" ,   ",10:" ,  ",11:" ,  ",12:" ,   ",13:" ,  ",14:",  ",15:" , ",16:" , ",17:" ,   ",18:" , ",19:" ,  ",20:" ,  ",21:" ,  "}[e.number]||"  ":{0:"   ",1:"  ",2:"  ",3:"  ",4:" ",5:"  ",6:" ",7:" ",8:"  ",9:"  ",10:" ",11:" ",12:"  ",13:" ",14:" ",15:" ",16:"  ",17:" ",18:" ",19:" ",20:"  ",21:" "}[e.number]||" "}getMinorCardInterpretation(e,s){if(this.topic==="love"){const a={wands:" ",cups:" ",swords:" ",pentacles:" "},c={1:"  ",2:" ",3:"  ",4:" ",5:"  ",6:"  ",7:"  ",8:"  ",9:" ",10:"  "},u=a[e.suit||""]||" ",d=c[e.number]||" ";return`${u} ${d}`}if(this.topic==="career"){const a={wands:" ",cups:" ",swords:" ",pentacles:" "},c={1:"  ",2:" ",3:" ",4:"  ",5:" ",6:" ",7:" ",8:"  ",9:"  ",10:"  "},u=a[e.suit||""]||" ",d=c[e.number]||" ";return`${u} ${d}`}const n={wands:" ",cups:" ",swords:" ",pentacles:" "},r={1:" ",2:" ",3:" ",4:" ",5:" ",6:" ",7:" ",8:" ",9:" ",10:"  "},i=n[e.suit||""]||"",o=r[e.number]||"";return`${i} ${o}`}}class m0 extends Ko{constructor(e,s){super(e,s),this.positions=s.map(n=>n.position)}analyzePatterns(){const e=super.analyzePatterns(),s=[],n=this.cards.find(r=>r.position.position===7);if(n){this.cards.filter(i=>i.position.position!==7),n.arcana==="major"&&s.push({pattern_name:"  ",description:`${n.nameKr}      .`,positions:[7],topicMeaning:this.getCenterCardMeaning(n)});const r=[[1,4],[2,5],[3,6]];for(const[i,o]of r){const a=this.cards.find(u=>u.position.position===i),c=this.cards.find(u=>u.position.position===o);a&&c&&a.suit===c.suit&&s.push({pattern_name:" ",description:`${i} ${o}  ${this.getSuitName(a.suit)}   .`,positions:[i,o],topicMeaning:"    ."})}}return[...e,...s]}getCenterCardMeaning(e){const s={love:"    .",career:"    .",general:"    ."};return s[this.topic]||s.general}generateTopicMessage(){const e=this.cards.filter(r=>r.arcana==="major").length,s=this.cards.find(r=>r.position.position===7);let n="";switch(this.topic){case"love":n=this.generateLoveMessage(e,s);break;case"career":n=this.generateCareerMessage(e,s);break;default:n=this.generateGeneralMessage(e,s)}return n}generateLoveMessage(e,s){let n="  . ";return e>=4&&(n+="     . "),s&&(n+=`${s.nameKr}      . `,s.arcana==="major"&&(n+="      . ")),this.cards.filter(i=>i.suit==="cups").length>=3&&(n+="     ,     ."),n}generateCareerMessage(e,s){let n="     . ";return e>=4&&(n+="      . "),s&&(n+=`${s.nameKr}      . `),this.cards.filter(i=>i.suit==="pentacles").length>=3&&(n+="     ."),n}generateGeneralMessage(e,s){let n="     . ";return s&&(n+=` ${s.nameKr}       . `),n+="       ,    .",n}async generatePositionMeanings(){const e=[];for(const s of this.cards){const n=this.getPositionName(s.position.position),r=await this.getPositionMeaning(s,n);e.push({position:s.position.position,positionName:n,cardName:s.nameKr,meaning:r})}return e}getPositionName(e){return{1:" ",2:" ",3:" ",4:" ",5:" ",6:" ",7:" "}[e]||`${e} `}async getPositionMeaning(e,s){var i;return`${((i={love:{1:"   ",2:"   ",3:"  ",4:"  ",5:"  ",6:"   ",7:"  "},career:{1:"  ",2:"   ",3:"  ",4:"  ",5:"  ",6:"  ",7:"  "},general:{1:"  ",2:"  ",3:"  ",4:"  ",5:"  ",6:"  ",7:"  "}}[this.topic])==null?void 0:i[e.position.position])||s}  ${e.nameKr}  ${this.getCardInterpretation(e,e.position.position)}`}getCardInterpretation(e,s){return e.arcana==="major"?this.getMajorCardInterpretation(e,s):this.getMinorCardInterpretation(e,s)}getMajorCardInterpretation(e,s){return this.topic==="love"?this.getLoveMajorInterpretation(e):this.topic==="career"?this.getCareerMajorInterpretation(e):this.getGeneralMajorInterpretation(e)}getLoveMajorInterpretation(e){return{0:"      .",1:"     .",2:"     .",3:"   .",4:"   .",5:"   .",6:"    .",7:"   .",8:"    .",9:"     .",10:"     .",11:"   .",12:"    .",13:"    .",14:"   .",15:"    .",16:"    .",17:"    .",18:"   .",19:"    .",20:"    .",21:"    ."}[e.number]||"     ."}getCareerMajorInterpretation(e){return{0:"    .",1:"    .",2:"    .",3:"   .",4:"   .",5:"    .",6:"   .",7:"    .",8:"    .",9:"    .",10:"    .",11:"    .",12:"    .",13:"    .",14:"   .",15:"     .",16:"   .",17:"     .",18:"  .",19:"   .",20:"   .",21:"    ."}[e.number]||"     ."}getGeneralMajorInterpretation(e){return{0:"    .",1:"   .",2:"   .",6:"   .",10:"    .",13:"   .",17:"   .",19:"   .",21:"    ."}[e.number]||"    ."}getMinorCardInterpretation(e,s){return this.topic==="love"?this.getLoveMinorInterpretation(e):this.topic==="career"?this.getCareerMinorInterpretation(e):this.getGeneralMinorInterpretation(e)}getLoveMinorInterpretation(e){return`${{wands:"   ",cups:"   ",swords:"   ",pentacles:"  "}[e.suit]||"  "} .`}getCareerMinorInterpretation(e){return`${{wands:"   ",cups:"   ",swords:"   ",pentacles:"   "}[e.suit]||"  "} .`}getGeneralMinorInterpretation(e){return`${{wands:"  ",cups:"  ",swords:"  ",pentacles:"  "}[e.suit]||" "} .`}async generateActionSuggestions(){const e=[];for(const s of this.cards){const n=this.getActionForPosition(s);n&&e.push({position:s.position.position,cardName:s.nameKr,action:n,context:this.getActionContext(s.position.position)})}return e}getActionForPosition(e){return{1:` ${e.nameKr}   .`,2:` ${e.nameKr}   .`,3:` ${e.nameKr}   .`,4:`${e.nameKr}   .`,5:` ${e.nameKr}   .`,6:` ${e.nameKr}   .`,7:`${e.nameKr}    .`}[e.position.position]||""}getActionContext(e){return{1:"   .",2:"  .",3:"  .",4:"   .",5:"  .",6:"   .",7:"  ."}[e]||""}}class v0 extends Ko{constructor(e,s){super(e,s),this.positions=s.map(n=>n.position)}analyzePatterns(){const e=super.analyzePatterns(),s=[],n=this.cards.find(c=>c.position.position===1),r=this.cards.find(c=>c.position.position===2);n&&r&&(n.suit&&r.suit&&n.suit===r.suit&&s.push({pattern_name:" ",description:`  ${this.getSuitName(n.suit)}   .`,positions:[1,2],topicMeaning:this.getSuitHarmonyMeaning(n.suit)}),n.arcana==="major"&&r.arcana==="major"&&s.push({pattern_name:" ",description:"      .",positions:[1,2],topicMeaning:"        ."}));const i=this.cards.find(c=>c.position.position===3),o=this.cards.find(c=>c.position.position===4),a=this.cards.find(c=>c.position.position===5);if(i&&o&&a){const c=this.analyzeTimeline(i,o,a);c&&s.push(c)}return[...e,...s]}getSuitHarmonyMeaning(e){const s={wands:"  .    .",cups:"    .    .",swords:"    .   .",pentacles:"  .     ."},n={wands:"   .   .",cups:"     .  .",swords:"   .   .",pentacles:"   .     ."},r={wands:"  .    .",cups:"    .    .",swords:"   .   .",pentacles:"  .     ."};return(this.topic==="love"?s:this.topic==="career"?n:r)[e]||"   ."}analyzeTimeline(e,s,n){return e.number<s.number&&s.number<n.number?{pattern_name:" ",description:"   .",positions:[3,4,5],topicMeaning:"        ."}:e.arcana==="major"&&n.arcana==="minor"?{pattern_name:"  ",description:"      .",positions:[3,4,5],topicMeaning:"     ."}:null}generateTopicMessage(){switch(this.topic){case"love":return this.generateLoveMessage();case"career":return this.generateCareerMessage();default:return this.generateGeneralMessage()}}generateLoveMessage(){const e=this.cards.find(o=>o.position.position===1),s=this.cards.find(o=>o.position.position===2),n=this.cards.find(o=>o.position.position===4);let r="      . ";e&&s&&(r+=` ${e.nameKr} ,  ${s.nameKr}   . `),n&&(r+=`  ${n.nameKr}  , `,n.suit==="cups"?r+="    . ":n.arcana==="major"&&(r+="   . "));const i=this.cards.find(o=>o.position.position===7);return i&&(r+=`     ${i.nameKr}.`),r}generateCareerMessage(){const e=this.cards.find(o=>o.position.position===1),s=this.cards.find(o=>o.position.position===2),n=this.cards.find(o=>o.position.position===4);let r="      . ";e&&s&&(r+=` ${e.nameKr}  , // ${s.nameKr}  . `),n&&(r+=`   ${n.nameKr} , `,n.suit==="pentacles"?r+="     . ":n.suit==="wands"&&(r+="    . "));const i=this.cards.find(o=>o.position.position===7);return i&&(r+=`    ${i.nameKr}.`),r}generateGeneralMessage(){const e=this.cards.find(o=>o.position.position===1),s=this.cards.find(o=>o.position.position===2),n=this.cards.find(o=>o.position.position===4);let r="      . ";e&&s&&(r+=`  ${e.nameKr} ,   ${s.nameKr}  . `),n&&(r+=`  ${n.nameKr}  , `,n.arcana==="major"&&(r+="   . "));const i=this.cards.find(o=>o.position.position===7);return i&&(r+=`   ${i.nameKr}  .`),r}async generatePositionMeanings(){const e=[];for(const s of this.cards){const n=this.getPositionName(s.position.position),r=await this.getRelationshipPositionMeaning(s,n);e.push({position:s.position.position,positionName:n,cardName:s.nameKr,meaning:r})}return e}getPositionName(e){const s={1:" ",2:" ",3:" ",4:" ",5:" ",6:" ",7:" "},n={1:"  ",2:"/ ",3:" ",4:"  ",5:" ",6:" ",7:"  "},r={1:"  ",2:"  ",3:" ",4:" ",5:" ",6:" ",7:" "};return(this.topic==="love"?s:this.topic==="career"?n:r)[e]||`${e} `}async getRelationshipPositionMeaning(e,s){const n=e.position.position;return this.topic==="love"?this.getLovePositionMeaning(e,n,s):this.topic==="career"?this.getCareerPositionMeaning(e,n,s):this.getGeneralPositionMeaning(e,n,s)}getLovePositionMeaning(e,s,n){switch(s){case 1:return`${e.nameKr}    ${this.getMyLoveEnergy(e)} .`;case 2:return`${e.nameKr}   ${this.getPartnerLoveEnergy(e)} .`;case 3:return`${e.nameKr}    ${this.getPastLoveInfluence(e)}  .`;case 4:return`${e.nameKr}    ${this.getCurrentLoveRelationship(e)}  .`;case 5:return`${e.nameKr}    ${this.getFutureLovePotential(e)} .`;case 6:return`${e.nameKr}  ${this.getLoveObstacle(e)}   .`;case 7:return`${e.nameKr}  ${this.getLoveAdvice(e)}   .`;default:return`${n} ${e.nameKr} .`}}getCareerPositionMeaning(e,s,n){switch(s){case 1:return`${e.nameKr}   ${this.getMyCareerEnergy(e)}   .`;case 2:return`${e.nameKr}  / ${this.getPartnerCareerEnergy(e)} .`;case 3:return`${e.nameKr}    ${this.getPastCareerInfluence(e)}  .`;case 4:return`${e.nameKr}     ${this.getCurrentCareerRelationship(e)}  .`;case 5:return`${e.nameKr}   ${this.getFutureCareerPotential(e)} .`;case 6:return`${e.nameKr}  ${this.getCareerObstacle(e)}   .`;case 7:return`${e.nameKr}  ${this.getCareerAdvice(e)}    .`;default:return`${n} ${e.nameKr} .`}}getGeneralPositionMeaning(e,s,n){switch(s){case 1:return`${e.nameKr}    ${this.getMyEnergy(e)} .`;case 2:return`${e.nameKr}    ${this.getPartnerEnergy(e)} .`;case 3:return`${e.nameKr}   ${this.getPastInfluence(e)}  .`;case 4:return`${e.nameKr}    ${this.getCurrentRelationship(e)}  .`;case 5:return`${e.nameKr}   ${this.getFuturePotential(e)} .`;case 6:return`${e.nameKr}  ${this.getObstacle(e)}   .`;case 7:return`${e.nameKr}  ${this.getAdvice(e)}  .`;default:return`${n} ${e.nameKr} .`}}getMyLoveEnergy(e){return e.suit==="cups"?"   ":e.suit==="wands"?"  ":e.suit==="swords"?"   ":e.suit==="pentacles"?"  ":e.arcana==="major"?"   ":"  "}getPartnerLoveEnergy(e){return e.suit==="cups"?"  ":e.suit==="wands"?"  ":e.suit==="swords"?"  ":e.suit==="pentacles"?"   ":e.arcana==="major"?"   ":"  "}getPastLoveInfluence(e){return e.number>=1&&e.number<=3?"   ":e.number>=4&&e.number<=6?"   ":e.number>=7&&e.number<=9?"   ":e.number===10?"  ":e.arcana==="major"?"   ":"  "}getCurrentLoveRelationship(e){return e.suit==="cups"?"  ":e.suit==="wands"?" ":e.suit==="swords"?"  ":e.suit==="pentacles"?" ":e.arcana==="major"?"   ":""}getFutureLovePotential(e){if(e.orientation==="upright"){if(e.suit==="cups")return"    ";if(e.suit==="wands")return"  ";if(e.suit==="swords")return"    ";if(e.suit==="pentacles")return"   ";if(e.arcana==="major")return"  "}else return"    ";return"  "}getLoveObstacle(e){return e.suit==="cups"?"  ":e.suit==="wands"?"  ":e.suit==="swords"?"  ":e.suit==="pentacles"?"   ":e.arcana==="major"?"   ":"   "}getLoveAdvice(e){return e.suit==="cups"?"    ":e.suit==="wands"?"   ":e.suit==="swords"?"   ":e.suit==="pentacles"?"   ":e.arcana==="major"?"     ":"  "}getMyCareerEnergy(e){return e.suit==="cups"?" ":e.suit==="wands"?" ":e.suit==="swords"?" ":e.suit==="pentacles"?" ":e.arcana==="major"?" ":""}getPartnerCareerEnergy(e){return e.suit==="cups"?"  ":e.suit==="wands"?"  ":e.suit==="swords"?"  ":e.suit==="pentacles"?"  ":e.arcana==="major"?"  ":"  "}getPastCareerInfluence(e){return e.number>=1&&e.number<=3?"  ":e.number>=4&&e.number<=6?"  ":e.number>=7&&e.number<=9?"  ":e.number===10?"   ":e.arcana==="major"?"  ":"  "}getCurrentCareerRelationship(e){return e.suit==="cups"?"   ":e.suit==="wands"?" ":e.suit==="swords"?"  ":e.suit==="pentacles"?" ":e.arcana==="major"?"  ":""}getFutureCareerPotential(e){if(e.orientation==="upright"){if(e.suit==="cups")return"   ";if(e.suit==="wands")return"   ";if(e.suit==="swords")return"  ";if(e.suit==="pentacles")return"  ";if(e.arcana==="major")return"  "}else return"    ";return"  "}getCareerObstacle(e){return e.suit==="cups"?"   ":e.suit==="wands"?"  ":e.suit==="swords"?"   ":e.suit==="pentacles"?"   ":e.arcana==="major"?"  ":"   "}getCareerAdvice(e){return e.suit==="cups"?"   ":e.suit==="wands"?"   ":e.suit==="swords"?"   ":e.suit==="pentacles"?"    ":e.arcana==="major"?"    ":"  "}getMyEnergy(e){return e.suit==="cups"?"  ":e.suit==="wands"?" ":e.suit==="swords"?" ":e.suit==="pentacles"?" ":e.arcana==="major"?"  ":" "}getPartnerEnergy(e){return e.suit==="cups"?"   ":e.suit==="wands"?"  ":e.suit==="swords"?"  ":e.suit==="pentacles"?"   ":e.arcana==="major"?"   ":" "}getPastInfluence(e){return e.number>=1&&e.number<=3?"   ":e.number>=4&&e.number<=6?"   ":e.number>=7&&e.number<=9?"  ":e.number===10?" ":e.arcana==="major"?"   ":" "}getCurrentRelationship(e){return e.suit==="cups"?" ":e.suit==="wands"?" ":e.suit==="swords"?"  ":e.suit==="pentacles"?" ":e.arcana==="major"?"  ":""}getFuturePotential(e){if(e.orientation==="upright"){if(e.suit==="cups")return"   ";if(e.suit==="wands")return"  ";if(e.suit==="swords")return"  ";if(e.suit==="pentacles")return"  ";if(e.arcana==="major")return"  "}else return"    ";return" "}getObstacle(e){return e.suit==="cups"?"  ":e.suit==="wands"?" ":e.suit==="swords"?" ":e.suit==="pentacles"?"  ":e.arcana==="major"?"  ":"  "}getAdvice(e){return e.suit==="cups"?"    ":e.suit==="wands"?"   ":e.suit==="swords"?"   ":e.suit==="pentacles"?"   ":e.arcana==="major"?"     ":"  "}async generateActionSuggestions(){const e=[],s={1:{action:"     ",context:"    "},2:{action:"    ",context:"   "},3:{action:"    ",context:"    "},4:{action:"     ",context:"     "},5:{action:"     ",context:"     "},6:{action:"     ",context:"     "},7:{action:"   ",context:"     "}},n={1:{action:"    ",context:"     "},2:{action:"   ",context:"      "},3:{action:"      ",context:"  "},4:{action:"    ",context:"    "},5:{action:"     ",context:"    "},6:{action:"    ",context:"   "},7:{action:"    ",context:"     "}},r={1:{action:"    ",context:"    "},2:{action:"   ",context:"    "},3:{action:"    ",context:"   "},4:{action:"    ",context:"    "},5:{action:"    ",context:"   "},6:{action:"    ",context:"     "},7:{action:"   ",context:"    "}},i=this.topic==="love"?s:this.topic==="career"?n:r;for(const o of this.cards){const a=o.position.position,c=i[a];c&&e.push({position:a,cardName:o.nameKr,action:c.action,context:c.context})}return e}findSynergies(){const e=super.findSynergies(),s=this.cards.find(r=>r.position.position===1),n=this.cards.find(r=>r.position.position===2);return s&&n&&(this.areComplementary(s,n)&&e.push({card1Name:s.nameKr,card2Name:n.nameKr,positions:[1,2],description:"     .     ."}),s.number===n.number&&s.arcana==="minor"&&e.push({card1Name:s.nameKr,card2Name:n.nameKr,positions:[1,2],description:`${s.number}  .       .`})),e}areComplementary(e,s){const n=[["wands","cups"],["swords","pentacles"]];for(const[r,i]of n)if(e.suit===r&&s.suit===i||e.suit===i&&s.suit===r)return!0;return!1}}const Ks=qc("tarot",()=>{const t=Ve(),e=W([]),s=W(null),n=W(null),r=W(!0),i=W(!1),o=W([]),a=W([]),c=W(null),u=W(null),d=W(null),f=W(""),v=()=>{try{localStorage.setItem("tarot_readings",JSON.stringify(e.value))}catch(g){console.warn("Failed to save readings:",g)}},p=()=>{try{const g=localStorage.getItem("tarot_readings");g&&(e.value=JSON.parse(g))}catch(g){console.warn("Failed to load readings:",g)}},h=()=>{try{s.value&&localStorage.setItem("tarot_daily_card",JSON.stringify(s.value))}catch(g){console.warn("Failed to save daily card:",g)}},m=()=>{try{const g=localStorage.getItem("tarot_daily_card");g&&(s.value=JSON.parse(g))}catch(g){console.warn("Failed to load daily card:",g)}},C=g=>{d.value=g},k=()=>d.value,A=async()=>{try{console.log("   ..."),i.value=!0;const g=await Jg.getAllCards();g&&g.length>0?(o.value=g.map(y=>({id:y.id,name:y.name,nameKr:y.name_kr,arcana:y.arcana,number:y.number,keywords:typeof y.keywords=="string"?JSON.parse(y.keywords):y.keywords,meanings:typeof y.meanings=="string"?JSON.parse(y.meanings):y.meanings,element:y.element,astrology:y.astrology,imageUrl:y.image_url})),console.log(`  : ${o.value.length}`)):(console.warn("  ,   "),S())}catch(g){console.error("  :",g),console.log("  "),S()}finally{i.value=!1}},S=()=>{o.value=[{id:0,name:"The Fool",nameKr:"",arcana:"major",number:0,keywords:{upright:[" ","","",""],reversed:["","",""," "]},meanings:{general:{upright:"    .",reversed:"   ."},love:{upright:"    .",reversed:"  ."},career:{upright:"     .",reversed:"     ."},money:{upright:"     .",reversed:"   ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/00-the-fool.png"},{id:1,name:"The Magician",nameKr:"",arcana:"major",number:1,keywords:{upright:["","","","",""],reversed:["",""," "," "]},meanings:{general:{upright:"        .",reversed:"    ."},love:{upright:" .  .",reversed:"      ."},career:{upright:"   .",reversed:"  ."},money:{upright:"     .",reversed:"  ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/01-the-magician.png"},{id:2,name:"The High Priestess",nameKr:"",arcana:"major",number:2,keywords:{upright:["",""," ",""],reversed:[" ","",""," "]},meanings:{general:{upright:"     .",reversed:"    ."},love:{upright:"     .",reversed:"      ."},career:{upright:"      .",reversed:"    ."},money:{upright:"    .",reversed:"     ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/02-the-high-priestess.png"},{id:3,name:"The Empress",nameKr:"",arcana:"major",number:3,keywords:{upright:["","","",""],reversed:[""," ","",""]},meanings:{general:{upright:"    .",reversed:"       ."},love:{upright:"      .",reversed:"      ."},career:{upright:"    .",reversed:"      ."},money:{upright:"     .",reversed:"     ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/03-the-empress.png"},{id:4,name:"The Emperor",nameKr:"",arcana:"major",number:4,keywords:{upright:["","","",""],reversed:["",""," ",""]},meanings:{general:{upright:"      .",reversed:"       ."},love:{upright:"       .",reversed:"      ."},career:{upright:"      .",reversed:"       ."},money:{upright:"      .",reversed:"     ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/04-the-emperor.png"},{id:5,name:"The Hierophant",nameKr:"",arcana:"major",number:5,keywords:{upright:["","","",""],reversed:["",""," "," "]},meanings:{general:{upright:"       .",reversed:"       ."},love:{upright:"    .",reversed:"     ."},career:{upright:"     .",reversed:"     ."},money:{upright:"    .",reversed:"     ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/05-the-hierophant.png"}],console.log("    :",o.value.length+"")},T=g=>{if(console.log(`  : ${g},   : ${o.value.length}`),o.value.length===0)return console.error("   !"),[];g>o.value.length&&console.warn(`  (${g})    (${o.value.length}) .`);const _=[...o.value].sort(()=>Math.random()-.5).slice(0,g);return console.log(" :",_.map(P=>P.nameKr)),_},O=g=>a.value.find(y=>y.spreadId===g),E=async()=>{const g=new Date().toDateString();if(s.value&&s.value.date===g)return s.value.card;try{const _=T(1)[0],P=Math.random()<.5?"upright":"reversed";return s.value={date:g,card:_,orientation:P},h(),_}catch(y){console.error("   :",y);const P=T(1)[0],D=Math.random()<.5?"upright":"reversed";return s.value={date:g,card:P,orientation:D},h(),P}},R=g=>T(g).map(_=>({..._,orientation:Math.random()<.5?"upright":"reversed"})),N=async(g,y,_,P)=>{var D,x,X;try{i.value=!0,console.log("  :",{spreadId:g,topic:y,question:_});const F=O(g);if(!F)throw new Error("Invalid spread ID: "+g);console.log(" :",F),console.log("   :",o.value.length);const V=P&&P.length>0?P:d.value&&d.value.length===F.cardCount?d.value:R(F.cardCount);console.log(" :",V);const U=V.map((re,oe)=>({...re,position:F.positions[oe]}));let z;if(console.log("  :",{spreadId:g,cardCount:U.length,topic:y,isPremium:t.isPremium}),g==="celtic_cross"&&t.isPremium){const oe=await new g0(y,U).generateInterpretation();z={cards:U.map((_e,qe)=>{var He,ze,Ye;const st=(He=oe.positionMeanings)==null?void 0:He.find(nt=>nt.position===qe+1);return{..._e,interpretation:{basic:(st==null?void 0:st.meaning)||`${_e.position.name} ${_e.nameKr}`,advice:((Ye=(ze=oe.actionSuggestions)==null?void 0:ze.find(nt=>nt.position===qe+1))==null?void 0:Ye.action)||""}}}),overallMessage:oe.overallMessage,enhancedInterpretation:oe,premiumInsights:{combinationPatterns:oe.combinationPatterns,synergies:oe.synergies,actionSuggestions:oe.actionSuggestions,positionMeanings:oe.positionMeanings}}}else if(g==="celtic_cross"){const oe=await new Py(U,y).generateInterpretation();z={cards:U.map((_e,qe)=>({..._e,interpretation:{basic:oe.positions[qe].meaning,advice:oe.advice}})),overallMessage:oe.overallPattern,premiumInsights:{relationships:oe.relationships||[],elementAnalysis:oe.elementAnalysis||[],timelineAnalysis:oe.timelineAnalysis||{},keywords:oe.keywords||[]}}}else if(g==="seven_star"&&t.isPremium){const oe=await new m0(y,U).generateInterpretation();z={cards:U.map((_e,qe)=>{var He,ze,Ye;const st=(He=oe.positionMeanings)==null?void 0:He.find(nt=>nt.position===qe+1);return{..._e,interpretation:{basic:(st==null?void 0:st.meaning)||`${_e.position.name} ${_e.nameKr}`,advice:((Ye=(ze=oe.actionSuggestions)==null?void 0:ze.find(nt=>nt.position===qe+1))==null?void 0:Ye.action)||""}}}),overallMessage:oe.overallMessage,enhancedInterpretation:oe,premiumInsights:{combinationPatterns:oe.combinationPatterns,synergies:oe.synergies,actionSuggestions:oe.actionSuggestions,positionMeanings:oe.positionMeanings}}}else if(g==="cup_of_relationship"&&t.isPremium){const oe=await new v0(y,U).generateInterpretation();z={cards:U.map((_e,qe)=>{var He,ze,Ye;const st=(He=oe.positionMeanings)==null?void 0:He.find(nt=>nt.position===qe+1);return{..._e,interpretation:{basic:(st==null?void 0:st.meaning)||`${_e.position.name} ${_e.nameKr}`,advice:((Ye=(ze=oe.actionSuggestions)==null?void 0:ze.find(nt=>nt.position===qe+1))==null?void 0:Ye.action)||""}}}),overallMessage:oe.overallMessage,enhancedInterpretation:oe,premiumInsights:{combinationPatterns:oe.combinationPatterns,synergies:oe.synergies,actionSuggestions:oe.actionSuggestions,positionMeanings:oe.positionMeanings}}}else z=r0(U,F,y,t.isPremium),(g==="one_card"||g==="three_card_timeline")&&z.cards&&(console.log("1/3   :",{spreadId:g,cardCount:z.cards.length,hasOverallMessage:!!z.overallMessage}),z.cards=z.cards.map((re,oe)=>{var _e,qe,st,He,ze;if(!re.interpretation||!re.interpretation.basic){const Ye=re.card||re,nt=((qe=(_e=Ye.meanings)==null?void 0:_e[y])==null?void 0:qe[re.orientation])||((He=(st=Ye.meanings)==null?void 0:st.general)==null?void 0:He[re.orientation])||`${Ye.nameKr||Ye.name||"   "}  .`;return console.log(` ${oe}  :`,{cardName:Ye.nameKr||Ye.name,hasInterpretation:!!re.interpretation,meaning:nt}),{...re,interpretation:{basic:nt,advice:I(re,y),keywords:((ze=Ye.keywords)==null?void 0:ze[re.orientation])||[]}}}return re}),z.overallMessage||(z.overallMessage=q(U,F,y)));let Y=[],Z=null;t.isPremium&&(Y=pr.analyzeCardCombinations(U),Z=pr.analyzeCardPattern(U));const ne=U.map((re,oe)=>{const _e=d0.enhanceInterpretation(re,y,F.positions[oe]);return{...re,interpretation:{...re.interpretation,..._e}}});let ie=null,Ce=null;if(t.isPremium){const re={id:`temp_${Date.now()}`,userId:(D=t.currentUser)==null?void 0:D.id,spreadId:g,topic:y,question:_,cards:U,overallMessage:"",createdAt:new Date,isPremium:!0,shared:!1};ie=pr.generateDeepInterpretation(re),Ce=pr.generateProbabilityAnalysis(U,y)}let we=null;if(g==="celtic_cross"){const re=[U[2],U[3]],oe=U[0],_e=[U[4],U[5]];we=Mu.analyzeTimelineInfluence(re,oe,_e)}if(z={...z,cards:ne,cardCombinations:Y,cardPattern:Z,deepInterpretation:ie,probabilityAnalysis:Ce,timelineAnalysis:we,premiumInsights:t.isPremium?{...z.premiumInsights,deepLayers:ie==null?void 0:ie.layers,synthesis:ie==null?void 0:ie.synthesis,keyInsights:ie==null?void 0:ie.keyInsights,actionPlan:ie==null?void 0:ie.actionPlan,affirmations:ie==null?void 0:ie.affirmations,journalPrompts:ie==null?void 0:ie.journalPrompts,cardCombinations:Y,cardPattern:Z,probabilityAnalysis:Ce,timelineAnalysis:we}:void 0},(x=t.currentUser)!=null&&x.birthDate){const re={birthDate:new Date(t.currentUser.birthDate),zodiacSign:p0.getZodiacSign(new Date(t.currentUser.birthDate)),lifePathNumber:f0.calculate(new Date(t.currentUser.birthDate)),readingHistory:e.value},oe=new h0(re);z.cards=z.cards.map(_e=>{const qe=oe.enhanceInterpretation(_e,{spread:F,topic:y});return{..._e,interpretation:{..._e.interpretation,personalized:qe}}})}const Se={id:`reading_${Date.now()}`,userId:(X=t.currentUser)==null?void 0:X.id,spreadId:g,topic:y,question:_,cards:z.cards||U,overallMessage:z.overallMessage||q(U,F,y),createdAt:new Date,isPremium:F.isPremium,shared:!1,premiumInsights:z.premiumInsights,cardCombinations:t.isPremium?Y:void 0,cardPattern:t.isPremium?Z:void 0,deepInterpretation:t.isPremium?ie:void 0,probabilityAnalysis:t.isPremium?Ce:void 0,timelineAnalysis:t.isPremium?we:void 0,enhancedInterpretation:z.enhancedInterpretation,improvedInterpretation:L.value};return console.log(" :",Se),console.log("   :",{improvedInterpretationFromRef:L.value,enhancedInterpretationFromInterpretation:z.enhancedInterpretation,readingImprovedInterpretation:Se.improvedInterpretation,readingEnhancedInterpretation:Se.enhancedInterpretation}),(g==="one_card"||g==="three_card_timeline")&&(console.log("=== 1/3    ==="),console.log(" :",Se.overallMessage),Se.cards.forEach((re,oe)=>{var _e;console.log(` ${oe+1}:`,{name:re.nameKr||re.name,orientation:re.orientation,hasInterpretation:!!re.interpretation,interpretationBasic:(_e=re.interpretation)==null?void 0:_e.basic})})),K(Se),n.value=Se,t.isPremium||t.incrementFreeReading(),d.value=null,console.log("  :",Se.id),Se}catch(F){throw console.error("  :",F),F}finally{i.value=!1}},I=(g,y)=>{const P={upright:["    .","  .","   ."],reversed:["   .","   .","   ."]}[g.orientation];return P[Math.floor(Math.random()*P.length)]},j=(g,y)=>{const _=g[0],P=g[1],D=g[2],x=g[3],X=g[4],F=g[5],V=g[6],U=g[7],z=g[8],Y=g[9];let Z=[];switch(_.arcana==="major"?Z.push(`  ${_.nameKr}       `):Z.push(`   ${_.orientation==="upright"?" ":"   "}`),P.orientation==="reversed"?Z.push(` ${P.nameKr}       `):Z.push(`${P.nameKr}         `),(D.arcana==="major"||x.arcana==="major")&&Z.push("      "),X.orientation==="upright"&&F.orientation==="upright"?Z.push("   "):X.orientation==="reversed"&&F.orientation==="reversed"?Z.push("  ,     "):Z.push("    "),V.orientation==="upright"?Z.push("      "):Z.push("     "),Y.arcana==="major"?Z.push(` ${Y.nameKr}      `):Y.orientation==="upright"?Z.push("     "):Z.push("    ,       "),y){case"love":Z.push(`  ${z.nameKr}       `);break;case"career":Z.push(` ${U.nameKr}      `);break;case"money":Z.push("      ");break;case"health":Z.push("      ");break;default:Z.push("    ")}return Z.join(". ")+"."},q=(g,y,_)=>{if(y.spreadId==="celtic_cross")return j(g,_);const D=g.filter(z=>z.orientation==="upright").length/g.length,x=g.filter(z=>z.arcana==="major"),X=x.length>0;let F=[];if(y.cardCount===1){const z=g[0];console.log("1   :",{cardName:z.nameKr||z.name,orientation:z.orientation,hasMeanings:!!z.meanings,topic:_}),z.arcana==="major"&&F.push(`${z.nameKr||z.name}     `),z.orientation==="upright"?F.push("        "):F.push("      "),z.meanings&&z.meanings[_]&&z.meanings[_][z.orientation]?F.push(z.meanings[_][z.orientation]):z.meanings&&z.meanings.general&&z.meanings.general[z.orientation]?F.push(z.meanings.general[z.orientation]):console.warn("1    - meanings  :",z)}else if(y.cardCount===3){const z=g[0],Y=g[1],Z=g[2];z.orientation==="reversed"?F.push("  "):F.push("      "),Y.arcana==="major"?F.push("   "):Y.orientation==="upright"?F.push("   "):F.push("    "),Z.orientation==="upright"?Z.arcana==="major"?F.push("     "):F.push("  "):F.push("      ")}let V="";switch(_){case"love":D>.6?V="      .":V="      .";break;case"career":D>.6?V="      .":V="       .";break;case"money":X?V="    .":D>.5?V="     .":V="       .";break;case"health":D>.7?V="    .":V="     .";break;default:V=""}let U=F.join(", ");return U&&(U+="."),U+=V,x.length>=2&&(U+="       ."),D>.7?U+="     .":D<.3&&(U+="      ."),U},K=g=>{e.value.unshift(g),!t.isPremium&&e.value.length>10&&(e.value=e.value.slice(0,10)),v()},B=async()=>{try{p()}catch(g){console.error("  :",g)}},G=async g=>{try{e.value=e.value.filter(y=>y.id!==g),v()}catch(y){throw console.error("  :",y),y}},he=async()=>{try{await A(),await ce(),p(),m()}catch(g){console.error("   :",g)}},ce=async()=>{try{console.log("   ...");const g=await Qg.getAllSpreads();g&&g.length>0?(a.value=g.map(y=>({spreadId:y.spread_id,name:y.name,nameKr:y.name_kr,description:y.description,cardCount:y.card_count,positions:y.positions,isPremium:y.is_premium,topics:y.topics})),console.log("Supabase   :",a.value.length+"")):(console.warn("Supabase   ,   "),a.value=Or)}catch(g){console.error("  :",g),console.log("  "),a.value=Or}console.log("  :",a.value.length+""),console.log("  :",a.value.map(g=>g.nameKr))},Q=async()=>{try{m();const g=new Date().toDateString();(!s.value||s.value.date!==g)&&(console.log("    "),o.value.length===0&&(console.log("  ,  "),await A()),await E())}catch(g){console.error("   :",g)}},ue=()=>s.value,J=()=>e.value,se=()=>n.value,ge=g=>e.value.find(y=>y.id===g),me=g=>{c.value=g},Ue=g=>{u.value=g},Ee=g=>{f.value=g,g?localStorage.setItem("tarotCustomQuestion",g):localStorage.removeItem("tarotCustomQuestion")},je=()=>(f.value||(f.value=localStorage.getItem("tarotCustomQuestion")||""),f.value),ve=()=>{f.value="",localStorage.removeItem("tarotCustomQuestion")},L=W(null);return{readings:e,dailyCard:s,currentReading:n,vibrationEnabled:r,isLoading:i,tarotCards:o,spreads:a,selectedTopic:c,selectedSpread:u,improvedInterpretation:L,customQuestion:f,initialize:he,loadTarotCards:A,drawDailyCard:E,drawCards:R,createReading:N,loadReadings:B,deleteReading:G,loadDailyCard:Q,loadDailyCardFromStorage:m,getDailyCard:ue,getReadings:J,getCurrentReading:se,getReadingById:ge,setSelectedTopic:me,setSelectedSpread:Ue,setCustomQuestion:Ee,getCustomQuestion:je,clearCustomQuestion:ve,setTempDrawnCards:C,getTempDrawnCards:k,setImprovedInterpretation:g=>{L.value=g},getImprovedInterpretation:()=>L.value,clearImprovedInterpretation:()=>{L.value=null},updateReading:g=>{const y=e.value.findIndex(_=>_.id===g.id);y!==-1&&(e.value[y]=g,v()),n.value=g}}}),y0=Object.freeze(Object.defineProperty({__proto__:null,useTarotStore:Ks},Symbol.toStringTag,{value:"Module"})),w0={class:"main-app"},b0={class:"app-header"},_0={class:"header-content"},k0={class:"user-section"},S0={class:"user-info"},C0={class:"welcome-text"},$0={key:0,class:"premium-badge"},P0={class:"user-avatar"},E0=["src","alt"],T0={key:1,class:"avatar-placeholder"},A0={key:0,class:"user-dropdown"},I0={class:"main-content"},R0={key:0,class:"loading-state"},M0={key:1,class:"app-content"},O0={class:"welcome-section"},j0={class:"main-menu"},L0=Qe({__name:"MainApp",setup(t){const e=Nt(),s=Ve(),n=Ks(),r=W(!1),i=W(!1),o=W(!1),a=()=>{o.value=!o.value,window.dispatchEvent(new CustomEvent("toggle-test-panel"))};mt(async()=>{console.log("    "),s.currentUser&&!s.isLoading?(console.log("  ,   "),n.loadReadings(),n.loadDailyCard()):s.isLoading||(console.log(" ,  "),await s.initializeUser(),n.loadReadings(),n.loadDailyCard()),document.addEventListener("click",m)});const c=()=>{var A;const C=new Date().getHours(),k=((A=s.currentUser)==null?void 0:A.name)||"";return C<12?` , ${k}! `:C<18?`, ${k}! `:` , ${k}! `},u=()=>{console.log("   "),e.push("/card-drawing?spread=daily")},d=C=>{r.value=!r.value,r.value&&setTimeout(()=>{var A;const k=(A=C.target.closest(".user-menu"))==null?void 0:A.querySelector(".user-dropdown");if(k){const S=k.getBoundingClientRect(),T=window.innerWidth;if(S.right>T-10){const O=S.right-T+20;k.style.transform=`translateX(-${O}px)`}}},10)},f=async()=>{try{await s.logout(),r.value=!1,e.push("/")}catch(C){console.error(" :",C)}},v=()=>{console.log(" "),r.value=!1},p=()=>{console.log(" "),r.value=!1,e.push("/premium")},h=()=>{alert("    ")},m=C=>{if(!C.target.closest(".user-menu")){r.value=!1;const A=document.querySelector(".user-dropdown");A&&(A.style.transform="translateX(0)")}};return(C,k)=>{var S,T,O;const A=qr("router-link");return w(),b("div",w0,[l("header",b0,[l("div",_0,[k[2]||(k[2]=l("div",{class:"logo-section"},[l("h1",{class:"app-title"},"  ")],-1)),l("div",k0,[i.value?(w(),b("button",{key:0,class:H(["test-mode-btn",{active:o.value}]),onClick:a},"  ",2)):M("",!0),l("div",S0,[l("span",C0,$(c()),1),pe(s).isPremium?(w(),b("span",$0,"Premium")):M("",!0)]),l("div",{class:"user-menu",onClick:k[0]||(k[0]=E=>d(E))},[l("div",P0,[(S=pe(s).currentUser)!=null&&S.avatarUrl?(w(),b("img",{key:0,src:pe(s).currentUser.avatarUrl,alt:pe(s).currentUser.name,class:"avatar-image"},null,8,E0)):(w(),b("div",T0,$(((O=(T=pe(s).currentUser)==null?void 0:T.name)==null?void 0:O.charAt(0))||"U"),1))]),r.value?(w(),b("div",A0,[l("button",{onClick:v,class:"menu-item"},"    "),l("button",{onClick:p,class:"menu-item"},"    "),k[1]||(k[1]=l("div",{class:"menu-divider"},null,-1)),l("button",{onClick:f,class:"menu-item"},"   ")])):M("",!0)])])])]),l("main",I0,[pe(s).isLoading?(w(),b("div",R0,k[3]||(k[3]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"   ...",-1)]))):(w(),b("div",M0,[l("div",O0,[l("h2",null,$(c()),1),k[4]||(k[4]=l("p",{class:"subtitle"},"  ",-1))]),l("div",j0,[fe(A,{to:"/reading-select",class:"menu-card"},{default:Pe(()=>k[5]||(k[5]=[l("div",{class:"menu-icon"},"",-1),l("div",{class:"menu-content"},[l("h3",null,"  "),l("p",null,"   ")],-1)])),_:1,__:[5]}),l("div",{class:"menu-card",onClick:u},k[6]||(k[6]=[l("div",{class:"menu-icon"},"",-1),l("div",{class:"menu-content"},[l("h3",null," "),l("p",null,"    ")],-1)])),l("div",{class:"menu-card",onClick:h},k[7]||(k[7]=[l("div",{class:"menu-icon"},"",-1),l("div",{class:"menu-content"},[l("h3",null," "),l("p",null,"   ")],-1)])),pe(s).isPremium?M("",!0):(w(),ft(A,{key:0,to:"/premium",class:"menu-card premium-card"},{default:Pe(()=>k[8]||(k[8]=[l("div",{class:"menu-icon"},"",-1),l("div",{class:"menu-content"},[l("h3",null," "),l("p",null,"    ")],-1)])),_:1,__:[8]}))])]))])])}}}),D0=tt(L0,[["__scopeId","data-v-4b5df291"]]),U0={class:"modal-body"},x0={class:"input-container"},N0={class:"char-count"},K0={class:"modal-footer"},F0=["disabled"],B0=Qe({__name:"CustomQuestionModal",props:{isOpen:{type:Boolean}},emits:["close","confirm"],setup(t,{emit:e}){const s=t,n=e,r=W(""),i=W();mt(()=>{s.isOpen&&i.value&&i.value.focus()});const o=()=>{r.value="",n("close")},a=()=>{r.value.trim()&&r.value.length>=10&&(n("confirm",r.value.trim()),r.value="")};return(c,u)=>(w(),b("div",{class:"modal-overlay",onClick:o},[l("div",{class:"modal-content",onClick:u[1]||(u[1]=Yt(()=>{},["stop"]))},[l("div",{class:"modal-header"},[u[2]||(u[2]=l("h2",null," ",-1)),l("button",{class:"close-button",onClick:o},"")]),l("div",U0,[u[3]||(u[3]=l("p",{class:"description"},"       .       . ",-1)),l("div",x0,[_t(l("textarea",{"onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d),placeholder:":        ?",maxlength:"200",rows:"4",ref_key:"textareaRef",ref:i},null,512),[[fs,r.value]]),l("div",N0,$(r.value.length)+"/200",1)]),u[4]||(u[4]=l("div",{class:"tips"},[l("p",{class:"tip-title"},"   "),l("ul",null,[l("li",null,"     ?"),l("li",null,"     ?"),l("li",null,"      ?")])],-1))]),l("div",K0,[l("button",{class:"btn btn-secondary",onClick:o},""),l("button",{class:"btn btn-primary",onClick:a,disabled:!r.value.trim()||r.value.length<10},"  ",8,F0)])])]))}}),H0=tt(B0,[["__scopeId","data-v-1f471a91"]]),z0=["celtic_cross","seven_star","cup_of_relationship"],Ou="test@example.com";function ju(){const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${n}`}function jr(t){return z0.includes(t)}async function Lr(t){var e;try{if(!t)return!1;const s=ju(),{data:n,error:r}=await le.from("premium_spread_usage").select("id, spread_id").eq("user_id",t).gte("used_at",`${s}T00:00:00`).lt("used_at",`${s}T23:59:59`).maybeSingle();return r?r.code==="406"||(e=r.message)!=null&&e.includes("Not Acceptable")?(console.warn("Premium spread usage check skipped - user might be anonymous"),!1):r.code==="42P01"?(console.warn("Premium spread usage table not found"),!1):(console.error("Error checking premium spread usage:",r),!1):!!n}catch(s){return console.error("Error checking premium spread usage:",s),!1}}async function V0(t){var e;try{if(!t)return null;const s=ju(),{data:n,error:r}=await le.from("premium_spread_usage").select("spread_id").eq("user_id",t).gte("used_at",`${s}T00:00:00`).lt("used_at",`${s}T23:59:59`).maybeSingle();return r?(r.code==="406"||(e=r.message)!=null&&e.includes("Not Acceptable")||r.code==="42P01"||console.error("Error getting today used spread:",r),null):(n==null?void 0:n.spread_id)||null}catch(s){return console.error("Error getting today used spread:",s),null}}async function q0(t,e,s,n){return e||!jr(t)||n===Ou?!0:!await Lr(s)}async function W0(t,e,s){var n;if(jr(t)){if(!e){console.warn("Cannot record premium spread usage without userId");return}if(s===Ou){console.log("Test account - skipping premium spread usage recording");return}try{const r=new Date,{error:i}=await le.from("premium_spread_usage").insert({user_id:e,spread_id:t,used_at:r.toISOString()});if(i){if(i.code==="406"||(n=i.message)!=null&&n.includes("Not Acceptable")){console.warn("Cannot record premium spread usage - insufficient permissions");return}if(i.code==="42P01"){console.warn("Premium spread usage table not found");return}console.error("Error recording premium spread usage:",i)}}catch(r){console.error("Error recording premium spread usage:",r)}}}async function G0(t){if(await Lr(t)){const s=await V0(t);return`     . (${J0(s)})
    .`}return" ( , ,   )  1   ."}function J0(t){return t?{celtic_cross:" ",seven_star:"",cup_of_relationship:"  "}[t]||t:""}function Q0(){const t=new Date,e=new Date(t);e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const s=e.getTime()-t.getTime(),n=Math.floor(s/(1e3*60*60)),r=Math.floor(s%(1e3*60*60)/(1e3*60));return n>0?`${n} ${r}`:`${r}`}const Y0={class:"reading-select"},X0={class:"container"},Z0={class:"mobile-view"},ew={key:0,class:"mobile-selected-topic"},tw={class:"selected-info-card card"},sw={class:"selected-content"},nw={key:0},rw={key:1,class:"mobile-all-selected"},iw={class:"selected-info-card card"},ow={class:"selected-content"},aw={class:"selection-item"},lw={class:"item-value"},cw={class:"selection-item"},uw={class:"item-value"},dw={class:"selection-item"},hw={class:"item-value"},fw={class:"mobile-actions"},pw=["disabled"],gw={class:"desktop-view"},mw={class:"section"},vw={class:"topic-grid"},yw=["onClick"],ww={class:"topic-icon"},bw={key:0,class:"premium-badge"},_w={key:0},kw={key:1},Sw={class:"section"},Cw={key:0,class:"custom-notice"},$w={key:1,class:"premium-spread-notice"},Pw={class:"notice-text"},Ew={key:0,class:"reset-time"},Tw={class:"spread-grid"},Aw=["onClick"],Iw={class:"spread-header"},Rw={key:0,class:"premium-badge"},Mw={class:"spread-description"},Ow={class:"spread-info"},jw={class:"card-count"},Lw={key:0,class:"premium-overlay"},Dw={key:1,class:"free-badge"},Uw={key:2,class:"updating-overlay"},xw={key:0,class:"selection-summary"},Nw={class:"summary-card card"},Kw={class:"summary-details"},Fw={class:"summary-item"},Bw={class:"summary-item"},Hw={class:"summary-item"},zw={class:"action-section"},Vw=["disabled"],qw={key:0,class:"free-usage-info"},Ww=Qe({__name:"ReadingSelect",setup(t){const e=Nt(),s=Ve(),n=Ks(),r=W(""),i=W(""),o=W(!1),a=W(""),c=W(!1),u=W(!1),d=W(!1),f=W(""),v=W(!1),p=()=>{c.value=window.innerWidth<=768};mt(async()=>{var B;if(p(),window.addEventListener("resize",p),s.currentUser&&!s.isPremium&&!s.currentUser.isAnonymous){u.value=!0;try{d.value=await Lr(s.currentUser.id),f.value=await G0(s.currentUser.id)}catch(G){console.error("Error checking premium usage:",G)}finally{u.value=!1}}if((B=s.currentUser)!=null&&B.isAnonymous&&!s.isPremium){const{hasUsedPremiumSpreadToday:G,getFreeUserMessage:he}=await Ie(async()=>{const{hasUsedPremiumSpreadToday:ce,getFreeUserMessage:Q}=await import("./premiumSpreadTracker-CSAzclwA.js");return{hasUsedPremiumSpreadToday:ce,getFreeUserMessage:Q}},[],import.meta.url);d.value=G(),f.value=he()}}),tr(()=>{window.removeEventListener("resize",p)});const h=ye(()=>{const B=[{id:"love",name:"/",description:", ,     ",icon:""},{id:"career",name:"/",description:", , ,     ",icon:""},{id:"money",name:"/",description:", ,     ",icon:""},{id:"health",name:"/",description:", ,    ",icon:""},{id:"general",name:"",description:"   ",icon:""}];return s.isPremium&&B.push({id:"custom",name:"  ",description:"    ",icon:""}),B}),m=ye(()=>{if(!r.value)return[];if(r.value==="custom"){const B=bn("celtic_cross");return B?[{id:B.spreadId,name:B.nameKr,description:B.description,cardCount:B.cardCount,difficulty:"hard",isPremium:B.isPremium}]:[]}return _n(r.value).map(B=>({id:B.spreadId,name:B.nameKr,description:B.description,cardCount:B.cardCount,difficulty:B.cardCount<=1?"easy":B.cardCount<=3?"medium":"hard",isPremium:B.isPremium}))}),C=ye(()=>{var G,he;if(console.log("[CanStartReading]  ",{selectedTopic:r.value,selectedSpread:i.value,isPremium:s.isPremium,hasPremiumUsageToday:d.value,isAnonymous:(G=s.currentUser)==null?void 0:G.isAnonymous,userId:(he=s.currentUser)==null?void 0:he.id}),!r.value||!i.value)return console.log("[CanStartReading]   "),!1;if(i.value==="seven_star"||i.value==="cup_of_relationship")return console.log("[CanStartReading]   "),!1;if(r.value==="custom"){const ce=bn(i.value);return ce?ce.isPremium&&!s.isPremium?(console.log("[CanStartReading]  -  "),!1):!0:(console.log("[CanStartReading]  -  "),!1)}const B=_n(r.value).find(ce=>ce.spreadId===i.value);if(!B)return console.log("[CanStartReading]  -  "),!1;if(B.isPremium&&!s.isPremium){const ce=!d.value;return console.log("[CanStartReading]   ",{isPremium:B.isPremium,userIsPremium:s.isPremium,hasPremiumUsageToday:d.value,canStart:ce,spreadId:B.spreadId,spreadName:B.nameKr}),ce}return console.log("[CanStartReading]  - true "),!0}),k=B=>{if(B==="custom"){if(!s.isPremium){e.push("/premium");return}o.value=!0}else r.value=B,a.value=""},A=B=>{a.value=B,r.value="custom",o.value=!1},S=()=>{o.value=!1,r.value==="custom"&&!a.value&&(r.value="")},T=async B=>{var G;if(B.id==="seven_star"||B.id==="cup_of_relationship"){alert(`${B.name}    !

     .`);return}if(B.isPremium&&!s.isPremium){if((G=s.currentUser)!=null&&G.isAnonymous){const{canUsePremiumSpread:he}=await Ie(async()=>{const{canUsePremiumSpread:ce}=await import("./premiumSpreadTracker-CSAzclwA.js");return{canUsePremiumSpread:ce}},[],import.meta.url);if(!he(B.id,s.isPremium)){alert(`     .

     .`);return}}else if(s.currentUser&&!await q0(B.id,s.isPremium,s.currentUser.id,s.currentUser.email)){alert(`     .

     .`);return}}i.value=B.id},O=B=>{var G;return B==="custom"&&a.value?`: ${a.value.substring(0,30)}${a.value.length>30?"...":""}`:((G=h.value.find(he=>he.id===B))==null?void 0:G.name)||""},E=B=>{if(r.value==="custom"){const he=bn(B);return(he==null?void 0:he.nameKr)||""}const G=_n(r.value||"general").find(he=>he.spreadId===B);return(G==null?void 0:G.nameKr)||""},R=B=>{if(r.value==="custom"){const he=bn(B);return(he==null?void 0:he.cardCount)||0}const G=_n(r.value||"general").find(he=>he.spreadId===B);return(G==null?void 0:G.cardCount)||0},N=B=>({easy:"",medium:"",hard:""})[B]||"",I=()=>{if(!r.value||!i.value)return"  ";const B=m.value.find(G=>G.id===i.value);return B!=null&&B.isPremium&&!s.isPremium?d.value?"   (   )":" 1  ":"  "},j=async()=>{var he,ce,Q;if(v.value){console.log("[StartReading]   ");return}if(v.value=!0,console.log("[StartReading] ",{canStartReading:C.value,selectedTopic:r.value,selectedSpread:i.value,isPremium:s.isPremium,hasPremiumUsageToday:d.value,currentUser:s.currentUser}),typeof window<"u"&&window.debugPremiumSpread&&(console.log("[StartReading] debugPremiumSpread   "),await window.debugPremiumSpread()),!C.value){console.log("[StartReading] canStartReading false "),alert("   .   .");return}if(i.value==="seven_star"||i.value==="cup_of_relationship"){const ue=E(i.value);alert(`${ue}    !

     .`);return}const B=h.value.find(ue=>ue.id===r.value);let G;if(r.value==="custom"?G=bn(i.value):G=_n(r.value).find(ue=>ue.spreadId===i.value),console.log("[StartReading]  ",{selectedTopicData:B,selectedSpreadData:G}),!B){console.error("[StartReading]    "),alert("   .");return}if(!G){console.error("[StartReading]    "),alert("   .");return}try{if(s.currentUser&&!s.currentUser.isAnonymous&&s.currentUser.email==="test@example.com"&&!s.isPremium&&jr(i.value)&&await Lr(s.currentUser.id)&&!confirm(` !

  1  ,
   .

?`))return;if(!s.isPremium&&jr(i.value))if(console.log("[StartReading]     ",{spreadId:i.value,isAnonymous:(he=s.currentUser)==null?void 0:he.isAnonymous,userId:(ce=s.currentUser)==null?void 0:ce.id}),(Q=s.currentUser)!=null&&Q.isAnonymous){console.log("[StartReading]   -   ");const{recordPremiumSpreadUsage:ue}=await Ie(async()=>{const{recordPremiumSpreadUsage:J}=await import("./premiumSpreadTracker-CSAzclwA.js");return{recordPremiumSpreadUsage:J}},[],import.meta.url);ue(i.value)}else s.currentUser&&(console.log("[StartReading]   - DB "),await W0(i.value,s.currentUser.id,s.currentUser.email));console.log("[StartReading]    ");try{n.setSelectedTopic(B),console.log("[StartReading]   ",n.selectedTopic)}catch(ue){console.error("[StartReading]   :",ue),alert("    .");return}try{n.setSelectedSpread(G),console.log("[StartReading]   ",n.selectedSpread)}catch(ue){console.error("[StartReading]   :",ue),alert("    .");return}r.value==="custom"&&a.value?n.setCustomQuestion(a.value):n.setCustomQuestion(""),console.log("[StartReading]    "),console.log("[StartReading]     ",{routerReady:e.isReady,currentRoute:e.currentRoute.value.path,targetRoute:"/card-drawing"}),console.log("[StartReading]     "),console.log("[StartReading]  :",e.currentRoute.value.path),console.log("[StartReading]    :",{selectedTopic:n.selectedTopic,selectedSpread:n.selectedSpread,customQuestion:n.customQuestion}),await Us(),console.log("[StartReading]    "),e.push("/card-drawing")}catch(ue){console.error("[StartReading]  :",ue),alert(`      : ${ue.message}`)}finally{v.value=!1}},q=()=>{e.go(-1)},K=()=>{r.value="",i.value="",a.value=""};return(B,G)=>{var ce;const he=qr("router-link");return w(),b("div",Y0,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:q}," "),G[0]||(G[0]=l("h1",null," ",-1))]),l("div",X0,[l("div",Z0,[r.value&&!i.value?(w(),b("div",ew,[l("div",tw,[l("div",{class:"selected-info-header"},[G[1]||(G[1]=l("span",{class:"selected-label"}," ",-1)),l("button",{class:"change-btn",onClick:K},"")]),l("div",sw,[l("h3",null,$(O(r.value)),1),r.value==="custom"&&a.value?(w(),b("p",nw,$(a.value),1)):M("",!0)])])])):r.value&&i.value?(w(),b("div",rw,[l("div",iw,[G[5]||(G[5]=l("div",{class:"selected-info-header"},[l("span",{class:"selected-label"}," ")],-1)),l("div",ow,[l("div",aw,[G[2]||(G[2]=l("span",{class:"item-label"},":",-1)),l("span",lw,$(O(r.value)),1)]),l("div",cw,[G[3]||(G[3]=l("span",{class:"item-label"},":",-1)),l("span",uw,$(E(i.value)),1)]),l("div",dw,[G[4]||(G[4]=l("span",{class:"item-label"}," :",-1)),l("span",hw,$(R(i.value))+"",1)])]),l("div",fw,[l("button",{class:"btn btn-secondary",onClick:K}," "),l("button",{class:"btn btn-primary",disabled:!C.value,onClick:j},$(I()),9,pw)])])])):M("",!0)]),l("div",gw,[_t(l("section",mw,[G[6]||(G[6]=l("h2",{class:"section-title"},"   ",-1)),l("div",vw,[(w(!0),b(be,null,xe(h.value,Q=>(w(),b("div",{key:Q.id,class:H(["topic-card card",{selected:r.value===Q.id,premium:Q.id==="custom"&&!pe(s).isPremium}]),onClick:ue=>k(Q.id)},[l("div",ww,$(Q.icon),1),l("h3",null,[Ae($(Q.name)+" ",1),Q.id==="custom"?(w(),b("span",bw,"")):M("",!0)]),Q.id==="custom"&&a.value?(w(),b("p",_w,$(a.value),1)):(w(),b("p",kw,$(Q.description),1))],10,yw))),128))])],512),[[mi,!r.value||!c.value]]),_t(l("section",Sw,[G[12]||(G[12]=l("h2",{class:"section-title"},"  ",-1)),r.value==="custom"?(w(),b("div",Cw,G[7]||(G[7]=[l("p",null,"          .",-1)]))):M("",!0),pe(s).isPremium?M("",!0):(w(),b("div",$w,[l("p",Pw,[G[8]||(G[8]=l("span",{class:"icon"},"",-1)),Ae(" "+$(f.value||" ( , ,   )  1   ."),1)]),d.value?(w(),b("p",Ew,"   : "+$(pe(Q0)())+"  ",1)):M("",!0)])),l("div",Tw,[(w(!0),b(be,null,xe(m.value,Q=>(w(),b("div",{key:Q.id,class:H(["spread-card card",{selected:i.value===Q.id,premium:Q.isPremium&&!pe(s).isPremium,updating:Q.id==="seven_star"||Q.id==="cup_of_relationship"}]),onClick:ue=>T(Q)},[l("div",Iw,[l("h3",null,$(Q.name),1),Q.isPremium&&!pe(s).isPremium?(w(),b("span",Rw,"")):M("",!0)]),l("p",Mw,$(Q.description),1),l("div",Ow,[l("span",jw," "+$(Q.cardCount)+"",1),l("span",{class:H(["difficulty",Q.difficulty])},$(N(Q.difficulty)),3)]),Q.isPremium&&!pe(s).isPremium&&d.value?(w(),b("div",Lw,G[9]||(G[9]=[l("p",null,"  ",-1)]))):Q.isPremium&&!pe(s).isPremium&&!d.value?(w(),b("div",Dw,G[10]||(G[10]=[l("span",null," 1 ",-1)]))):Q.id==="seven_star"||Q.id==="cup_of_relationship"?(w(),b("div",Uw,G[11]||(G[11]=[l("p",null,"  ",-1)]))):M("",!0)],10,Aw))),128))])],512),[[mi,r.value&&(!i.value||!c.value)]]),r.value&&i.value&&!c.value?(w(),b("section",xw,[l("div",Nw,[G[16]||(G[16]=l("h3",null," ",-1)),l("div",Kw,[l("div",Fw,[G[13]||(G[13]=l("strong",null,":",-1)),Ae(" "+$(O(r.value)),1)]),l("div",Bw,[G[14]||(G[14]=l("strong",null,":",-1)),Ae(" "+$(E(i.value)),1)]),l("div",Hw,[G[15]||(G[15]=l("strong",null," :",-1)),Ae(" "+$(R(i.value))+" ",1)])])])])):M("",!0),_t(l("div",zw,[l("button",{class:"btn btn-primary start-button",disabled:!C.value,onClick:j},$(I()),9,Vw),pe(s).isPremium?M("",!0):(w(),b("div",qw,[l("p",null,$((ce=pe(s).currentUser)!=null&&ce.isAnonymous?" ":" "),1),fe(he,{to:"/premium",class:"premium-link"},{default:Pe(()=>G[17]||(G[17]=[Ae("     ",-1)])),_:1,__:[17]})]))],512),[[mi,!c.value]])])]),o.value?(w(),ft(H0,{key:0,"is-open":o.value,onClose:S,onConfirm:A},null,8,["is-open"])):M("",!0)])}}}),Gw=tt(Ww,[["__scopeId","data-v-94f14fa7"]]);var Un;(function(t){t.Heavy="HEAVY",t.Medium="MEDIUM",t.Light="LIGHT"})(Un||(Un={}));var wl;(function(t){t.Success="SUCCESS",t.Warning="WARNING",t.Error="ERROR"})(wl||(wl={}));const Jw=Ns("Haptics",{web:()=>Ie(()=>import("./web-DIZNMiJZ.js"),[],import.meta.url).then(t=>new t.HapticsWeb)});var Dr;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(Dr||(Dr={}));var bl;(function(t){t.None="NONE",t.Slide="SLIDE",t.Fade="FADE"})(bl||(bl={}));const Qw=Ns("StatusBar");var _l;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(_l||(_l={}));var kl;(function(t){t.Body="body",t.Ionic="ionic",t.Native="native",t.None="none"})(kl||(kl={}));const Yw=Ns("Keyboard");class co{static get isNative(){return We.isNativePlatform()}static get isWeb(){return!We.isNativePlatform()}static get platform(){return We.getPlatform()}static async playHaptic(e="medium"){if(this.isNative)try{const s={light:Un.Light,medium:Un.Medium,heavy:Un.Heavy}[e];await Jw.impact({style:s})}catch(s){console.warn("Haptic feedback not available:",s)}}static async cardDrawHaptic(){await this.playHaptic("medium")}static async buttonTapHaptic(){await this.playHaptic("light")}static async importantActionHaptic(){await this.playHaptic("heavy")}static async setStatusBarStyle(e=!0){if(this.isNative)try{await Qw.setStyle({style:e?Dr.Dark:Dr.Light})}catch(s){console.warn("Status bar style not available:",s)}}static async hideKeyboard(){if(this.isNative)try{await Yw.hide()}catch(e){console.warn("Keyboard hide not available:",e)}}static async initializeApp(){if(this.isNative)try{await this.setStatusBarStyle(!0),console.log("Native app initialized successfully")}catch(e){console.warn("Native initialization failed:",e)}}static async getAppInfo(){if(!this.isNative)return null;try{const{App:e}=await Ie(async()=>{const{App:s}=await Promise.resolve().then(()=>Ai);return{App:s}},void 0,import.meta.url);return await e.getInfo()}catch(e){return console.warn("App info not available:",e),null}}static setupUrlListener(e){this.isNative&&Ie(async()=>{const{App:s}=await Promise.resolve().then(()=>Ai);return{App:s}},void 0,import.meta.url).then(({App:s})=>{s.addListener("appUrlOpen",n=>{e(n.url)})}).catch(s=>{console.warn("URL listener setup failed:",s)})}static setupAppStateListener(e,s){this.isNative&&Ie(async()=>{const{App:n}=await Promise.resolve().then(()=>Ai);return{App:n}},void 0,import.meta.url).then(({App:n})=>{n.addListener("appStateChange",r=>{r.isActive?e():s()})}).catch(n=>{console.warn("App state listener setup failed:",n)})}}const Xw={playHaptic:()=>Promise.resolve(),cardDrawHaptic:()=>Promise.resolve(),buttonTapHaptic:()=>Promise.resolve(),importantActionHaptic:()=>Promise.resolve(),setStatusBarStyle:()=>Promise.resolve(),hideKeyboard:()=>Promise.resolve(),initializeApp:()=>Promise.resolve()},kt=co.isNative?co:Xw,oi={get isWeb(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform()==="web":!0},get isIOS(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform()==="ios":!1},get isAndroid(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform()==="android":!1},get isMobile(){return this.isIOS||this.isAndroid},get name(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform():"web"}},rs={appId:"ca-app-pub-3940256099942544~3347511713",bannerAdId:"ca-app-pub-3940256099942544/6300978111",interstitialAdId:"ca-app-pub-3940256099942544/1033173712",rewardedAdId:"ca-app-pub-3940256099942544/5224354917",testMode:Ug};class Zw{async initializeAdMob(){console.log(" [Web] AdMob  ()")}async showInterstitialAd(){return console.log(" [Web]    ()"),new Promise(e=>{setTimeout(()=>e(!0),1e3)})}async showRewardedAd(){return console.log(" [Web]    ()"),new Promise(e=>{setTimeout(()=>e(!0),2e3)})}async createBannerAd(e){console.log(` [Web]    (${e}) ()`)}async hideBannerAd(){console.log(" [Web]    ()")}shouldShowAds(){return!0}}class eb{constructor(){this.isInitialized=!1}async initializeAdMob(){try{if(this.isInitialized)return;console.log(" [Mobile] AdMob  ...");const{AdMob:e}=await Ie(async()=>{const{AdMob:s}=await import("./index-uCmKluP8.js");return{AdMob:s}},[],import.meta.url);await e.initialize({requestTrackingAuthorization:!0,testingDevices:rs.testMode?["YOUR_TEST_DEVICE_ID"]:[],initializeForTesting:rs.testMode}),this.isInitialized=!0,console.log(" [Mobile] AdMob  ")}catch(e){throw console.error(" [Mobile] AdMob  :",e),e}}async showInterstitialAd(){try{this.isInitialized||await this.initializeAdMob(),console.log(" [Mobile]    ...");const{AdMob:e,InterstitialAdPluginEvents:s}=await Ie(async()=>{const{AdMob:n,InterstitialAdPluginEvents:r}=await import("./index-uCmKluP8.js");return{AdMob:n,InterstitialAdPluginEvents:r}},[],import.meta.url);return await e.prepareInterstitial({adId:rs.interstitialAdId,isTesting:rs.testMode}),new Promise(n=>{e.addListener(s.Dismissed,()=>{console.log(" [Mobile]   "),n(!0)}),e.addListener(s.FailedToLoad,r=>{console.error(" [Mobile]    :",r),n(!1)}),e.showInterstitial()})}catch(e){return console.error(" [Mobile]    :",e),!1}}async showRewardedAd(){try{this.isInitialized||await this.initializeAdMob(),console.log(" [Mobile]    ...");const{AdMob:e,RewardAdPluginEvents:s}=await Ie(async()=>{const{AdMob:n,RewardAdPluginEvents:r}=await import("./index-uCmKluP8.js");return{AdMob:n,RewardAdPluginEvents:r}},[],import.meta.url);return await e.prepareRewardVideoAd({adId:rs.rewardedAdId,isTesting:rs.testMode}),new Promise(n=>{let r=!1;e.addListener(s.Rewarded,i=>{console.log(" [Mobile]    :",i),r=!0}),e.addListener(s.Dismissed,()=>{console.log(" [Mobile]   ,  :",r),n(r)}),e.addListener(s.FailedToLoad,i=>{console.error(" [Mobile]    :",i),n(!1)}),e.showRewardVideoAd()})}catch(e){return console.error(" [Mobile]    :",e),!1}}async createBannerAd(e){try{this.isInitialized||await this.initializeAdMob(),console.log(` [Mobile]    (${e})`);const{AdMob:s,BannerAdOptions:n,BannerAdSize:r,BannerAdPosition:i}=await Ie(async()=>{const{AdMob:a,BannerAdOptions:c,BannerAdSize:u,BannerAdPosition:d}=await import("./index-uCmKluP8.js");return{AdMob:a,BannerAdOptions:c,BannerAdSize:u,BannerAdPosition:d}},[],import.meta.url),o={adId:rs.bannerAdId,adSize:r.BANNER,position:e==="top"?i.TOP_CENTER:i.BOTTOM_CENTER,margin:0,isTesting:rs.testMode};await s.showBanner(o),console.log(" [Mobile]    ")}catch(s){throw console.error(" [Mobile]    :",s),s}}async hideBannerAd(){try{const{AdMob:e}=await Ie(async()=>{const{AdMob:s}=await import("./index-uCmKluP8.js");return{AdMob:s}},[],import.meta.url);await e.hideBanner(),console.log(" [Mobile]    ")}catch(e){console.error(" [Mobile]    :",e)}}shouldShowAds(){return oi.isMobile}}const tb=()=>oi.isWeb?new Zw:new eb,Fo=tb(),Lu=()=>Fo.initializeAdMob(),Du=()=>Fo.showInterstitialAd(),uo=()=>Fo.showRewardedAd(),sb=Object.freeze(Object.defineProperty({__proto__:null,initializeAdMob:Lu,showInterstitialAd:Du,showRewardedAd:uo},Symbol.toStringTag,{value:"Module"})),Rs=class Rs{constructor(){this.userStore=null,this.userStoreGetter=null,this.config={freeReadingLimit:3,adFrequency:2,rewardedAdBonus:2,temporaryPremiumHours:24},this.dailyReadingCount=W(0),this.lastReadingDate=W(""),this.bonusReadings=W(0),this.temporaryPremiumExpiry=W(null),this.lastAdShownAt=W(0),this.loadState(),this.checkDailyReset()}getUserStore(){if(!this.userStore&&this.userStoreGetter)try{this.userStore=this.userStoreGetter()}catch(e){console.warn("userStore  :",e)}return this.userStore?this.userStore:{isPremium:!1,canUseFreeReading:!0,incrementFreeReading:()=>{}}}static getInstance(){return Rs.instance||(Rs.instance=new Rs),Rs.instance}setUserStoreGetter(e){this.userStoreGetter=e,this.userStore=null}saveState(){var e;try{const s={dailyReadingCount:this.dailyReadingCount.value,lastReadingDate:this.lastReadingDate.value,bonusReadings:this.bonusReadings.value,temporaryPremiumExpiry:(e=this.temporaryPremiumExpiry.value)==null?void 0:e.toISOString(),lastAdShownAt:this.lastAdShownAt.value};localStorage.setItem("adManagerState",JSON.stringify(s))}catch(s){console.error("    :",s)}}loadState(){try{const e=localStorage.getItem("adManagerState");if(e){const s=JSON.parse(e);this.dailyReadingCount.value=s.dailyReadingCount||0,this.lastReadingDate.value=s.lastReadingDate||"",this.bonusReadings.value=s.bonusReadings||0,this.temporaryPremiumExpiry.value=s.temporaryPremiumExpiry?new Date(s.temporaryPremiumExpiry):null,this.lastAdShownAt.value=s.lastAdShownAt||0}}catch(e){console.error("    :",e)}}checkDailyReset(){const e=new Date().toDateString();this.lastReadingDate.value!==e&&(this.dailyReadingCount.value=0,this.bonusReadings.value=0,this.lastReadingDate.value=e,this.saveState())}isTemporaryPremium(){return this.temporaryPremiumExpiry.value?new Date<this.temporaryPremiumExpiry.value?!0:(this.temporaryPremiumExpiry.value=null,this.saveState(),!1):!1}canDoReading(){return this.getUserStore().isPremium||this.isTemporaryPremium(),!0}getRemainingReadings(){return this.getUserStore().isPremium||this.isTemporaryPremium(),-1}shouldShowAd(){return!(this.getUserStore().isPremium||this.isTemporaryPremium())}async startReading(e){var u;console.log(" [AdManager.startReading] , spreadId:",e);const s=this.getUserStore().isPremium,n=this.isTemporaryPremium();if(console.log(" [AdManager.startReading] isPremium:",s,"isTempPremium:",n),s||n)return console.log(" [AdManager.startReading]   -  "),!0;const r=(u=this.getUserStore().user)==null?void 0:u.email,i=r==="test@example.com";console.log(" [AdManager.startReading] userEmail:",r,"isTestAccount:",i);const a=e&&["celtic_cross","seven_star","cup_of_relationship"].includes(e);if(console.log(" [AdManager.startReading] isPremiumSpread:",a),a)if(i)console.log(" [AdManager.startReading]   -    ");else{console.log(" [AdManager.startReading]      ...");const{hasUsedPremiumSpreadToday:d}=await Ie(async()=>{const{hasUsedPremiumSpreadToday:v}=await import("./premiumSpreadTracker-CSAzclwA.js");return{hasUsedPremiumSpreadToday:v}},[],import.meta.url),f=await d();if(console.log(" [AdManager.startReading] hasUsed:",f),f)return console.log(" [AdManager.startReading]   - false "),!1}return await this.showAd()?(this.dailyReadingCount.value++,this.saveState(),!0):!1}async recordPremiumSpreadUsage(e){console.log(" [AdManager.recordPremiumSpreadUsage]    :",e);const{recordPremiumSpreadUsage:s}=await Ie(async()=>{const{recordPremiumSpreadUsage:n}=await import("./premiumSpreadTracker-CSAzclwA.js");return{recordPremiumSpreadUsage:n}},[],import.meta.url);await s(e)}async showAd(){try{console.log("   ...");const e=await Du();return e&&(this.lastAdShownAt.value=this.dailyReadingCount.value,this.saveState()),e}catch(e){return console.error("  :",e),!0}}async showRewardedAdForBonus(){try{return console.log("    ..."),await uo()?(this.bonusReadings.value+=this.config.rewardedAdBonus,this.saveState(),!0):!1}catch(e){return console.error("   :",e),!1}}async showRewardedAdForPremium(){try{if(console.log("     ..."),await uo()){const s=new Date;return s.setHours(s.getHours()+this.config.temporaryPremiumHours),this.temporaryPremiumExpiry.value=s,this.saveState(),!0}return!1}catch(e){return console.error("    :",e),!1}}getStatus(){return{isPremium:this.getUserStore().isPremium,isTemporaryPremium:this.isTemporaryPremium(),temporaryPremiumExpiry:this.temporaryPremiumExpiry.value,dailyReadingCount:this.dailyReadingCount.value,remainingReadings:this.getRemainingReadings(),bonusReadings:this.bonusReadings.value,canDoReading:this.canDoReading()}}updateConfig(e){this.config={...this.config,...e}}};Rs.instance=null;let Ur=Rs,Jt=null,ho=!1;const nb=()=>{if(Jt||(Jt=Ur.getInstance()),!ho)try{Ie(async()=>{const{useUserStore:t}=await Promise.resolve().then(()=>Mr);return{useUserStore:t}},void 0,import.meta.url).then(({useUserStore:t})=>{Jt&&(Jt.setUserStoreGetter(()=>t()),ho=!0)}).catch(t=>{console.warn("AdManager userStore  :",t)})}catch(t){console.warn("AdManager  :",t)}return Jt},rb=t=>{Jt||(Jt=Ur.getInstance()),t&&Jt&&(Jt.setUserStoreGetter(t),ho=!0)};class ib{constructor(e){this.cards=[],this.positionNames=["  ()","  "," ",""," "," "," "," "," "," "],e&&(this.cards=e)}getPositionName(e){return this.positionNames[e]||` ${e+1}`}async generateInterpretation(e){return this.cards=e.map(s=>({id:s.card.id,name:s.card.name,nameKr:s.card.nameKr,arcana:s.card.arcana,number:s.card.number,suit:s.card.suit,element:s.card.element,keywords:s.card.keywords,orientation:s.orientation,position:{name:s.positionName,description:""}})),this.getInterpretation()}getInterpretation(){return{positiveAspects:this.analyzePositiveAspects(),negativeAspects:this.analyzeNegativeAspects(),advice:this.generateAdvice(),keyThemes:this.extractKeyThemes(),elementalBalance:this.analyzeElementalBalance(),timeFlow:this.analyzeTimeFlow(),relationships:this.analyzeRelationships()}}analyzePositiveAspects(){const e=[],s=this.cards.filter(i=>i.orientation==="upright");this.cards.filter(i=>i.orientation==="reversed"),s.length>=6&&e.push("       "),this.cards.filter(i=>i.arcana==="major").length>=5&&e.push("  ,    "),this.cards[5]&&this.cards[5].orientation==="upright"&&e.push(`(${this.cards[5].nameKr}) ,   `),this.cards[9]&&this.cards[9].orientation==="upright"&&e.push(` (${this.cards[9].nameKr})  `);const r=this.analyzeElementalBalance();return Math.max(...Object.values(r).filter(i=>typeof i=="number"))<=4&&e.push("    "),e}analyzeNegativeAspects(){var n,r,i,o;const e=[];return this.cards.filter(a=>a.orientation==="reversed").length>=6&&e.push("      "),this.cards[1]&&this.cards[1].orientation==="reversed"&&e.push(` (${this.cards[1].nameKr}) `),this.cards[2]&&this.cards[2].orientation==="reversed"&&e.push(` (${this.cards[2].nameKr})  `),((n=this.cards[0])==null?void 0:n.orientation)!==((r=this.cards[1])==null?void 0:r.orientation)&&e.push("     "),((i=this.cards[8])==null?void 0:i.orientation)==="upright"&&((o=this.cards[9])==null?void 0:o.orientation)==="reversed"&&e.push("       "),e}generateAdvice(){const e=[],s=this.cards[0],n=this.cards[1];s&&n&&(s.orientation==="upright"&&n.orientation==="reversed"?e.push("     "):s.orientation==="reversed"&&n.orientation==="upright"&&e.push("     "));const r=this.cards[3],i=this.cards[5];(r==null?void 0:r.orientation)==="reversed"&&(i==null?void 0:i.orientation)==="upright"&&e.push("     ");const o=this.cards[6],a=this.cards[7];o&&a&&o.orientation!==a.orientation&&e.push("        ");const c=this.analyzeElementalBalance(),u=Object.entries(c).filter(([d])=>d!=="analysis").sort((d,f)=>f[1]-d[1])[0];if(u&&u[1]>=5){const d={fire:"   ",water:"     ",air:"    ",earth:"    "};e.push(d[u[0]])}return e.join(". ")+"."}extractKeyThemes(){var s,n;const e=new Set;return this.cards.forEach(r=>{if(r.arcana==="major"){const i={"The Fool":" ","The Magician":" ","The High Priestess":" ","The Empress":" ","The Emperor":" ","The Hierophant":" ","The Lovers":" ","The Chariot":" ",Strength:" ","The Hermit":" ","Wheel of Fortune":" ",Justice:" ","The Hanged Man":"  ",Death:" ",Temperance:" ","The Devil":" ","The Tower":" ","The Star":" ","The Moon":" ","The Sun":" ",Judgement:" ","The World":" "};i[r.name]&&e.add(i[r.name])}if(r.suit){const i={wands:" ",cups:" ",swords:" ",pentacles:" "};i[r.suit]&&e.add(i[r.suit])}}),((s=this.cards[0])==null?void 0:s.arcana)==="major"&&((n=this.cards[1])==null?void 0:n.arcana)==="major"&&e.add(" "),Array.from(e)}analyzeElementalBalance(){var o,a;const e={fire:0,water:0,air:0,earth:0};this.cards.forEach(c=>{if(c.element)e[c.element]++;else if(c.suit){const u={wands:"fire",cups:"water",swords:"air",pentacles:"earth"};u[c.suit]&&e[u[c.suit]]++}});const s=Object.values(e),n=Math.max(...s),r=Math.min(...s);let i="";if(n-r<=2)i="  ,    .";else{const c=(o=Object.entries(e).find(([f,v])=>v===n))==null?void 0:o[0],u=(a=Object.entries(e).find(([f,v])=>v===r))==null?void 0:a[0],d={fire:"()",water:"()",air:"()",earth:"()"};i=`${d[c]}   ${d[u]}  .     .`}return{...e,analysis:i}}analyzeTimeFlow(){var r,i;const e=this.cards[3],s=`${(r=this.cards[0])==null?void 0:r.nameKr}() ${(i=this.cards[1])==null?void 0:i.nameKr}()`,n=this.cards[5];return{past:e?`${e.nameKr}${e.orientation==="reversed"?"()":""}    `:"",present:` ${s}   `,future:n?`${n.nameKr}${n.orientation==="reversed"?"()":""}  `:""}}analyzeRelationships(){const e=this.cards[0],s=this.cards[1],n=this.cards[6],r=this.cards[7],i=this.cards[8],o=this.cards[9];return{innerOuter:this.compareCards(e,s," "),selfPerception:this.compareCards(n,r," "),expectations:this.compareCards(i,o," ")}}compareCards(e,s,n){return!e||!s?"":e.orientation===s.orientation?`${n}   `:`${n}    `}}class ob{async generateInterpretation(e){try{const{data:{session:s}}=await le.auth.getSession();if(!s)throw console.error(" "),new Error(" ");console.log(" Edge Function  ..."),console.log("-  :",{...e,isPremium:!0});const{data:n,error:r}=await le.functions.invoke("generate-interpretation",{body:{...e,isPremium:!0},headers:{Authorization:`Bearer ${s.access_token}`}});if(r)throw console.error("Edge Function  :",r),new Error(r.message||"AI     .");if(console.log(" Edge Function  :",n),n&&n.interpretation)return console.log(" AI  !"),console.log("-  :",n.interpretation.length),console.log("-   300:",n.interpretation.substring(0,300)),console.log("-   300:",n.interpretation.substring(n.interpretation.length-300)),{success:!0,interpretation:n.interpretation,interpretationId:n.interpretationId,probabilityAnalysis:n.probabilityAnalysis};throw console.error(" AI    :",n),new Error("AI    ")}catch(s){return console.error("AI   :",s),{success:!1,error:s instanceof Error?s.message:"    ."}}}async getPreviousInterpretations(e,s=5){try{const{data:n,error:r}=await le.from("ai_interpretations").select(`
          id,
          reading_id,
          interpretation_text,
          created_at,
          rating,
          reading:tarot_readings(
            spread_id,
            topic,
            created_at
          )
        `).eq("user_id",e).order("created_at",{ascending:!1}).limit(s);return r?(console.error("   :",r),[]):n||[]}catch(n){return console.error("   :",n),[]}}async submitRating(e,s){try{const{error:n}=await le.from("ai_interpretations").update({rating:s}).eq("id",e);if(n)throw console.error("  :",n),new Error("    .");return{success:!0}}catch(n){return console.error("  :",n),{success:!1,error:n.message}}}}const Uu=new ob;class Bo{constructor(e){this.cache=new Map,this.CACHE_DURATION=1e3*60*60,this.isPremium=e}async getSingleCardInterpretation(e,s,n,r,i){var c;if(!this.isPremium)return this.getTemplateInterpretation(e,s,n);const o=this.generateCacheKey({card:e,position:s,topic:n,spreadType:r,interpretationType:"single"}),a=this.getFromCache(o);if(a)return a;try{const{data:u,error:d}=await le.functions.invoke("generate-interpretation",{body:{card:e,position:s,topic:n,spreadType:r,allCards:i,userId:(c=(await le.auth.getUser()).data.user)==null?void 0:c.id,isPremium:this.isPremium,interpretationType:"single"}});if(d)throw d;const f=u.interpretation;return this.setCache(o,f),f}catch(u){return console.error("AI  :",u),this.getTemplateInterpretation(e,s,n)}}async getOverallInterpretation(e,s,n){var o;if(!this.isPremium)return this.getTemplateOverallInterpretation(e,s,n);const r=this.generateCacheKey({allCards:e,topic:s,spreadType:n,interpretationType:"overall"}),i=this.getFromCache(r);if(i)return i;try{const{data:a,error:c}=await le.functions.invoke("generate-interpretation",{body:{allCards:e,topic:s,spreadType:n,userId:(o=(await le.auth.getUser()).data.user)==null?void 0:o.id,isPremium:this.isPremium,interpretationType:"overall"}});if(c)throw c;const u=a.interpretation;return this.setCache(r,u),u}catch(a){return console.error("AI   :",a),this.getTemplateOverallInterpretation(e,s,n)}}generateCacheKey(e){const s=[];if(e.card&&s.push(`card:${e.card.id}_${e.card.orientation}`),e.position&&s.push(`pos:${e.position.position}`),e.allCards){const n=e.allCards.map(r=>`${r.id}_${r.orientation}_${r.position.position}`).sort().join("|");s.push(`cards:${n}`)}return s.push(`topic:${e.topic}`),s.push(`spread:${e.spreadType}`),s.push(`type:${e.interpretationType}`),s.join("_")}getFromCache(e){const s=this.cache.get(e);return s&&Date.now()-s.timestamp<this.CACHE_DURATION?s.interpretation:null}setCache(e,s){if(this.cache.set(e,{interpretation:s,timestamp:Date.now()}),this.cache.size>100){const n=this.cache.keys().next().value;this.cache.delete(n)}}getTemplateInterpretation(e,s,n){var o;const r={love:{upright:"     .",reversed:"    ."},career:{upright:"    .",reversed:"     ."},money:{upright:"    .",reversed:"    ."},general:{upright:"    .",reversed:"      ."}},i=((o=r[n])==null?void 0:o[e.orientation])||r.general[e.orientation];return`${s.name} ${i}`}async getInterpretation(e,s,n){var r;if(!this.isPremium)return this.getTemplateOverallInterpretation(n,s,e);try{const i=n.map((c,u)=>({id:u,name_kr:c.cardName,nameKr:c.cardName,orientation:c.orientation,position:{position:u+1,name:c.position}})),{data:o,error:a}=await le.functions.invoke("generate-interpretation",{body:{cards:i,topic:s,spreadType:"celtic_cross",userId:(r=(await le.auth.getUser()).data.user)==null?void 0:r.id,isPremium:this.isPremium}});if(a)throw a;return o.interpretation}catch(i){return console.error("AI    :",i),this.getCelticCrossTemplateInterpretation(n,s)}}getCelticCrossTemplateInterpretation(e,s){const n={:{intro:" ",ending:"      ."},:{intro:" ",ending:"     ."},:{intro:" ",ending:"      ."},:{intro:" ",ending:"        ."}},r=n[s]||n.;return`${r.intro}      .
    
  ${e[0].cardName}       .

 ${e[3].cardName}  ${e[0].cardName}  ,  ${e[5].cardName}  .

${r.ending}`}getTemplateOverallInterpretation(e,s,n){const r=e.filter(c=>c.orientation==="upright").length,i=e.filter(c=>c.arcana==="major").length;let o="";r>e.length/2?o+="    . ":o+="    . ";const a={love:"     .",career:"     .",money:"    .",general:"      ."};return o+=a[s]||a.general,i>=e.length/2&&(o+="      ,    ."),o}async submitRating(e,s,n){var r;try{console.log("  :",{interpretationId:e,rating:s});const{data:i,error:o}=await le.from("ai_interpretations").update({rating:s,updated_at:new Date().toISOString()}).eq("id",e).select();if(o){console.error("  :",o);const{data:a,error:c}=await le.functions.invoke("submit-feedback",{body:{interpretationId:e,rating:s,userId:(r=(await le.auth.getUser()).data.user)==null?void 0:r.id,editedInterpretation:n}});if(c)throw c;console.log("Edge Function    :",a)}else console.log("  :",i)}catch(i){throw console.error("  :",i),i}}async generateInterpretation(e,s,n){var r;try{const i=this.generateCacheKey({allCards:e,topic:s,spreadType:n,interpretationType:"overall"}),o=this.getFromCache(i);if(o)return{text:o};const{data:a,error:c}=await le.functions.invoke("generate-interpretation",{body:{cards:e,topic:s,spreadType:n,userId:(r=(await le.auth.getUser()).data.user)==null?void 0:r.id,isPremium:this.isPremium}});if(c)throw c;const u=a.interpretation;return this.setCache(i,u),{text:u,interpretationId:a.interpretationId}}catch(i){return console.error("AI   :",i),{text:this.getTemplateOverallInterpretation(e,s,n)}}}}const ab=Object.freeze(Object.defineProperty({__proto__:null,AIInterpretationService:Bo},Symbol.toStringTag,{value:"Module"})),Yn=t=>{try{if(t.imageUrl&&!t.imageUrl.includes("undefined")){let e=t.imageUrl;if(e=e.replace("/assets/tarot-cards/minor/cups/","/assets/tarot-cards/minor/"),e=e.replace("/assets/tarot-cards/minor/wands/","/assets/tarot-cards/minor/"),e=e.replace("/assets/tarot-cards/minor/swords/","/assets/tarot-cards/minor/"),e=e.replace("/assets/tarot-cards/minor/pentacles/","/assets/tarot-cards/minor/"),e.includes("/assets/tarot-cards/major/")){const s={"00-the-fool.png":"00-the-Fool.png","01-the-magician.png":"01-The-Magician.png","02-the-high-priestess.png":"02-The-High-Priestess.png","03-the-empress.png":"03-The-Empress.png","04-the-emperor.png":"04-The-Emperor.png","05-the-hierophant.png":"05-The-Hierophant.png","06-the-lovers.png":"06-The-Lovers.png","07-the-chariot.png":"07-The-Chariot.png","08-strength.png":"08-Strength.png","09-the-hermit.png":"09-The-Hermit.png","10-wheel-of-fortune.png":"10-Wheel-of-Fortune.png","11-justice.png":"11-Justice.png","12-the-hanged-man.png":"12-The-Hanged-Man.png","13-death.png":"13-Death.png","14-temperance.png":"14-Temperance.png","15-the-devil.png":"15-The-Devil.png","16-the-tower.png":"16-The-Tower.png","17-the-star.png":"17-The-Star.png","18-the-moon.png":"18-The-Moon.png","19-the-sun.png":"19-The-Sun.png","20-judgement.png":"20-Judgement.png","21-the-world.png":"21-The-World.png"};for(const[n,r]of Object.entries(s))if(e.includes(n)){e=e.replace(n,r);break}}return e}if(t.arcana==="minor"){const e=String(t.number||1).padStart(2,"0");let s;if(t.suit)if(t.number<=10)s=`${{1:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten"}[t.number]}-of-${t.suit}`;else{const n={11:"Page",12:"Knight",13:"Queen",14:"King"},r=t.suit.charAt(0).toUpperCase()+t.suit.slice(1);s=`${n[t.number]}-of-${r}`}else s=t.name.toLowerCase().replace(/\s+/g,"-");return`/assets/tarot-cards/minor/${e}-${s}.png`}return t.arcana==="major"?`/assets/tarot-cards/major/${{0:"00-the-Fool.png",1:"01-The-Magician.png",2:"02-The-High-Priestess.png",3:"03-The-Empress.png",4:"04-The-Emperor.png",5:"05-The-Hierophant.png",6:"06-The-Lovers.png",7:"07-The-Chariot.png",8:"08-Strength.png",9:"09-The-Hermit.png",10:"10-Wheel-of-Fortune.png",11:"11-Justice.png",12:"12-The-Hanged-Man.png",13:"13-Death.png",14:"14-Temperance.png",15:"15-The-Devil.png",16:"16-The-Tower.png",17:"17-The-Star.png",18:"18-The-Moon.png",19:"19-The-Sun.png",20:"20-Judgement.png",21:"21-The-World.png"}[t.number]||"00-the-Fool.png"}`:"/assets/tarot-cards/major/00-the-Fool.png"}catch(e){return console.error("  URL  :",e),"/assets/tarot-cards/major/00-the-Fool.png"}},kn=t=>t.is_reversed||t.orientation==="reversed"||!1,Xs=t=>{const e=t.target;if(e&&e.parentElement&&(e.style.display="none",!e.parentElement.querySelector(".fallback-emoji"))){const s=document.createElement("div");s.className="fallback-emoji",s.textContent="",s.style.cssText=`
        font-size: 48px; text-align: center; display: flex;
        align-items: center; justify-content: center;
        width: 100%; height: 100%; position: absolute;
        top: 0; left: 0; background: rgba(75, 85, 99, 0.9);
        border-radius: 6px; z-index: 10;
      `,e.parentElement.appendChild(s)}},lb={celtic_cross:{name:" ",positions:[{position:1,title:" ",description:"     .      .",keywords:[""," "," "]},{position:2,title:"/",description:"   .       .",keywords:["",""," "]},{position:3,title:" ",description:"      .     .",keywords:[" ","",""]},{position:4,title:" ",description:"   ,      .",keywords:[" "," "," "]},{position:5,title:" ",description:"      .      .",keywords:[" ",""," "]},{position:6,title:" ",description:"     .       .",keywords:[" ","  "," "]},{position:7,title:" ",description:"      .      .",keywords:[""," "," "]},{position:8,title:" ",description:"    .       .",keywords:[""," "," "]},{position:9,title:" ",description:"     .      .",keywords:["",""," "]},{position:10,title:" ",description:"     .       .",keywords:[" ",""," "]}]},seven_star:{name:" ",positions:[{position:1,title:"",description:"    .      .",keywords:["","",""]},{position:2,title:"",description:"     .     .",keywords:["",""," "]},{position:3,title:"",description:"    .    .",keywords:["","",""]},{position:4,title:"",description:"    .     .",keywords:["",""," "]},{position:5,title:" ",description:"    .      .",keywords:[""," "," "]},{position:6,title:"",description:"   .     .",keywords:["","",""]},{position:7,title:"",description:"    .      .",keywords:["","",""]}]},cup_of_relationship:{name:"  ",positions:[{position:1,title:"",description:"    .    .",keywords:[""," "," "]},{position:2,title:"",description:"   .    .",keywords:[""," "," "]},{position:3,title:" ",description:"      .    .",keywords:[" ","",""]},{position:4,title:" ",description:"     .    .",keywords:["","",""]},{position:5,title:"",description:"    .    .",keywords:["","",""]},{position:6,title:"",description:"   .      .",keywords:["","",""]},{position:7,title:" ",description:"   .    .",keywords:["","",""]}]}};function cb(t,e){const s=lb[t];return s&&s.positions.find(n=>n.position===e)||null}const ub={key:0,class:"position-meaning-inline"},db={class:"meaning-content"},hb={class:"position-header"},fb={class:"position-number"},pb={class:"position-title"},gb={class:"position-description"},mb={key:0,class:"keywords"},vb=Qe({__name:"PositionMeaningInline",props:{visible:{type:Boolean},spreadId:{},position:{}},setup(t){const e=t,s=ye(()=>cb(e.spreadId,e.position));return(n,r)=>(w(),ft(Me,{name:"fade-slide"},{default:Pe(()=>[n.visible&&s.value?(w(),b("div",ub,[l("div",db,[l("div",hb,[l("span",fb,"Position "+$(n.position),1),l("h3",pb,$(s.value.title),1)]),l("p",gb,$(s.value.description),1),s.value.keywords?(w(),b("div",mb,[(w(!0),b(be,null,xe(s.value.keywords,i=>(w(),b("span",{class:"keyword",key:i},$(i),1))),128))])):M("",!0)])])):M("",!0)]),_:1}))}}),Ho=tt(vb,[["__scopeId","data-v-eec6bef5"]]),yb={class:"celtic-cross-layout"},wb={class:"card-slot"},bb={key:0,class:"card-content"},_b={key:0,class:"card-back"},kb={key:1,class:"card-front"},Sb=["src","alt"],Cb={class:"card-info"},$b={key:0,class:"card-placeholder"},Pb={class:"card-slot"},Eb={key:0,class:"card-content"},Tb={key:0,class:"card-back"},Ab={key:1,class:"card-front"},Ib=["src","alt"],Rb={class:"card-info"},Mb={key:0,class:"card-placeholder"},Ob={class:"card-slot"},jb={key:0,class:"card-content"},Lb={key:0,class:"card-back"},Db={key:1,class:"card-front"},Ub=["src","alt"],xb={class:"card-info"},Nb={key:0,class:"card-placeholder"},Kb={class:"card-slot"},Fb={key:0,class:"card-content"},Bb={key:0,class:"card-back"},Hb={key:1,class:"card-front"},zb=["src","alt"],Vb={class:"card-info"},qb={key:0,class:"card-placeholder"},Wb={class:"card-slot"},Gb={key:0,class:"card-content"},Jb={key:0,class:"card-back"},Qb={key:1,class:"card-front"},Yb=["src","alt"],Xb={class:"card-info"},Zb={key:0,class:"card-placeholder"},e1={class:"card-slot"},t1={key:0,class:"card-content"},s1={key:0,class:"card-back"},n1={key:1,class:"card-front"},r1=["src","alt"],i1={class:"card-info"},o1={key:0,class:"card-placeholder"},a1={class:"card-slot"},l1={key:0,class:"card-content"},c1={key:0,class:"card-back"},u1={key:1,class:"card-front"},d1=["src","alt"],h1={class:"card-info"},f1={key:0,class:"card-placeholder"},p1={class:"card-slot"},g1={key:0,class:"card-content"},m1={key:0,class:"card-back"},v1={key:1,class:"card-front"},y1=["src","alt"],w1={class:"card-info"},b1={key:0,class:"card-placeholder"},_1={class:"card-slot"},k1={key:0,class:"card-content"},S1={key:0,class:"card-back"},C1={key:1,class:"card-front"},$1=["src","alt"],P1={class:"card-info"},E1={key:0,class:"card-placeholder"},T1={class:"card-slot"},A1={key:0,class:"card-content"},I1={key:0,class:"card-back"},R1={key:1,class:"card-front"},M1=["src","alt"],O1={class:"card-info"},j1={key:0,class:"card-placeholder"},L1={key:0,class:"action-buttons-container"},D1={key:1,class:"progress-indicator"},U1={class:"progress-bar"},x1={key:2,class:"interpretation-section"},N1={class:"interpretation-container"},K1={key:0,class:"aspect-section positive"},F1={key:1,class:"aspect-section negative"},B1={key:2,class:"advice-section"},H1={key:3,class:"themes-section"},z1={class:"theme-tags"},V1={key:4,class:"elemental-section"},q1={class:"elemental-grid"},W1={class:"element-item fire"},G1={class:"element-count"},J1={class:"element-item water"},Q1={class:"element-count"},Y1={class:"element-item air"},X1={class:"element-count"},Z1={class:"element-item earth"},e_={class:"element-count"},t_={class:"elemental-analysis"},s_=Qe({__name:"CelticCrossLayout",props:{cards:{},isDrawing:{type:Boolean},drawProgress:{},interpretation:{},showInterpretation:{type:Boolean},topic:{}},emits:["card-click","reveal-all"],setup(t,{emit:e}){const s=t,n=e,r=W(),i=Ve(),o=ye(()=>s.cards.some(p=>p&&!p.revealed)),a=W(!1),c=W(0),u=async()=>{await kt.buttonTapHaptic(),n("reveal-all")},d=async p=>{s.cards[p]&&(await kt.buttonTapHaptic(),s.cards[p].revealed||n("card-click",p),i.isPremium&&(c.value=p+1,a.value=!0))},f=p=>{try{if(p.imageUrl&&!p.imageUrl.includes("undefined")){let h=p.imageUrl;if(h=h.replace("/assets/tarot-cards/minor/cups/","/assets/tarot-cards/minor/"),h=h.replace("/assets/tarot-cards/minor/wands/","/assets/tarot-cards/minor/"),h=h.replace("/assets/tarot-cards/minor/swords/","/assets/tarot-cards/minor/"),h=h.replace("/assets/tarot-cards/minor/pentacles/","/assets/tarot-cards/minor/"),h.includes("/assets/tarot-cards/major/")){const m={"00-the-fool.png":"00-the-Fool.png","01-the-magician.png":"01-The-Magician.png","02-the-high-priestess.png":"02-The-High-Priestess.png","03-the-empress.png":"03-The-Empress.png","04-the-emperor.png":"04-The-Emperor.png","05-the-hierophant.png":"05-The-Hierophant.png","06-the-lovers.png":"06-The-Lovers.png","07-the-chariot.png":"07-The-Chariot.png","08-strength.png":"08-Strength.png","09-the-hermit.png":"09-The-Hermit.png","10-wheel-of-fortune.png":"10-Wheel-of-Fortune.png","11-justice.png":"11-Justice.png","12-the-hanged-man.png":"12-The-Hanged-Man.png","13-death.png":"13-Death.png","14-temperance.png":"14-Temperance.png","15-the-devil.png":"15-The-Devil.png","16-the-tower.png":"16-The-Tower.png","17-the-star.png":"17-The-Star.png","18-the-moon.png":"18-The-Moon.png","19-the-sun.png":"19-The-Sun.png","20-judgement.png":"20-Judgement.png","21-the-world.png":"21-The-World.png"};for(const[C,k]of Object.entries(m))if(h.includes(C)){h=h.replace(C,k);break}}return h}if(p.arcana==="minor"){const h=String(p.number||1).padStart(2,"0");let m;if(p.suit)if(p.number<=10)m=`${{1:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten"}[p.number]}-of-${p.suit}`;else{const C={11:"Page",12:"Knight",13:"Queen",14:"King"},k=p.suit.charAt(0).toUpperCase()+p.suit.slice(1);m=`${C[p.number]}-of-${k}`}else m=p.name.toLowerCase().replace(/\s+/g,"-");return`/assets/tarot-cards/minor/${h}-${m}.png`}return p.arcana==="major"?`/assets/tarot-cards/major/${{0:"00-the-Fool.png",1:"01-The-Magician.png",2:"02-The-High-Priestess.png",3:"03-The-Empress.png",4:"04-The-Emperor.png",5:"05-The-Hierophant.png",6:"06-The-Lovers.png",7:"07-The-Chariot.png",8:"08-Strength.png",9:"09-The-Hermit.png",10:"10-Wheel-of-Fortune.png",11:"11-Justice.png",12:"12-The-Hanged-Man.png",13:"13-Death.png",14:"14-Temperance.png",15:"15-The-Devil.png",16:"16-The-Tower.png",17:"17-The-Star.png",18:"18-The-Moon.png",19:"19-The-Sun.png",20:"20-Judgement.png",21:"21-The-World.png"}[p.number]||"00-the-Fool.png"}`:"/assets/tarot-cards/major/00-the-Fool.png"}catch(h){return console.error("  URL  :",h),"/assets/tarot-cards/major/00-the-Fool.png"}},v=p=>{const h=p.target;h.style.display="none";const m=h.parentElement;if(m&&!m.querySelector(".fallback-emoji")){const C=document.createElement("div");C.className="fallback-emoji",C.textContent="",m.appendChild(C)}};return(p,h)=>{var m,C,k,A,S,T,O,E,R,N,I,j,q;return w(),b(be,null,[l("div",yb,[h[56]||(h[56]=zn('<div class="layout-background" data-v-275ec6fb><svg class="celtic-knot" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" data-v-275ec6fb><defs data-v-275ec6fb><linearGradient id="celticGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-275ec6fb><stop offset="0%" style="stop-color:#A855F7;stop-opacity:0.3;" data-v-275ec6fb></stop><stop offset="50%" style="stop-color:#7C3AED;stop-opacity:0.2;" data-v-275ec6fb></stop><stop offset="100%" style="stop-color:#6D28D9;stop-opacity:0.3;" data-v-275ec6fb></stop></linearGradient></defs><circle cx="200" cy="200" r="60" fill="none" stroke="url(#celticGradient)" stroke-width="3" opacity="0.6" data-v-275ec6fb></circle><path d="M 200 140 Q 260 140 260 200 T 200 260 Q 140 260 140 200 T 200 140" fill="none" stroke="url(#celticGradient)" stroke-width="2" opacity="0.5" data-v-275ec6fb></path><path d="M 140 200 Q 140 140 200 140 T 260 200 Q 260 260 200 260 T 140 200" fill="none" stroke="url(#celticGradient)" stroke-width="2" opacity="0.5" data-v-275ec6fb></path><path d="M 200 80 L 200 120 M 200 280 L 200 320 M 120 200 L 80 200 M 280 200 L 320 200" stroke="url(#celticGradient)" stroke-width="3" opacity="0.4" data-v-275ec6fb></path></svg><div class="mystic-cross" data-v-275ec6fb><div class="cross-vertical" data-v-275ec6fb></div><div class="cross-horizontal" data-v-275ec6fb></div><div class="cross-center" data-v-275ec6fb></div></div><div class="floating-orbs" data-v-275ec6fb><div class="orb orb-1" data-v-275ec6fb></div><div class="orb orb-2" data-v-275ec6fb></div><div class="orb orb-3" data-v-275ec6fb></div><div class="orb orb-4" data-v-275ec6fb></div></div><div class="mystic-fog" data-v-275ec6fb></div></div>',1)),l("div",{class:"cards-container",ref_key:"cardsContainer",ref:r},[l("div",{class:H(["card-position position-1",{"has-card":p.cards[0],revealed:(m=p.cards[0])==null?void 0:m.revealed}]),onClick:h[0]||(h[0]=K=>d(0))},[h[12]||(h[12]=l("div",{class:"position-label"},"1. ",-1)),l("div",wb,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[0]?(w(),b("div",bb,[p.cards[0].revealed?(w(),b("div",kb,[l("img",{src:f(p.cards[0].card),alt:p.cards[0].card.nameKr,onError:v},null,40,Sb),l("div",Cb,[l("h4",null,$(p.cards[0].card.nameKr),1),l("span",{class:H(["orientation",p.cards[0].orientation])},$(p.cards[0].orientation==="upright"?"":""),3)])])):(w(),b("div",_b,h[10]||(h[10]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[0]&&p.isDrawing?(w(),b("div",$b,h[11]||(h[11]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-2",{"has-card":p.cards[1],revealed:(C=p.cards[1])==null?void 0:C.revealed}]),onClick:h[1]||(h[1]=K=>d(1))},[h[15]||(h[15]=l("div",{class:"position-label"},"2. ",-1)),l("div",Pb,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[1]?(w(),b("div",Eb,[p.cards[1].revealed?(w(),b("div",Ab,[l("img",{src:f(p.cards[1].card),alt:p.cards[1].card.nameKr,onError:v},null,40,Ib),l("div",Rb,[l("h4",null,$(p.cards[1].card.nameKr),1),l("span",{class:H(["orientation",p.cards[1].orientation])},$(p.cards[1].orientation==="upright"?"":""),3)])])):(w(),b("div",Tb,h[13]||(h[13]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[1]&&p.isDrawing?(w(),b("div",Mb,h[14]||(h[14]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-3",{"has-card":p.cards[2],revealed:(k=p.cards[2])==null?void 0:k.revealed}]),onClick:h[2]||(h[2]=K=>d(2))},[h[18]||(h[18]=l("div",{class:"position-label"},"3. ",-1)),l("div",Ob,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[2]?(w(),b("div",jb,[p.cards[2].revealed?(w(),b("div",Db,[l("img",{src:f(p.cards[2].card),alt:p.cards[2].card.nameKr,onError:v},null,40,Ub),l("div",xb,[l("h4",null,$(p.cards[2].card.nameKr),1),l("span",{class:H(["orientation",p.cards[2].orientation])},$(p.cards[2].orientation==="upright"?"":""),3)])])):(w(),b("div",Lb,h[16]||(h[16]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[2]&&p.isDrawing?(w(),b("div",Nb,h[17]||(h[17]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-4",{"has-card":p.cards[3],revealed:(A=p.cards[3])==null?void 0:A.revealed}]),onClick:h[3]||(h[3]=K=>d(3))},[h[21]||(h[21]=l("div",{class:"position-label"},"4. ",-1)),l("div",Kb,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[3]?(w(),b("div",Fb,[p.cards[3].revealed?(w(),b("div",Hb,[l("img",{src:f(p.cards[3].card),alt:p.cards[3].card.nameKr,onError:v},null,40,zb),l("div",Vb,[l("h4",null,$(p.cards[3].card.nameKr),1),l("span",{class:H(["orientation",p.cards[3].orientation])},$(p.cards[3].orientation==="upright"?"":""),3)])])):(w(),b("div",Bb,h[19]||(h[19]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[3]&&p.isDrawing?(w(),b("div",qb,h[20]||(h[20]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-5",{"has-card":p.cards[4],revealed:(S=p.cards[4])==null?void 0:S.revealed}]),onClick:h[4]||(h[4]=K=>d(4))},[h[24]||(h[24]=l("div",{class:"position-label"},"5.  ",-1)),l("div",Wb,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[4]?(w(),b("div",Gb,[p.cards[4].revealed?(w(),b("div",Qb,[l("img",{src:f(p.cards[4].card),alt:p.cards[4].card.nameKr,onError:v},null,40,Yb),l("div",Xb,[l("h4",null,$(p.cards[4].card.nameKr),1),l("span",{class:H(["orientation",p.cards[4].orientation])},$(p.cards[4].orientation==="upright"?"":""),3)])])):(w(),b("div",Jb,h[22]||(h[22]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[4]&&p.isDrawing?(w(),b("div",Zb,h[23]||(h[23]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-6",{"has-card":p.cards[5],revealed:(T=p.cards[5])==null?void 0:T.revealed}]),onClick:h[5]||(h[5]=K=>d(5))},[h[27]||(h[27]=l("div",{class:"position-label"},"6. ",-1)),l("div",e1,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[5]?(w(),b("div",t1,[p.cards[5].revealed?(w(),b("div",n1,[l("img",{src:f(p.cards[5].card),alt:p.cards[5].card.nameKr,onError:v},null,40,r1),l("div",i1,[l("h4",null,$(p.cards[5].card.nameKr),1),l("span",{class:H(["orientation",p.cards[5].orientation])},$(p.cards[5].orientation==="upright"?"":""),3)])])):(w(),b("div",s1,h[25]||(h[25]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[5]&&p.isDrawing?(w(),b("div",o1,h[26]||(h[26]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-7",{"has-card":p.cards[6],revealed:(O=p.cards[6])==null?void 0:O.revealed}]),onClick:h[6]||(h[6]=K=>d(6))},[h[30]||(h[30]=l("div",{class:"position-label"},"7. ",-1)),l("div",a1,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[6]?(w(),b("div",l1,[p.cards[6].revealed?(w(),b("div",u1,[l("img",{src:f(p.cards[6].card),alt:p.cards[6].card.nameKr,onError:v},null,40,d1),l("div",h1,[l("h4",null,$(p.cards[6].card.nameKr),1),l("span",{class:H(["orientation",p.cards[6].orientation])},$(p.cards[6].orientation==="upright"?"":""),3)])])):(w(),b("div",c1,h[28]||(h[28]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[6]&&p.isDrawing?(w(),b("div",f1,h[29]||(h[29]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-8",{"has-card":p.cards[7],revealed:(E=p.cards[7])==null?void 0:E.revealed}]),onClick:h[7]||(h[7]=K=>d(7))},[h[33]||(h[33]=l("div",{class:"position-label"},"8. ",-1)),l("div",p1,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[7]?(w(),b("div",g1,[p.cards[7].revealed?(w(),b("div",v1,[l("img",{src:f(p.cards[7].card),alt:p.cards[7].card.nameKr,onError:v},null,40,y1),l("div",w1,[l("h4",null,$(p.cards[7].card.nameKr),1),l("span",{class:H(["orientation",p.cards[7].orientation])},$(p.cards[7].orientation==="upright"?"":""),3)])])):(w(),b("div",m1,h[31]||(h[31]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[7]&&p.isDrawing?(w(),b("div",b1,h[32]||(h[32]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-9",{"has-card":p.cards[8],revealed:(R=p.cards[8])==null?void 0:R.revealed}]),onClick:h[8]||(h[8]=K=>d(8))},[h[36]||(h[36]=l("div",{class:"position-label"},"9.  ",-1)),l("div",_1,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[8]?(w(),b("div",k1,[p.cards[8].revealed?(w(),b("div",C1,[l("img",{src:f(p.cards[8].card),alt:p.cards[8].card.nameKr,onError:v},null,40,$1),l("div",P1,[l("h4",null,$(p.cards[8].card.nameKr),1),l("span",{class:H(["orientation",p.cards[8].orientation])},$(p.cards[8].orientation==="upright"?"":""),3)])])):(w(),b("div",S1,h[34]||(h[34]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[8]&&p.isDrawing?(w(),b("div",E1,h[35]||(h[35]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-10",{"has-card":p.cards[9],revealed:(N=p.cards[9])==null?void 0:N.revealed}]),onClick:h[9]||(h[9]=K=>d(9))},[h[39]||(h[39]=l("div",{class:"position-label"},"10.  ",-1)),l("div",T1,[fe(Me,{name:"card-flip"},{default:Pe(()=>[p.cards[9]?(w(),b("div",A1,[p.cards[9].revealed?(w(),b("div",R1,[l("img",{src:f(p.cards[9].card),alt:p.cards[9].card.nameKr,onError:v},null,40,M1),l("div",O1,[l("h4",null,$(p.cards[9].card.nameKr),1),l("span",{class:H(["orientation",p.cards[9].orientation])},$(p.cards[9].orientation==="upright"?"":""),3)])])):(w(),b("div",I1,h[37]||(h[37]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!p.cards[9]&&p.isDrawing?(w(),b("div",j1,h[38]||(h[38]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2)],512),p.isDrawing?M("",!0):(w(),b("div",L1,[o.value?(w(),b("button",{key:0,class:"btn-action btn-reveal-all",onClick:u},h[40]||(h[40]=[l("span",{class:"icon"},"",-1),Ae("    ",-1)]))):M("",!0),To(p.$slots,"action-button",{},void 0)])),p.isDrawing?(w(),b("div",D1,[h[41]||(h[41]=l("p",null,"  ...",-1)),l("div",U1,[l("div",{class:"progress-fill",style:St({width:p.drawProgress+"%"})},null,4)])])):M("",!0),p.showInterpretation&&p.interpretation&&!o.value?(w(),b("div",x1,[l("div",N1,[h[55]||(h[55]=l("h3",null,"   ",-1)),((I=p.interpretation.positiveAspects)==null?void 0:I.length)>0?(w(),b("div",K1,[h[42]||(h[42]=l("h4",null,"  ",-1)),l("ul",null,[(w(!0),b(be,null,xe(p.interpretation.positiveAspects,(K,B)=>(w(),b("li",{key:"positive-"+B},$(K),1))),128))])])):M("",!0),((j=p.interpretation.negativeAspects)==null?void 0:j.length)>0?(w(),b("div",F1,[h[43]||(h[43]=l("h4",null,"  ",-1)),l("ul",null,[(w(!0),b(be,null,xe(p.interpretation.negativeAspects,(K,B)=>(w(),b("li",{key:"negative-"+B},$(K),1))),128))])])):M("",!0),p.interpretation.advice?(w(),b("div",B1,[h[44]||(h[44]=l("h4",null," ",-1)),l("p",null,$(p.interpretation.advice),1)])):M("",!0),((q=p.interpretation.keyThemes)==null?void 0:q.length)>0?(w(),b("div",H1,[h[45]||(h[45]=l("h4",null,"  ",-1)),l("div",z1,[(w(!0),b(be,null,xe(p.interpretation.keyThemes,(K,B)=>(w(),b("span",{key:"theme-"+B,class:"theme-tag"},$(K),1))),128))])])):M("",!0),p.interpretation.elementalBalance?(w(),b("div",V1,[h[54]||(h[54]=l("h4",null,"  ",-1)),l("div",q1,[l("div",W1,[h[46]||(h[46]=l("span",{class:"element-icon"},"",-1)),h[47]||(h[47]=l("span",{class:"element-name"},"",-1)),l("span",G1,$(p.interpretation.elementalBalance.fire),1)]),l("div",J1,[h[48]||(h[48]=l("span",{class:"element-icon"},"",-1)),h[49]||(h[49]=l("span",{class:"element-name"},"",-1)),l("span",Q1,$(p.interpretation.elementalBalance.water),1)]),l("div",Y1,[h[50]||(h[50]=l("span",{class:"element-icon"},"",-1)),h[51]||(h[51]=l("span",{class:"element-name"},"",-1)),l("span",X1,$(p.interpretation.elementalBalance.air),1)]),l("div",Z1,[h[52]||(h[52]=l("span",{class:"element-icon"},"",-1)),h[53]||(h[53]=l("span",{class:"element-name"},"",-1)),l("span",e_,$(p.interpretation.elementalBalance.earth),1)])]),l("p",t_,$(p.interpretation.elementalBalance.analysis),1)])):M("",!0)])])):M("",!0)]),pe(i).isPremium?(w(),ft(Ho,{key:0,visible:a.value,"spread-id":"celtic_cross",position:c.value},null,8,["visible","position"])):M("",!0)],64)}}}),n_=tt(s_,[["__scopeId","data-v-275ec6fb"]]),r_={class:"seven-star-layout"},i_={class:"layout-background"},o_={class:"star-constellation"},a_={class:"sparkles"},l_={class:"card-slot"},c_={key:0,class:"card-content"},u_={key:0,class:"card-back"},d_={key:1,class:"card-front"},h_=["src","alt"],f_={class:"card-info"},p_={key:0,class:"card-placeholder"},g_={class:"card-slot"},m_={key:0,class:"card-content"},v_={key:0,class:"card-back"},y_={key:1,class:"card-front"},w_=["src","alt"],b_={class:"card-info"},__={key:0,class:"card-placeholder"},k_={class:"card-slot"},S_={key:0,class:"card-content"},C_={key:0,class:"card-back"},$_={key:1,class:"card-front"},P_=["src","alt"],E_={class:"card-info"},T_={key:0,class:"card-placeholder"},A_={class:"card-slot"},I_={key:0,class:"card-content"},R_={key:0,class:"card-back"},M_={key:1,class:"card-front"},O_=["src","alt"],j_={class:"card-info"},L_={key:0,class:"card-placeholder"},D_={class:"card-slot"},U_={key:0,class:"card-content"},x_={key:0,class:"card-back"},N_={key:1,class:"card-front"},K_=["src","alt"],F_={class:"card-info"},B_={key:0,class:"card-placeholder"},H_={class:"card-slot"},z_={key:0,class:"card-content"},V_={key:0,class:"card-back"},q_={key:1,class:"card-front"},W_=["src","alt"],G_={class:"card-info"},J_={key:0,class:"card-placeholder"},Q_={class:"card-slot"},Y_={key:0,class:"card-content"},X_={key:0,class:"card-back"},Z_={key:1,class:"card-front"},ek=["src","alt"],tk={class:"card-info"},sk={key:0,class:"card-placeholder"},nk={key:0,class:"action-buttons-container"},rk={key:1,class:"button-placeholder"},ik={key:1,class:"progress-indicator"},ok={class:"progress-bar"},ak=Qe({__name:"SevenStarLayout",props:{cards:{},isDrawing:{type:Boolean},drawProgress:{}},emits:["card-click","reveal-all"],setup(t,{emit:e}){const s=t,n=e,r=Ve(),i=ye(()=>s.cards.some(h=>h&&!h.revealed)),o=W(!1),a=W(0),c=W(),u=h=>{const m=Math.random()*100,C=Math.random()*100,k=Math.random()*5,A=3+Math.random()*4;return{left:`${m}%`,top:`${C}%`,animationDelay:`${k}s`,animationDuration:`${A}s`}},d=async()=>{await kt.buttonTapHaptic(),n("reveal-all")},f=async h=>{s.cards[h]&&!s.cards[h].revealed&&(await kt.buttonTapHaptic(),n("card-click",h),r.isPremium&&(a.value=h+1,o.value=!0))},v=h=>{try{if(h.imageUrl&&!h.imageUrl.includes("undefined")){let m=h.imageUrl;if(m=m.replace("/assets/tarot-cards/minor/cups/","/assets/tarot-cards/minor/"),m=m.replace("/assets/tarot-cards/minor/wands/","/assets/tarot-cards/minor/"),m=m.replace("/assets/tarot-cards/minor/swords/","/assets/tarot-cards/minor/"),m=m.replace("/assets/tarot-cards/minor/pentacles/","/assets/tarot-cards/minor/"),m.includes("/assets/tarot-cards/major/")){const C={"00-the-fool.png":"00-the-Fool.png","01-the-magician.png":"01-The-Magician.png","02-the-high-priestess.png":"02-The-High-Priestess.png","03-the-empress.png":"03-The-Empress.png","04-the-emperor.png":"04-The-Emperor.png","05-the-hierophant.png":"05-The-Hierophant.png","06-the-lovers.png":"06-The-Lovers.png","07-the-chariot.png":"07-The-Chariot.png","08-strength.png":"08-Strength.png","09-the-hermit.png":"09-The-Hermit.png","10-wheel-of-fortune.png":"10-Wheel-of-Fortune.png","11-justice.png":"11-Justice.png","12-the-hanged-man.png":"12-The-Hanged-Man.png","13-death.png":"13-Death.png","14-temperance.png":"14-Temperance.png","15-the-devil.png":"15-The-Devil.png","16-the-tower.png":"16-The-Tower.png","17-the-star.png":"17-The-Star.png","18-the-moon.png":"18-The-Moon.png","19-the-sun.png":"19-The-Sun.png","20-judgement.png":"20-Judgement.png","21-the-world.png":"21-The-World.png"};for(const[k,A]of Object.entries(C))if(m.includes(k)){m=m.replace(k,A);break}}return m}if(h.arcana==="minor"){const m=String(h.number||1).padStart(2,"0");let C;if(h.suit)if(h.number<=10)C=`${{1:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten"}[h.number]}-of-${h.suit}`;else{const k={11:"Page",12:"Knight",13:"Queen",14:"King"},A=h.suit.charAt(0).toUpperCase()+h.suit.slice(1);C=`${k[h.number]}-of-${A}`}else C=h.name.toLowerCase().replace(/\s+/g,"-");return`/assets/tarot-cards/minor/${m}-${C}.png`}return h.arcana==="major"?`/assets/tarot-cards/major/${{0:"00-the-Fool.png",1:"01-The-Magician.png",2:"02-The-High-Priestess.png",3:"03-The-Empress.png",4:"04-The-Emperor.png",5:"05-The-Hierophant.png",6:"06-The-Lovers.png",7:"07-The-Chariot.png",8:"08-Strength.png",9:"09-The-Hermit.png",10:"10-Wheel-of-Fortune.png",11:"11-Justice.png",12:"12-The-Hanged-Man.png",13:"13-Death.png",14:"14-Temperance.png",15:"15-The-Devil.png",16:"16-The-Tower.png",17:"17-The-Star.png",18:"18-The-Moon.png",19:"19-The-Sun.png",20:"20-Judgement.png",21:"21-The-World.png"}[h.number]||"00-the-Fool.png"}`:"/assets/tarot-cards/major/00-the-Fool.png"}catch(m){return console.error("  URL  :",m),"/assets/tarot-cards/major/00-the-Fool.png"}},p=h=>{const m=h.target;m.style.display="none";const C=m.parentElement;if(C&&!C.querySelector(".fallback-emoji")){const k=document.createElement("div");k.className="fallback-emoji",k.textContent="",C.appendChild(k)}};return(h,m)=>{var C,k,A,S,T,O,E;return w(),b(be,null,[l("div",r_,[l("div",i_,[l("div",o_,[m[8]||(m[8]=zn('<svg class="constellation-lines" viewBox="0 0 100 100" preserveAspectRatio="none" data-v-b313ba66><line x1="50" y1="20" x2="20" y2="35" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="20" y1="35" x2="20" y2="65" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="20" y1="65" x2="50" y2="80" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="50" y1="80" x2="80" y2="65" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="80" y1="65" x2="80" y2="35" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="80" y1="35" x2="50" y2="20" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="50" y1="20" x2="50" y2="50" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="50" y1="50" x2="50" y2="80" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line></svg>',1)),(w(),b(be,null,xe(7,R=>l("div",{class:H(["star",`star-${R}`]),key:R},m[7]||(m[7]=[l("span",{class:"star-icon"},"",-1)]),2)),64))]),l("div",a_,[(w(),b(be,null,xe(20,R=>l("div",{class:"sparkle",key:R,style:St(u())},"",4)),64))])]),l("div",{class:"cards-container",ref_key:"cardsContainer",ref:c},[l("div",{class:H(["card-position position-1",{"has-card":h.cards[0],revealed:(C=h.cards[0])==null?void 0:C.revealed}]),onClick:m[0]||(m[0]=R=>f(0))},[m[11]||(m[11]=l("div",{class:"position-label"},"1.  ",-1)),l("div",l_,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[0]?(w(),b("div",c_,[h.cards[0].revealed?(w(),b("div",d_,[l("img",{src:v(h.cards[0].card),alt:h.cards[0].card.nameKr,onError:p},null,40,h_),l("div",f_,[l("h4",null,$(h.cards[0].card.nameKr),1),l("span",{class:H(["orientation",h.cards[0].orientation])},$(h.cards[0].orientation==="upright"?"":""),3)])])):(w(),b("div",u_,m[9]||(m[9]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[0]&&h.isDrawing?(w(),b("div",p_,m[10]||(m[10]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-2",{"has-card":h.cards[1],revealed:(k=h.cards[1])==null?void 0:k.revealed}]),onClick:m[1]||(m[1]=R=>f(1))},[m[14]||(m[14]=l("div",{class:"position-label"},"2.  ",-1)),l("div",g_,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[1]?(w(),b("div",m_,[h.cards[1].revealed?(w(),b("div",y_,[l("img",{src:v(h.cards[1].card),alt:h.cards[1].card.nameKr,onError:p},null,40,w_),l("div",b_,[l("h4",null,$(h.cards[1].card.nameKr),1),l("span",{class:H(["orientation",h.cards[1].orientation])},$(h.cards[1].orientation==="upright"?"":""),3)])])):(w(),b("div",v_,m[12]||(m[12]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[1]&&h.isDrawing?(w(),b("div",__,m[13]||(m[13]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-3",{"has-card":h.cards[2],revealed:(A=h.cards[2])==null?void 0:A.revealed}]),onClick:m[2]||(m[2]=R=>f(2))},[m[17]||(m[17]=l("div",{class:"position-label"},"3.  ",-1)),l("div",k_,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[2]?(w(),b("div",S_,[h.cards[2].revealed?(w(),b("div",$_,[l("img",{src:v(h.cards[2].card),alt:h.cards[2].card.nameKr,onError:p},null,40,P_),l("div",E_,[l("h4",null,$(h.cards[2].card.nameKr),1),l("span",{class:H(["orientation",h.cards[2].orientation])},$(h.cards[2].orientation==="upright"?"":""),3)])])):(w(),b("div",C_,m[15]||(m[15]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[2]&&h.isDrawing?(w(),b("div",T_,m[16]||(m[16]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-4",{"has-card":h.cards[3],revealed:(S=h.cards[3])==null?void 0:S.revealed}]),onClick:m[3]||(m[3]=R=>f(3))},[m[20]||(m[20]=l("div",{class:"position-label"},"4.  ",-1)),l("div",A_,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[3]?(w(),b("div",I_,[h.cards[3].revealed?(w(),b("div",M_,[l("img",{src:v(h.cards[3].card),alt:h.cards[3].card.nameKr,onError:p},null,40,O_),l("div",j_,[l("h4",null,$(h.cards[3].card.nameKr),1),l("span",{class:H(["orientation",h.cards[3].orientation])},$(h.cards[3].orientation==="upright"?"":""),3)])])):(w(),b("div",R_,m[18]||(m[18]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[3]&&h.isDrawing?(w(),b("div",L_,m[19]||(m[19]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-5",{"has-card":h.cards[4],revealed:(T=h.cards[4])==null?void 0:T.revealed}]),onClick:m[4]||(m[4]=R=>f(4))},[m[23]||(m[23]=l("div",{class:"position-label"},"5.  ",-1)),l("div",D_,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[4]?(w(),b("div",U_,[h.cards[4].revealed?(w(),b("div",N_,[l("img",{src:v(h.cards[4].card),alt:h.cards[4].card.nameKr,onError:p},null,40,K_),l("div",F_,[l("h4",null,$(h.cards[4].card.nameKr),1),l("span",{class:H(["orientation",h.cards[4].orientation])},$(h.cards[4].orientation==="upright"?"":""),3)])])):(w(),b("div",x_,m[21]||(m[21]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[4]&&h.isDrawing?(w(),b("div",B_,m[22]||(m[22]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-6",{"has-card":h.cards[5],revealed:(O=h.cards[5])==null?void 0:O.revealed}]),onClick:m[5]||(m[5]=R=>f(5))},[m[26]||(m[26]=l("div",{class:"position-label"},"6. ",-1)),l("div",H_,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[5]?(w(),b("div",z_,[h.cards[5].revealed?(w(),b("div",q_,[l("img",{src:v(h.cards[5].card),alt:h.cards[5].card.nameKr,onError:p},null,40,W_),l("div",G_,[l("h4",null,$(h.cards[5].card.nameKr),1),l("span",{class:H(["orientation",h.cards[5].orientation])},$(h.cards[5].orientation==="upright"?"":""),3)])])):(w(),b("div",V_,m[24]||(m[24]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[5]&&h.isDrawing?(w(),b("div",J_,m[25]||(m[25]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-7",{"has-card":h.cards[6],revealed:(E=h.cards[6])==null?void 0:E.revealed}]),onClick:m[6]||(m[6]=R=>f(6))},[m[29]||(m[29]=l("div",{class:"position-label"},"7.  ",-1)),l("div",Q_,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[6]?(w(),b("div",Y_,[h.cards[6].revealed?(w(),b("div",Z_,[l("img",{src:v(h.cards[6].card),alt:h.cards[6].card.nameKr,onError:p},null,40,ek),l("div",tk,[l("h4",null,$(h.cards[6].card.nameKr),1),l("span",{class:H(["orientation",h.cards[6].orientation])},$(h.cards[6].orientation==="upright"?"":""),3)])])):(w(),b("div",X_,m[27]||(m[27]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[6]&&h.isDrawing?(w(),b("div",sk,m[28]||(m[28]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2)],512),h.isDrawing?M("",!0):(w(),b("div",nk,[i.value?(w(),b("button",{key:0,class:"btn-action btn-reveal-all",onClick:d},m[30]||(m[30]=[l("span",{class:"icon"},"",-1),Ae("    ",-1)]))):(w(),b("div",rk)),To(h.$slots,"action-button",{},void 0)])),h.isDrawing?(w(),b("div",ik,[m[31]||(m[31]=l("p",null,"    ...",-1)),l("div",ok,[l("div",{class:"progress-fill",style:St({width:h.drawProgress+"%"})},null,4)])])):M("",!0)]),pe(r).isPremium?(w(),ft(Ho,{key:0,visible:o.value,"spread-id":"seven_star",position:a.value},null,8,["visible","position"])):M("",!0)],64)}}}),lk=tt(ak,[["__scopeId","data-v-b313ba66"]]),ck={class:"cup-of-relationship-layout"},uk={class:"layout-background"},dk={class:"floating-hearts"},hk={class:"ripples"},fk={class:"card-slot"},pk={key:0,class:"card-content"},gk={key:0,class:"card-back"},mk={key:1,class:"card-front"},vk=["src","alt"],yk={class:"card-info"},wk={key:0,class:"card-placeholder"},bk={class:"card-slot"},_k={key:0,class:"card-content"},kk={key:0,class:"card-back"},Sk={key:1,class:"card-front"},Ck=["src","alt"],$k={class:"card-info"},Pk={key:0,class:"card-placeholder"},Ek={class:"card-slot"},Tk={key:0,class:"card-content"},Ak={key:0,class:"card-back"},Ik={key:1,class:"card-front"},Rk=["src","alt"],Mk={class:"card-info"},Ok={key:0,class:"card-placeholder"},jk={class:"card-slot"},Lk={key:0,class:"card-content"},Dk={key:0,class:"card-back"},Uk={key:1,class:"card-front"},xk=["src","alt"],Nk={class:"card-info"},Kk={key:0,class:"card-placeholder"},Fk={class:"card-slot"},Bk={key:0,class:"card-content"},Hk={key:0,class:"card-back"},zk={key:1,class:"card-front"},Vk=["src","alt"],qk={class:"card-info"},Wk={key:0,class:"card-placeholder"},Gk={class:"card-slot"},Jk={key:0,class:"card-content"},Qk={key:0,class:"card-back"},Yk={key:1,class:"card-front"},Xk=["src","alt"],Zk={class:"card-info"},eS={key:0,class:"card-placeholder"},tS={class:"card-slot"},sS={key:0,class:"card-content"},nS={key:0,class:"card-back"},rS={key:1,class:"card-front"},iS=["src","alt"],oS={class:"card-info"},aS={key:0,class:"card-placeholder"},lS={class:"card-slot"},cS={key:0,class:"card-content"},uS={key:0,class:"card-back"},dS={key:1,class:"card-front"},hS=["src","alt"],fS={class:"card-info"},pS={key:0,class:"card-placeholder"},gS={class:"card-slot"},mS={key:0,class:"card-content"},vS={key:0,class:"card-back"},yS={key:1,class:"card-front"},wS=["src","alt"],bS={class:"card-info"},_S={key:0,class:"card-placeholder"},kS={class:"card-slot"},SS={key:0,class:"card-content"},CS={key:0,class:"card-back"},$S={key:1,class:"card-front"},PS=["src","alt"],ES={class:"card-info"},TS={key:0,class:"card-placeholder"},AS={class:"card-slot"},IS={key:0,class:"card-content"},RS={key:0,class:"card-back"},MS={key:1,class:"card-front"},OS=["src","alt"],jS={class:"card-info"},LS={key:0,class:"card-placeholder"},DS={key:0,class:"action-buttons-container"},US={key:1,class:"button-placeholder"},xS={key:1,class:"progress-indicator"},NS={class:"progress-bar"},KS=Qe({__name:"CupOfRelationshipLayout",props:{cards:{},isDrawing:{type:Boolean},drawProgress:{}},emits:["card-click","reveal-all"],setup(t,{emit:e}){const s=t,n=e,r=Ve(),i=ye(()=>s.cards.some(h=>h&&!h.revealed)),o=W(!1),a=W(0),c=W(),u=h=>{const m=Math.random()*100,C=Math.random()*100,k=Math.random()*10,A=10+Math.random()*10,S=.5+Math.random()*1;return{left:`${m}%`,top:`${C}%`,animationDelay:`${k}s`,animationDuration:`${A}s`,fontSize:`${S}em`}},d=async()=>{await kt.buttonTapHaptic(),n("reveal-all")},f=async h=>{s.cards[h]&&!s.cards[h].revealed&&(await kt.buttonTapHaptic(),n("card-click",h),r.isPremium&&(a.value=h+1,o.value=!0))},v=h=>{try{if(h.imageUrl&&!h.imageUrl.includes("undefined")){let m=h.imageUrl;if(m=m.replace("/assets/tarot-cards/minor/cups/","/assets/tarot-cards/minor/"),m=m.replace("/assets/tarot-cards/minor/wands/","/assets/tarot-cards/minor/"),m=m.replace("/assets/tarot-cards/minor/swords/","/assets/tarot-cards/minor/"),m=m.replace("/assets/tarot-cards/minor/pentacles/","/assets/tarot-cards/minor/"),m.includes("/assets/tarot-cards/major/")){const C={"00-the-fool.png":"00-the-Fool.png","01-the-magician.png":"01-The-Magician.png","02-the-high-priestess.png":"02-The-High-Priestess.png","03-the-empress.png":"03-The-Empress.png","04-the-emperor.png":"04-The-Emperor.png","05-the-hierophant.png":"05-The-Hierophant.png","06-the-lovers.png":"06-The-Lovers.png","07-the-chariot.png":"07-The-Chariot.png","08-strength.png":"08-Strength.png","09-the-hermit.png":"09-The-Hermit.png","10-wheel-of-fortune.png":"10-Wheel-of-Fortune.png","11-justice.png":"11-Justice.png","12-the-hanged-man.png":"12-The-Hanged-Man.png","13-death.png":"13-Death.png","14-temperance.png":"14-Temperance.png","15-the-devil.png":"15-The-Devil.png","16-the-tower.png":"16-The-Tower.png","17-the-star.png":"17-The-Star.png","18-the-moon.png":"18-The-Moon.png","19-the-sun.png":"19-The-Sun.png","20-judgement.png":"20-Judgement.png","21-the-world.png":"21-The-World.png"};for(const[k,A]of Object.entries(C))if(m.includes(k)){m=m.replace(k,A);break}}return m}if(h.arcana==="minor"){const m=String(h.number||1).padStart(2,"0");let C;if(h.suit)if(h.number<=10)C=`${{1:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten"}[h.number]}-of-${h.suit}`;else{const k={11:"Page",12:"Knight",13:"Queen",14:"King"},A=h.suit.charAt(0).toUpperCase()+h.suit.slice(1);C=`${k[h.number]}-of-${A}`}else C=h.name.toLowerCase().replace(/\s+/g,"-");return`/assets/tarot-cards/minor/${m}-${C}.png`}return h.arcana==="major"?`/assets/tarot-cards/major/${{0:"00-the-Fool.png",1:"01-The-Magician.png",2:"02-The-High-Priestess.png",3:"03-The-Empress.png",4:"04-The-Emperor.png",5:"05-The-Hierophant.png",6:"06-The-Lovers.png",7:"07-The-Chariot.png",8:"08-Strength.png",9:"09-The-Hermit.png",10:"10-Wheel-of-Fortune.png",11:"11-Justice.png",12:"12-The-Hanged-Man.png",13:"13-Death.png",14:"14-Temperance.png",15:"15-The-Devil.png",16:"16-The-Tower.png",17:"17-The-Star.png",18:"18-The-Moon.png",19:"19-The-Sun.png",20:"20-Judgement.png",21:"21-The-World.png"}[h.number]||"00-the-Fool.png"}`:"/assets/tarot-cards/major/00-the-Fool.png"}catch(m){return console.error("  URL  :",m),"/assets/tarot-cards/major/00-the-Fool.png"}},p=h=>{const m=h.target;m.style.display="none";const C=m.parentElement;if(C&&!C.querySelector(".fallback-emoji")){const k=document.createElement("div");k.className="fallback-emoji",k.textContent="",C.appendChild(k)}};return(h,m)=>{var C,k,A,S,T,O,E,R,N,I,j;return w(),b(be,null,[l("div",ck,[l("div",uk,[m[11]||(m[11]=l("div",{class:"cup-shape"},[l("svg",{viewBox:"0 0 200 200",preserveAspectRatio:"none"},[l("path",{d:"M50 30 Q50 10, 70 10 L130 10 Q150 10, 150 30 L140 120 Q140 140, 120 150 L80 150 Q60 140, 60 120 Z",fill:"none",stroke:"rgba(236, 72, 153, 0.3)","stroke-width":"2"}),l("path",{d:"M100 60 C100 50, 85 40, 75 50 C65 40, 50 50, 50 60 C50 80, 100 110, 100 110 C100 110, 150 80, 150 60 C150 50, 135 40, 125 50 C115 40, 100 50, 100 60 Z",fill:"rgba(236, 72, 153, 0.2)",stroke:"rgba(236, 72, 153, 0.4)","stroke-width":"1"})])],-1)),l("div",dk,[(w(),b(be,null,xe(15,q=>l("div",{class:"heart",key:q,style:St(u())},"",4)),64))]),l("div",hk,[(w(),b(be,null,xe(3,q=>l("div",{class:"ripple",key:q,style:St({animationDelay:`${q*2}s`})},null,4)),64))])]),l("div",{class:"cards-container",ref_key:"cardsContainer",ref:c},[l("div",{class:H(["card-position position-1",{"has-card":h.cards[0],revealed:(C=h.cards[0])==null?void 0:C.revealed}]),onClick:m[0]||(m[0]=q=>f(0))},[m[14]||(m[14]=l("div",{class:"position-label"},"1. ",-1)),l("div",fk,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[0]?(w(),b("div",pk,[h.cards[0].revealed?(w(),b("div",mk,[l("img",{src:v(h.cards[0].card),alt:h.cards[0].card.nameKr,onError:p},null,40,vk),l("div",yk,[l("h4",null,$(h.cards[0].card.nameKr),1),l("span",{class:H(["orientation",h.cards[0].orientation])},$(h.cards[0].orientation==="upright"?"":""),3)])])):(w(),b("div",gk,m[12]||(m[12]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[0]&&h.isDrawing?(w(),b("div",wk,m[13]||(m[13]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-2",{"has-card":h.cards[1],revealed:(k=h.cards[1])==null?void 0:k.revealed}]),onClick:m[1]||(m[1]=q=>f(1))},[m[17]||(m[17]=l("div",{class:"position-label"},"2. ",-1)),l("div",bk,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[1]?(w(),b("div",_k,[h.cards[1].revealed?(w(),b("div",Sk,[l("img",{src:v(h.cards[1].card),alt:h.cards[1].card.nameKr,onError:p},null,40,Ck),l("div",$k,[l("h4",null,$(h.cards[1].card.nameKr),1),l("span",{class:H(["orientation",h.cards[1].orientation])},$(h.cards[1].orientation==="upright"?"":""),3)])])):(w(),b("div",kk,m[15]||(m[15]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[1]&&h.isDrawing?(w(),b("div",Pk,m[16]||(m[16]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-3",{"has-card":h.cards[2],revealed:(A=h.cards[2])==null?void 0:A.revealed}]),onClick:m[2]||(m[2]=q=>f(2))},[m[20]||(m[20]=l("div",{class:"position-label"},"3.  ",-1)),l("div",Ek,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[2]?(w(),b("div",Tk,[h.cards[2].revealed?(w(),b("div",Ik,[l("img",{src:v(h.cards[2].card),alt:h.cards[2].card.nameKr,onError:p},null,40,Rk),l("div",Mk,[l("h4",null,$(h.cards[2].card.nameKr),1),l("span",{class:H(["orientation",h.cards[2].orientation])},$(h.cards[2].orientation==="upright"?"":""),3)])])):(w(),b("div",Ak,m[18]||(m[18]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[2]&&h.isDrawing?(w(),b("div",Ok,m[19]||(m[19]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-4",{"has-card":h.cards[3],revealed:(S=h.cards[3])==null?void 0:S.revealed}]),onClick:m[3]||(m[3]=q=>f(3))},[m[23]||(m[23]=l("div",{class:"position-label"},"4.  ",-1)),l("div",jk,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[3]?(w(),b("div",Lk,[h.cards[3].revealed?(w(),b("div",Uk,[l("img",{src:v(h.cards[3].card),alt:h.cards[3].card.nameKr,onError:p},null,40,xk),l("div",Nk,[l("h4",null,$(h.cards[3].card.nameKr),1),l("span",{class:H(["orientation",h.cards[3].orientation])},$(h.cards[3].orientation==="upright"?"":""),3)])])):(w(),b("div",Dk,m[21]||(m[21]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[3]&&h.isDrawing?(w(),b("div",Kk,m[22]||(m[22]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-5",{"has-card":h.cards[4],revealed:(T=h.cards[4])==null?void 0:T.revealed}]),onClick:m[4]||(m[4]=q=>f(4))},[m[26]||(m[26]=l("div",{class:"position-label"},"5.   ",-1)),l("div",Fk,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[4]?(w(),b("div",Bk,[h.cards[4].revealed?(w(),b("div",zk,[l("img",{src:v(h.cards[4].card),alt:h.cards[4].card.nameKr,onError:p},null,40,Vk),l("div",qk,[l("h4",null,$(h.cards[4].card.nameKr),1),l("span",{class:H(["orientation",h.cards[4].orientation])},$(h.cards[4].orientation==="upright"?"":""),3)])])):(w(),b("div",Hk,m[24]||(m[24]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[4]&&h.isDrawing?(w(),b("div",Wk,m[25]||(m[25]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-6",{"has-card":h.cards[5],revealed:(O=h.cards[5])==null?void 0:O.revealed}]),onClick:m[5]||(m[5]=q=>f(5))},[m[29]||(m[29]=l("div",{class:"position-label"},"6.   ",-1)),l("div",Gk,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[5]?(w(),b("div",Jk,[h.cards[5].revealed?(w(),b("div",Yk,[l("img",{src:v(h.cards[5].card),alt:h.cards[5].card.nameKr,onError:p},null,40,Xk),l("div",Zk,[l("h4",null,$(h.cards[5].card.nameKr),1),l("span",{class:H(["orientation",h.cards[5].orientation])},$(h.cards[5].orientation==="upright"?"":""),3)])])):(w(),b("div",Qk,m[27]||(m[27]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[5]&&h.isDrawing?(w(),b("div",eS,m[28]||(m[28]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-7",{"has-card":h.cards[6],revealed:(E=h.cards[6])==null?void 0:E.revealed}]),onClick:m[6]||(m[6]=q=>f(6))},[m[32]||(m[32]=l("div",{class:"position-label"},"7.    ?",-1)),l("div",tS,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[6]?(w(),b("div",sS,[h.cards[6].revealed?(w(),b("div",rS,[l("img",{src:v(h.cards[6].card),alt:h.cards[6].card.nameKr,onError:p},null,40,iS),l("div",oS,[l("h4",null,$(h.cards[6].card.nameKr),1),l("span",{class:H(["orientation",h.cards[6].orientation])},$(h.cards[6].orientation==="upright"?"":""),3)])])):(w(),b("div",nS,m[30]||(m[30]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[6]&&h.isDrawing?(w(),b("div",aS,m[31]||(m[31]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-8",{"has-card":h.cards[7],revealed:(R=h.cards[7])==null?void 0:R.revealed}]),onClick:m[7]||(m[7]=q=>f(7))},[m[35]||(m[35]=l("div",{class:"position-label"},"8.    ?",-1)),l("div",lS,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[7]?(w(),b("div",cS,[h.cards[7].revealed?(w(),b("div",dS,[l("img",{src:v(h.cards[7].card),alt:h.cards[7].card.nameKr,onError:p},null,40,hS),l("div",fS,[l("h4",null,$(h.cards[7].card.nameKr),1),l("span",{class:H(["orientation",h.cards[7].orientation])},$(h.cards[7].orientation==="upright"?"":""),3)])])):(w(),b("div",uS,m[33]||(m[33]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[7]&&h.isDrawing?(w(),b("div",pS,m[34]||(m[34]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-9",{"has-card":h.cards[8],revealed:(N=h.cards[8])==null?void 0:N.revealed}]),onClick:m[8]||(m[8]=q=>f(8))},[m[38]||(m[38]=l("div",{class:"position-label"},"9.    ?",-1)),l("div",gS,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[8]?(w(),b("div",mS,[h.cards[8].revealed?(w(),b("div",yS,[l("img",{src:v(h.cards[8].card),alt:h.cards[8].card.nameKr,onError:p},null,40,wS),l("div",bS,[l("h4",null,$(h.cards[8].card.nameKr),1),l("span",{class:H(["orientation",h.cards[8].orientation])},$(h.cards[8].orientation==="upright"?"":""),3)])])):(w(),b("div",vS,m[36]||(m[36]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[8]&&h.isDrawing?(w(),b("div",_S,m[37]||(m[37]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-10",{"has-card":h.cards[9],revealed:(I=h.cards[9])==null?void 0:I.revealed}]),onClick:m[9]||(m[9]=q=>f(9))},[m[41]||(m[41]=l("div",{class:"position-label"},"10.    ?",-1)),l("div",kS,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[9]?(w(),b("div",SS,[h.cards[9].revealed?(w(),b("div",$S,[l("img",{src:v(h.cards[9].card),alt:h.cards[9].card.nameKr,onError:p},null,40,PS),l("div",ES,[l("h4",null,$(h.cards[9].card.nameKr),1),l("span",{class:H(["orientation",h.cards[9].orientation])},$(h.cards[9].orientation==="upright"?"":""),3)])])):(w(),b("div",CS,m[39]||(m[39]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[9]&&h.isDrawing?(w(),b("div",TS,m[40]||(m[40]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2),l("div",{class:H(["card-position position-11",{"has-card":h.cards[10],revealed:(j=h.cards[10])==null?void 0:j.revealed}]),onClick:m[10]||(m[10]=q=>f(10))},[m[44]||(m[44]=l("div",{class:"position-label"},"11. ",-1)),l("div",AS,[fe(Me,{name:"card-flip"},{default:Pe(()=>[h.cards[10]?(w(),b("div",IS,[h.cards[10].revealed?(w(),b("div",MS,[l("img",{src:v(h.cards[10].card),alt:h.cards[10].card.nameKr,onError:p},null,40,OS),l("div",jS,[l("h4",null,$(h.cards[10].card.nameKr),1),l("span",{class:H(["orientation",h.cards[10].orientation])},$(h.cards[10].orientation==="upright"?"":""),3)])])):(w(),b("div",RS,m[42]||(m[42]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):M("",!0)]),_:1}),!h.cards[10]&&h.isDrawing?(w(),b("div",LS,m[43]||(m[43]=[l("div",{class:"loading-spinner"},null,-1)]))):M("",!0)])],2)],512),h.isDrawing?M("",!0):(w(),b("div",DS,[i.value?(w(),b("button",{key:0,class:"btn-action btn-reveal-all",onClick:d},m[45]||(m[45]=[l("span",{class:"icon"},"",-1),Ae("    ",-1)]))):(w(),b("div",US)),To(h.$slots,"action-button",{},void 0)])),h.isDrawing?(w(),b("div",xS,[m[46]||(m[46]=l("p",null,"     ...",-1)),l("div",NS,[l("div",{class:"progress-fill",style:St({width:h.drawProgress+"%"})},null,4)])])):M("",!0)]),pe(r).isPremium?(w(),ft(Ho,{key:0,visible:o.value,"spread-id":"cup_of_relationship",position:a.value},null,8,["visible","position"])):M("",!0)],64)}}}),FS=tt(KS,[["__scopeId","data-v-1945f307"]]),BS={key:0,class:"loading-overlay"},HS={class:"loading-content"},zS={class:"loading-messages"},VS={class:"progress-container"},qS={class:"progress-bar"},WS=Qe({__name:"TarotLoadingScreen",props:{isVisible:{type:Boolean},progress:{default:0}},emits:["animation-complete"],setup(t,{emit:e}){const s=t,n=["     ","   ","    ","      ","    ","     ","       ","     "],r=W(0),i=W(null),o=ye(()=>n[r.value]),a=()=>{i.value=window.setInterval(()=>{r.value=(r.value+1)%n.length},3e3)},c=()=>{i.value&&(clearInterval(i.value),i.value=null)},u=f=>{a()},d=f=>{c()};return Qt(()=>s.isVisible,f=>{f?a():c()}),mt(()=>{s.isVisible&&a()}),tr(()=>{c()}),(f,v)=>(w(),ft(Me,{name:"fade",onEnter:u,onLeave:d},{default:Pe(()=>[f.isVisible?(w(),b("div",BS,[l("div",HS,[v[2]||(v[2]=l("div",{class:"cards-animation"},[l("div",{class:"floating-card card-1"},""),l("div",{class:"floating-card card-2"},""),l("div",{class:"floating-card card-3"},""),l("div",{class:"floating-card card-4"},""),l("div",{class:"floating-card card-5"},"")],-1)),v[3]||(v[3]=l("div",{class:"loading-icon-wrapper"},[l("div",{class:"loading-icon"},[l("div",{class:"crystal-ball"},""),l("div",{class:"magic-circle"}),l("div",{class:"sparkles"},[l("span",{class:"sparkle s1"},""),l("span",{class:"sparkle s2"},""),l("span",{class:"sparkle s3"},""),l("span",{class:"sparkle s4"},"")])])],-1)),l("div",zS,[fe(Me,{name:"message-fade",mode:"out-in"},{default:Pe(()=>[(w(),b("p",{key:r.value,class:"loading-message"},$(o.value),1))]),_:1}),v[0]||(v[0]=l("p",{class:"sub-message"}," ...",-1))]),l("div",VS,[l("div",qS,[l("div",{class:"progress-fill",style:St({width:`${f.progress}%`})},null,4),v[1]||(v[1]=l("div",{class:"progress-glow"},null,-1))])])])])):M("",!0)]),_:1}))}}),GS=tt(WS,[["__scopeId","data-v-5f0811be"]]),JS={class:"page-header"},QS={class:"header-top"},YS={key:0,class:"spread-name"},XS={key:0,class:"premium-status-indicator"},ZS={class:"expiry-time"},eC={class:"container"},tC={key:0,class:"draw-method-selection"},sC={class:"method-buttons"},nC={key:1,class:"deck-container"},rC={key:2,class:"manual-selection-container"},iC={class:"instruction"},oC={key:0,class:"sub-instruction"},aC={key:1},lC={key:0,class:"selected-cards-preview"},cC=["onClick"],uC={class:"selection-number"},dC={class:"card-spread-container"},hC={class:"card-spread"},fC=["onClick"],pC=["disabled"],gC={key:3,class:"drawing-container"},mC={class:"instruction"},vC={class:"card-animation"},yC={class:"progress-bar"},wC={key:4,class:"cards-container"},bC={key:0,class:"celtic-cross-container"},_C=["disabled"],kC={key:1,class:"seven-star-container"},SC=["disabled"],CC={key:2,class:"cup-relationship-container"},$C=["disabled"],PC={key:3},EC={class:"drawn-cards"},TC=["onClick"],AC={key:0,class:"card-front"},IC={class:"card-image"},RC=["src","alt"],MC={class:"card-number"},OC={key:1,class:"card-back"},jC=["disabled"],LC=Qe({__name:"CardDrawing",setup(t){const e=Nt(),s=Ve(),n=Ks(),{alert:r,confirm:i}=Qn(),o=W(null),a=W(!1),c=W(!1),u=W(0),d=W([]),f=W([]),v=W([]),p=W(null),h=W(!1),m=W(0),C=ye(()=>d.value.length>0&&d.value.every(g=>g.revealed)),k=nb(),A=W(k.getStatus()),S=()=>{A.value=k.getStatus()},T=()=>{if(!A.value.temporaryPremiumExpiry)return"";const g=new Date,_=new Date(A.value.temporaryPremiumExpiry).getTime()-g.getTime();if(_<=0)return"";const P=Math.floor(_/(1e3*60*60)),D=Math.floor(_%(1e3*60*60)/(1e3*60));return P>0?`${P} ${D} `:`${D} `},O=ye(()=>{var g;return((g=n.selectedSpread)==null?void 0:g.spreadId)==="celtic_cross"}),E=ye(()=>{var g;return((g=n.selectedSpread)==null?void 0:g.spreadId)==="seven_star"}),R=ye(()=>{var g;return((g=n.selectedSpread)==null?void 0:g.spreadId)==="cup_of_relationship"}),N=ye(()=>O.value||E.value||R.value),I=()=>O.value?" ":E.value?" ":R.value?"  ":"",j=()=>" ",q=g=>Yn(g),K=()=>{var g;return((g=n.selectedSpread)==null?void 0:g.cardCount)||1},B=()=>{console.log("[CardDrawing]  "),console.log("[CardDrawing] drawMethod:",o.value),console.log("[CardDrawing] isDrawing:",a.value),console.log("[CardDrawing] isComplete:",c.value),console.log("[CardDrawing]  URL:",window.location.pathname)};mt(async()=>{if(console.log(" [CardDrawing] onMounted "),console.log(" [CardDrawing]  :",n.selectedTopic),console.log(" [CardDrawing]  :",n.selectedSpread),console.log(" [CardDrawing]  :",n.getCustomQuestion()),console.log(" [CardDrawing]  :",n.tarotCards.length),console.log(" [CardDrawing]  URL:",window.location.pathname),console.log(" [CardDrawing]  :",e.currentRoute.value.path),console.log(" [CardDrawing]   :",{selectedTopic:JSON.stringify(n.selectedTopic),selectedSpread:JSON.stringify(n.selectedSpread),drawMethod:o.value,isDrawing:a.value,isComplete:c.value}),console.log(" [CardDrawing] DOM :",{hasRootElement:document.querySelector(".card-drawing")!==null,body:document.body.innerHTML.substring(0,200)}),!n.selectedTopic||!n.selectedSpread){console.error("[CardDrawing]     "),console.log("[CardDrawing]   "),await r("   ."," "),e.push("/reading-select");return}await Us(),console.log("[CardDrawing] nextTick  -   "),setTimeout(()=>{},1e3),ce(),n.tarotCards.length===0&&(console.log("[CardDrawing]    "),await n.initialize(),console.log("[CardDrawing]    :",n.tarotCards.length))});const G=()=>{e.go(-1)},he=g=>{o.value=g,g==="manual"&&(f.value=[])},ce=()=>{if(n.tarotCards.length>0){const g=[...n.tarotCards];for(let y=g.length-1;y>0;y--){const _=Math.floor(Math.random()*(y+1));[g[y],g[_]]=[g[_],g[y]]}v.value=g}},Q=g=>{const F=-120+g*3.116883116883117,V=F*Math.PI/180,U=45,z=30,Y=50+U*Math.sin(V),Z=75-z*Math.cos(V),ne=78-Math.abs(g-39);return{position:"absolute",left:`${Y}%`,top:`${Z}%`,transform:`translate(-50%, -50%) rotate(${F*.7}deg)`,transformOrigin:"center center",zIndex:ne}},ue=g=>f.value.some(y=>y.id===g.id),J=async g=>{await kt.buttonTapHaptic();const y=ue(g),_=K();if(y)f.value=f.value.filter(P=>P.id!==g.id);else if(f.value.length<_){const P=Math.random()>.5?"upright":"reversed";f.value.push({...g,orientation:P})}},se=async g=>{await kt.buttonTapHaptic(),f.value.splice(g,1)},ge=async()=>{var y;console.log(" [confirmManualSelection] ");const g=((y=n.selectedSpread)==null?void 0:y.spreadId)||"one_card";console.log(" [confirmManualSelection] spreadId:",g);try{const _=await k.startReading(g);if(console.log(" [confirmManualSelection] canStart:",_),!_){console.log(" [confirmManualSelection]     -   "),await Re();return}await me()}catch(_){console.error(" [confirmManualSelection] :",_),await r("    .  .","")}},me=async()=>{n.setTempDrawnCards(f.value),d.value=f.value.map(g=>({card:g,orientation:g.orientation,revealed:!1})),c.value=!0},Ue=async()=>{var y,_;console.log(" [startDrawing] "),await kt.buttonTapHaptic();const g=((y=n.selectedSpread)==null?void 0:y.spreadId)||"one_card";console.log(" [startDrawing] spreadId:",g),console.log(" [startDrawing] isPremium:",s.isPremium),console.log(" [startDrawing] userEmail:",(_=s.user)==null?void 0:_.email);try{const P=await k.startReading(g);if(console.log(" [startDrawing] canStart:",P),!P){console.log(" [startDrawing]     -   "),await Re();return}S(),console.log(" [startDrawing]   "),await Ee()}catch(P){console.error(" [startDrawing] :",P),await r("    .  .","")}},Ee=async()=>{var P;a.value=!0,u.value=0,await kt.cardDrawHaptic();const g=setInterval(()=>{u.value+=10,u.value>=100&&clearInterval(g)},200);await new Promise(D=>setTimeout(D,2500));const y=((P=n.selectedSpread)==null?void 0:P.cardCount)||1,_=n.drawCards(y);n.setTempDrawnCards(_),d.value=_.map(D=>({card:D,orientation:D.orientation,revealed:!1})),a.value=!1,c.value=!0},je=async g=>{await kt.buttonTapHaptic(),d.value[g].revealed=!0,O.value&&C.value&&!p.value&&L()},ve=async()=>{await kt.buttonTapHaptic();for(let g=0;g<d.value.length;g++)d.value[g].revealed=!0,await new Promise(y=>setTimeout(y,100));O.value&&!p.value&&L()},L=async()=>{if(!(!O.value||d.value.length!==10))try{const g=new ib,y=d.value.map((P,D)=>({position:D,card:P.card,orientation:P.orientation,positionName:g.getPositionName(D)})),_=await g.generateInterpretation(y);p.value=_,n.setImprovedInterpretation(_)}catch(g){console.error("    :",g)}},te=W(!1),ee=async()=>{var x,X,F,V,U,z,Y,Z;if(te.value)return;if(!C.value){await r("   !","  ");return}if(te.value=!0,!s.isPremium){if(console.log(" [goToResult]   -  "),!await i(`    .
?`," ")){te.value=!1;return}try{console.log(" [goToResult]   ...");const{showInterstitialAd:ie}=await Ie(async()=>{const{showInterstitialAd:we}=await Promise.resolve().then(()=>sb);return{showInterstitialAd:we}},void 0,import.meta.url),Ce=await ie();if(console.log(" [goToResult]   :",Ce),!Ce){console.log(" [goToResult]   "),await r("  .  ."," "),te.value=!1;return}}catch(ie){console.error(" [goToResult]   :",ie),await r("    .   .","")}}const g=((x=s.user)==null?void 0:x.email)==="test@example.com",y=((X=n.selectedSpread)==null?void 0:X.spreadId)||"one_card";["celtic_cross","seven_star","cup_of_relationship"].includes(y)&&!s.isPremium&&!A.value.isTemporaryPremium&&!g&&(console.log(" [goToResult]     :",y),await k.recordPremiumSpreadUsage(y)),h.value=!0,m.value=0;const D=setInterval(()=>{m.value<90&&(m.value+=Math.random()*15)},500);try{O.value&&p.value&&n.setImprovedInterpretation(p.value);const ne=await n.createReading(((F=n.selectedSpread)==null?void 0:F.spreadId)||"one_card",((V=n.selectedTopic)==null?void 0:V.id)||"general",void 0,n.getTempDrawnCards()||void 0),ie=n.getCustomQuestion();if(s.isPremium&&ie&&ne)try{m.value=30;const Ce={readingId:ne.id,cards:ne.cards.map((Se,re)=>{var oe,_e;return{id:Se.id,name:Se.name||Se.nameEn||"",nameKr:Se.nameKr||Se.name_kr||Se.name||"",arcana:Se.arcana||"unknown",suit:Se.suit||null,number:Se.number||null,orientation:Se.orientation||"upright",position:{name:((oe=Se.position)==null?void 0:oe.name)||` ${re+1}`,description:((_e=Se.position)==null?void 0:_e.description)||""},meanings:Se.meanings||{}}}),spreadId:((U=n.selectedSpread)==null?void 0:U.spreadId)||"three_cards",topic:((z=n.selectedTopic)==null?void 0:z.id)||"general",customQuestion:ie,userId:(Y=s.user)==null?void 0:Y.id},we=await Uu.generateInterpretation(Ce);m.value=70,we.success&&we.interpretation&&(ne.aiInterpretation=we.interpretation,ne.aiInterpretationId=we.interpretationId||null,we.probabilityAnalysis&&(ne.probabilityAnalysis=we.probabilityAnalysis)),n.updateReading(ne)}catch{}else if(s.isPremium&&O.value&&ne&&!ie)try{m.value=30;const Ce=new Bo(s.isPremium),we=ne.cards.map((re,oe)=>{var _e;return{id:re.id,name:re.name||re.nameEn||"",name_kr:re.nameKr||re.name_kr||re.name||"",nameKr:re.nameKr||re.name_kr||re.name||"",arcana:re.arcana||"unknown",suit:re.suit||null,number:re.number||null,orientation:re.orientation||"upright",position:{position:oe+1,name:((_e=re.position)==null?void 0:_e.name)||["","","",""," ","","",""," "," "][oe]||` ${oe+1}`}}}),Se=await Ce.generateInterpretation(we,((Z=n.selectedTopic)==null?void 0:Z.id)||"love","celtic_cross");m.value=70,Se&&Se.text&&(ne.aiInterpretation=Se.text,ne.aiInterpretationId=Se.interpretationId||null),n.updateReading(ne)}catch{}console.log("   :",ne.id),clearInterval(D),m.value=100,await new Promise(Ce=>setTimeout(Ce,500)),h.value=!1,e.push(`/reading-result?readingId=${ne.id}`)}catch(ne){clearInterval(D),h.value=!1,m.value=0,await r(`  : ${ne.message||"   "}`,"  ")}finally{te.value=!1}},ae=g=>{if(!g||!g.target){console.warn("    ");return}const y=g.target;if(!y){console.warn("  ");return}console.warn("  :",y.src);const _=y.parentElement;if(_)try{if(y.style.display="none",!_.querySelector(".fallback-emoji")){const P=document.createElement("div");P.className="fallback-emoji",P.textContent="",P.style.fontSize="48px",P.style.textAlign="center",P.style.display="flex",P.style.alignItems="center",P.style.justifyContent="center",P.style.width="100%",P.style.height="100%",P.style.position="absolute",P.style.top="0",P.style.left="0",P.style.zIndex="10",P.style.background="rgba(75, 85, 99, 0.9)",P.style.borderRadius="6px",_.appendChild(P)}}catch(P){console.error("    :",P)}else console.warn("   ")},Re=async()=>{var V,U;const g={celtic_cross:" ",seven_star:" ",cup_of_relationship:"  "},y=((V=n.selectedSpread)==null?void 0:V.spreadId)||"",_=g[y]||" ";if(((U=s.user)==null?void 0:U.email)==="test@example.com"){console.log(" [showPremiumSpreadLimit]   -     "),await Ee();return}const D=new Date,x=new Date;x.setDate(x.getDate()+1),x.setHours(0,0,0,0);const X=Math.floor((x.getTime()-D.getTime())/(1e3*60*60)),F=Math.floor((x.getTime()-D.getTime())%(1e3*60*60)/(1e3*60));await r(`${_}       .

   : ${X} ${F} 

  (1, 3)     !`,"   "),e.push("/spread-selection")};return(g,y)=>(w(),b("div",{class:H(["card-drawing",{"celtic-cross-mode":O.value,"seven-star-mode":E.value,"cup-relationship-mode":R.value,"special-layout-mode":N.value}]),onClick:B},[l("header",JS,[l("div",QS,[l("button",{class:"back-button",onClick:G}," "),l("h1",null,[y[2]||(y[2]=Ae("   ",-1)),N.value?(w(),b("span",YS," - "+$(I()),1)):M("",!0)])]),A.value.isTemporaryPremium?(w(),b("div",XS,[y[3]||(y[3]=Ae("      ",-1)),l("span",ZS,$(T()),1)])):M("",!0)]),l("div",eC,[!o.value&&!a.value&&!c.value?(w(),b("div",tC,[y[6]||(y[6]=l("p",{class:"instruction"},"  ?",-1)),l("div",sC,[l("button",{class:"method-button",onClick:y[0]||(y[0]=_=>he("random"))},y[4]||(y[4]=[l("div",{class:"method-icon"},"",-1),l("h3",null," ",-1),l("p",null,"   ",-1)])),l("button",{class:"method-button",onClick:y[1]||(y[1]=_=>he("manual"))},y[5]||(y[5]=[l("div",{class:"method-icon"},"",-1),l("h3",null," ",-1),l("p",null,"   ",-1)]))])])):M("",!0),o.value==="random"&&!a.value&&!c.value?(w(),b("div",nC,[y[7]||(y[7]=l("p",{class:"instruction"},"  ...",-1)),y[8]||(y[8]=l("div",{class:"card-back shuffling"},"  ",-1)),l("button",{class:"btn btn-primary draw-button",onClick:Ue},$(j()),1)])):M("",!0),o.value==="manual"&&!c.value?(w(),b("div",rC,[l("p",iC,[Ae($(f.value.length)+"/"+$(K())+" . ",1),f.value.length>0?(w(),b("span",oC," (     ) ")):(w(),b("span",aC,"   . "))]),f.value.length>0?(w(),b("div",lC,[(w(!0),b(be,null,xe(f.value,(_,P)=>(w(),b("div",{key:P,class:"selected-card-mini",onClick:D=>se(P),title:"  "},[l("span",uC,$(P+1),1)],8,cC))),128))])):M("",!0),l("div",dC,[y[10]||(y[10]=l("div",{class:"spread-background"},null,-1)),l("div",hC,[(w(!0),b(be,null,xe(v.value,(_,P)=>(w(),b("div",{key:P,class:H(["spread-card",{selected:ue(_),disabled:f.value.length>=K()&&!ue(_)}]),style:St(Q(P)),onClick:D=>J(_)},y[9]||(y[9]=[l("div",{class:"card-back-small"},"",-1)]),14,fC))),128))])]),l("button",{class:"btn btn-primary confirm-button",disabled:f.value.length!==K(),onClick:ge},"    ",8,pC)])):M("",!0),a.value?(w(),b("div",gC,[l("p",mC,$(K())+"   ...",1),l("div",vC,[(w(!0),b(be,null,xe(K(),_=>(w(),b("div",{class:H(["card-back",`card-${_}`]),key:_},"  ",2))),128))]),l("div",yC,[l("div",{class:"progress",style:St({width:u.value+"%"})},null,4)])])):M("",!0),c.value&&d.value.length>0?(w(),b("div",wC,[O.value?(w(),b("div",bC,[fe(n_,{cards:d.value,isDrawing:!1,drawProgress:100,showInterpretation:C.value,onCardClick:je,onRevealAll:ve},{"action-button":Pe(()=>[l("button",{class:"btn-action btn-result",onClick:ee,disabled:!C.value},"   ",8,_C)]),_:1},8,["cards","showInterpretation"])])):E.value?(w(),b("div",kC,[fe(lk,{cards:d.value,isDrawing:!1,drawProgress:100,onCardClick:je,onRevealAll:ve},{"action-button":Pe(()=>[l("button",{class:"btn-action btn-result",onClick:ee,disabled:!C.value},"   ",8,SC)]),_:1},8,["cards"])])):R.value?(w(),b("div",CC,[fe(FS,{cards:d.value,isDrawing:!1,drawProgress:100,onCardClick:je,onRevealAll:ve},{"action-button":Pe(()=>[l("button",{class:"btn-action btn-result",onClick:ee,disabled:!C.value},"   ",8,$C)]),_:1},8,["cards"])])):(w(),b("div",PC,[y[12]||(y[12]=l("p",{class:"instruction"}," ",-1)),l("div",EC,[(w(!0),b(be,null,xe(d.value,(_,P)=>(w(),b("div",{key:P,class:H(["drawn-card",{revealed:_.revealed}]),onClick:D=>je(P)},[_.revealed?(w(),b("div",AC,[l("div",IC,[l("img",{src:q(_.card),alt:_.card.nameKr,onError:ae},null,40,RC)]),l("h3",null,$(_.card.nameKr),1),l("p",MC,$(_.card.name),1),l("div",{class:H(["card-orientation",_.orientation])},$(_.orientation==="upright"?"":""),3)])):(w(),b("div",OC,y[11]||(y[11]=[Ae("  ",-1),l("p",null," ",-1)])))],10,TC))),128))])])),N.value?M("",!0):(w(),b("button",{key:4,class:"btn btn-primary result-button",onClick:ee,disabled:!C.value},"   ",8,jC))])):M("",!0),fe(GS,{isVisible:h.value,progress:m.value},null,8,["isVisible","progress"])])],2))}}),DC=tt(LC,[["__scopeId","data-v-a2bf7c3d"]]),UC=["","","",""," ","","",""," "," "],Oi=async t=>{const{reading:e,customQuestion:s,isPremium:n,getPositionName:r,userId:i}=t,o=new Bo(n);if(s){const a={readingId:e.id,cards:e.cards.map((c,u)=>{var d,f;return{id:c.id,name:c.name||c.nameEn||"",nameKr:c.nameKr||c.name_kr||c.name||"",arcana:c.arcana||"unknown",suit:c.suit||null,number:c.number||null,orientation:c.orientation||"upright",position:{name:((d=c.position)==null?void 0:d.name)||r(e.spreadId,u),description:((f=c.position)==null?void 0:f.description)||""},meanings:c.meanings||{}}}),spreadId:e.spreadId,topic:e.topic,customQuestion:s,userId:i};return await Uu.generateInterpretation(a)}else{const a=e.cards.map((u,d)=>{var v;const f=e.spreadId==="celtic_cross"?((v=u.position)==null?void 0:v.name)||UC[d]||` ${d+1}`:r(e.spreadId,d);return{id:u.id,name:u.name||u.nameEn||"",name_kr:u.nameKr||u.name_kr||u.name||"",nameKr:u.nameKr||u.name_kr||u.name||"",arcana:u.arcana||"unknown",suit:u.suit||null,number:u.number||null,orientation:u.orientation||"upright",position:{position:d+1,name:f}}}),c=await o.generateInterpretation(a,e.topic||"general",e.spreadId);return{success:c&&c.text,interpretation:c==null?void 0:c.text,interpretationId:c==null?void 0:c.interpretationId}}},xC={props:{title:String,message:String,confirmText:{type:String,default:""},cancelText:{type:String,default:""},showCancel:{type:Boolean,default:!0}},emits:["confirm","cancel"],setup(t,{emit:e}){const s=()=>{e("confirm")},n=()=>{e("cancel")};return()=>yt("div",{class:"alert-overlay",onClick:n},[yt("div",{class:"alert-container",onClick:r=>r.stopPropagation()},[yt("div",{class:"alert-content"},[yt("h2",{class:"alert-title"},t.title),yt("p",{class:"alert-message"},t.message),yt("div",{class:"alert-buttons"},[t.showCancel&&yt("button",{class:"alert-button alert-button-cancel",onClick:n},t.cancelText),yt("button",{class:"alert-button alert-button-confirm",onClick:s},t.confirmText)])])])])}},NC=()=>{if(document.getElementById("alert-styles"))return;const t=document.createElement("style");t.id="alert-styles",t.textContent=`
    .alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.2s ease-out;
    }
    
    .alert-container {
      background: #1E1B4B;
      border: 2px solid rgba(168, 85, 247, 0.3);
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      animation: slideIn 0.3s ease-out;
    }
    
    .alert-content {
      text-align: center;
    }
    
    .alert-title {
      color: #A855F7;
      font-size: 24px;
      margin-bottom: 16px;
      font-weight: 600;
    }
    
    .alert-message {
      color: rgba(255, 255, 255, 0.9);
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 24px;
      white-space: pre-line;
    }
    
    .alert-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    
    .alert-button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 100px;
    }
    
    .alert-button-confirm {
      background: linear-gradient(135deg, #A855F7 0%, #7C3AED 100%);
      color: white;
    }
    
    .alert-button-confirm:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
    }
    
    .alert-button-cancel {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .alert-button-cancel:hover {
      background: rgba(255, 255, 255, 0.15);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  `,document.head.appendChild(t)},gr=t=>new Promise(e=>{NC();const s=document.createElement("div");document.body.appendChild(s);const n=Fc({render(){return yt(xC,{...t,showCancel:t.showCancel!==!1,onConfirm:()=>{n.unmount(),document.body.removeChild(s),e(!0)},onCancel:()=>{n.unmount(),document.body.removeChild(s),e(!1)}})}});n.mount(s)});class KC{constructor(){this.initialized=!1,this.isTestMode=!0,this.adIds={android:{interstitial:"ca-app-pub-3940256099942544/1033173712",rewarded:"ca-app-pub-3940256099942544/5224354917",banner:"ca-app-pub-3940256099942544/6300978111"},ios:{interstitial:"ca-app-pub-3940256099942544/4411468910",rewarded:"ca-app-pub-3940256099942544/1712485313",banner:"ca-app-pub-3940256099942544/2934735716"}},this.isLoading=W(!1),this.isAdReady=W(!1)}getPlatform(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform():"web"}async initialize(){var e;if(!this.initialized)try{if(this.getPlatform()==="web"){console.log("   ."),this.initialized=!0;return}typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)&&(await window.Capacitor.Plugins.AdMob.initialize({requestTrackingAuthorization:!0,testingDevices:this.isTestMode?["YOUR_TEST_DEVICE_ID","2077ef9a63d2b398840261c8221a0c9b"]:[],initializeForTesting:this.isTestMode}),console.log(" AdMob  :",this.isTestMode),this.initialized=!0,console.log("AdMob  "),this.setupEventListeners())}catch(s){console.error("AdMob  :",s),this.initialized=!0}}setupEventListeners(){var e;try{if(typeof window.Capacitor>"u"||!((e=window.Capacitor.Plugins)!=null&&e.AdMob))return;const s=window.Capacitor.Plugins.AdMob;s.addListener("onAdLoaded",n=>{console.log("   "),this.isAdReady.value=!0,this.isLoading.value=!1}),s.addListener("onAdFailedToLoad",n=>{console.error("   :",n),this.isAdReady.value=!1,this.isLoading.value=!1}),s.addListener("onAdOpened",()=>{console.log("  ")}),s.addListener("onAdClosed",()=>{console.log("  "),this.isAdReady.value=!1})}catch(s){console.error("   :",s)}}async loadInterstitialAd(){var e,s;if(this.initialized||await this.initialize(),this.isLoading.value||this.isAdReady.value)return this.isAdReady.value;try{const n=this.getPlatform();if(n==="web")return console.log("   "),!0;if(typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)){const r=window.Capacitor.Plugins.AdMob;this.isLoading.value=!0;const i={adId:n==="ios"?this.adIds.ios.interstitial:this.adIds.android.interstitial,isTesting:this.isTestMode};console.log("   :",i);const o=new Promise(c=>{setTimeout(()=>{console.warn("   "),this.isLoading.value=!1,c(!1)},1e4)}),a=r.prepareInterstitial(i).then(()=>(console.log("   "),this.isAdReady.value=!0,this.isLoading.value=!1,!0));return await Promise.race([a,o])}return!1}catch(n){return console.error("   :",n.message||n),this.isLoading.value=!1,(s=n.message)!=null&&s.includes("Network error")&&console.warn("   "),!1}}async showInterstitialAd(){var e;try{if(this.getPlatform()==="web"){console.log(" :   (5)");const n=document.createElement("div");return n.style.cssText=`
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.9);
          z-index: 9999;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: white;
          font-size: 24px;
        `,n.innerHTML=`
          <div style="text-align: center;">
            <h2 style="margin-bottom: 20px;"> </h2>
            <p>    </p>
            <p style="font-size: 18px; margin-top: 20px;">5   ...</p>
            <div style="margin-top: 20px; font-size: 48px;"></div>
          </div>
        `,document.body.appendChild(n),await new Promise(r=>setTimeout(r,5e3)),document.body.removeChild(n),!0}if(typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)){const n=window.Capacitor.Plugins.AdMob;if(!this.isAdReady.value&&(console.log("   ..."),!await this.loadInterstitialAd()))return console.warn("    -   "),!0;try{return await n.showInterstitial(),!0}catch(r){return console.warn("   :",r),!0}}return console.log("AdMob      "),!0}catch(s){return console.error("   :",s),!0}}async showRewardedAd(){var e;try{const s=this.getPlatform();if(s==="web")return console.log(" :   "),!0;if(typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)){const n=window.Capacitor.Plugins.AdMob,r={adId:s==="ios"?this.adIds.ios.rewarded:this.adIds.android.rewarded,isTesting:this.isTestMode};await n.prepareRewardVideoAd(r);const i=await n.showRewardVideoAd();if(i&&i.type&&i.amount>0)return console.log(` : ${i.type} x ${i.amount}`),!0}return!0}catch(s){return console.error("  :",s),!0}}async showBannerAd(e="bottom"){var s;try{const n=this.getPlatform();if(n==="web"){console.log(" :   ");return}if(typeof window.Capacitor<"u"&&((s=window.Capacitor.Plugins)!=null&&s.AdMob)){const r=window.Capacitor.Plugins.AdMob,i={adId:n==="ios"?this.adIds.ios.banner:this.adIds.android.banner,isTesting:this.isTestMode,position:e==="top"?"TOP_CENTER":"BOTTOM_CENTER",margin:0};await r.showBanner(i),console.log("  ")}}catch(n){console.error("   :",n)}}async hideBannerAd(){var e;try{typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)&&(await window.Capacitor.Plugins.AdMob.hideBanner(),console.log("  "))}catch(s){console.error("   :",s)}}async removeBannerAd(){var e;try{typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)&&(await window.Capacitor.Plugins.AdMob.removeBanner(),console.log("  "))}catch(s){console.error("   :",s)}}setProductionMode(e,s){this.isTestMode=!1,this.adIds.android.interstitial=e,this.adIds.ios.interstitial=s}}const FC=new KC,BC=()=>{const t=Ve(),e=ye(()=>t.isPremium),s=ye(()=>!t.isPremium),n=ye(()=>t.isPremium);return{isSubscribed:e,showAds:s,canAccessPremiumFeatures:n}},HC={class:"reading-result"},zC={key:0,class:"container"},VC={key:0,class:"custom-question-section"},qC={class:"custom-question-content"},WC={class:"cards-layout-section"},GC={key:0,class:"celtic-cross-layout"},JC={class:"cards-container"},QC={class:"card-position position-1"},YC=["src","alt"],XC={class:"card-position position-2"},ZC=["src","alt"],e$={class:"card-position position-3"},t$=["src","alt"],s$={class:"card-position position-4"},n$=["src","alt"],r$={class:"card-position position-5"},i$=["src","alt"],o$={class:"card-position position-6"},a$=["src","alt"],l$={class:"card-position position-7"},c$=["src","alt"],u$={class:"card-position position-8"},d$=["src","alt"],h$={class:"card-position position-9"},f$=["src","alt"],p$={class:"card-position position-10"},g$=["src","alt"],m$={key:1,class:"cards-grid"},v$={class:"card-image"},y$=["src","alt"],w$={class:"card-name"},b$={key:1,class:"basic-interpretation-section"},_$={class:"basic-interpretation-content"},k$={key:0,class:"card-interpretations"},S$={class:"position-name"},C$={class:"interpretation-text"},$$={key:0},P$={key:1},E$={key:1,class:"ai-interpretation-cta"},T$={key:2,class:"ai-interpretation-loading"},A$={key:3,class:"ai-interpretation-result"},I$={class:"ai-content"},R$={key:2,class:"ai-interpretation-section"},M$={key:0,class:"ai-loading-content"},O$={key:1,class:"ai-interpretation-content"},j$={key:2,class:"rating-section"},L$={class:"star-rating"},D$=["onClick","onMouseenter"],U$={class:"rating-hint"},x$={key:3,class:"rating-submitted"},N$={key:1,class:"container"},K$=Qe({__name:"ReadingResult",setup(t){const e=Nt(),s=dv(),n=Ks(),r=Ve(),{isSubscribed:i}=BC(),o=ye(()=>s.query.readingId||s.params.readingId),a=ye(()=>o.value?n.getReadingById(o.value)||n.getCurrentReading():null),c=ye(()=>n.getCustomQuestion()),u=W(0),d=W(0),f=W(0),v=W(!1),p=I=>Yn(I),h=I=>Xs(I),m=()=>{e.go(-1)},C=()=>{e.push("/app")},k=()=>{e.push("/reading-select")},A=async I=>{var j;if(!(!((j=a.value)!=null&&j.aiInterpretationId)||f.value>0)){d.value=I,f.value=I;try{const{AIInterpretationService:q}=await Ie(async()=>{const{AIInterpretationService:B}=await Promise.resolve().then(()=>ab);return{AIInterpretationService:B}},void 0,import.meta.url);await new q(i.value).submitRating(a.value.aiInterpretationId,I)}catch(q){console.error("  :",q)}}},S=()=>{const I=u.value||d.value;return I===0?" ":I===1?"   ":I===2?"   ":I===3?"":I===4?" ":I===5?"  !":""},T=(I,j)=>I==="one_card"?"":I==="three_card_timeline"&&["","",""][j]||"",O=(I,j)=>I.meanings&&I.meanings[j]?I.meanings[j][I.orientation]:I.meanings&&I.meanings.general?I.meanings.general[I.orientation]:`${I.nameKr||I.name}  ${I.orientation==="upright"?"":""} .`,E=async()=>{var I;if(!(!a.value||a.value.aiInterpretation)){v.value=!0;try{const j=await Oi({reading:a.value,customQuestion:n.getCustomQuestion(),isPremium:!0,getPositionName:T,userId:(I=r.user)==null?void 0:I.id});if(j.success&&j.interpretation)a.value.aiInterpretation=j.interpretation,a.value.aiInterpretationId=j.interpretationId||null,n.updateReading(a.value);else throw new Error("AI   ")}catch(j){console.error("AI   :",j),await gr({title:"",message:"AI     .  .",confirmText:"",showCancel:!1})}finally{v.value=!1}}},R=async()=>{var B;const I=a.value,j=o.value,q=n.getCustomQuestion();if(!(!I||!await gr({title:"  ",message:`        .
?`,confirmText:"   ",cancelText:""})))try{const G=Oi({reading:I,customQuestion:q,isPremium:!1,getPositionName:T,userId:(B=r.user)==null?void 0:B.id}),[he,ce]=await Promise.all([FC.showInterstitialAd(),G]);if(!he)return;if(o.value!==j){console.warn(" . AI  .");return}if(v.value=!0,await new Promise(Q=>setTimeout(Q,1e3)),ce.success&&ce.interpretation){const Q=n.getReadingById(j)||n.getCurrentReading();Q&&Q.id===I.id&&(Q.aiInterpretation=ce.interpretation,Q.aiInterpretationId=ce.interpretationId||null,n.updateReading(Q))}else throw new Error("AI   ")}catch(G){console.error("AI   :",G),await gr({title:"",message:"AI     .  .",confirmText:"",showCancel:!1})}finally{v.value=!1}},N=async()=>{var q;if(!a.value)return;const I=a.value.spreadId==="celtic_cross",j=!!c.value;if(!(!I&&(!j||!r.isPremium))){v.value=!0;try{const K=await Oi({reading:a.value,customQuestion:n.getCustomQuestion(),isPremium:!0,getPositionName:T,userId:(q=r.user)==null?void 0:q.id});if(K.success&&K.interpretation)a.value.aiInterpretation=K.interpretation,a.value.aiInterpretationId=K.interpretationId||null,K.probabilityAnalysis&&(a.value.probabilityAnalysis=K.probabilityAnalysis),n.updateReading(a.value);else throw new Error("AI   ")}catch(K){console.error("AI   :",K),await gr({title:"",message:"AI     .  .",confirmText:"",showCancel:!1})}finally{v.value=!1}}};return mt(async()=>{if(!a.value&&!o.value){e.push("/app");return}a.value&&!a.value.aiInterpretation&&(a.value.spreadId==="celtic_cross"?await N():c.value&&r.isPremium&&await N())}),(I,j)=>(w(),b("div",HC,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:m}," "),j[2]||(j[2]=l("h1",null," ",-1))]),a.value?(w(),b("div",zC,[c.value?(w(),b("section",VC,[j[3]||(j[3]=l("h2",null,"  ",-1)),l("div",qC,[l("p",null,$(c.value),1)])])):M("",!0),l("section",WC,[j[14]||(j[14]=l("h2",null," ",-1)),a.value.spreadId==="celtic_cross"?(w(),b("div",GC,[l("div",JC,[l("div",QC,[l("div",{class:H(["card-mini",a.value.cards[0].orientation])},[l("img",{src:p(a.value.cards[0]),alt:a.value.cards[0].nameKr,onError:h,class:H({reversed:a.value.cards[0].orientation==="reversed"})},null,42,YC),j[4]||(j[4]=l("span",{class:"position-label"},"1",-1))],2)]),l("div",XC,[l("div",{class:H(["card-mini",a.value.cards[1].orientation])},[l("img",{src:p(a.value.cards[1]),alt:a.value.cards[1].nameKr,onError:h,class:H({reversed:a.value.cards[1].orientation==="reversed"})},null,42,ZC),j[5]||(j[5]=l("span",{class:"position-label"},"2",-1))],2)]),l("div",e$,[l("div",{class:H(["card-mini",a.value.cards[2].orientation])},[l("img",{src:p(a.value.cards[2]),alt:a.value.cards[2].nameKr,onError:h,class:H({reversed:a.value.cards[2].orientation==="reversed"})},null,42,t$),j[6]||(j[6]=l("span",{class:"position-label"},"3",-1))],2)]),l("div",s$,[l("div",{class:H(["card-mini",a.value.cards[3].orientation])},[l("img",{src:p(a.value.cards[3]),alt:a.value.cards[3].nameKr,onError:h,class:H({reversed:a.value.cards[3].orientation==="reversed"})},null,42,n$),j[7]||(j[7]=l("span",{class:"position-label"},"4",-1))],2)]),l("div",r$,[l("div",{class:H(["card-mini",a.value.cards[4].orientation])},[l("img",{src:p(a.value.cards[4]),alt:a.value.cards[4].nameKr,onError:h,class:H({reversed:a.value.cards[4].orientation==="reversed"})},null,42,i$),j[8]||(j[8]=l("span",{class:"position-label"},"5",-1))],2)]),l("div",o$,[l("div",{class:H(["card-mini",a.value.cards[5].orientation])},[l("img",{src:p(a.value.cards[5]),alt:a.value.cards[5].nameKr,onError:h,class:H({reversed:a.value.cards[5].orientation==="reversed"})},null,42,a$),j[9]||(j[9]=l("span",{class:"position-label"},"6",-1))],2)]),l("div",l$,[l("div",{class:H(["card-mini",a.value.cards[6].orientation])},[l("img",{src:p(a.value.cards[6]),alt:a.value.cards[6].nameKr,onError:h,class:H({reversed:a.value.cards[6].orientation==="reversed"})},null,42,c$),j[10]||(j[10]=l("span",{class:"position-label"},"7",-1))],2)]),l("div",u$,[l("div",{class:H(["card-mini",a.value.cards[7].orientation])},[l("img",{src:p(a.value.cards[7]),alt:a.value.cards[7].nameKr,onError:h,class:H({reversed:a.value.cards[7].orientation==="reversed"})},null,42,d$),j[11]||(j[11]=l("span",{class:"position-label"},"8",-1))],2)]),l("div",h$,[l("div",{class:H(["card-mini",a.value.cards[8].orientation])},[l("img",{src:p(a.value.cards[8]),alt:a.value.cards[8].nameKr,onError:h,class:H({reversed:a.value.cards[8].orientation==="reversed"})},null,42,f$),j[12]||(j[12]=l("span",{class:"position-label"},"9",-1))],2)]),l("div",p$,[l("div",{class:H(["card-mini",a.value.cards[9].orientation])},[l("img",{src:p(a.value.cards[9]),alt:a.value.cards[9].nameKr,onError:h,class:H({reversed:a.value.cards[9].orientation==="reversed"})},null,42,g$),j[13]||(j[13]=l("span",{class:"position-label"},"10",-1))],2)])])])):(w(),b("div",m$,[(w(!0),b(be,null,xe(a.value.cards,(q,K)=>(w(),b("div",{key:K,class:"card-display"},[l("div",v$,[l("img",{src:p(q),alt:q.nameKr||q.name,onError:h,class:H({reversed:q.orientation==="reversed"})},null,42,y$)]),l("div",w$,$(q.nameKr||q.name),1),l("div",{class:H(["card-orientation",q.orientation])},$(q.orientation==="upright"?"":""),3)]))),128))]))]),(a.value.spreadId==="one_card"||a.value.spreadId==="three_card_timeline")&&a.value.overallMessage?(w(),b("section",b$,[j[19]||(j[19]=l("h2",null,"  ",-1)),l("div",_$,[l("p",null,$(a.value.overallMessage),1)]),a.value.cards?(w(),b("div",k$,[(w(!0),b(be,null,xe(a.value.cards,(q,K)=>{var B,G;return w(),b("div",{key:K,class:"card-interpretation-item"},[l("h3",null,[l("span",S$,$(((B=q.position)==null?void 0:B.name)||T(a.value.spreadId,K)),1),Ae(" - "+$(q.nameKr||q.name),1)]),l("p",{class:H(["orientation-status",q.orientation])},$(q.orientation==="upright"?"":""),3),l("div",C$,[(G=q.interpretation)!=null&&G.basic?(w(),b("p",$$,$(q.interpretation.basic),1)):(w(),b("p",P$,$(O(q,a.value.topic)),1))])])}),128))])):M("",!0),a.value.aiInterpretation?v.value?(w(),b("div",T$,j[17]||(j[17]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"AI    ...",-1)]))):a.value.aiInterpretation?(w(),b("div",A$,[j[18]||(j[18]=l("h3",null,"   ",-1)),l("div",I$,[l("p",null,$(a.value.aiInterpretation),1)])])):M("",!0):(w(),b("div",E$,[l("button",{class:"crystal-ball-button",onClick:j[0]||(j[0]=q=>pe(r).isPremium?E():R())},j[15]||(j[15]=[l("span",{class:"crystal-icon"},"",-1),l("span",{class:"button-text"},"    ",-1),l("span",{class:"sparkle-effect"},"",-1)])),j[16]||(j[16]=l("p",{class:"cta-description"},"    ",-1))]))])):M("",!0),a.value.spreadId==="celtic_cross"&&(a.value.aiInterpretation||v.value)?(w(),b("section",R$,[j[23]||(j[23]=l("h2",null," ",-1)),v.value?(w(),b("div",M$,j[20]||(j[20]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"AI    ...",-1)]))):(w(),b("div",O$,[l("p",null,$(a.value.aiInterpretation),1)])),a.value.aiInterpretationId&&!f.value?(w(),b("div",j$,[j[21]||(j[21]=l("h4",null,"   ?",-1)),l("div",L$,[(w(),b(be,null,xe(5,q=>l("button",{key:q,onClick:K=>A(q),class:H(["star-btn",{active:u.value>=q||d.value>=q}]),onMouseenter:K=>u.value=q,onMouseleave:j[1]||(j[1]=K=>u.value=0)},"  ",42,D$)),64))]),l("p",U$,$(S()),1)])):M("",!0),f.value?(w(),b("div",x$,j[22]||(j[22]=[l("p",null,"   !",-1)]))):M("",!0)])):M("",!0),l("section",{class:"actions"},[l("button",{class:"btn btn-primary",onClick:k},"    "),l("button",{class:"btn btn-secondary",onClick:C},"   ")])])):(w(),b("div",N$,[l("div",{class:"error-state"},[j[24]||(j[24]=l("h2",null,"    ",-1)),j[25]||(j[25]=l("p",null,"   .",-1)),l("button",{class:"btn btn-primary",onClick:C},"   ")])]))]))}}),F$=tt(K$,[["__scopeId","data-v-0a05e6d9"]]),nn={monthly:{id:"tarot_premium_monthly",price:2900,currency:"KRW",period:"monthly",displayPrice:"2,900/"},yearly:{id:"tarot_premium_yearly",price:29900,currency:"KRW",period:"yearly",displayPrice:"29,900/",discountText:"12  17% "}},B$={card:{id:"card",name:"/",icon:""},bank:{id:"bank",name:"",icon:""},kakao:{id:"kakaopay",name:"",icon:""},toss:{id:"tosspay",name:"",icon:""}};class H${constructor(){this.isInitialized=!1}async initialize(){try{if(this.isInitialized)return;console.log(" [Web]   ..."),await this.loadPaymentSDK(),this.isInitialized=!0,console.log(" [Web]    ")}catch(e){throw console.error(" [Web]    :",e),e}}async loadPaymentSDK(){return new Promise((e,s)=>{const n=document.createElement("script");n.src="https://js.tosspayments.com/v1/payment",n.onload=()=>e(),n.onerror=()=>s(new Error("Failed to load payment SDK")),document.head.appendChild(n)})}async purchaseSubscription(e,s){var n,r,i,o;try{const a=Ve(),c=nn[e];if(!c)throw new Error("Invalid product ID");console.log(` [Web]   : ${e}, : ${s}`);const u=`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,d={amount:c.price,orderId:u,orderName:`   (${c.period})`,customerName:((n=a.currentUser)==null?void 0:n.name)||"",customerEmail:((r=a.currentUser)==null?void 0:r.email)||"",successUrl:`${window.location.origin}/payment-success`,failUrl:`${window.location.origin}/payment-fail`,method:s},f=await this.processPayment(d);if(f.success){const v=await fr.createSubscription({user_id:(i=a.currentUser)==null?void 0:i.id,plan:c.period,status:"active",price:c.price,currency:c.currency,platform_order_id:u,payment_method:s,start_date:new Date,end_date:this.getSubscriptionEndDate(c.period)});return a.updateSubscription({id:v.id,userId:((o=a.currentUser)==null?void 0:o.id)||"",plan:c.period,status:"active",startDate:new Date,endDate:this.getSubscriptionEndDate(c.period),price:c.price,currency:c.currency,paymentMethod:s}),console.log(" [Web]   "),{success:!0,subscription:v}}return{success:!1,error:f.error}}catch(a){return console.error(" [Web]   :",a),{success:!1,error:a}}}async processPayment(e){try{return oi.isWeb,{success:!0}}catch(s){return{success:!1,error:s}}}async restoreSubscription(){try{const e=Ve();if(!e.currentUser)return{success:!1,error:"User not logged in"};const s=await fr.getCurrentSubscription(e.currentUser.id);return s&&s.status==="active"?(e.updateSubscription(s),console.log(" [Web]   "),{success:!0}):{success:!1,error:"No active subscription found"}}catch(e){return console.error(" [Web]   :",e),{success:!1,error:e}}}async cancelSubscription(){try{const e=Ve();return e.currentSubscription?(await fr.cancelSubscription(e.currentSubscription.id),e.updateSubscription({...e.currentSubscription,status:"cancelled"}),console.log(" [Web]   "),{success:!0}):{success:!1,error:"No active subscription"}}catch(e){return console.error(" [Web]   :",e),{success:!1,error:e}}}getSubscriptionEndDate(e){const s=new Date;return e==="yearly"?new Date(s.setFullYear(s.getFullYear()+1)):new Date(s.setMonth(s.getMonth()+1))}async checkSubscriptionStatus(){try{const e=Ve();if(!e.currentUser)return!1;const s=await fr.getCurrentSubscription(e.currentUser.id);return s&&s.status==="active"}catch(e){return console.error(" [Web]    :",e),!1}}}class z${async initialize(){const{initializeRevenueCat:e}=await Ie(async()=>{const{initializeRevenueCat:s}=await import("./purchases-BN6Kpe9M.js").then(n=>n.p);return{initializeRevenueCat:s}},[],import.meta.url);return e()}async purchaseSubscription(e){const{getOfferings:s,purchaseSubscription:n}=await Ie(async()=>{const{getOfferings:r,purchaseSubscription:i}=await import("./purchases-BN6Kpe9M.js").then(o=>o.p);return{getOfferings:r,purchaseSubscription:i}},[],import.meta.url);try{const i=(await s()).find(a=>a.availablePackages.some(c=>c.identifier===e));if(!i)throw new Error("Product not found");const o=i.availablePackages.find(a=>a.identifier===e);if(!o)throw new Error("Package not found");return await n(o)}catch(r){return{success:!1,error:r}}}async restoreSubscription(){const{restoreSubscription:e}=await Ie(async()=>{const{restoreSubscription:s}=await import("./purchases-BN6Kpe9M.js").then(n=>n.p);return{restoreSubscription:s}},[],import.meta.url);return e()}async cancelSubscription(){const{cancelSubscription:e}=await Ie(async()=>{const{cancelSubscription:s}=await import("./purchases-BN6Kpe9M.js").then(n=>n.p);return{cancelSubscription:s}},[],import.meta.url);return e()}async checkSubscriptionStatus(){const{checkSubscriptionStatus:e}=await Ie(async()=>{const{checkSubscriptionStatus:s}=await import("./purchases-BN6Kpe9M.js").then(n=>n.p);return{checkSubscriptionStatus:s}},[],import.meta.url);return e()}}const V$=()=>oi.isWeb?new H$:new z$,xu=V$(),q$=()=>xu.initialize(),W$=(t,e)=>xu.purchaseSubscription(t,e),ji=(t,e="KRW")=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:e}).format(t),Li=()=>{const t=nn.monthly.price*12,e=nn.yearly.price;return Math.round((t-e)/t*100)},G$={class:"premium"},J$={class:"container"},Q$={class:"features-section"},Y$={class:"features-grid"},X$={class:"feature-icon"},Z$={class:"pricing-section"},eP={class:"pricing-grid"},tP={key:0,class:"best-value"},sP={class:"plan-header"},nP={class:"price"},rP={key:0,class:"original-price"},iP={class:"amount"},oP={class:"period"},aP={key:0,class:"savings"},lP={class:"plan-features"},cP={key:0},uP={key:1},dP=["onClick","disabled"],hP={key:0},fP={class:"selected-plan"},pP={class:"plan-price"},gP={class:"payment-methods"},mP=["onClick"],vP={class:"method-icon"},yP={class:"method-name"},wP={class:"payment-actions"},bP=["disabled"],_P={key:1,class:"current-status"},kP={class:"status-card card"},SP={key:0,class:"premium-status"},CP={key:0,class:"subscription-info"},$P={key:1,class:"free-status"},PP={class:"faq-section"},EP={class:"faq-list"},TP=Qe({__name:"Premium",setup(t){const e=Nt(),s=Ve(),n=Qn(),r=W(!1),i=W(!1),o=W("monthly"),a=W(""),c=ye(()=>({removeAds:{icon:"",title:" ",description:"       "},unlimitedReadings:{icon:"",title:" ",description:"         "},premiumSpreads:{icon:"",title:" ",description:" ,        "},detailedInterpretation:{icon:"",title:" ",description:"     "},unlimitedHistory:{icon:"",title:" ",description:"         "},prioritySupport:{icon:"",title:" ",description:"      "}})),u=[{id:1,question:"    ?",answer:",    .      ."},{id:2,question:"    ?",answer:"   3   ,     ,   ."},{id:3,question:"  ?",answer:"         ."},{id:4,question:" ?",answer:"   7    ."}],d=()=>{e.go(-1)},f=C=>{o.value=C,a.value="",i.value=!0},v=()=>{i.value=!1,a.value=""},p=async()=>{if(a.value)try{r.value=!0;const C=await W$(o.value,a.value);C.success?(await n.success(" ! "),v(),await s.loadUserProfile()):(await n.error(" .  ."),console.error("Purchase failed:",C.error))}catch(C){console.error("Purchase error:",C),await n.error("   .")}finally{r.value=!1}},h=async()=>{await n.info("     .")},m=C=>new Date(C).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"});return(C,k)=>(w(),b("div",G$,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:d}," "),k[1]||(k[1]=l("h1",null," ",-1))]),l("div",J$,[k[15]||(k[15]=l("div",{class:"hero-section"},[l("div",{class:"premium-icon"},""),l("h2",null,"  "),l("p",{class:"hero-subtitle"},[Ae("   "),l("br"),Ae("    ")])],-1)),l("div",Q$,[k[2]||(k[2]=l("h3",null," ",-1)),l("div",Y$,[(w(!0),b(be,null,xe(c.value,(A,S)=>(w(),b("div",{class:"feature-card card",key:S},[l("div",X$,$(A.icon),1),l("h4",null,$(A.title),1),l("p",null,$(A.description),1)]))),128))])]),l("div",Z$,[k[6]||(k[6]=l("h3",null,"",-1)),l("div",eP,[(w(!0),b(be,null,xe(pe(nn),(A,S)=>(w(),b("div",{class:H(["pricing-card card",{featured:S==="yearly"}]),key:S},[S==="yearly"?(w(),b("div",tP," ")):M("",!0),l("div",sP,[l("h4",null,$(S==="monthly"?" ":" "),1),l("div",nP,[S==="yearly"?(w(),b("span",rP,$(pe(ji)(pe(nn).monthly.price*12)),1)):M("",!0),l("span",iP,$(pe(ji)(A.price)),1),l("span",oP,"/"+$(S==="monthly"?"":""),1)]),S==="yearly"?(w(),b("div",aP,$(pe(Li)())+"% !",1)):M("",!0)]),l("ul",lP,[k[3]||(k[3]=l("li",null,"   ",-1)),k[4]||(k[4]=l("li",null,"  ",-1)),k[5]||(k[5]=l("li",null,"  ",-1)),S==="yearly"?(w(),b("li",cP," "+$(pe(Li)())+"%  ",1)):(w(),b("li",uP,"   "))]),l("button",{class:H(["btn btn-primary subscribe-btn",{featured:S==="yearly"}]),onClick:T=>f(S),disabled:r.value},[Ae($(S==="monthly"?" ":" ")+" ",1),S==="yearly"?(w(),b("span",hP," ("+$(pe(Li)())+"% )",1)):M("",!0)],10,dP)],2))),128))])]),i.value?(w(),b("div",{key:0,class:"payment-modal",onClick:v},[l("div",{class:"payment-content",onClick:k[0]||(k[0]=Yt(()=>{},["stop"]))},[k[7]||(k[7]=l("h3",null,"  ",-1)),l("div",fP,[l("p",null,[l("strong",null,$(o.value==="monthly"?" ":" "),1)]),l("p",pP,$(pe(ji)(pe(nn)[o.value].price)),1)]),l("div",gP,[(w(!0),b(be,null,xe(pe(B$),(A,S)=>(w(),b("div",{key:S,class:H(["payment-method",{selected:a.value===S}]),onClick:T=>a.value=S},[l("span",vP,$(A.icon),1),l("span",yP,$(A.name),1)],10,mP))),128))]),l("div",wP,[l("button",{class:"btn btn-secondary",onClick:v},""),l("button",{class:"btn btn-primary",onClick:p,disabled:!a.value||r.value},$(r.value?"  ...":""),9,bP)])])])):M("",!0),pe(s).isAuthenticated?(w(),b("div",_P,[l("div",kP,[k[13]||(k[13]=l("h3",null," ",-1)),pe(s).isPremium?(w(),b("div",SP,[k[8]||(k[8]=l("div",{class:"status-icon"},"",-1)),k[9]||(k[9]=l("p",null,[l("strong",null," ")],-1)),k[10]||(k[10]=l("p",null,"    !",-1)),pe(s).currentSubscription?(w(),b("div",CP,[l("p",null," : "+$(m(pe(s).currentSubscription.endDate)),1),l("button",{class:"btn btn-outline",onClick:h}," ")])):M("",!0)])):(w(),b("div",$P,[k[11]||(k[11]=l("div",{class:"status-icon"},"",-1)),k[12]||(k[12]=l("p",null,[l("strong",null," ")],-1)),l("p",null,"  : "+$(pe(s).freeReadingsToday)+"/"+$(pe(s).maxFreeReadingsPerDay),1)]))])])):M("",!0),l("div",PP,[k[14]||(k[14]=l("h3",null,"  ",-1)),l("div",EP,[(w(),b(be,null,xe(u,A=>l("div",{class:"faq-item card",key:A.id},[l("h4",null,$(A.question),1),l("p",null,$(A.answer),1)])),64))])])])]))}}),AP=tt(TP,[["__scopeId","data-v-446d14a2"]]),IP={class:"history"},RP={class:"container"},MP={key:0,class:"login-prompt"},OP={class:"prompt-card card"},jP={key:1,class:"loading-state"},LP={key:2,class:"empty-state"},DP={class:"empty-card card"},UP={key:3,class:"readings-section"},xP={class:"section-header"},NP={class:"filters"},KP={class:"readings-grid"},FP=["onClick"],BP={class:"reading-header"},HP={class:"reading-date"},zP={class:"reading-content"},VP={class:"reading-summary"},qP={class:"cards-preview"},WP=["src","alt"],GP={key:0,class:"more-cards"},JP={class:"reading-footer"},QP={class:"card-count"},YP={key:0,class:"premium-badge"},XP={key:0,class:"pagination"},ZP=["disabled"],e2={class:"page-info"},t2=["disabled"],s2={class:"modal-header"},n2={class:"modal-body"},r2={class:"reading-info"},i2={class:"info-row"},o2={class:"info-row"},a2={class:"info-row"},l2={class:"cards-section"},c2={class:"drawn-cards"},u2={class:"card-visual"},d2=["src","alt"],h2={class:"card-details"},f2={class:"card-name"},p2={class:"card-meaning"},g2={key:0,class:"interpretation-section"},m2={class:"full-interpretation"},Di=6,v2=Qe({__name:"History",setup(t){const e=Nt(),s=Ve(),n=W(!1),r=W("all"),i=W(null),o=W(1),a=W([]),c=W(!1),u=ye(()=>{let O=a.value;r.value!=="all"&&(O=O.filter(N=>N.topic===r.value)),O.sort((N,I)=>new Date(I.created_at).getTime()-new Date(N.created_at).getTime());const E=(o.value-1)*Di,R=E+Di;return O.slice(E,R)}),d=ye(()=>{const O=a.value.filter(E=>r.value==="all"||E.topic===r.value);return Math.ceil(O.length/Di)}),f=()=>{e.go(-1)},v=O=>({love:"/",career:"/",money:"/",health:"/",general:""})[O]||O,p=O=>new Date(O).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),h=O=>new Date(O).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=O=>Yn(O),C=O=>O.ai_interpretation?O.ai_interpretation.substring(0,100)+"...":"   .",k=O=>{i.value=O},A=()=>{i.value=null},S=O=>{o.value=O},T=async()=>{var O;if((O=s.user)!=null&&O.id){c.value=!0;try{const{data:E,error:R}=await le.from("reading_history").select(`
        *,
        cards:reading_cards(
          *,
          card:tarot_cards(*)
        )
      `).eq("user_id",s.user.id).order("created_at",{ascending:!1});if(R)throw R;a.value=(E||[]).map(N=>({...N,cards:N.cards.map(I=>({...I.card,position:I.position,card_name:I.card.name_kr,is_reversed:I.is_reversed}))}))}catch(E){console.error("Error fetching readings:",E)}finally{c.value=!1}}};return mt(()=>{s.isAuthenticated&&T()}),(O,E)=>{const R=qr("router-link");return w(),b("div",IP,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:f}," "),E[8]||(E[8]=l("h1",null," ",-1))]),l("div",RP,[pe(s).isAuthenticated?c.value?(w(),b("div",jP,E[12]||(E[12]=[l("div",{class:"spinner"},null,-1),l("p",null,"   ...",-1)]))):a.value.length===0?(w(),b("div",LP,[l("div",DP,[E[14]||(E[14]=l("div",{class:"empty-icon"},"",-1)),E[15]||(E[15]=l("h2",null,"   ",-1)),E[16]||(E[16]=l("p",null,"    !",-1)),fe(R,{to:"/reading-select",class:"btn btn-primary"},{default:Pe(()=>E[13]||(E[13]=[Ae("   ",-1)])),_:1,__:[13]})])])):(w(),b("div",UP,[l("div",xP,[E[18]||(E[18]=l("h2",null,"  ",-1)),l("div",NP,[_t(l("select",{"onUpdate:modelValue":E[1]||(E[1]=N=>r.value=N),class:"filter-select"},E[17]||(E[17]=[zn('<option value="all" data-v-3ae44dc2></option><option value="love" data-v-3ae44dc2>/</option><option value="career" data-v-3ae44dc2>/</option><option value="money" data-v-3ae44dc2>/</option><option value="general" data-v-3ae44dc2></option>',5)]),512),[[xc,r.value]])])]),l("div",KP,[(w(!0),b(be,null,xe(u.value,N=>(w(),b("div",{key:N.id,class:"reading-card card",onClick:I=>k(N)},[l("div",BP,[l("div",HP,$(p(N.created_at)),1),l("div",{class:H(["reading-topic",N.topic])},$(v(N.topic)),3)]),l("div",zP,[l("h3",null,$(N.spread_name),1),l("p",VP,$(C(N)),1),l("div",qP,[(w(!0),b(be,null,xe(N.cards.slice(0,3),(I,j)=>(w(),b("div",{key:j,class:H(["mini-card",{reversed:pe(kn)(I)}])},[l("img",{src:m(I),alt:I.card_name,onError:E[2]||(E[2]=(...q)=>pe(Xs)&&pe(Xs)(...q))},null,40,WP)],2))),128)),N.cards.length>3?(w(),b("span",GP," +"+$(N.cards.length-3),1)):M("",!0)])]),l("div",JP,[l("span",QP,$(N.cards.length)+"",1),N.spread_name===" "?(w(),b("span",YP,"   ")):M("",!0)])],8,FP))),128))]),d.value>1?(w(),b("div",XP,[l("button",{class:"page-btn",disabled:o.value===1,onClick:E[3]||(E[3]=N=>S(o.value-1))},"  ",8,ZP),l("span",e2,$(o.value)+" / "+$(d.value),1),l("button",{class:"page-btn",disabled:o.value===d.value,onClick:E[4]||(E[4]=N=>S(o.value+1))},"  ",8,t2)])):M("",!0)])):(w(),b("div",MP,[l("div",OP,[E[9]||(E[9]=l("div",{class:"prompt-icon"},"",-1)),E[10]||(E[10]=l("h2",null," ",-1)),E[11]||(E[11]=l("p",null,"    .",-1)),l("button",{class:"btn btn-primary",onClick:E[0]||(E[0]=N=>n.value=!0)},"  ")])])),i.value?(w(),b("div",{key:4,class:"modal-backdrop",onClick:A},[l("div",{class:"modal-content",onClick:E[6]||(E[6]=Yt(()=>{},["stop"]))},[l("div",s2,[l("h2",null,$(i.value.spread_name),1),l("button",{class:"close-button",onClick:A},"")]),l("div",n2,[l("div",r2,[l("div",i2,[E[19]||(E[19]=l("strong",null,":",-1)),Ae(" "+$(h(i.value.created_at)),1)]),l("div",o2,[E[20]||(E[20]=l("strong",null,":",-1)),Ae(" "+$(v(i.value.topic)),1)]),l("div",a2,[E[21]||(E[21]=l("strong",null,":",-1)),Ae(" "+$(i.value.question||" "),1)])]),l("div",l2,[E[22]||(E[22]=l("h4",null," ",-1)),l("div",c2,[(w(!0),b(be,null,xe(i.value.cards,(N,I)=>(w(),b("div",{key:I,class:"drawn-card"},[l("div",u2,[l("img",{src:pe(Yn)(N),alt:N.card_name,class:H(["card-image",{reversed:pe(kn)(N)}]),onError:E[5]||(E[5]=(...j)=>pe(Xs)&&pe(Xs)(...j))},null,42,d2),l("div",{class:H(["card-orientation",{reversed:pe(kn)(N)}])},$(pe(kn)(N)?"":""),3)]),l("div",h2,[l("h5",null,$(N.position||` ${I+1}`),1),l("p",f2,$(N.card_name),1),l("p",p2,$(pe(kn)(N)?N.meaning_reverse:N.meaning_upright),1)])]))),128))])]),i.value.ai_interpretation?(w(),b("div",g2,[E[23]||(E[23]=l("h4",null,"AI  ",-1)),l("p",m2,$(i.value.ai_interpretation),1)])):M("",!0)])])])):M("",!0),n.value?(w(),ft(Ru,{key:5,onClose:E[7]||(E[7]=N=>n.value=!1)})):M("",!0)])])}}}),y2=tt(v2,[["__scopeId","data-v-3ae44dc2"]]),w2={class:"tarot-dictionary"},b2={class:"container"},_2={class:"search-section"},k2={class:"search-bar"},S2={class:"filter-tabs"},C2=["onClick"],$2={class:"cards-grid"},P2=["onClick"],E2={class:"card-image"},T2=["src","alt"],A2={class:"card-info"},I2={class:"card-name-en"},R2={class:"card-meta"},M2={key:0,class:"suit"},O2={class:"modal-header"},j2={class:"modal-body"},L2={class:"card-visual"},D2={class:"card-image-large"},U2=["src","alt"],x2={class:"card-basic-info"},N2={key:0},K2={key:1},F2={key:0,class:"card-meanings"},B2={class:"meaning-section"},H2={class:"keywords"},z2={class:"meaning-section"},V2={class:"keywords"},q2={key:1,class:"detailed-meanings"},W2={class:"meaning-tabs"},G2=["onClick"],J2={key:0,class:"meaning-content"},Q2={class:"meaning-orientation"},Y2={class:"meaning-orientation"},X2=Qe({__name:"TarotDictionary",setup(t){const e=Ks(),s=W([]),n=Nt(),r=W(""),i=W("all"),o=W(null),a=W("general"),c=[{id:"all",name:""},{id:"major",name:" "},{id:"minor",name:" "},{id:"cups",name:""},{id:"wands",name:""},{id:"swords",name:""},{id:"pentacles",name:""}],u=[{id:"general",name:""},{id:"love",name:""},{id:"career",name:""},{id:"money",name:""}],d=ye(()=>{let S=s.value;if(r.value){const T=r.value.toLowerCase();S=S.filter(O=>O.nameKr.toLowerCase().includes(T)||O.name.toLowerCase().includes(T))}return i.value!=="all"&&(i.value==="major"||i.value==="minor"?S=S.filter(T=>T.arcana===i.value):S=S.filter(T=>T.suit===i.value)),S}),f=()=>{n.go(-1)},v=S=>{i.value=S},p=S=>{a.value=S},h=S=>Yn(S),m=S=>{o.value=S,a.value="general"};mt(async()=>{await e.initialize(),s.value=e.tarotCards});const C=()=>{o.value=null},k=S=>({cups:" ()",wands:" ()",swords:" ()",pentacles:" ()"})[S]||S,A=S=>Xs(S);return(S,T)=>{var O,E;return w(),b("div",w2,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:f}," "),T[2]||(T[2]=l("h1",null," ",-1))]),l("div",b2,[l("div",_2,[l("div",k2,[_t(l("input",{type:"text","onUpdate:modelValue":T[0]||(T[0]=R=>r.value=R),placeholder:"  ...",class:"search-input"},null,512),[[fs,r.value]]),T[3]||(T[3]=l("button",{class:"search-button"},"",-1))]),l("div",S2,[(w(),b(be,null,xe(c,R=>l("button",{key:R.id,class:H(["filter-tab",{active:i.value===R.id}]),onClick:N=>v(R.id)},$(R.name),11,C2)),64))])]),l("div",$2,[(w(!0),b(be,null,xe(d.value,R=>(w(),b("div",{key:R.id,class:"card-item card",onClick:N=>m(R)},[l("div",E2,[l("img",{src:h(R),alt:R.nameKr,onError:A},null,40,T2)]),l("div",A2,[l("h3",null,$(R.nameKr),1),l("p",I2,$(R.name),1),l("div",R2,[l("span",{class:H(["arcana-type",R.arcana])},$(R.arcana==="major"?"":""),3),R.suit?(w(),b("span",M2,$(k(R.suit)),1)):M("",!0)])])],8,P2))),128))]),o.value?(w(),b("div",{key:0,class:"modal-backdrop",onClick:C},[l("div",{class:"modal-content",onClick:T[1]||(T[1]=Yt(()=>{},["stop"]))},[l("div",O2,[l("h2",null,$(o.value.nameKr),1),l("button",{class:"close-button",onClick:C},"")]),l("div",j2,[l("div",L2,[l("div",D2,[l("img",{src:h(o.value),alt:o.value.nameKr,onError:A},null,40,U2)]),l("div",x2,[l("p",null,[T[4]||(T[4]=l("strong",null,":",-1)),Ae(" "+$(o.value.name),1)]),l("p",null,[T[5]||(T[5]=l("strong",null,":",-1)),Ae(" "+$(o.value.arcana==="major"?" ":" "),1)]),o.value.suit?(w(),b("p",N2,[T[6]||(T[6]=l("strong",null,":",-1)),Ae(" "+$(k(o.value.suit)),1)])):M("",!0),o.value.number?(w(),b("p",K2,[T[7]||(T[7]=l("strong",null,":",-1)),Ae(" "+$(o.value.number),1)])):M("",!0)])]),o.value.keywords?(w(),b("div",F2,[l("div",B2,[T[8]||(T[8]=l("h4",null,"  ",-1)),l("div",H2,[(w(!0),b(be,null,xe(o.value.keywords.upright,R=>(w(),b("span",{key:R,class:"keyword upright"},$(R),1))),128))])]),l("div",z2,[T[9]||(T[9]=l("h4",null,"  ",-1)),l("div",V2,[(w(!0),b(be,null,xe(o.value.keywords.reversed,R=>(w(),b("span",{key:R,class:"keyword reversed"},$(R),1))),128))])])])):M("",!0),o.value.meanings?(w(),b("div",q2,[T[12]||(T[12]=l("h4",null,"  ",-1)),l("div",W2,[(w(),b(be,null,xe(u,R=>l("button",{key:R.id,class:H(["meaning-tab",{active:a.value===R.id}]),onClick:N=>p(R.id)},$(R.name),11,G2)),64))]),o.value.meanings[a.value]?(w(),b("div",J2,[l("div",Q2,[T[10]||(T[10]=l("h5",null,"",-1)),l("p",null,$((O=o.value.meanings[a.value])==null?void 0:O.upright),1)]),l("div",Y2,[T[11]||(T[11]=l("h5",null,"",-1)),l("p",null,$((E=o.value.meanings[a.value])==null?void 0:E.reversed),1)])])):M("",!0)])):M("",!0)])])])):M("",!0)])])}}}),Sl=tt(X2,[["__scopeId","data-v-ee533f27"]]),Z2={class:"auth-callback"},eE=Qe({__name:"AuthCallback",setup(t){const e=Nt(),s=Ve();return mt(async()=>{console.log(" OAuth   "),console.log(" URL:",window.location.href);try{if(We.isNativePlatform()){console.log("    -  ");return}const n=new URLSearchParams(window.location.hash.substring(1)),r=n.get("access_token"),i=n.get("refresh_token"),o=n.get("error"),a=n.get("error_description");if(o){console.error(" OAuth :",o,a),await e.push({path:"/login",query:{error:a||"   ."}});return}r&&i?(console.log("   -   ..."),await jn.setSession(r,i),await s.initializeUser(),console.log("   -  "),await e.push("/home")):(console.log("   -   "),await e.push("/login"))}catch(n){console.error("   :",n),await e.push({path:"/login",query:{error:"    ."}})}}),(n,r)=>(w(),b("div",Z2,r[0]||(r[0]=[l("div",{class:"loading-container"},[l("div",{class:"spinner"}),l("h2",null,"  ..."),l("p",null," ")],-1)])))}}),tE=tt(eE,[["__scopeId","data-v-a8aaaa70"]]),sE=[{path:"/",name:"Home",component:$y},{path:"/app",name:"App",component:D0,meta:{requiresAuth:!0}},{path:"/reading-select",name:"ReadingSelect",component:Gw,meta:{requiresAuth:!0}},{path:"/card-drawing",name:"CardDrawing",component:DC,meta:{requiresAuth:!0}},{path:"/reading-result",name:"ReadingResult",component:F$,meta:{requiresAuth:!0}},{path:"/premium",name:"Premium",component:AP,meta:{requiresAuth:!0}},{path:"/history",name:"History",component:y2,meta:{requiresAuth:!0}},{path:"/card-dictionary",name:"TarotDictionary",component:Sl,meta:{requiresAuth:!0}},{path:"/dictionary",name:"Dictionary",component:Sl,meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:()=>Ie(()=>import("./Settings-18BS6KDU.js"),__vite__mapDeps([0,1]),import.meta.url),meta:{requiresAuth:!0}},{path:"/auth/callback",name:"AuthCallback",component:tE},{path:"/test-premium",name:"TestPremium",component:()=>Ie(()=>import("./TestPremium-BzELazlQ.js"),__vite__mapDeps([2,3]),import.meta.url),meta:{requiresAuth:!0}}],Ms=cv({history:xm(),routes:sE});Ms.beforeEach(async(t,e,s)=>{console.log(" [Router Guard]  :",e.path,"->",t.path),console.log(" [Router Guard] to :",{name:t.name,path:t.path,params:t.params,meta:t.meta});try{const{useUserStore:n}=await Ie(async()=>{const{useUserStore:i}=await Promise.resolve().then(()=>Mr);return{useUserStore:i}},void 0,import.meta.url),r=n();if(t.name==="CardDrawing"){console.log(" [Router Guard] CardDrawing  ");const{useTarotStore:i}=await Ie(async()=>{const{useTarotStore:a}=await Promise.resolve().then(()=>y0);return{useTarotStore:a}},void 0,import.meta.url),o=i();console.log(" [Router Guard]   :",{selectedTopic:o.selectedTopic,selectedSpread:o.selectedSpread,hasData:!!(o.selectedTopic&&o.selectedSpread)})}if(r.isInitialized||(console.log(" [Router Guard] userStore  "),await r.initializeUser()),t.meta.requiresAuth&&(console.log(" [Router Guard]   :",t.path),r.isLoading&&(console.log(" [Router Guard]   ..."),await new Promise(i=>{const o=r.$subscribe((a,c)=>{c.isLoading||(o(),i(void 0))})})),console.log(" [Router Guard]  :",r.currentUser?r.currentUser.isAnonymous?"":"":""),!r.currentUser)){console.log(" [Router Guard]   -  "),s({name:"Home"});return}console.log(" [Router Guard]  "),s()}catch(n){console.error(" [Router Guard]  :",n),s(!1)}});Ms.afterEach((t,e)=>{console.log(" [Router AfterEach]  :",e.path,"->",t.path),console.log(" [Router AfterEach]  URL:",window.location.pathname)});const nE={install(t){t.config.globalProperties.$alert=Qn(),t.provide("alert",Qn())}},rE=()=>{We.isNativePlatform()&&(ln.addListener("appUrlOpen",async t=>{console.log(" Deep link opened:",t.url);const e=new URL(t.url);if(e.pathname.includes("auth/callback")||e.href.includes("#access_token")){let s=null,n=null;if(e.hash){const r=new URLSearchParams(e.hash.slice(1));s=r.get("access_token"),n=r.get("refresh_token")}if(!s&&t.url.includes("#")){const r=t.url.split("#")[1],i=new URLSearchParams(r);s=i.get("access_token"),n=i.get("refresh_token")}if(console.log(" Tokens found:",{access:!!s,refresh:!!n}),s&&n)try{const{data:r,error:i}=await le.auth.setSession({access_token:s,refresh_token:n});!i&&r.session?(console.log(" OAuth login successful"),Ms.push("/")):(console.error(" OAuth session error:",i),Ms.push("/login?error=auth_failed"))}catch(r){console.error(" OAuth processing error:",r),Ms.push("/login?error=auth_failed")}else console.error(" No tokens in callback URL"),Ms.push("/login?error=no_tokens")}}),ln.getLaunchUrl().then(t=>{t!=null&&t.url&&console.log(" App launched with URL:",t.url)}))};co.initializeApp();rE();const iE=mf(),pn=Fc(pv);pn.use(iE);pn.use(Ms);pn.use(nE);pn.config.errorHandler=(t,e,s)=>{console.error("[Vue Error Handler]",t),console.error("[Vue Error Info]",s),console.error("[Vue Error Stack]",t.stack)};pn.config.warnHandler=(t,e,s)=>{console.warn("[Vue Warning]",t),console.warn("[Vue Warning Trace]",s)};pn.mount("#app");const fo=Ve(),oE=Ks();rb(()=>fo);const aE=async()=>{try{console.log("   ..."),fo.initializeUser().catch(t=>{console.error("  :",t)}),oE.initialize().catch(t=>{console.error("   :",t)}),setTimeout(async()=>{try{fo.isPremium||(console.log("   ..."),await Lu())}catch(t){console.error("   :",t)}},1e3),setTimeout(async()=>{try{console.log("   ..."),await q$()}catch(t){console.error("   :",t)}},2e3),console.log("     (  )")}catch(t){console.error("   :",t)}};aE();"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.getRegistrations();console.log(`  Service Worker: ${t.length}`);for(const e of t){const s=await e.unregister();console.log(` Service Worker  ${s?"":""}: ${e.scope}`)}if("caches"in window){const e=await caches.keys();console.log(`  : ${e.length}`);for(const s of e)await caches.delete(s),console.log(`  : ${s}`)}if(t.length>0){console.log("  Service Worker  ...");const e=await navigator.serviceWorker.register("/sw-remove.js",{scope:"/",updateViaCache:"none"});setTimeout(()=>{console.log(" Service Worker  ")},3e3)}}catch(t){console.error(" Service Worker   :",t)}});export{Un as I,co as N,yu as W,tt as _,BC as a,l as b,b as c,Qe as d,M as e,pe as f,Qn as g,Nt as h,w as i,Ks as j,Ns as k,Ie as l,fr as m,wl as n,mt as o,W as r,le as s,$ as t,Ve as u,Uc as v,_t as w};
