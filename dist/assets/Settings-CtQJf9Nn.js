import{d as L,u as V,a as A,N as a,r as E,o as F,c as d,b as t,e as m,t as k,f as u,w as v,v as f,g as J,s as S,h as q,i as g,_ as M}from"./index-mz9CXNUY.js";const G={class:"settings-page"},K={class:"main-content"},$={class:"content-wrapper"},z={class:"settings-section"},P={class:"settings-group"},Q={class:"setting-item"},W={class:"setting-value"},X={class:"setting-item"},Y={class:"setting-value"},Z={class:"setting-item"},tt={class:"setting-value"},st={key:0,class:"premium-badge"},et={key:1,class:"free-badge"},ot={key:0,class:"settings-section"},it={class:"settings-group"},at={class:"setting-item toggle-item"},nt={class:"toggle-switch"},lt={class:"settings-section"},rt={class:"settings-group"},ct={class:"setting-item toggle-item"},dt={class:"toggle-switch"},ut={class:"setting-item toggle-item"},gt={class:"toggle-switch"},pt={class:"settings-section"},bt={class:"settings-group"},mt={key:1,class:"settings-section"},vt=L({__name:"Settings",setup(ft){const _=q(),o=V(),c=J(),{isSubscribed:C}=A(),w=a.isNative,n=E({dailyNotification:!1,hapticFeedback:!0,animations:!0});F(()=>{const e=localStorage.getItem("appSettings");e&&(n.value={...n.value,...JSON.parse(e)})});const N=e=>e?new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"-",p=()=>{localStorage.setItem("appSettings",JSON.stringify(n.value))},x=async()=>{var s;if(await c.confirm(`ëª¨ë“  ì ê´˜ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`,"íˆìŠ¤í† ë¦¬ ì‚­ì œ")){await a.buttonTapHaptic();try{if((s=o.user)!=null&&s.id){const{error:i}=await S.from("reading_history").delete().eq("user_id",o.user.id);if(i)throw i}await c.success("íˆìŠ¤í† ë¦¬ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(i){console.error("Error clearing history:",i),await c.error("íˆìŠ¤í† ë¦¬ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}},D=async()=>{var e,s,i;await a.buttonTapHaptic();try{let l=[];if((e=o.user)!=null&&e.id){const{data:I,error:h}=await S.from("reading_history").select(`
          *,
          cards:reading_cards(
            *,
            card:tarot_cards(*)
          )
        `).eq("user_id",o.user.id).order("created_at",{ascending:!1});if(h)throw h;l=I||[]}const r={user:{email:(s=o.user)==null?void 0:s.email,created_at:(i=o.user)==null?void 0:i.created_at},readings:l,exportDate:new Date().toISOString()},R=JSON.stringify(r,null,2),B=new Blob([R],{type:"application/json"}),y=URL.createObjectURL(B),b=document.createElement("a");b.href=y,b.download=`tarot-data-${new Date().toISOString().split("T")[0]}.json`,b.click(),URL.revokeObjectURL(y),await c.success("ë°ì´í„°ê°€ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤.")}catch(l){console.error("Error exporting data:",l),await c.error("ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},T=async()=>{await a.buttonTapHaptic(),window.open("https://tarot-garden.com/help","_blank")},H=async()=>{await a.buttonTapHaptic(),window.location.href="mailto:support@tarot-garden.com?subject=íƒ€ë¡œì˜ ì •ì› í”¼ë“œë°±"},U=async()=>{await a.buttonTapHaptic(),a.platform==="ios"?window.open("https://apps.apple.com/app/tarot-garden","_blank"):a.platform==="android"&&window.open("https://play.google.com/store/apps/details?id=com.tarotgarden","_blank")},O=async()=>{await c.confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?","ë¡œê·¸ì•„ì›ƒ")&&(await a.buttonTapHaptic(),await o.logout(),_.push("/"))},j=async()=>{await a.buttonTapHaptic(),_.push("/")};return(e,s)=>{var i,l;return g(),d("div",G,[t("header",{class:"header"},[t("button",{onClick:j,class:"back-button"}," â† ë’¤ë¡œ "),s[3]||(s[3]=t("h1",{class:"header-title"},"ì„¤ì •",-1)),s[4]||(s[4]=t("div",{class:"header-spacer"},null,-1))]),t("main",K,[t("div",$,[t("section",z,[s[8]||(s[8]=t("h2",{class:"section-title"},"ê³„ì • ì •ë³´",-1)),t("div",P,[t("div",Q,[s[5]||(s[5]=t("div",{class:"setting-label"},"ì´ë©”ì¼",-1)),t("div",W,k(((i=u(o).user)==null?void 0:i.email)||"ê²ŒìŠ¤íŠ¸"),1)]),t("div",X,[s[6]||(s[6]=t("div",{class:"setting-label"},"ê°€ì…ì¼",-1)),t("div",Y,k(N((l=u(o).user)==null?void 0:l.created_at)),1)]),t("div",Z,[s[7]||(s[7]=t("div",{class:"setting-label"},"êµ¬ë… ìƒíƒœ",-1)),t("div",tt,[u(C)?(g(),d("span",st,"âœ¨ í”„ë¦¬ë¯¸ì—„")):(g(),d("span",et,"ë¬´ë£Œ"))])])])]),u(w)?(g(),d("section",ot,[s[11]||(s[11]=t("h2",{class:"section-title"},"ì•Œë¦¼ ì„¤ì •",-1)),t("div",it,[t("div",at,[s[10]||(s[10]=t("div",{class:"setting-info"},[t("div",{class:"setting-label"},"ì¼ì¼ íƒ€ë¡œ ì•Œë¦¼"),t("div",{class:"setting-description"},"ë§¤ì¼ ì˜¤ì „ 9ì‹œì— ì¼ì¼ íƒ€ë¡œë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤")],-1)),t("label",nt,[v(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=r=>n.value.dailyNotification=r),onChange:p},null,544),[[f,n.value.dailyNotification]]),s[9]||(s[9]=t("span",{class:"toggle-slider"},null,-1))])])])])):m("",!0),t("section",lt,[s[16]||(s[16]=t("h2",{class:"section-title"},"ì•± ì„¤ì •",-1)),t("div",rt,[t("div",ct,[s[13]||(s[13]=t("div",{class:"setting-info"},[t("div",{class:"setting-label"},"ì§„ë™ í”¼ë“œë°±"),t("div",{class:"setting-description"},"ì¹´ë“œë¥¼ ë½‘ì„ ë•Œ ì§„ë™ íš¨ê³¼")],-1)),t("label",dt,[v(t("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=r=>n.value.hapticFeedback=r),onChange:p},null,544),[[f,n.value.hapticFeedback]]),s[12]||(s[12]=t("span",{class:"toggle-slider"},null,-1))])]),t("div",ut,[s[15]||(s[15]=t("div",{class:"setting-info"},[t("div",{class:"setting-label"},"ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼"),t("div",{class:"setting-description"},"í™”ë©´ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜")],-1)),t("label",gt,[v(t("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=r=>n.value.animations=r),onChange:p},null,544),[[f,n.value.animations]]),s[14]||(s[14]=t("span",{class:"toggle-slider"},null,-1))])])])]),t("section",{class:"settings-section"},[s[17]||(s[17]=t("h2",{class:"section-title"},"ë°ì´í„° ê´€ë¦¬",-1)),t("div",{class:"settings-group"},[t("button",{onClick:x,class:"action-button danger"}," ğŸ—‘ï¸ íˆìŠ¤í† ë¦¬ ì‚­ì œ "),t("button",{onClick:D,class:"action-button"}," ğŸ“¤ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ")])]),t("section",pt,[s[18]||(s[18]=t("h2",{class:"section-title"},"ì§€ì›",-1)),t("div",bt,[t("button",{onClick:T,class:"action-button"}," â“ ë„ì›€ë§ "),t("button",{onClick:H,class:"action-button"}," ğŸ’¬ í”¼ë“œë°± ë³´ë‚´ê¸° "),u(w)?(g(),d("button",{key:0,onClick:U,class:"action-button"}," â­ ì•± í‰ê°€í•˜ê¸° ")):m("",!0)])]),u(o).isAuthenticated?(g(),d("section",mt,[t("div",{class:"settings-group"},[t("button",{onClick:O,class:"action-button logout"}," ğŸšª ë¡œê·¸ì•„ì›ƒ ")])])):m("",!0),s[19]||(s[19]=t("div",{class:"app-info"},[t("p",null,"íƒ€ë¡œì˜ ì •ì› v1.0.0"),t("p",{class:"copyright"},"Â© 2025 Tarot Garden. All rights reserved.")],-1))])])])}}}),wt=M(vt,[["__scopeId","data-v-4c39c57e"]]);export{wt as default};
