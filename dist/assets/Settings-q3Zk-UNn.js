import{d as V,u as A,a as E,N as a,r as F,o as J,c,b as t,e as b,t as k,f as d,w as v,v as f,s as S,g as C,h as u,i as q,j as g,_ as M}from"./index-xMamrl6d.js";const G={class:"settings-page"},K={class:"main-content"},$={class:"content-wrapper"},z={class:"settings-section"},P={class:"settings-group"},Q={class:"setting-item"},W={class:"setting-value"},X={class:"setting-item"},Y={class:"setting-value"},Z={class:"setting-item"},tt={class:"setting-value"},st={key:0,class:"premium-badge"},et={key:1,class:"free-badge"},it={key:0,class:"settings-section"},ot={class:"settings-group"},at={class:"setting-item toggle-item"},nt={class:"toggle-switch"},lt={class:"settings-section"},rt={class:"settings-group"},ct={class:"setting-item toggle-item"},dt={class:"toggle-switch"},gt={class:"setting-item toggle-item"},ut={class:"toggle-switch"},pt={class:"settings-section"},mt={class:"settings-group"},bt={key:1,class:"settings-section"},vt=V({__name:"Settings",setup(ft){const w=q(),i=A(),{isSubscribed:N}=E(),_=a.isNative,n=F({dailyNotification:!1,hapticFeedback:!0,animations:!0});J(()=>{const e=localStorage.getItem("appSettings");e&&(n.value={...n.value,...JSON.parse(e)})});const x=e=>e?new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"-",p=()=>{localStorage.setItem("appSettings",JSON.stringify(n.value))},D=async()=>{var s;if(await S({title:"íˆìŠ¤í† ë¦¬ ì‚­ì œ",message:`ëª¨ë“  ì ê´˜ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`})){await a.buttonTapHaptic();try{if((s=i.user)!=null&&s.id){const{error:o}=await C.from("reading_history").delete().eq("user_id",i.user.id);if(o)throw o}await u({title:"ì„±ê³µ",message:"íˆìŠ¤í† ë¦¬ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(o){console.error("Error clearing history:",o),await u({title:"ì˜¤ë¥˜",message:"íˆìŠ¤í† ë¦¬ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."})}}},T=async()=>{var e,s,o;await a.buttonTapHaptic();try{let l=[];if((e=i.user)!=null&&e.id){const{data:L,error:y}=await C.from("reading_history").select(`
          *,
          cards:reading_cards(
            *,
            card:tarot_cards(*)
          )
        `).eq("user_id",i.user.id).order("created_at",{ascending:!1});if(y)throw y;l=L||[]}const r={user:{email:(s=i.user)==null?void 0:s.email,created_at:(o=i.user)==null?void 0:o.created_at},readings:l,exportDate:new Date().toISOString()},B=JSON.stringify(r,null,2),I=new Blob([B],{type:"application/json"}),h=URL.createObjectURL(I),m=document.createElement("a");m.href=h,m.download=`tarot-data-${new Date().toISOString().split("T")[0]}.json`,m.click(),URL.revokeObjectURL(h),await u({title:"ì„±ê³µ",message:"ë°ì´í„°ê°€ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤."})}catch(l){console.error("Error exporting data:",l),await u({title:"ì˜¤ë¥˜",message:"ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."})}},H=async()=>{await a.buttonTapHaptic(),window.open("https://tarot-garden.com/help","_blank")},U=async()=>{await a.buttonTapHaptic(),window.location.href="mailto:support@tarot-garden.com?subject=íƒ€ë¡œì˜ ì •ì› í”¼ë“œë°±"},j=async()=>{await a.buttonTapHaptic(),a.platform==="ios"?window.open("https://apps.apple.com/app/tarot-garden","_blank"):a.platform==="android"&&window.open("https://play.google.com/store/apps/details?id=com.tarotgarden","_blank")},O=async()=>{await S({title:"ë¡œê·¸ì•„ì›ƒ",message:"ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"})&&(await a.buttonTapHaptic(),await i.logout(),w.push("/"))},R=async()=>{await a.buttonTapHaptic(),w.push("/")};return(e,s)=>{var o,l;return g(),c("div",G,[t("header",{class:"header"},[t("button",{onClick:R,class:"back-button"}," â† ë’¤ë¡œ "),s[3]||(s[3]=t("h1",{class:"header-title"},"ì„¤ì •",-1)),s[4]||(s[4]=t("div",{class:"header-spacer"},null,-1))]),t("main",K,[t("div",$,[t("section",z,[s[8]||(s[8]=t("h2",{class:"section-title"},"ê³„ì • ì •ë³´",-1)),t("div",P,[t("div",Q,[s[5]||(s[5]=t("div",{class:"setting-label"},"ì´ë©”ì¼",-1)),t("div",W,k(((o=d(i).user)==null?void 0:o.email)||"ê²ŒìŠ¤íŠ¸"),1)]),t("div",X,[s[6]||(s[6]=t("div",{class:"setting-label"},"ê°€ì…ì¼",-1)),t("div",Y,k(x((l=d(i).user)==null?void 0:l.created_at)),1)]),t("div",Z,[s[7]||(s[7]=t("div",{class:"setting-label"},"êµ¬ë… ìƒíƒœ",-1)),t("div",tt,[d(N)?(g(),c("span",st,"âœ¨ í”„ë¦¬ë¯¸ì—„")):(g(),c("span",et,"ë¬´ë£Œ"))])])])]),d(_)?(g(),c("section",it,[s[11]||(s[11]=t("h2",{class:"section-title"},"ì•Œë¦¼ ì„¤ì •",-1)),t("div",ot,[t("div",at,[s[10]||(s[10]=t("div",{class:"setting-info"},[t("div",{class:"setting-label"},"ì¼ì¼ íƒ€ë¡œ ì•Œë¦¼"),t("div",{class:"setting-description"},"ë§¤ì¼ ì˜¤ì „ 9ì‹œì— ì¼ì¼ íƒ€ë¡œë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤")],-1)),t("label",nt,[v(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=r=>n.value.dailyNotification=r),onChange:p},null,544),[[f,n.value.dailyNotification]]),s[9]||(s[9]=t("span",{class:"toggle-slider"},null,-1))])])])])):b("",!0),t("section",lt,[s[16]||(s[16]=t("h2",{class:"section-title"},"ì•± ì„¤ì •",-1)),t("div",rt,[t("div",ct,[s[13]||(s[13]=t("div",{class:"setting-info"},[t("div",{class:"setting-label"},"ì§„ë™ í”¼ë“œë°±"),t("div",{class:"setting-description"},"ì¹´ë“œë¥¼ ë½‘ì„ ë•Œ ì§„ë™ íš¨ê³¼")],-1)),t("label",dt,[v(t("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=r=>n.value.hapticFeedback=r),onChange:p},null,544),[[f,n.value.hapticFeedback]]),s[12]||(s[12]=t("span",{class:"toggle-slider"},null,-1))])]),t("div",gt,[s[15]||(s[15]=t("div",{class:"setting-info"},[t("div",{class:"setting-label"},"ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼"),t("div",{class:"setting-description"},"í™”ë©´ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜")],-1)),t("label",ut,[v(t("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=r=>n.value.animations=r),onChange:p},null,544),[[f,n.value.animations]]),s[14]||(s[14]=t("span",{class:"toggle-slider"},null,-1))])])])]),t("section",{class:"settings-section"},[s[17]||(s[17]=t("h2",{class:"section-title"},"ë°ì´í„° ê´€ë¦¬",-1)),t("div",{class:"settings-group"},[t("button",{onClick:D,class:"action-button danger"}," ğŸ—‘ï¸ íˆìŠ¤í† ë¦¬ ì‚­ì œ "),t("button",{onClick:T,class:"action-button"}," ğŸ“¤ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ")])]),t("section",pt,[s[18]||(s[18]=t("h2",{class:"section-title"},"ì§€ì›",-1)),t("div",mt,[t("button",{onClick:H,class:"action-button"}," â“ ë„ì›€ë§ "),t("button",{onClick:U,class:"action-button"}," ğŸ’¬ í”¼ë“œë°± ë³´ë‚´ê¸° "),d(_)?(g(),c("button",{key:0,onClick:j,class:"action-button"}," â­ ì•± í‰ê°€í•˜ê¸° ")):b("",!0)])]),d(i).isAuthenticated?(g(),c("section",bt,[t("div",{class:"settings-group"},[t("button",{onClick:O,class:"action-button logout"}," ğŸšª ë¡œê·¸ì•„ì›ƒ ")])])):b("",!0),s[19]||(s[19]=t("div",{class:"app-info"},[t("p",null,"íƒ€ë¡œì˜ ì •ì› v1.0.0"),t("p",{class:"copyright"},"Â© 2025 Tarot Garden. All rights reserved.")],-1))])])])}}}),_t=M(vt,[["__scopeId","data-v-15a8af7f"]]);export{_t as default};
