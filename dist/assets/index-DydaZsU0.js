const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Settings-G6Hympmn.js","./Settings-Br8RiJH0.css","./TestPremium-DgUlsOUV.js","./TestPremium-Cpv2XbZl.css","./DailyCard-D8nXHWKC.js","./shareUtils-DTGu5JEF.js","./DailyCard-CYeEPDXu.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function po(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const He={},sn=[],Kt=()=>{},Bu=()=>!1,Nr=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),go=s=>s.startsWith("onUpdate:"),nt=Object.assign,mo=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},zu=Object.prototype.hasOwnProperty,Ke=(s,e)=>zu.call(s,e),ge=Array.isArray,nn=s=>Zn(s)==="[object Map]",gn=s=>Zn(s)==="[object Set]",qo=s=>Zn(s)==="[object Date]",be=s=>typeof s=="function",Xe=s=>typeof s=="string",Ot=s=>typeof s=="symbol",We=s=>s!==null&&typeof s=="object",Tl=s=>(We(s)||be(s))&&be(s.then)&&be(s.catch),El=Object.prototype.toString,Zn=s=>El.call(s),Hu=s=>Zn(s).slice(8,-1),Al=s=>Zn(s)==="[object Object]",vo=s=>Xe(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,En=po(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kr=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},Wu=/-(\w)/g,Et=Kr(s=>s.replace(Wu,(e,t)=>t?t.toUpperCase():"")),qu=/\B([A-Z])/g,Ks=Kr(s=>s.replace(qu,"-$1").toLowerCase()),Fr=Kr(s=>s.charAt(0).toUpperCase()+s.slice(1)),li=Kr(s=>s?`on${Fr(s)}`:""),ps=(s,e)=>!Object.is(s,e),vr=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},Ui=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},kr=s=>{const e=parseFloat(s);return isNaN(e)?s:e},Vu=s=>{const e=Xe(s)?Number(s):NaN;return isNaN(e)?s:e};let Vo;const Br=()=>Vo||(Vo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ct(s){if(ge(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],r=Xe(n)?Yu(n):Ct(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(Xe(s)||We(s))return s}const Gu=/;(?![^(]*\))/g,Ju=/:([^]+)/,Qu=/\/\*[^]*?\*\//g;function Yu(s){const e={};return s.replace(Qu,"").split(Gu).forEach(t=>{if(t){const n=t.split(Ju);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function B(s){let e="";if(Xe(s))e=s;else if(ge(s))for(let t=0;t<s.length;t++){const n=B(s[t]);n&&(e+=n+" ")}else if(We(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const Xu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zu=po(Xu);function Il(s){return!!s||s===""}function ed(s,e){if(s.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<s.length;n++)t=Ns(s[n],e[n]);return t}function Ns(s,e){if(s===e)return!0;let t=qo(s),n=qo(e);if(t||n)return t&&n?s.getTime()===e.getTime():!1;if(t=Ot(s),n=Ot(e),t||n)return s===e;if(t=ge(s),n=ge(e),t||n)return t&&n?ed(s,e):!1;if(t=We(s),n=We(e),t||n){if(!t||!n)return!1;const r=Object.keys(s).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in s){const a=s.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Ns(s[o],e[o]))return!1}}return String(s)===String(e)}function yo(s,e){return s.findIndex(t=>Ns(t,e))}const Rl=s=>!!(s&&s.__v_isRef===!0),C=s=>Xe(s)?s:s==null?"":ge(s)||We(s)&&(s.toString===El||!be(s.toString))?Rl(s)?C(s.value):JSON.stringify(s,Ml,2):String(s),Ml=(s,e)=>Rl(e)?Ml(s,e.value):nn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,r],i)=>(t[ci(n,i)+" =>"]=r,t),{})}:gn(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>ci(t))}:Ot(e)?ci(e):We(e)&&!ge(e)&&!Al(e)?String(e):e,ci=(s,e="")=>{var t;return Ot(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lt;class Ol{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=lt,!e&&lt&&(this.index=(lt.scopes||(lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=lt;try{return lt=this,e()}finally{lt=t}}}on(){++this._on===1&&(this.prevScope=lt,lt=this)}off(){this._on>0&&--this._on===0&&(lt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function jl(s){return new Ol(s)}function Ll(){return lt}function td(s,e=!1){lt&&lt.cleanups.push(s)}let Ve;const ui=new WeakSet;class Dl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,lt&&lt.active&&lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ui.has(this)&&(ui.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Go(this),Nl(this);const e=Ve,t=Mt;Ve=this,Mt=!0;try{return this.fn()}finally{Kl(this),Ve=e,Mt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)_o(e);this.deps=this.depsTail=void 0,Go(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ui.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xi(this)&&this.run()}get dirty(){return xi(this)}}let Ul=0,An,In;function xl(s,e=!1){if(s.flags|=8,e){s.next=In,In=s;return}s.next=An,An=s}function wo(){Ul++}function bo(){if(--Ul>0)return;if(In){let e=In;for(In=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;An;){let e=An;for(An=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){s||(s=n)}e=t}}if(s)throw s}function Nl(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Kl(s){let e,t=s.depsTail,n=t;for(;n;){const r=n.prevDep;n.version===-1?(n===t&&(t=r),_o(n),sd(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}s.deps=e,s.depsTail=t}function xi(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Fl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function Fl(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===Fn)||(s.globalVersion=Fn,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!xi(s))))return;s.flags|=2;const e=s.dep,t=Ve,n=Mt;Ve=s,Mt=!0;try{Nl(s);const r=s.fn(s._value);(e.version===0||ps(r,s._value))&&(s.flags|=128,s._value=r,e.version++)}catch(r){throw e.version++,r}finally{Ve=t,Mt=n,Kl(s),s.flags&=-3}}function _o(s,e=!1){const{dep:t,prevSub:n,nextSub:r}=s;if(n&&(n.nextSub=r,s.prevSub=void 0),r&&(r.prevSub=n,s.nextSub=void 0),t.subs===s&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)_o(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function sd(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let Mt=!0;const Bl=[];function Xt(){Bl.push(Mt),Mt=!1}function Zt(){const s=Bl.pop();Mt=s===void 0?!0:s}function Go(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=Ve;Ve=void 0;try{e()}finally{Ve=t}}}let Fn=0;class nd{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ko{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ve||!Mt||Ve===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ve)t=this.activeLink=new nd(Ve,this),Ve.deps?(t.prevDep=Ve.depsTail,Ve.depsTail.nextDep=t,Ve.depsTail=t):Ve.deps=Ve.depsTail=t,zl(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=Ve.depsTail,t.nextDep=void 0,Ve.depsTail.nextDep=t,Ve.depsTail=t,Ve.deps===t&&(Ve.deps=n)}return t}trigger(e){this.version++,Fn++,this.notify(e)}notify(e){wo();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{bo()}}}function zl(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)zl(n)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const Sr=new WeakMap,Us=Symbol(""),Ni=Symbol(""),Bn=Symbol("");function ct(s,e,t){if(Mt&&Ve){let n=Sr.get(s);n||Sr.set(s,n=new Map);let r=n.get(t);r||(n.set(t,r=new ko),r.map=n,r.key=t),r.track()}}function Vt(s,e,t,n,r,i){const o=Sr.get(s);if(!o){Fn++;return}const a=c=>{c&&c.trigger()};if(wo(),e==="clear")o.forEach(a);else{const c=ge(s),u=c&&vo(t);if(c&&t==="length"){const h=Number(n);o.forEach((f,m)=>{(m==="length"||m===Bn||!Ot(m)&&m>=h)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),u&&a(o.get(Bn)),e){case"add":c?u&&a(o.get("length")):(a(o.get(Us)),nn(s)&&a(o.get(Ni)));break;case"delete":c||(a(o.get(Us)),nn(s)&&a(o.get(Ni)));break;case"set":nn(s)&&a(o.get(Us));break}}bo()}function rd(s,e){const t=Sr.get(s);return t&&t.get(e)}function Ws(s){const e=Oe(s);return e===s?e:(ct(e,"iterate",Bn),$t(s)?e:e.map(it))}function zr(s){return ct(s=Oe(s),"iterate",Bn),s}const id={__proto__:null,[Symbol.iterator](){return di(this,Symbol.iterator,it)},concat(...s){return Ws(this).concat(...s.map(e=>ge(e)?Ws(e):e))},entries(){return di(this,"entries",s=>(s[1]=it(s[1]),s))},every(s,e){return Ft(this,"every",s,e,void 0,arguments)},filter(s,e){return Ft(this,"filter",s,e,t=>t.map(it),arguments)},find(s,e){return Ft(this,"find",s,e,it,arguments)},findIndex(s,e){return Ft(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return Ft(this,"findLast",s,e,it,arguments)},findLastIndex(s,e){return Ft(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return Ft(this,"forEach",s,e,void 0,arguments)},includes(...s){return hi(this,"includes",s)},indexOf(...s){return hi(this,"indexOf",s)},join(s){return Ws(this).join(s)},lastIndexOf(...s){return hi(this,"lastIndexOf",s)},map(s,e){return Ft(this,"map",s,e,void 0,arguments)},pop(){return yn(this,"pop")},push(...s){return yn(this,"push",s)},reduce(s,...e){return Jo(this,"reduce",s,e)},reduceRight(s,...e){return Jo(this,"reduceRight",s,e)},shift(){return yn(this,"shift")},some(s,e){return Ft(this,"some",s,e,void 0,arguments)},splice(...s){return yn(this,"splice",s)},toReversed(){return Ws(this).toReversed()},toSorted(s){return Ws(this).toSorted(s)},toSpliced(...s){return Ws(this).toSpliced(...s)},unshift(...s){return yn(this,"unshift",s)},values(){return di(this,"values",it)}};function di(s,e,t){const n=zr(s),r=n[e]();return n!==s&&!$t(s)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=t(i.value)),i}),r}const od=Array.prototype;function Ft(s,e,t,n,r,i){const o=zr(s),a=o!==s&&!$t(s),c=o[e];if(c!==od[e]){const f=c.apply(s,i);return a?it(f):f}let u=t;o!==s&&(a?u=function(f,m){return t.call(this,it(f),m,s)}:t.length>2&&(u=function(f,m){return t.call(this,f,m,s)}));const h=c.call(o,u,n);return a&&r?r(h):h}function Jo(s,e,t,n){const r=zr(s);let i=t;return r!==s&&($t(s)?t.length>3&&(i=function(o,a,c){return t.call(this,o,a,c,s)}):i=function(o,a,c){return t.call(this,o,it(a),c,s)}),r[e](i,...n)}function hi(s,e,t){const n=Oe(s);ct(n,"iterate",Bn);const r=n[e](...t);return(r===-1||r===!1)&&$o(t[0])?(t[0]=Oe(t[0]),n[e](...t)):r}function yn(s,e,t=[]){Xt(),wo();const n=Oe(s)[e].apply(s,t);return bo(),Zt(),n}const ad=po("__proto__,__v_isRef,__isVue"),Hl=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Ot));function ld(s){Ot(s)||(s=String(s));const e=Oe(this);return ct(e,"has",s),e.hasOwnProperty(s)}class Wl{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return n===(r?i?yd:Jl:i?Gl:Vl).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=ge(e);if(!r){let c;if(o&&(c=id[t]))return c;if(t==="hasOwnProperty")return ld}const a=Reflect.get(e,t,Ye(e)?e:n);return(Ot(t)?Hl.has(t):ad(t))||(r||ct(e,"get",t),i)?a:Ye(a)?o&&vo(t)?a:a.value:We(a)?r?Yl(a):er(a):a}}class ql extends Wl{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const c=vs(i);if(!$t(n)&&!vs(n)&&(i=Oe(i),n=Oe(n)),!ge(e)&&Ye(i)&&!Ye(n))return c?!1:(i.value=n,!0)}const o=ge(e)&&vo(t)?Number(t)<e.length:Ke(e,t),a=Reflect.set(e,t,n,Ye(e)?e:r);return e===Oe(r)&&(o?ps(n,i)&&Vt(e,"set",t,n):Vt(e,"add",t,n)),a}deleteProperty(e,t){const n=Ke(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Vt(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return(!Ot(t)||!Hl.has(t))&&ct(e,"has",t),n}ownKeys(e){return ct(e,"iterate",ge(e)?"length":Us),Reflect.ownKeys(e)}}class cd extends Wl{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const ud=new ql,dd=new cd,hd=new ql(!0);const Ki=s=>s,ar=s=>Reflect.getPrototypeOf(s);function fd(s,e,t){return function(...n){const r=this.__v_raw,i=Oe(r),o=nn(i),a=s==="entries"||s===Symbol.iterator&&o,c=s==="keys"&&o,u=r[s](...n),h=t?Ki:e?Cr:it;return!e&&ct(i,"iterate",c?Ni:Us),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:a?[h(f[0]),h(f[1])]:h(f),done:m}},[Symbol.iterator](){return this}}}}function lr(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function pd(s,e){const t={get(r){const i=this.__v_raw,o=Oe(i),a=Oe(r);s||(ps(r,a)&&ct(o,"get",r),ct(o,"get",a));const{has:c}=ar(o),u=e?Ki:s?Cr:it;if(c.call(o,r))return u(i.get(r));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!s&&ct(Oe(r),"iterate",Us),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Oe(i),a=Oe(r);return s||(ps(r,a)&&ct(o,"has",r),ct(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,c=Oe(a),u=e?Ki:s?Cr:it;return!s&&ct(c,"iterate",Us),a.forEach((h,f)=>r.call(i,u(h),u(f),o))}};return nt(t,s?{add:lr("add"),set:lr("set"),delete:lr("delete"),clear:lr("clear")}:{add(r){!e&&!$t(r)&&!vs(r)&&(r=Oe(r));const i=Oe(this);return ar(i).has.call(i,r)||(i.add(r),Vt(i,"add",r,r)),this},set(r,i){!e&&!$t(i)&&!vs(i)&&(i=Oe(i));const o=Oe(this),{has:a,get:c}=ar(o);let u=a.call(o,r);u||(r=Oe(r),u=a.call(o,r));const h=c.call(o,r);return o.set(r,i),u?ps(i,h)&&Vt(o,"set",r,i):Vt(o,"add",r,i),this},delete(r){const i=Oe(this),{has:o,get:a}=ar(i);let c=o.call(i,r);c||(r=Oe(r),c=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return c&&Vt(i,"delete",r,void 0),u},clear(){const r=Oe(this),i=r.size!==0,o=r.clear();return i&&Vt(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=fd(r,s,e)}),t}function So(s,e){const t=pd(s,e);return(n,r,i)=>r==="__v_isReactive"?!s:r==="__v_isReadonly"?s:r==="__v_raw"?n:Reflect.get(Ke(t,r)&&r in n?t:n,r,i)}const gd={get:So(!1,!1)},md={get:So(!1,!0)},vd={get:So(!0,!1)};const Vl=new WeakMap,Gl=new WeakMap,Jl=new WeakMap,yd=new WeakMap;function wd(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bd(s){return s.__v_skip||!Object.isExtensible(s)?0:wd(Hu(s))}function er(s){return vs(s)?s:Co(s,!1,ud,gd,Vl)}function Ql(s){return Co(s,!1,hd,md,Gl)}function Yl(s){return Co(s,!0,dd,vd,Jl)}function Co(s,e,t,n,r){if(!We(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const i=bd(s);if(i===0)return s;const o=r.get(s);if(o)return o;const a=new Proxy(s,i===2?n:t);return r.set(s,a),a}function gs(s){return vs(s)?gs(s.__v_raw):!!(s&&s.__v_isReactive)}function vs(s){return!!(s&&s.__v_isReadonly)}function $t(s){return!!(s&&s.__v_isShallow)}function $o(s){return s?!!s.__v_raw:!1}function Oe(s){const e=s&&s.__v_raw;return e?Oe(e):s}function Po(s){return!Ke(s,"__v_skip")&&Object.isExtensible(s)&&Ui(s,"__v_skip",!0),s}const it=s=>We(s)?er(s):s,Cr=s=>We(s)?Yl(s):s;function Ye(s){return s?s.__v_isRef===!0:!1}function G(s){return Xl(s,!1)}function _d(s){return Xl(s,!0)}function Xl(s,e){return Ye(s)?s:new kd(s,e)}class kd{constructor(e,t){this.dep=new ko,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Oe(e),this._value=t?e:it(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||$t(e)||vs(e);e=n?e:Oe(e),ps(e,t)&&(this._rawValue=e,this._value=n?e:it(e),this.dep.trigger())}}function de(s){return Ye(s)?s.value:s}const Sd={get:(s,e,t)=>e==="__v_raw"?s:de(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const r=s[e];return Ye(r)&&!Ye(t)?(r.value=t,!0):Reflect.set(s,e,t,n)}};function Zl(s){return gs(s)?s:new Proxy(s,Sd)}function Cd(s){const e=ge(s)?new Array(s.length):{};for(const t in s)e[t]=Pd(s,t);return e}class $d{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return rd(Oe(this._object),this._key)}}function Pd(s,e,t){const n=s[e];return Ye(n)?n:new $d(s,e,t)}class Td{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new ko(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ve!==this)return xl(this,!0),!0}get value(){const e=this.dep.track();return Fl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ed(s,e,t=!1){let n,r;return be(s)?n=s:(n=s.get,r=s.set),new Td(n,r,t)}const cr={},$r=new WeakMap;let As;function Ad(s,e=!1,t=As){if(t){let n=$r.get(t);n||$r.set(t,n=[]),n.push(s)}}function Id(s,e,t=He){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:a,call:c}=t,u=E=>r?E:$t(E)||r===!1||r===0?Gt(E,1):Gt(E);let h,f,m,p,d=!1,v=!1;if(Ye(s)?(f=()=>s.value,d=$t(s)):gs(s)?(f=()=>u(s),d=!0):ge(s)?(v=!0,d=s.some(E=>gs(E)||$t(E)),f=()=>s.map(E=>{if(Ye(E))return E.value;if(gs(E))return u(E);if(be(E))return c?c(E,2):E()})):be(s)?e?f=c?()=>c(s,2):s:f=()=>{if(m){Xt();try{m()}finally{Zt()}}const E=As;As=h;try{return c?c(s,3,[p]):s(p)}finally{As=E}}:f=Kt,e&&r){const E=f,M=r===!0?1/0:r;f=()=>Gt(E(),M)}const k=Ll(),$=()=>{h.stop(),k&&k.active&&mo(k.effects,h)};if(i&&e){const E=e;e=(...M)=>{E(...M),$()}}let R=v?new Array(s.length).fill(cr):cr;const S=E=>{if(!(!(h.flags&1)||!h.dirty&&!E))if(e){const M=h.run();if(r||d||(v?M.some((A,D)=>ps(A,R[D])):ps(M,R))){m&&m();const A=As;As=h;try{const D=[M,R===cr?void 0:v&&R[0]===cr?[]:R,p];R=M,c?c(e,3,D):e(...D)}finally{As=A}}}else h.run()};return a&&a(S),h=new Dl(f),h.scheduler=o?()=>o(S,!1):S,p=E=>Ad(E,!1,h),m=h.onStop=()=>{const E=$r.get(h);if(E){if(c)c(E,4);else for(const M of E)M();$r.delete(h)}},e?n?S(!0):R=h.run():o?o(S.bind(null,!0),!0):h.run(),$.pause=h.pause.bind(h),$.resume=h.resume.bind(h),$.stop=$,$}function Gt(s,e=1/0,t){if(e<=0||!We(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,Ye(s))Gt(s.value,e,t);else if(ge(s))for(let n=0;n<s.length;n++)Gt(s[n],e,t);else if(gn(s)||nn(s))s.forEach(n=>{Gt(n,e,t)});else if(Al(s)){for(const n in s)Gt(s[n],e,t);for(const n of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,n)&&Gt(s[n],e,t)}return s}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function tr(s,e,t,n){try{return n?s(...n):s()}catch(r){Hr(r,e,t)}}function jt(s,e,t,n){if(be(s)){const r=tr(s,e,t,n);return r&&Tl(r)&&r.catch(i=>{Hr(i,e,t)}),r}if(ge(s)){const r=[];for(let i=0;i<s.length;i++)r.push(jt(s[i],e,t,n));return r}}function Hr(s,e,t,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||He;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](s,c,u)===!1)return}a=a.parent}if(i){Xt(),tr(i,null,10,[s,c,u]),Zt();return}}Rd(s,t,r,n,o)}function Rd(s,e,t,n=!0,r=!1){if(r)throw s;console.error(s)}const ft=[];let xt=-1;const rn=[];let as=null,Xs=0;const ec=Promise.resolve();let Pr=null;function Fs(s){const e=Pr||ec;return s?e.then(this?s.bind(this):s):e}function Md(s){let e=xt+1,t=ft.length;for(;e<t;){const n=e+t>>>1,r=ft[n],i=zn(r);i<s||i===s&&r.flags&2?e=n+1:t=n}return e}function To(s){if(!(s.flags&1)){const e=zn(s),t=ft[ft.length-1];!t||!(s.flags&2)&&e>=zn(t)?ft.push(s):ft.splice(Md(e),0,s),s.flags|=1,tc()}}function tc(){Pr||(Pr=ec.then(nc))}function Od(s){ge(s)?rn.push(...s):as&&s.id===-1?as.splice(Xs+1,0,s):s.flags&1||(rn.push(s),s.flags|=1),tc()}function Qo(s,e,t=xt+1){for(;t<ft.length;t++){const n=ft[t];if(n&&n.flags&2){if(s&&n.id!==s.uid)continue;ft.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function sc(s){if(rn.length){const e=[...new Set(rn)].sort((t,n)=>zn(t)-zn(n));if(rn.length=0,as){as.push(...e);return}for(as=e,Xs=0;Xs<as.length;Xs++){const t=as[Xs];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}as=null,Xs=0}}const zn=s=>s.id==null?s.flags&2?-1:1/0:s.id;function nc(s){try{for(xt=0;xt<ft.length;xt++){const e=ft[xt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),tr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;xt<ft.length;xt++){const e=ft[xt];e&&(e.flags&=-2)}xt=-1,ft.length=0,sc(),Pr=null,(ft.length||rn.length)&&nc()}}let ot=null,rc=null;function Tr(s){const e=ot;return ot=s,rc=s&&s.type.__scopeId||null,e}function $e(s,e=ot,t){if(!e||s._n)return s;const n=(...r)=>{n._d&&aa(-1);const i=Tr(e);let o;try{o=s(...r)}finally{Tr(i),n._d&&aa(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function St(s,e){if(ot===null)return s;const t=Qr(ot),n=s.dirs||(s.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,c=He]=e[r];i&&(be(i)&&(i={mounted:i,updated:i}),i.deep&&Gt(o),n.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:c}))}return s}function _s(s,e,t,n){const r=s.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[n];c&&(Xt(),jt(c,t,8,[s.el,a,s,e]),Zt())}}const jd=Symbol("_vte"),ic=s=>s.__isTeleport,ls=Symbol("_leaveCb"),ur=Symbol("_enterCb");function Ld(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return pt(()=>{s.isMounted=!0}),fc(()=>{s.isUnmounting=!0}),s}const kt=[Function,Array],oc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:kt,onEnter:kt,onAfterEnter:kt,onEnterCancelled:kt,onBeforeLeave:kt,onLeave:kt,onAfterLeave:kt,onLeaveCancelled:kt,onBeforeAppear:kt,onAppear:kt,onAfterAppear:kt,onAppearCancelled:kt},ac=s=>{const e=s.subTree;return e.component?ac(e.component):e},Dd={name:"BaseTransition",props:oc,setup(s,{slots:e}){const t=Mo(),n=Ld();return()=>{const r=e.default&&uc(e.default(),!0);if(!r||!r.length)return;const i=lc(r),o=Oe(s),{mode:a}=o;if(n.isLeaving)return fi(i);const c=Yo(i);if(!c)return fi(i);let u=Fi(c,o,n,t,f=>u=f);c.type!==ut&&Hn(c,u);let h=t.subTree&&Yo(t.subTree);if(h&&h.type!==ut&&!Rs(c,h)&&ac(t).type!==ut){let f=Fi(h,o,n,t);if(Hn(h,f),a==="out-in"&&c.type!==ut)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,h=void 0},fi(i);a==="in-out"&&c.type!==ut?f.delayLeave=(m,p,d)=>{const v=cc(n,h);v[String(h.key)]=h,m[ls]=()=>{p(),m[ls]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{d(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function lc(s){let e=s[0];if(s.length>1){for(const t of s)if(t.type!==ut){e=t;break}}return e}const Ud=Dd;function cc(s,e){const{leavingVNodes:t}=s;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function Fi(s,e,t,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:m,onLeave:p,onAfterLeave:d,onLeaveCancelled:v,onBeforeAppear:k,onAppear:$,onAfterAppear:R,onAppearCancelled:S}=e,E=String(s.key),M=cc(t,s),A=(W,se)=>{W&&jt(W,n,9,se)},D=(W,se)=>{const oe=se[1];A(W,se),ge(W)?W.every(V=>V.length<=1)&&oe():W.length<=1&&oe()},K={mode:o,persisted:a,beforeEnter(W){let se=c;if(!t.isMounted)if(i)se=k||c;else return;W[ls]&&W[ls](!0);const oe=M[E];oe&&Rs(s,oe)&&oe.el[ls]&&oe.el[ls](),A(se,[W])},enter(W){let se=u,oe=h,V=f;if(!t.isMounted)if(i)se=$||u,oe=R||h,V=S||f;else return;let I=!1;const T=W[ur]=z=>{I||(I=!0,z?A(V,[W]):A(oe,[W]),K.delayedLeave&&K.delayedLeave(),W[ur]=void 0)};se?D(se,[W,T]):T()},leave(W,se){const oe=String(s.key);if(W[ur]&&W[ur](!0),t.isUnmounting)return se();A(m,[W]);let V=!1;const I=W[ls]=T=>{V||(V=!0,se(),T?A(v,[W]):A(d,[W]),W[ls]=void 0,M[oe]===s&&delete M[oe])};M[oe]=s,p?D(p,[W,I]):I()},clone(W){const se=Fi(W,e,t,n,r);return r&&r(se),se}};return K}function fi(s){if(Wr(s))return s=ys(s),s.children=null,s}function Yo(s){if(!Wr(s))return ic(s.type)&&s.children?lc(s.children):s;if(s.component)return s.component.subTree;const{shapeFlag:e,children:t}=s;if(t){if(e&16)return t[0];if(e&32&&be(t.default))return t.default()}}function Hn(s,e){s.shapeFlag&6&&s.component?(s.transition=e,Hn(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}function uc(s,e=!1,t){let n=[],r=0;for(let i=0;i<s.length;i++){let o=s[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===ye?(o.patchFlag&128&&r++,n=n.concat(uc(o.children,e,a))):(e||o.type!==ut)&&n.push(a!=null?ys(o,{key:a}):o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Ze(s,e){return be(s)?nt({name:s.name},e,{setup:s}):s}function dc(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function Rn(s,e,t,n,r=!1){if(ge(s)){s.forEach((d,v)=>Rn(d,e&&(ge(e)?e[v]:e),t,n,r));return}if(on(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Rn(s,e,t,n.component.subTree);return}const i=n.shapeFlag&4?Qr(n.component):n.el,o=r?null:i,{i:a,r:c}=s,u=e&&e.r,h=a.refs===He?a.refs={}:a.refs,f=a.setupState,m=Oe(f),p=f===He?()=>!1:d=>Ke(m,d);if(u!=null&&u!==c&&(Xe(u)?(h[u]=null,p(u)&&(f[u]=null)):Ye(u)&&(u.value=null)),be(c))tr(c,a,12,[o,h]);else{const d=Xe(c),v=Ye(c);if(d||v){const k=()=>{if(s.f){const $=d?p(c)?f[c]:h[c]:c.value;r?ge($)&&mo($,i):ge($)?$.includes(i)||$.push(i):d?(h[c]=[i],p(c)&&(f[c]=h[c])):(c.value=[i],s.k&&(h[s.k]=c.value))}else d?(h[c]=o,p(c)&&(f[c]=o)):v&&(c.value=o,s.k&&(h[s.k]=o))};o?(k.id=-1,yt(k,t)):k()}}}Br().requestIdleCallback;Br().cancelIdleCallback;const on=s=>!!s.type.__asyncLoader,Wr=s=>s.type.__isKeepAlive;function xd(s,e){hc(s,"a",e)}function Nd(s,e){hc(s,"da",e)}function hc(s,e,t=dt){const n=s.__wdc||(s.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return s()});if(qr(e,n,t),t){let r=t.parent;for(;r&&r.parent;)Wr(r.parent.vnode)&&Kd(n,e,t,r),r=r.parent}}function Kd(s,e,t,n){const r=qr(e,s,n,!0);sr(()=>{mo(n[e],r)},t)}function qr(s,e,t=dt,n=!1){if(t){const r=t[s]||(t[s]=[]),i=e.__weh||(e.__weh=(...o)=>{Xt();const a=nr(t),c=jt(e,t,s,o);return a(),Zt(),c});return n?r.unshift(i):r.push(i),i}}const es=s=>(e,t=dt)=>{(!Gn||s==="sp")&&qr(s,(...n)=>e(...n),t)},Fd=es("bm"),pt=es("m"),Bd=es("bu"),zd=es("u"),fc=es("bum"),sr=es("um"),Hd=es("sp"),Wd=es("rtg"),qd=es("rtc");function Vd(s,e=dt){qr("ec",s,e)}const Gd="components";function Vr(s,e){return Qd(Gd,s,!0,e)||s}const Jd=Symbol.for("v-ndc");function Qd(s,e,t=!0,n=!1){const r=ot||dt;if(r){const i=r.type;{const a=Uh(i,!1);if(a&&(a===e||a===Et(e)||a===Fr(Et(e))))return i}const o=Xo(r[s]||i[s],e)||Xo(r.appContext[s],e);return!o&&n?i:o}}function Xo(s,e){return s&&(s[e]||s[Et(e)]||s[Fr(Et(e))])}function Ue(s,e,t,n){let r;const i=t,o=ge(s);if(o||Xe(s)){const a=o&&gs(s);let c=!1,u=!1;a&&(c=!$t(s),u=vs(s),s=zr(s)),r=new Array(s.length);for(let h=0,f=s.length;h<f;h++)r[h]=e(c?u?Cr(it(s[h])):it(s[h]):s[h],h,void 0,i)}else if(typeof s=="number"){r=new Array(s);for(let a=0;a<s;a++)r[a]=e(a+1,a,void 0,i)}else if(We(s))if(s[Symbol.iterator])r=Array.from(s,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(s);r=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const h=a[c];r[c]=e(s[h],h,c,i)}}else r=[];return r}function Eo(s,e,t={},n,r){if(ot.ce||ot.parent&&on(ot.parent)&&ot.parent.ce)return t.name=e,w(),vt(ye,null,[pe("slot",t,n)],64);let i=s[e];i&&i._c&&(i._d=!1),w();const o=i&&pc(i(t)),a=t.key||o&&o.key,c=vt(ye,{key:(a&&!Ot(a)?a:`_${e}`)+(!o&&n?"_fb":"")},o||[],o&&s._===1?64:-2);return i&&i._c&&(i._d=!0),c}function pc(s){return s.some(e=>qn(e)?!(e.type===ut||e.type===ye&&!pc(e.children)):!0)?s:null}const Bi=s=>s?jc(s)?Qr(s):Bi(s.parent):null,Mn=nt(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Bi(s.parent),$root:s=>Bi(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>mc(s),$forceUpdate:s=>s.f||(s.f=()=>{To(s.update)}),$nextTick:s=>s.n||(s.n=Fs.bind(s.proxy)),$watch:s=>yh.bind(s)}),pi=(s,e)=>s!==He&&!s.__isScriptSetup&&Ke(s,e),Yd={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:r,props:i,accessCache:o,type:a,appContext:c}=s;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(pi(n,e))return o[e]=1,n[e];if(r!==He&&Ke(r,e))return o[e]=2,r[e];if((u=s.propsOptions[0])&&Ke(u,e))return o[e]=3,i[e];if(t!==He&&Ke(t,e))return o[e]=4,t[e];zi&&(o[e]=0)}}const h=Mn[e];let f,m;if(h)return e==="$attrs"&&ct(s.attrs,"get",""),h(s);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==He&&Ke(t,e))return o[e]=4,t[e];if(m=c.config.globalProperties,Ke(m,e))return m[e]},set({_:s},e,t){const{data:n,setupState:r,ctx:i}=s;return pi(r,e)?(r[e]=t,!0):n!==He&&Ke(n,e)?(n[e]=t,!0):Ke(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(i[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:r,propsOptions:i}},o){let a;return!!t[o]||s!==He&&Ke(s,o)||pi(e,o)||(a=i[0])&&Ke(a,o)||Ke(n,o)||Ke(Mn,o)||Ke(r.config.globalProperties,o)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:Ke(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function Zo(s){return ge(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let zi=!0;function Xd(s){const e=mc(s),t=s.proxy,n=s.ctx;zi=!1,e.beforeCreate&&ea(e.beforeCreate,s,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:f,mounted:m,beforeUpdate:p,updated:d,activated:v,deactivated:k,beforeDestroy:$,beforeUnmount:R,destroyed:S,unmounted:E,render:M,renderTracked:A,renderTriggered:D,errorCaptured:K,serverPrefetch:W,expose:se,inheritAttrs:oe,components:V,directives:I,filters:T}=e;if(u&&Zd(u,n,null),o)for(const X in o){const ie=o[X];be(ie)&&(n[X]=ie.bind(t))}if(r){const X=r.call(t,t);We(X)&&(s.data=er(X))}if(zi=!0,i)for(const X in i){const ie=i[X],L=be(ie)?ie.bind(t,t):be(ie.get)?ie.get.bind(t,t):Kt,Z=!be(ie)&&be(ie.set)?ie.set.bind(t):Kt,ae=Ce({get:L,set:Z});Object.defineProperty(n,X,{enumerable:!0,configurable:!0,get:()=>ae.value,set:fe=>ae.value=fe})}if(a)for(const X in a)gc(a[X],n,t,X);if(c){const X=be(c)?c.call(t):c;Reflect.ownKeys(X).forEach(ie=>{yr(ie,X[ie])})}h&&ea(h,s,"c");function ne(X,ie){ge(ie)?ie.forEach(L=>X(L.bind(t))):ie&&X(ie.bind(t))}if(ne(Fd,f),ne(pt,m),ne(Bd,p),ne(zd,d),ne(xd,v),ne(Nd,k),ne(Vd,K),ne(qd,A),ne(Wd,D),ne(fc,R),ne(sr,E),ne(Hd,W),ge(se))if(se.length){const X=s.exposed||(s.exposed={});se.forEach(ie=>{Object.defineProperty(X,ie,{get:()=>t[ie],set:L=>t[ie]=L,enumerable:!0})})}else s.exposed||(s.exposed={});M&&s.render===Kt&&(s.render=M),oe!=null&&(s.inheritAttrs=oe),V&&(s.components=V),I&&(s.directives=I),W&&dc(s)}function Zd(s,e,t=Kt){ge(s)&&(s=Hi(s));for(const n in s){const r=s[n];let i;We(r)?"default"in r?i=Pt(r.from||n,r.default,!0):i=Pt(r.from||n):i=Pt(r),Ye(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function ea(s,e,t){jt(ge(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function gc(s,e,t,n){let r=n.includes(".")?Ac(t,n):()=>t[n];if(Xe(s)){const i=e[s];be(i)&&Yt(r,i)}else if(be(s))Yt(r,s.bind(t));else if(We(s))if(ge(s))s.forEach(i=>gc(i,e,t,n));else{const i=be(s.handler)?s.handler.bind(t):e[s.handler];be(i)&&Yt(r,i,s)}}function mc(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=s.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!n?c=e:(c={},r.length&&r.forEach(u=>Er(c,u,o,!0)),Er(c,e,o)),We(e)&&i.set(e,c),c}function Er(s,e,t,n=!1){const{mixins:r,extends:i}=e;i&&Er(s,i,t,!0),r&&r.forEach(o=>Er(s,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=eh[o]||t&&t[o];s[o]=a?a(s[o],e[o]):e[o]}return s}const eh={data:ta,props:sa,emits:sa,methods:Pn,computed:Pn,beforeCreate:ht,created:ht,beforeMount:ht,mounted:ht,beforeUpdate:ht,updated:ht,beforeDestroy:ht,beforeUnmount:ht,destroyed:ht,unmounted:ht,activated:ht,deactivated:ht,errorCaptured:ht,serverPrefetch:ht,components:Pn,directives:Pn,watch:sh,provide:ta,inject:th};function ta(s,e){return e?s?function(){return nt(be(s)?s.call(this,this):s,be(e)?e.call(this,this):e)}:e:s}function th(s,e){return Pn(Hi(s),Hi(e))}function Hi(s){if(ge(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function ht(s,e){return s?[...new Set([].concat(s,e))]:e}function Pn(s,e){return s?nt(Object.create(null),s,e):e}function sa(s,e){return s?ge(s)&&ge(e)?[...new Set([...s,...e])]:nt(Object.create(null),Zo(s),Zo(e??{})):e}function sh(s,e){if(!s)return e;if(!e)return s;const t=nt(Object.create(null),s);for(const n in e)t[n]=ht(s[n],e[n]);return t}function vc(){return{app:null,config:{isNativeTag:Bu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nh=0;function rh(s,e){return function(n,r=null){be(n)||(n=nt({},n)),r!=null&&!We(r)&&(r=null);const i=vc(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:nh++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Nh,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&be(h.install)?(o.add(h),h.install(u,...f)):be(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,m){if(!c){const p=u._ceVNode||pe(n,r);return p.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),s(p,h,m),c=!0,u._container=h,h.__vue_app__=u,Qr(p.component)}},onUnmount(h){a.push(h)},unmount(){c&&(jt(a,u._instance,16),s(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=xs;xs=u;try{return h()}finally{xs=f}}};return u}}let xs=null;function yr(s,e){if(dt){let t=dt.provides;const n=dt.parent&&dt.parent.provides;n===t&&(t=dt.provides=Object.create(n)),t[s]=e}}function Pt(s,e,t=!1){const n=Mo();if(n||xs){let r=xs?xs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&s in r)return r[s];if(arguments.length>1)return t&&be(e)?e.call(n&&n.proxy):e}}function ih(){return!!(Mo()||xs)}const yc={},wc=()=>Object.create(yc),bc=s=>Object.getPrototypeOf(s)===yc;function oh(s,e,t,n=!1){const r={},i=wc();s.propsDefaults=Object.create(null),_c(s,e,r,i);for(const o in s.propsOptions[0])o in r||(r[o]=void 0);t?s.props=n?r:Ql(r):s.type.props?s.props=r:s.props=i,s.attrs=i}function ah(s,e,t,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=s,a=Oe(r),[c]=s.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=s.vnode.dynamicProps;for(let f=0;f<h.length;f++){let m=h[f];if(Gr(s.emitsOptions,m))continue;const p=e[m];if(c)if(Ke(i,m))p!==i[m]&&(i[m]=p,u=!0);else{const d=Et(m);r[d]=Wi(c,a,d,p,s,!1)}else p!==i[m]&&(i[m]=p,u=!0)}}}else{_c(s,e,r,i)&&(u=!0);let h;for(const f in a)(!e||!Ke(e,f)&&((h=Ks(f))===f||!Ke(e,h)))&&(c?t&&(t[f]!==void 0||t[h]!==void 0)&&(r[f]=Wi(c,a,f,void 0,s,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!Ke(e,f))&&(delete i[f],u=!0)}u&&Vt(s.attrs,"set","")}function _c(s,e,t,n){const[r,i]=s.propsOptions;let o=!1,a;if(e)for(let c in e){if(En(c))continue;const u=e[c];let h;r&&Ke(r,h=Et(c))?!i||!i.includes(h)?t[h]=u:(a||(a={}))[h]=u:Gr(s.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,o=!0)}if(i){const c=Oe(t),u=a||He;for(let h=0;h<i.length;h++){const f=i[h];t[f]=Wi(r,c,f,u[f],s,!Ke(u,f))}}return o}function Wi(s,e,t,n,r,i){const o=s[t];if(o!=null){const a=Ke(o,"default");if(a&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&be(c)){const{propsDefaults:u}=r;if(t in u)n=u[t];else{const h=nr(r);n=u[t]=c.call(null,e),h()}}else n=c;r.ce&&r.ce._setProp(t,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===Ks(t))&&(n=!0))}return n}const lh=new WeakMap;function kc(s,e,t=!1){const n=t?lh:e.propsCache,r=n.get(s);if(r)return r;const i=s.props,o={},a=[];let c=!1;if(!be(s)){const h=f=>{c=!0;const[m,p]=kc(f,e,!0);nt(o,m),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(h),s.extends&&h(s.extends),s.mixins&&s.mixins.forEach(h)}if(!i&&!c)return We(s)&&n.set(s,sn),sn;if(ge(i))for(let h=0;h<i.length;h++){const f=Et(i[h]);na(f)&&(o[f]=He)}else if(i)for(const h in i){const f=Et(h);if(na(f)){const m=i[h],p=o[f]=ge(m)||be(m)?{type:m}:nt({},m),d=p.type;let v=!1,k=!0;if(ge(d))for(let $=0;$<d.length;++$){const R=d[$],S=be(R)&&R.name;if(S==="Boolean"){v=!0;break}else S==="String"&&(k=!1)}else v=be(d)&&d.name==="Boolean";p[0]=v,p[1]=k,(v||Ke(p,"default"))&&a.push(f)}}const u=[o,a];return We(s)&&n.set(s,u),u}function na(s){return s[0]!=="$"&&!En(s)}const Ao=s=>s==="_"||s==="__"||s==="_ctx"||s==="$stable",Io=s=>ge(s)?s.map(Nt):[Nt(s)],ch=(s,e,t)=>{if(e._n)return e;const n=$e((...r)=>Io(e(...r)),t);return n._c=!1,n},Sc=(s,e,t)=>{const n=s._ctx;for(const r in s){if(Ao(r))continue;const i=s[r];if(be(i))e[r]=ch(r,i,n);else if(i!=null){const o=Io(i);e[r]=()=>o}}},Cc=(s,e)=>{const t=Io(e);s.slots.default=()=>t},$c=(s,e,t)=>{for(const n in e)(t||!Ao(n))&&(s[n]=e[n])},uh=(s,e,t)=>{const n=s.slots=wc();if(s.vnode.shapeFlag&32){const r=e.__;r&&Ui(n,"__",r,!0);const i=e._;i?($c(n,e,t),t&&Ui(n,"_",i,!0)):Sc(e,n)}else e&&Cc(s,e)},dh=(s,e,t)=>{const{vnode:n,slots:r}=s;let i=!0,o=He;if(n.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:$c(r,e,t):(i=!e.$stable,Sc(e,r)),o=e}else e&&(Cc(s,e),o={default:1});if(i)for(const a in r)!Ao(a)&&o[a]==null&&delete r[a]},yt=$h;function hh(s){return fh(s)}function fh(s,e){const t=Br();t.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:m,setScopeId:p=Kt,insertStaticContent:d}=s,v=(g,y,_,P=null,U=null,N=null,Q=void 0,F=null,q=!!y.dynamicChildren)=>{if(g===y)return;g&&!Rs(g,y)&&(P=j(g),fe(g,U,N,!0),g=null),y.patchFlag===-2&&(q=!1,y.dynamicChildren=null);const{type:x,ref:H,shapeFlag:J}=y;switch(x){case Jr:k(g,y,_,P);break;case ut:$(g,y,_,P);break;case wr:g==null&&R(y,_,P,Q);break;case ye:V(g,y,_,P,U,N,Q,F,q);break;default:J&1?M(g,y,_,P,U,N,Q,F,q):J&6?I(g,y,_,P,U,N,Q,F,q):(J&64||J&128)&&x.process(g,y,_,P,U,N,Q,F,q,le)}H!=null&&U?Rn(H,g&&g.ref,N,y||g,!y):H==null&&g&&g.ref!=null&&Rn(g.ref,null,N,g,!0)},k=(g,y,_,P)=>{if(g==null)n(y.el=a(y.children),_,P);else{const U=y.el=g.el;y.children!==g.children&&u(U,y.children)}},$=(g,y,_,P)=>{g==null?n(y.el=c(y.children||""),_,P):y.el=g.el},R=(g,y,_,P)=>{[g.el,g.anchor]=d(g.children,y,_,P,g.el,g.anchor)},S=({el:g,anchor:y},_,P)=>{let U;for(;g&&g!==y;)U=m(g),n(g,_,P),g=U;n(y,_,P)},E=({el:g,anchor:y})=>{let _;for(;g&&g!==y;)_=m(g),r(g),g=_;r(y)},M=(g,y,_,P,U,N,Q,F,q)=>{y.type==="svg"?Q="svg":y.type==="math"&&(Q="mathml"),g==null?A(y,_,P,U,N,Q,F,q):W(g,y,U,N,Q,F,q)},A=(g,y,_,P,U,N,Q,F)=>{let q,x;const{props:H,shapeFlag:J,transition:Y,dirs:me}=g;if(q=g.el=o(g.type,N,H&&H.is,H),J&8?h(q,g.children):J&16&&K(g.children,q,null,P,U,gi(g,N),Q,F),me&&_s(g,null,P,"created"),D(q,g,g.scopeId,Q,P),H){for(const Me in H)Me!=="value"&&!En(Me)&&i(q,Me,null,H[Me],N,P);"value"in H&&i(q,"value",null,H.value,N),(x=H.onVnodeBeforeMount)&&Ut(x,P,g)}me&&_s(g,null,P,"beforeMount");const he=ph(U,Y);he&&Y.beforeEnter(q),n(q,y,_),((x=H&&H.onVnodeMounted)||he||me)&&yt(()=>{x&&Ut(x,P,g),he&&Y.enter(q),me&&_s(g,null,P,"mounted")},U)},D=(g,y,_,P,U)=>{if(_&&p(g,_),P)for(let N=0;N<P.length;N++)p(g,P[N]);if(U){let N=U.subTree;if(y===N||Rc(N.type)&&(N.ssContent===y||N.ssFallback===y)){const Q=U.vnode;D(g,Q,Q.scopeId,Q.slotScopeIds,U.parent)}}},K=(g,y,_,P,U,N,Q,F,q=0)=>{for(let x=q;x<g.length;x++){const H=g[x]=F?cs(g[x]):Nt(g[x]);v(null,H,y,_,P,U,N,Q,F)}},W=(g,y,_,P,U,N,Q)=>{const F=y.el=g.el;let{patchFlag:q,dynamicChildren:x,dirs:H}=y;q|=g.patchFlag&16;const J=g.props||He,Y=y.props||He;let me;if(_&&ks(_,!1),(me=Y.onVnodeBeforeUpdate)&&Ut(me,_,y,g),H&&_s(y,g,_,"beforeUpdate"),_&&ks(_,!0),(J.innerHTML&&Y.innerHTML==null||J.textContent&&Y.textContent==null)&&h(F,""),x?se(g.dynamicChildren,x,F,_,P,gi(y,U),N):Q||ie(g,y,F,null,_,P,gi(y,U),N,!1),q>0){if(q&16)oe(F,J,Y,_,U);else if(q&2&&J.class!==Y.class&&i(F,"class",null,Y.class,U),q&4&&i(F,"style",J.style,Y.style,U),q&8){const he=y.dynamicProps;for(let Me=0;Me<he.length;Me++){const Te=he[Me],ze=J[Te],te=Y[Te];(te!==ze||Te==="value")&&i(F,Te,ze,te,U,_)}}q&1&&g.children!==y.children&&h(F,y.children)}else!Q&&x==null&&oe(F,J,Y,_,U);((me=Y.onVnodeUpdated)||H)&&yt(()=>{me&&Ut(me,_,y,g),H&&_s(y,g,_,"updated")},P)},se=(g,y,_,P,U,N,Q)=>{for(let F=0;F<y.length;F++){const q=g[F],x=y[F],H=q.el&&(q.type===ye||!Rs(q,x)||q.shapeFlag&198)?f(q.el):_;v(q,x,H,null,P,U,N,Q,!0)}},oe=(g,y,_,P,U)=>{if(y!==_){if(y!==He)for(const N in y)!En(N)&&!(N in _)&&i(g,N,y[N],null,U,P);for(const N in _){if(En(N))continue;const Q=_[N],F=y[N];Q!==F&&N!=="value"&&i(g,N,F,Q,U,P)}"value"in _&&i(g,"value",y.value,_.value,U)}},V=(g,y,_,P,U,N,Q,F,q)=>{const x=y.el=g?g.el:a(""),H=y.anchor=g?g.anchor:a("");let{patchFlag:J,dynamicChildren:Y,slotScopeIds:me}=y;me&&(F=F?F.concat(me):me),g==null?(n(x,_,P),n(H,_,P),K(y.children||[],_,H,U,N,Q,F,q)):J>0&&J&64&&Y&&g.dynamicChildren?(se(g.dynamicChildren,Y,_,U,N,Q,F),(y.key!=null||U&&y===U.subTree)&&Pc(g,y,!0)):ie(g,y,_,H,U,N,Q,F,q)},I=(g,y,_,P,U,N,Q,F,q)=>{y.slotScopeIds=F,g==null?y.shapeFlag&512?U.ctx.activate(y,_,P,Q,q):T(y,_,P,U,N,Q,q):z(g,y,q)},T=(g,y,_,P,U,N,Q)=>{const F=g.component=Mh(g,P,U);if(Wr(g)&&(F.ctx.renderer=le),Oh(F,!1,Q),F.asyncDep){if(U&&U.registerDep(F,ne,Q),!g.el){const q=F.subTree=pe(ut);$(null,q,y,_),g.placeholder=q.el}}else ne(F,g,y,_,U,N,Q)},z=(g,y,_)=>{const P=y.component=g.component;if(Sh(g,y,_))if(P.asyncDep&&!P.asyncResolved){X(P,y,_);return}else P.next=y,P.update();else y.el=g.el,P.vnode=y},ne=(g,y,_,P,U,N,Q)=>{const F=()=>{if(g.isMounted){let{next:J,bu:Y,u:me,parent:he,vnode:Me}=g;{const we=Tc(g);if(we){J&&(J.el=Me.el,X(g,J,Q)),we.asyncDep.then(()=>{g.isUnmounted||F()});return}}let Te=J,ze;ks(g,!1),J?(J.el=Me.el,X(g,J,Q)):J=Me,Y&&vr(Y),(ze=J.props&&J.props.onVnodeBeforeUpdate)&&Ut(ze,he,J,Me),ks(g,!0);const te=ia(g),ce=g.subTree;g.subTree=te,v(ce,te,f(ce.el),j(ce),g,U,N),J.el=te.el,Te===null&&Ch(g,te.el),me&&yt(me,U),(ze=J.props&&J.props.onVnodeUpdated)&&yt(()=>Ut(ze,he,J,Me),U)}else{let J;const{el:Y,props:me}=y,{bm:he,m:Me,parent:Te,root:ze,type:te}=g,ce=on(y);ks(g,!1),he&&vr(he),!ce&&(J=me&&me.onVnodeBeforeMount)&&Ut(J,Te,y),ks(g,!0);{ze.ce&&ze.ce._def.shadowRoot!==!1&&ze.ce._injectChildStyle(te);const we=g.subTree=ia(g);v(null,we,_,P,g,U,N),y.el=we.el}if(Me&&yt(Me,U),!ce&&(J=me&&me.onVnodeMounted)){const we=y;yt(()=>Ut(J,Te,we),U)}(y.shapeFlag&256||Te&&on(Te.vnode)&&Te.vnode.shapeFlag&256)&&g.a&&yt(g.a,U),g.isMounted=!0,y=_=P=null}};g.scope.on();const q=g.effect=new Dl(F);g.scope.off();const x=g.update=q.run.bind(q),H=g.job=q.runIfDirty.bind(q);H.i=g,H.id=g.uid,q.scheduler=()=>To(H),ks(g,!0),x()},X=(g,y,_)=>{y.component=g;const P=g.vnode.props;g.vnode=y,g.next=null,ah(g,y.props,P,_),dh(g,y.children,_),Xt(),Qo(g),Zt()},ie=(g,y,_,P,U,N,Q,F,q=!1)=>{const x=g&&g.children,H=g?g.shapeFlag:0,J=y.children,{patchFlag:Y,shapeFlag:me}=y;if(Y>0){if(Y&128){Z(x,J,_,P,U,N,Q,F,q);return}else if(Y&256){L(x,J,_,P,U,N,Q,F,q);return}}me&8?(H&16&&ve(x,U,N),J!==x&&h(_,J)):H&16?me&16?Z(x,J,_,P,U,N,Q,F,q):ve(x,U,N,!0):(H&8&&h(_,""),me&16&&K(J,_,P,U,N,Q,F,q))},L=(g,y,_,P,U,N,Q,F,q)=>{g=g||sn,y=y||sn;const x=g.length,H=y.length,J=Math.min(x,H);let Y;for(Y=0;Y<J;Y++){const me=y[Y]=q?cs(y[Y]):Nt(y[Y]);v(g[Y],me,_,null,U,N,Q,F,q)}x>H?ve(g,U,N,!0,!1,J):K(y,_,P,U,N,Q,F,q,J)},Z=(g,y,_,P,U,N,Q,F,q)=>{let x=0;const H=y.length;let J=g.length-1,Y=H-1;for(;x<=J&&x<=Y;){const me=g[x],he=y[x]=q?cs(y[x]):Nt(y[x]);if(Rs(me,he))v(me,he,_,null,U,N,Q,F,q);else break;x++}for(;x<=J&&x<=Y;){const me=g[J],he=y[Y]=q?cs(y[Y]):Nt(y[Y]);if(Rs(me,he))v(me,he,_,null,U,N,Q,F,q);else break;J--,Y--}if(x>J){if(x<=Y){const me=Y+1,he=me<H?y[me].el:P;for(;x<=Y;)v(null,y[x]=q?cs(y[x]):Nt(y[x]),_,he,U,N,Q,F,q),x++}}else if(x>Y)for(;x<=J;)fe(g[x],U,N,!0),x++;else{const me=x,he=x,Me=new Map;for(x=he;x<=Y;x++){const ke=y[x]=q?cs(y[x]):Nt(y[x]);ke.key!=null&&Me.set(ke.key,x)}let Te,ze=0;const te=Y-he+1;let ce=!1,we=0;const xe=new Array(te);for(x=0;x<te;x++)xe[x]=0;for(x=me;x<=J;x++){const ke=g[x];if(ze>=te){fe(ke,U,N,!0);continue}let Fe;if(ke.key!=null)Fe=Me.get(ke.key);else for(Te=he;Te<=Y;Te++)if(xe[Te-he]===0&&Rs(ke,y[Te])){Fe=Te;break}Fe===void 0?fe(ke,U,N,!0):(xe[Fe-he]=x+1,Fe>=we?we=Fe:ce=!0,v(ke,y[Fe],_,null,U,N,Q,F,q),ze++)}const Ie=ce?gh(xe):sn;for(Te=Ie.length-1,x=te-1;x>=0;x--){const ke=he+x,Fe=y[ke],Ge=y[ke+1],rt=ke+1<H?Ge.el||Ge.placeholder:P;xe[x]===0?v(null,Fe,_,rt,U,N,Q,F,q):ce&&(Te<0||x!==Ie[Te]?ae(Fe,_,rt,2):Te--)}}},ae=(g,y,_,P,U=null)=>{const{el:N,type:Q,transition:F,children:q,shapeFlag:x}=g;if(x&6){ae(g.component.subTree,y,_,P);return}if(x&128){g.suspense.move(y,_,P);return}if(x&64){Q.move(g,y,_,le);return}if(Q===ye){n(N,y,_);for(let J=0;J<q.length;J++)ae(q[J],y,_,P);n(g.anchor,y,_);return}if(Q===wr){S(g,y,_);return}if(P!==2&&x&1&&F)if(P===0)F.beforeEnter(N),n(N,y,_),yt(()=>F.enter(N),U);else{const{leave:J,delayLeave:Y,afterLeave:me}=F,he=()=>{g.ctx.isUnmounted?r(N):n(N,y,_)},Me=()=>{J(N,()=>{he(),me&&me()})};Y?Y(N,he,Me):Me()}else n(N,y,_)},fe=(g,y,_,P=!1,U=!1)=>{const{type:N,props:Q,ref:F,children:q,dynamicChildren:x,shapeFlag:H,patchFlag:J,dirs:Y,cacheIndex:me}=g;if(J===-2&&(U=!1),F!=null&&(Xt(),Rn(F,null,_,g,!0),Zt()),me!=null&&(y.renderCache[me]=void 0),H&256){y.ctx.deactivate(g);return}const he=H&1&&Y,Me=!on(g);let Te;if(Me&&(Te=Q&&Q.onVnodeBeforeUnmount)&&Ut(Te,y,g),H&6)De(g.component,_,P);else{if(H&128){g.suspense.unmount(_,P);return}he&&_s(g,null,y,"beforeUnmount"),H&64?g.type.remove(g,y,_,le,P):x&&!x.hasOnce&&(N!==ye||J>0&&J&64)?ve(x,y,_,!1,!0):(N===ye&&J&384||!U&&H&16)&&ve(q,y,_),P&&Le(g)}(Me&&(Te=Q&&Q.onVnodeUnmounted)||he)&&yt(()=>{Te&&Ut(Te,y,g),he&&_s(g,null,y,"unmounted")},_)},Le=g=>{const{type:y,el:_,anchor:P,transition:U}=g;if(y===ye){_e(_,P);return}if(y===wr){E(g);return}const N=()=>{r(_),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(g.shapeFlag&1&&U&&!U.persisted){const{leave:Q,delayLeave:F}=U,q=()=>Q(_,N);F?F(g.el,N,q):q()}else N()},_e=(g,y)=>{let _;for(;g!==y;)_=m(g),r(g),g=_;r(y)},De=(g,y,_)=>{const{bum:P,scope:U,job:N,subTree:Q,um:F,m:q,a:x,parent:H,slots:{__:J}}=g;ra(q),ra(x),P&&vr(P),H&&ge(J)&&J.forEach(Y=>{H.renderCache[Y]=void 0}),U.stop(),N&&(N.flags|=8,fe(Q,g,y,_)),F&&yt(F,y),yt(()=>{g.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},ve=(g,y,_,P=!1,U=!1,N=0)=>{for(let Q=N;Q<g.length;Q++)fe(g[Q],y,_,P,U)},j=g=>{if(g.shapeFlag&6)return j(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const y=m(g.anchor||g.el),_=y&&y[jd];return _?m(_):y};let re=!1;const ee=(g,y,_)=>{g==null?y._vnode&&fe(y._vnode,null,null,!0):v(y._vnode||null,g,y,null,null,null,_),y._vnode=g,re||(re=!0,Qo(),sc(),re=!1)},le={p:v,um:fe,m:ae,r:Le,mt:T,mc:K,pc:ie,pbc:se,n:j,o:s};return{render:ee,hydrate:void 0,createApp:rh(ee)}}function gi({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ks({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function ph(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function Pc(s,e,t=!1){const n=s.children,r=e.children;if(ge(n)&&ge(r))for(let i=0;i<n.length;i++){const o=n[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=cs(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&Pc(o,a)),a.type===Jr&&(a.el=o.el),a.type===ut&&!a.el&&(a.el=o.el)}}function gh(s){const e=s.slice(),t=[0];let n,r,i,o,a;const c=s.length;for(n=0;n<c;n++){const u=s[n];if(u!==0){if(r=t[t.length-1],s[r]<u){e[n]=r,t.push(n);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,s[t[a]]<u?i=a+1:o=a;u<s[t[i]]&&(i>0&&(e[n]=t[i-1]),t[i]=n)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function Tc(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Tc(e)}function ra(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const mh=Symbol.for("v-scx"),vh=()=>Pt(mh);function Yt(s,e,t){return Ec(s,e,t)}function Ec(s,e,t=He){const{immediate:n,deep:r,flush:i,once:o}=t,a=nt({},t),c=e&&n||!e&&i!=="post";let u;if(Gn){if(i==="sync"){const p=vh();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=Kt,p.resume=Kt,p.pause=Kt,p}}const h=dt;a.call=(p,d,v)=>jt(p,h,d,v);let f=!1;i==="post"?a.scheduler=p=>{yt(p,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(p,d)=>{d?p():To(p)}),a.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,h&&(p.id=h.uid,p.i=h))};const m=Id(s,e,a);return Gn&&(u?u.push(m):c&&m()),m}function yh(s,e,t){const n=this.proxy,r=Xe(s)?s.includes(".")?Ac(n,s):()=>n[s]:s.bind(n,n);let i;be(e)?i=e:(i=e.handler,t=e);const o=nr(this),a=Ec(r,i.bind(n),t);return o(),a}function Ac(s,e){const t=e.split(".");return()=>{let n=s;for(let r=0;r<t.length&&n;r++)n=n[t[r]];return n}}const wh=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${Et(e)}Modifiers`]||s[`${Ks(e)}Modifiers`];function bh(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||He;let r=t;const i=e.startsWith("update:"),o=i&&wh(n,e.slice(7));o&&(o.trim&&(r=t.map(h=>Xe(h)?h.trim():h)),o.number&&(r=t.map(kr)));let a,c=n[a=li(e)]||n[a=li(Et(e))];!c&&i&&(c=n[a=li(Ks(e))]),c&&jt(c,s,6,r);const u=n[a+"Once"];if(u){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,jt(u,s,6,r)}}function Ic(s,e,t=!1){const n=e.emitsCache,r=n.get(s);if(r!==void 0)return r;const i=s.emits;let o={},a=!1;if(!be(s)){const c=u=>{const h=Ic(u,e,!0);h&&(a=!0,nt(o,h))};!t&&e.mixins.length&&e.mixins.forEach(c),s.extends&&c(s.extends),s.mixins&&s.mixins.forEach(c)}return!i&&!a?(We(s)&&n.set(s,null),null):(ge(i)?i.forEach(c=>o[c]=null):nt(o,i),We(s)&&n.set(s,o),o)}function Gr(s,e){return!s||!Nr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ke(s,e[0].toLowerCase()+e.slice(1))||Ke(s,Ks(e))||Ke(s,e))}function ia(s){const{type:e,vnode:t,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:h,props:f,data:m,setupState:p,ctx:d,inheritAttrs:v}=s,k=Tr(s);let $,R;try{if(t.shapeFlag&4){const E=r||n,M=E;$=Nt(u.call(M,E,h,f,p,m,d)),R=a}else{const E=e;$=Nt(E.length>1?E(f,{attrs:a,slots:o,emit:c}):E(f,null)),R=e.props?a:_h(a)}}catch(E){On.length=0,Hr(E,s,1),$=pe(ut)}let S=$;if(R&&v!==!1){const E=Object.keys(R),{shapeFlag:M}=S;E.length&&M&7&&(i&&E.some(go)&&(R=kh(R,i)),S=ys(S,R,!1,!0))}return t.dirs&&(S=ys(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(t.dirs):t.dirs),t.transition&&Hn(S,t.transition),$=S,Tr(k),$}const _h=s=>{let e;for(const t in s)(t==="class"||t==="style"||Nr(t))&&((e||(e={}))[t]=s[t]);return e},kh=(s,e)=>{const t={};for(const n in s)(!go(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function Sh(s,e,t){const{props:n,children:r,component:i}=s,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return n?oa(n,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const m=h[f];if(o[m]!==n[m]&&!Gr(u,m))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?oa(n,o,u):!0:!!o;return!1}function oa(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==s[i]&&!Gr(t,i))return!0}return!1}function Ch({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const Rc=s=>s.__isSuspense;function $h(s,e){e&&e.pendingBranch?ge(s)?e.effects.push(...s):e.effects.push(s):Od(s)}const ye=Symbol.for("v-fgt"),Jr=Symbol.for("v-txt"),ut=Symbol.for("v-cmt"),wr=Symbol.for("v-stc"),On=[];let _t=null;function w(s=!1){On.push(_t=s?null:[])}function Ph(){On.pop(),_t=On[On.length-1]||null}let Wn=1;function aa(s,e=!1){Wn+=s,s<0&&_t&&e&&(_t.hasOnce=!0)}function Mc(s){return s.dynamicChildren=Wn>0?_t||sn:null,Ph(),Wn>0&&_t&&_t.push(s),s}function b(s,e,t,n,r,i){return Mc(l(s,e,t,n,r,i,!0))}function vt(s,e,t,n,r){return Mc(pe(s,e,t,n,r,!0))}function qn(s){return s?s.__v_isVNode===!0:!1}function Rs(s,e){return s.type===e.type&&s.key===e.key}const Oc=({key:s})=>s??null,br=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?Xe(s)||Ye(s)||be(s)?{i:ot,r:s,k:e,f:!!t}:s:null);function l(s,e=null,t=null,n=0,r=null,i=s===ye?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&Oc(e),ref:e&&br(e),scopeId:rc,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ot};return a?(Ro(c,t),i&128&&s.normalize(c)):t&&(c.shapeFlag|=Xe(t)?8:16),Wn>0&&!o&&_t&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&_t.push(c),c}const pe=Th;function Th(s,e=null,t=null,n=0,r=null,i=!1){if((!s||s===Jd)&&(s=ut),qn(s)){const a=ys(s,e,!0);return t&&Ro(a,t),Wn>0&&!i&&_t&&(a.shapeFlag&6?_t[_t.indexOf(s)]=a:_t.push(a)),a.patchFlag=-2,a}if(xh(s)&&(s=s.__vccOpts),e){e=Eh(e);let{class:a,style:c}=e;a&&!Xe(a)&&(e.class=B(a)),We(c)&&($o(c)&&!ge(c)&&(c=nt({},c)),e.style=Ct(c))}const o=Xe(s)?1:Rc(s)?128:ic(s)?64:We(s)?4:be(s)?2:0;return l(s,e,t,n,r,o,i,!0)}function Eh(s){return s?$o(s)||bc(s)?nt({},s):s:null}function ys(s,e,t=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=s,u=e?Ah(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:s.type,props:u,key:u&&Oc(u),ref:e&&e.ref?t&&i?ge(i)?i.concat(br(e)):[i,br(e)]:br(e):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==ye?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:c,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&ys(s.ssContent),ssFallback:s.ssFallback&&ys(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return c&&n&&Hn(h,c.clone(h)),h}function Ae(s=" ",e=0){return pe(Jr,null,s,e)}function Vn(s,e){const t=pe(wr,null,s);return t.staticCount=e,t}function O(s="",e=!1){return e?(w(),vt(ut,null,s)):pe(ut,null,s)}function Nt(s){return s==null||typeof s=="boolean"?pe(ut):ge(s)?pe(ye,null,s.slice()):qn(s)?cs(s):pe(Jr,null,String(s))}function cs(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:ys(s)}function Ro(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(ge(e))t=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Ro(s,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!bc(e)?e._ctx=ot:r===3&&ot&&(ot.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else be(e)?(e={default:e,_ctx:ot},t=32):(e=String(e),n&64?(t=16,e=[Ae(e)]):t=8);s.children=e,s.shapeFlag|=t}function Ah(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=B([e.class,n.class]));else if(r==="style")e.style=Ct([e.style,n.style]);else if(Nr(r)){const i=e[r],o=n[r];o&&i!==o&&!(ge(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=n[r])}return e}function Ut(s,e,t,n=null){jt(s,e,7,[t,n])}const Ih=vc();let Rh=0;function Mh(s,e,t){const n=s.type,r=(e?e.appContext:s.appContext)||Ih,i={uid:Rh++,vnode:s,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ol(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kc(n,r),emitsOptions:Ic(n,r),emit:null,emitted:null,propsDefaults:He,inheritAttrs:n.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=bh.bind(null,i),s.ce&&s.ce(i),i}let dt=null;const Mo=()=>dt||ot;let Ar,qi;{const s=Br(),e=(t,n)=>{let r;return(r=s[t])||(r=s[t]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Ar=e("__VUE_INSTANCE_SETTERS__",t=>dt=t),qi=e("__VUE_SSR_SETTERS__",t=>Gn=t)}const nr=s=>{const e=dt;return Ar(s),s.scope.on(),()=>{s.scope.off(),Ar(e)}},la=()=>{dt&&dt.scope.off(),Ar(null)};function jc(s){return s.vnode.shapeFlag&4}let Gn=!1;function Oh(s,e=!1,t=!1){e&&qi(e);const{props:n,children:r}=s.vnode,i=jc(s);oh(s,n,i,e),uh(s,r,t||e);const o=i?jh(s,e):void 0;return e&&qi(!1),o}function jh(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Yd);const{setup:n}=t;if(n){Xt();const r=s.setupContext=n.length>1?Dh(s):null,i=nr(s),o=tr(n,s,0,[s.props,r]),a=Tl(o);if(Zt(),i(),(a||s.sp)&&!on(s)&&dc(s),a){if(o.then(la,la),e)return o.then(c=>{ca(s,c)}).catch(c=>{Hr(c,s,0)});s.asyncDep=o}else ca(s,o)}else Lc(s)}function ca(s,e,t){be(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:We(e)&&(s.setupState=Zl(e)),Lc(s)}function Lc(s,e,t){const n=s.type;s.render||(s.render=n.render||Kt);{const r=nr(s);Xt();try{Xd(s)}finally{Zt(),r()}}}const Lh={get(s,e){return ct(s,"get",""),s[e]}};function Dh(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,Lh),slots:s.slots,emit:s.emit,expose:e}}function Qr(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(Zl(Po(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in Mn)return Mn[t](s)},has(e,t){return t in e||t in Mn}})):s.proxy}function Uh(s,e=!0){return be(s)?s.displayName||s.name:s.name||e&&s.__name}function xh(s){return be(s)&&"__vccOpts"in s}const Ce=(s,e)=>Ed(s,e,Gn);function wt(s,e,t){const n=arguments.length;return n===2?We(e)&&!ge(e)?qn(e)?pe(s,null,[e]):pe(s,e):pe(s,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&qn(t)&&(t=[t]),pe(s,e,t))}const Nh="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vi;const ua=typeof window<"u"&&window.trustedTypes;if(ua)try{Vi=ua.createPolicy("vue",{createHTML:s=>s})}catch{}const Dc=Vi?s=>Vi.createHTML(s):s=>s,Kh="http://www.w3.org/2000/svg",Fh="http://www.w3.org/1998/Math/MathML",Wt=typeof document<"u"?document:null,da=Wt&&Wt.createElement("template"),Bh={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const r=e==="svg"?Wt.createElementNS(Kh,s):e==="mathml"?Wt.createElementNS(Fh,s):t?Wt.createElement(s,{is:t}):Wt.createElement(s);return s==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:s=>Wt.createTextNode(s),createComment:s=>Wt.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Wt.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{da.innerHTML=Dc(n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s);const a=da.content;if(n==="svg"||n==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},ts="transition",wn="animation",Jn=Symbol("_vtc"),Uc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},zh=nt({},oc,Uc),Hh=s=>(s.displayName="Transition",s.props=zh,s),je=Hh((s,{slots:e})=>wt(Ud,Wh(s),e)),Ss=(s,e=[])=>{ge(s)?s.forEach(t=>t(...e)):s&&s(...e)},ha=s=>s?ge(s)?s.some(e=>e.length>1):s.length>1:!1;function Wh(s){const e={};for(const V in s)V in Uc||(e[V]=s[V]);if(s.css===!1)return e;const{name:t="v",type:n,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:m=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=s,d=qh(r),v=d&&d[0],k=d&&d[1],{onBeforeEnter:$,onEnter:R,onEnterCancelled:S,onLeave:E,onLeaveCancelled:M,onBeforeAppear:A=$,onAppear:D=R,onAppearCancelled:K=S}=e,W=(V,I,T,z)=>{V._enterCancelled=z,Cs(V,I?h:a),Cs(V,I?u:o),T&&T()},se=(V,I)=>{V._isLeaving=!1,Cs(V,f),Cs(V,p),Cs(V,m),I&&I()},oe=V=>(I,T)=>{const z=V?D:R,ne=()=>W(I,V,T);Ss(z,[I,ne]),fa(()=>{Cs(I,V?c:i),Bt(I,V?h:a),ha(z)||pa(I,n,v,ne)})};return nt(e,{onBeforeEnter(V){Ss($,[V]),Bt(V,i),Bt(V,o)},onBeforeAppear(V){Ss(A,[V]),Bt(V,c),Bt(V,u)},onEnter:oe(!1),onAppear:oe(!0),onLeave(V,I){V._isLeaving=!0;const T=()=>se(V,I);Bt(V,f),V._enterCancelled?(Bt(V,m),va()):(va(),Bt(V,m)),fa(()=>{V._isLeaving&&(Cs(V,f),Bt(V,p),ha(E)||pa(V,n,k,T))}),Ss(E,[V,T])},onEnterCancelled(V){W(V,!1,void 0,!0),Ss(S,[V])},onAppearCancelled(V){W(V,!0,void 0,!0),Ss(K,[V])},onLeaveCancelled(V){se(V),Ss(M,[V])}})}function qh(s){if(s==null)return null;if(We(s))return[mi(s.enter),mi(s.leave)];{const e=mi(s);return[e,e]}}function mi(s){return Vu(s)}function Bt(s,e){e.split(/\s+/).forEach(t=>t&&s.classList.add(t)),(s[Jn]||(s[Jn]=new Set)).add(e)}function Cs(s,e){e.split(/\s+/).forEach(n=>n&&s.classList.remove(n));const t=s[Jn];t&&(t.delete(e),t.size||(s[Jn]=void 0))}function fa(s){requestAnimationFrame(()=>{requestAnimationFrame(s)})}let Vh=0;function pa(s,e,t,n){const r=s._endId=++Vh,i=()=>{r===s._endId&&n()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:c}=Gh(s,e);if(!o)return n();const u=o+"end";let h=0;const f=()=>{s.removeEventListener(u,m),i()},m=p=>{p.target===s&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),s.addEventListener(u,m)}function Gh(s,e){const t=window.getComputedStyle(s),n=d=>(t[d]||"").split(", "),r=n(`${ts}Delay`),i=n(`${ts}Duration`),o=ga(r,i),a=n(`${wn}Delay`),c=n(`${wn}Duration`),u=ga(a,c);let h=null,f=0,m=0;e===ts?o>0&&(h=ts,f=o,m=i.length):e===wn?u>0&&(h=wn,f=u,m=c.length):(f=Math.max(o,u),h=f>0?o>u?ts:wn:null,m=h?h===ts?i.length:c.length:0);const p=h===ts&&/\b(transform|all)(,|$)/.test(n(`${ts}Property`).toString());return{type:h,timeout:f,propCount:m,hasTransform:p}}function ga(s,e){for(;s.length<e.length;)s=s.concat(s);return Math.max(...e.map((t,n)=>ma(t)+ma(s[n])))}function ma(s){return s==="auto"?0:Number(s.slice(0,-1).replace(",","."))*1e3}function va(){return document.body.offsetHeight}function Jh(s,e,t){const n=s[Jn];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const Ir=Symbol("_vod"),xc=Symbol("_vsh"),vi={beforeMount(s,{value:e},{transition:t}){s[Ir]=s.style.display==="none"?"":s.style.display,t&&e?t.beforeEnter(s):bn(s,e)},mounted(s,{value:e},{transition:t}){t&&e&&t.enter(s)},updated(s,{value:e,oldValue:t},{transition:n}){!e!=!t&&(n?e?(n.beforeEnter(s),bn(s,!0),n.enter(s)):n.leave(s,()=>{bn(s,!1)}):bn(s,e))},beforeUnmount(s,{value:e}){bn(s,e)}};function bn(s,e){s.style.display=e?s[Ir]:"none",s[xc]=!e}const Qh=Symbol(""),Yh=/(^|;)\s*display\s*:/;function Xh(s,e,t){const n=s.style,r=Xe(t);let i=!1;if(t&&!r){if(e)if(Xe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&_r(n,a,"")}else for(const o in e)t[o]==null&&_r(n,o,"");for(const o in t)o==="display"&&(i=!0),_r(n,o,t[o])}else if(r){if(e!==t){const o=n[Qh];o&&(t+=";"+o),n.cssText=t,i=Yh.test(t)}}else e&&s.removeAttribute("style");Ir in s&&(s[Ir]=i?n.display:"",s[xc]&&(n.display="none"))}const ya=/\s*!important$/;function _r(s,e,t){if(ge(t))t.forEach(n=>_r(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=Zh(s,e);ya.test(t)?s.setProperty(Ks(n),t.replace(ya,""),"important"):s[n]=t}}const wa=["Webkit","Moz","ms"],yi={};function Zh(s,e){const t=yi[e];if(t)return t;let n=Et(e);if(n!=="filter"&&n in s)return yi[e]=n;n=Fr(n);for(let r=0;r<wa.length;r++){const i=wa[r]+n;if(i in s)return yi[e]=i}return e}const ba="http://www.w3.org/1999/xlink";function _a(s,e,t,n,r,i=Zu(e)){n&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(ba,e.slice(6,e.length)):s.setAttributeNS(ba,e,t):t==null||i&&!Il(t)?s.removeAttribute(e):s.setAttribute(e,i?"":Ot(t)?String(t):t)}function ka(s,e,t,n,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?Dc(t):t);return}const i=s.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?s.getAttribute("value")||"":s.value,c=t==null?s.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in s))&&(s.value=c),t==null&&s.removeAttribute(e),s._value=t;return}let o=!1;if(t===""||t==null){const a=typeof s[e];a==="boolean"?t=Il(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{s[e]=t}catch{}o&&s.removeAttribute(r||e)}function Jt(s,e,t,n){s.addEventListener(e,t,n)}function ef(s,e,t,n){s.removeEventListener(e,t,n)}const Sa=Symbol("_vei");function tf(s,e,t,n,r=null){const i=s[Sa]||(s[Sa]={}),o=i[e];if(n&&o)o.value=n;else{const[a,c]=sf(e);if(n){const u=i[e]=of(n,r);Jt(s,a,u,c)}else o&&(ef(s,a,o,c),i[e]=void 0)}}const Ca=/(?:Once|Passive|Capture)$/;function sf(s){let e;if(Ca.test(s)){e={};let n;for(;n=s.match(Ca);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Ks(s.slice(2)),e]}let wi=0;const nf=Promise.resolve(),rf=()=>wi||(nf.then(()=>wi=0),wi=Date.now());function of(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;jt(af(n,t.value),e,5,[n])};return t.value=s,t.attached=rf(),t}function af(s,e){if(ge(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const $a=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,lf=(s,e,t,n,r,i)=>{const o=r==="svg";e==="class"?Jh(s,n,o):e==="style"?Xh(s,t,n):Nr(e)?go(e)||tf(s,e,t,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):cf(s,e,n,o))?(ka(s,e,n),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&_a(s,e,n,o,i,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!Xe(n))?ka(s,Et(e),n,i,e):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),_a(s,e,n,o))};function cf(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&$a(e)&&be(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=s.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return $a(e)&&Xe(t)?!1:e in s}const ws=s=>{const e=s.props["onUpdate:modelValue"]||!1;return ge(e)?t=>vr(e,t):e};function uf(s){s.target.composing=!0}function Pa(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Tt=Symbol("_assign"),fs={created(s,{modifiers:{lazy:e,trim:t,number:n}},r){s[Tt]=ws(r);const i=n||r.props&&r.props.type==="number";Jt(s,e?"change":"input",o=>{if(o.target.composing)return;let a=s.value;t&&(a=a.trim()),i&&(a=kr(a)),s[Tt](a)}),t&&Jt(s,"change",()=>{s.value=s.value.trim()}),e||(Jt(s,"compositionstart",uf),Jt(s,"compositionend",Pa),Jt(s,"change",Pa))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:t,modifiers:{lazy:n,trim:r,number:i}},o){if(s[Tt]=ws(o),s.composing)return;const a=(i||s.type==="number")&&!/^0\d/.test(s.value)?kr(s.value):s.value,c=e??"";a!==c&&(document.activeElement===s&&s.type!=="range"&&(n&&e===t||r&&s.value.trim()===c)||(s.value=c))}},Nc={deep:!0,created(s,e,t){s[Tt]=ws(t),Jt(s,"change",()=>{const n=s._modelValue,r=ln(s),i=s.checked,o=s[Tt];if(ge(n)){const a=yo(n,r),c=a!==-1;if(i&&!c)o(n.concat(r));else if(!i&&c){const u=[...n];u.splice(a,1),o(u)}}else if(gn(n)){const a=new Set(n);i?a.add(r):a.delete(r),o(a)}else o(Fc(s,i))})},mounted:Ta,beforeUpdate(s,e,t){s[Tt]=ws(t),Ta(s,e,t)}};function Ta(s,{value:e,oldValue:t},n){s._modelValue=e;let r;if(ge(e))r=yo(e,n.props.value)>-1;else if(gn(e))r=e.has(n.props.value);else{if(e===t)return;r=Ns(e,Fc(s,!0))}s.checked!==r&&(s.checked=r)}const df={created(s,{value:e},t){s.checked=Ns(e,t.props.value),s[Tt]=ws(t),Jt(s,"change",()=>{s[Tt](ln(s))})},beforeUpdate(s,{value:e,oldValue:t},n){s[Tt]=ws(n),e!==t&&(s.checked=Ns(e,n.props.value))}},Kc={deep:!0,created(s,{value:e,modifiers:{number:t}},n){const r=gn(e);Jt(s,"change",()=>{const i=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>t?kr(ln(o)):ln(o));s[Tt](s.multiple?r?new Set(i):i:i[0]),s._assigning=!0,Fs(()=>{s._assigning=!1})}),s[Tt]=ws(n)},mounted(s,{value:e}){Ea(s,e)},beforeUpdate(s,e,t){s[Tt]=ws(t)},updated(s,{value:e}){s._assigning||Ea(s,e)}};function Ea(s,e){const t=s.multiple,n=ge(e);if(!(t&&!n&&!gn(e))){for(let r=0,i=s.options.length;r<i;r++){const o=s.options[r],a=ln(o);if(t)if(n){const c=typeof a;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=yo(e,a)>-1}else o.selected=e.has(a);else if(Ns(ln(o),e)){s.selectedIndex!==r&&(s.selectedIndex=r);return}}!t&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function ln(s){return"_value"in s?s._value:s.value}function Fc(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const hf={created(s,e,t){dr(s,e,t,null,"created")},mounted(s,e,t){dr(s,e,t,null,"mounted")},beforeUpdate(s,e,t,n){dr(s,e,t,n,"beforeUpdate")},updated(s,e,t,n){dr(s,e,t,n,"updated")}};function ff(s,e){switch(s){case"SELECT":return Kc;case"TEXTAREA":return fs;default:switch(e){case"checkbox":return Nc;case"radio":return df;default:return fs}}}function dr(s,e,t,n,r){const o=ff(s.tagName,t.props&&t.props.type)[r];o&&o(s,e,t,n)}const pf=["ctrl","shift","alt","meta"],gf={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>pf.some(t=>s[`${t}Key`]&&!e.includes(t))},ms=(s,e)=>{const t=s._withMods||(s._withMods={}),n=e.join(".");return t[n]||(t[n]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=gf[e[o]];if(a&&a(r,e))return}return s(r,...i)})},mf=nt({patchProp:lf},Bh);let Aa;function vf(){return Aa||(Aa=hh(mf))}const Oo=(...s)=>{const e=vf().createApp(...s),{mount:t}=e;return e.mount=n=>{const r=wf(n);if(!r)return;const i=e._component;!be(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,yf(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function yf(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function wf(s){return Xe(s)?document.querySelector(s):s}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Bc;const Yr=s=>Bc=s,zc=Symbol();function Gi(s){return s&&typeof s=="object"&&Object.prototype.toString.call(s)==="[object Object]"&&typeof s.toJSON!="function"}var jn;(function(s){s.direct="direct",s.patchObject="patch object",s.patchFunction="patch function"})(jn||(jn={}));function bf(){const s=jl(!0),e=s.run(()=>G({}));let t=[],n=[];const r=Po({install(i){Yr(r),r._a=i,i.provide(zc,r),i.config.globalProperties.$pinia=r,n.forEach(o=>t.push(o)),n=[]},use(i){return this._a?t.push(i):n.push(i),this},_p:t,_a:null,_e:s,_s:new Map,state:e});return r}const Hc=()=>{};function Ia(s,e,t,n=Hc){s.push(e);const r=()=>{const i=s.indexOf(e);i>-1&&(s.splice(i,1),n())};return!t&&Ll()&&td(r),r}function qs(s,...e){s.slice().forEach(t=>{t(...e)})}const _f=s=>s(),Ra=Symbol(),bi=Symbol();function Ji(s,e){s instanceof Map&&e instanceof Map?e.forEach((t,n)=>s.set(n,t)):s instanceof Set&&e instanceof Set&&e.forEach(s.add,s);for(const t in e){if(!e.hasOwnProperty(t))continue;const n=e[t],r=s[t];Gi(r)&&Gi(n)&&s.hasOwnProperty(t)&&!Ye(n)&&!gs(n)?s[t]=Ji(r,n):s[t]=n}return s}const kf=Symbol();function Sf(s){return!Gi(s)||!s.hasOwnProperty(kf)}const{assign:is}=Object;function Cf(s){return!!(Ye(s)&&s.effect)}function $f(s,e,t,n){const{state:r,actions:i,getters:o}=e,a=t.state.value[s];let c;function u(){a||(t.state.value[s]=r?r():{});const h=Cd(t.state.value[s]);return is(h,i,Object.keys(o||{}).reduce((f,m)=>(f[m]=Po(Ce(()=>{Yr(t);const p=t._s.get(s);return o[m].call(p,p)})),f),{}))}return c=Wc(s,u,e,t,n,!0),c}function Wc(s,e,t={},n,r,i){let o;const a=is({actions:{}},t),c={deep:!0};let u,h,f=[],m=[],p;const d=n.state.value[s];!i&&!d&&(n.state.value[s]={}),G({});let v;function k(K){let W;u=h=!1,typeof K=="function"?(K(n.state.value[s]),W={type:jn.patchFunction,storeId:s,events:p}):(Ji(n.state.value[s],K),W={type:jn.patchObject,payload:K,storeId:s,events:p});const se=v=Symbol();Fs().then(()=>{v===se&&(u=!0)}),h=!0,qs(f,W,n.state.value[s])}const $=i?function(){const{state:W}=t,se=W?W():{};this.$patch(oe=>{is(oe,se)})}:Hc;function R(){o.stop(),f=[],m=[],n._s.delete(s)}const S=(K,W="")=>{if(Ra in K)return K[bi]=W,K;const se=function(){Yr(n);const oe=Array.from(arguments),V=[],I=[];function T(X){V.push(X)}function z(X){I.push(X)}qs(m,{args:oe,name:se[bi],store:M,after:T,onError:z});let ne;try{ne=K.apply(this&&this.$id===s?this:M,oe)}catch(X){throw qs(I,X),X}return ne instanceof Promise?ne.then(X=>(qs(V,X),X)).catch(X=>(qs(I,X),Promise.reject(X))):(qs(V,ne),ne)};return se[Ra]=!0,se[bi]=W,se},E={_p:n,$id:s,$onAction:Ia.bind(null,m),$patch:k,$reset:$,$subscribe(K,W={}){const se=Ia(f,K,W.detached,()=>oe()),oe=o.run(()=>Yt(()=>n.state.value[s],V=>{(W.flush==="sync"?h:u)&&K({storeId:s,type:jn.direct,events:p},V)},is({},c,W)));return se},$dispose:R},M=er(E);n._s.set(s,M);const D=(n._a&&n._a.runWithContext||_f)(()=>n._e.run(()=>(o=jl()).run(()=>e({action:S}))));for(const K in D){const W=D[K];if(Ye(W)&&!Cf(W)||gs(W))i||(d&&Sf(W)&&(Ye(W)?W.value=d[K]:Ji(W,d[K])),n.state.value[s][K]=W);else if(typeof W=="function"){const se=S(W,K);D[K]=se,a.actions[K]=W}}return is(M,D),is(Oe(M),D),Object.defineProperty(M,"$state",{get:()=>n.state.value[s],set:K=>{k(W=>{is(W,K)})}}),n._p.forEach(K=>{is(M,o.run(()=>K({store:M,app:n._a,pinia:n,options:a})))}),d&&i&&t.hydrate&&t.hydrate(M.$state,d),u=!0,h=!0,M}/*! #__NO_SIDE_EFFECTS__ */function qc(s,e,t){let n,r;const i=typeof e=="function";typeof s=="string"?(n=s,r=i?t:e):(r=s,n=s.id);function o(a,c){const u=ih();return a=a||(u?Pt(zc,null):null),a&&Yr(a),a=Bc,a._s.has(n)||(i?Wc(n,e,r,a):$f(n,r,a)),a._s.get(n)}return o.$id=n,o}const Pf="modulepreload",Tf=function(s,e){return new URL(s,e).href},Ma={},Pe=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(u=>{if(u=Tf(u,n),u in Ma)return;Ma[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(!!n)for(let d=o.length-1;d>=0;d--){const v=o[d];if(v.href===u&&(!h||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Pf,h||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((d,v)=>{p.addEventListener("load",d),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Ef=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Pe(async()=>{const{default:n}=await Promise.resolve().then(()=>mn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class jo extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Af extends jo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Oa extends jo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ja extends jo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qi;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Qi||(Qi={}));var If=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):r(h.value).then(a,c)}u((n=n.apply(s,e||[])).next())})};class Rf{constructor(e,{headers:t={},customFetch:n,region:r=Qi.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Ef(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return If(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let a={},{region:c}=t;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(a["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(a["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:h}).catch(v=>{throw new Af(v)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new Oa(f);if(!f.ok)throw new ja(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),d;return p==="application/json"?d=yield f.json():p==="application/octet-stream"?d=yield f.blob():p==="text/event-stream"?d=f:p==="multipart/form-data"?d=yield f.formData():d=yield f.text(),{data:d,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof ja||r instanceof Oa?r.context:void 0}}})}}var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mf(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var r=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return s[n]}})}),t}var mt={},Lo={},Xr={},rr={},Zr={},ei={},Of=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cn=Of();const jf=cn.fetch,Vc=cn.fetch.bind(cn),Gc=cn.Headers,Lf=cn.Request,Df=cn.Response,mn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gc,Request:Lf,Response:Df,default:Vc,fetch:jf},Symbol.toStringTag,{value:"Module"})),Uf=Mf(mn);var ti={};Object.defineProperty(ti,"__esModule",{value:!0});let xf=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ti.default=xf;var Jc=At&&At.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ei,"__esModule",{value:!0});const Nf=Jc(Uf),Kf=Jc(ti);let Ff=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let u=null,h=null,f=null,m=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const $=await i.text();$===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=$:h=JSON.parse($))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&k&&k.length>1&&(f=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(h=[],u=null,m=200,p="OK")}catch{i.status===404&&v===""?(m=204,p="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,p="OK"),u&&this.shouldThrowOnError)throw new Kf.default(u)}return{error:u,data:h,count:f,status:m,statusText:p}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};ei.default=Ff;var Bf=At&&At.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Zr,"__esModule",{value:!0});const zf=Bf(ei);let Hf=class extends zf.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Zr.default=Hf;var Wf=At&&At.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(rr,"__esModule",{value:!0});const qf=Wf(Zr);let Vf=class extends qf.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};rr.default=Vf;var Gf=At&&At.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xr,"__esModule",{value:!0});const _n=Gf(rr);let Jf=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new _n.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new _n.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new _n.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new _n.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new _n.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Xr.default=Jf;var si={},ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.version=void 0;ni.version="0.0.0-automated";Object.defineProperty(si,"__esModule",{value:!0});si.DEFAULT_HEADERS=void 0;const Qf=ni;si.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Qf.version}`};var Qc=At&&At.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Lo,"__esModule",{value:!0});const Yf=Qc(Xr),Xf=Qc(rr),Zf=si;let ep=class Yc{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Zf.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Yf.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Yc(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(t).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{a.searchParams.append(h,f)})):(o="POST",c=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Xf.default({method:o,url:a,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Lo.default=ep;var vn=At&&At.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(mt,"__esModule",{value:!0});mt.PostgrestError=mt.PostgrestBuilder=mt.PostgrestTransformBuilder=mt.PostgrestFilterBuilder=mt.PostgrestQueryBuilder=mt.PostgrestClient=void 0;const Xc=vn(Lo);mt.PostgrestClient=Xc.default;const Zc=vn(Xr);mt.PostgrestQueryBuilder=Zc.default;const eu=vn(rr);mt.PostgrestFilterBuilder=eu.default;const tu=vn(Zr);mt.PostgrestTransformBuilder=tu.default;const su=vn(ei);mt.PostgrestBuilder=su.default;const nu=vn(ti);mt.PostgrestError=nu.default;var tp=mt.default={PostgrestClient:Xc.default,PostgrestQueryBuilder:Zc.default,PostgrestFilterBuilder:eu.default,PostgrestTransformBuilder:tu.default,PostgrestBuilder:su.default,PostgrestError:nu.default};const{PostgrestClient:sp,PostgrestQueryBuilder:ME,PostgrestFilterBuilder:OE,PostgrestTransformBuilder:jE,PostgrestBuilder:LE,PostgrestError:DE}=tp;function np(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const rp=np(),ip="2.11.15",op=`realtime-js/${ip}`,ap="1.0.0",ru=1e4,lp=1e3;var Ln;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ln||(Ln={}));var at;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(at||(at={}));var Rt;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Rt||(Rt={}));var Yi;(function(s){s.websocket="websocket"})(Yi||(Yi={}));var Ms;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Ms||(Ms={}));class cp{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class iu{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(qe||(qe={}));const La=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=up(o,s,e,r),i),{})},up=(s,e,t,n)=>{const r=e.find(a=>a.name===s),i=r==null?void 0:r.type,o=t[s];return i&&!n.includes(i)?ou(i,o):Xi(o)},ou=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return pp(e,t)}switch(s){case qe.bool:return dp(e);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return hp(e);case qe.json:case qe.jsonb:return fp(e);case qe.timestamp:return gp(e);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return Xi(e);default:return Xi(e)}},Xi=s=>s,dp=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},hp=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},fp=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},pp=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ou(e,a))}return s},gp=s=>typeof s=="string"?s.replace(" ","T"):s,au=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class _i{constructor(e,t,n={},r=ru){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Da;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Da||(Da={}));class Dn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dn.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=Dn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Dn.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const f=i[u];if(f){const m=h.map(k=>k.presence_ref),p=f.map(k=>k.presence_ref),d=h.filter(k=>p.indexOf(k.presence_ref)<0),v=f.filter(k=>m.indexOf(k.presence_ref)<0);d.length>0&&(a[u]=d),v.length>0&&(c[u]=v)}else a[u]=h}),this.syncDiff(i,{joins:a,leaves:c},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(a,c)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),h.length>0){const f=e[a].map(p=>p.presence_ref),m=h.filter(p=>f.indexOf(p.presence_ref)<0);e[a].unshift(...m)}n(a,h,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const h=c.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),e[a]=u,r(a,u,c),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ua;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Ua||(Ua={}));var xa;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(xa||(xa={}));var qt;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(qt||(qt={}));class Do{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=at.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new _i(this,Rt.join,this.params,this.timeout),this.rejoinTimer=new iu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=at.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=at.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rt.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Dn(this),this.broadcastEndpointURL=au(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==at.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(h=>e==null?void 0:e(qt.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(qt.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){e==null||e(qt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,p=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,d=[];for(let v=0;v<p;v++){const k=m[v],{filter:{event:$,schema:R,table:S,filter:E}}=k,M=h&&h[v];if(M&&M.event===$&&M.schema===R&&M.table===S&&M.filter===E)d.push(Object.assign(Object.assign({},k),{id:M.id}));else{this.unsubscribe(),this.state=at.errored,e==null||e(qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=d,e&&e(qt.SUBSCRIBED);return}}).receive("error",h=>{this.state=at.errored,e==null||e(qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=at.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new _i(this,Rt.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new _i(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:h}=Rt;if(n&&[a,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,t,n);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var d,v,k;return((d=p.filter)===null||d===void 0?void 0:d.event)==="*"||((k=(v=p.filter)===null||v===void 0?void 0:v.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var d,v,k,$,R,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const E=p.id,M=(d=p.filter)===null||d===void 0?void 0:d.event;return E&&((v=t.ids)===null||v===void 0?void 0:v.includes(E))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((k=t.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const E=(R=($=p==null?void 0:p.filter)===null||$===void 0?void 0:$.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return E==="*"||E===((S=t==null?void 0:t.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const d=m.data,{schema:v,table:k,commit_timestamp:$,type:R,errors:S}=d;m=Object.assign(Object.assign({},{schema:v,table:k,commit_timestamp:$,eventType:R,new:{},old:{},errors:S}),this._getPayloadRecords(d))}p.callback(m,n)})}_isClosed(){return this.state===at.closed}_isJoined(){return this.state===at.joined}_isJoining(){return this.state===at.joining}_isLeaving(){return this.state===at.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Do.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Rt.close,{},e)}_onError(e){this._on(Rt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=at.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=La(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=La(e.columns,e.old_record)),t}}const Na=()=>{},mp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vp{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ru,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Na,this.ref=0,this.logger=Na,this.conn=null,this.sendBuffer=[],this.serializer=new cp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Pe(async()=>{const{default:c}=await Promise.resolve().then(()=>mn);return{default:c}},void 0,import.meta.url).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Yi.websocket}`,this.httpEndpoint=au(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new iu(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=rp),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ap}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ln.connecting:return Ms.Connecting;case Ln.open:return Ms.Open;case Ln.closing:return Ms.Closing;default:return Ms.Closed}}isConnected(){return this.connectionState()===Ms.Open}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new Do(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const r={access_token:t,version:op};t&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(Rt.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(lp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:i,ref:o}=t;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Rt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([mp],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class Uo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function st(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class yp extends Uo{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Zi extends Uo{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var wp=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):r(h.value).then(a,c)}u((n=n.apply(s,e||[])).next())})};const lu=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Pe(async()=>{const{default:n}=await Promise.resolve().then(()=>mn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},bp=()=>wp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pe(()=>Promise.resolve().then(()=>mn),void 0,import.meta.url)).Response:Response}),eo=s=>{if(Array.isArray(s))return s.map(t=>eo(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=eo(n)}),e};var Bs=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):r(h.value).then(a,c)}u((n=n.apply(s,e||[])).next())})};const ki=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),_p=(s,e,t)=>Bs(void 0,void 0,void 0,function*(){const n=yield bp();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{e(new yp(ki(r),s.status||500))}).catch(r=>{e(new Zi(ki(r),r))}):e(new Zi(ki(s),s))}),kp=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),t))};function ir(s,e,t,n,r,i){return Bs(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,kp(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>_p(c,a,n))})})}function Rr(s,e,t,n){return Bs(this,void 0,void 0,function*(){return ir(s,"GET",e,t,n)})}function us(s,e,t,n,r){return Bs(this,void 0,void 0,function*(){return ir(s,"POST",e,n,r,t)})}function Sp(s,e,t,n,r){return Bs(this,void 0,void 0,function*(){return ir(s,"PUT",e,n,r,t)})}function Cp(s,e,t,n){return Bs(this,void 0,void 0,function*(){return ir(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function cu(s,e,t,n,r){return Bs(this,void 0,void 0,function*(){return ir(s,"DELETE",e,n,r,t)})}var gt=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):r(h.value).then(a,c)}u((n=n.apply(s,e||[])).next())})};const $p={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ka={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pp{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=lu(r)}uploadOrUpdate(e,t,n,r){return gt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ka),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(st(i))return{data:null,error:i};throw i}})}upload(e,t,n){return gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return gt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:Ka.upsert},r),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:h}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(st(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return gt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield us(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Uo("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}})}update(e,t,n){return gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return gt(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}copy(e,t,n){return gt(this,void 0,void 0,function*(){try{return{data:{path:(yield us(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return gt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield us(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return gt(this,void 0,void 0,function*(){try{const r=yield us(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}download(e,t){return gt(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Rr(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(st(a))return{data:null,error:a};throw a}})}info(e){return gt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Rr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:eo(n),error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}})}exists(e){return gt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Cp(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(st(n)&&n instanceof Zi){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return gt(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(st(t))return{data:null,error:t};throw t}})}list(e,t,n){return gt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},$p),t),{prefix:e||""});return{data:yield us(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Tp="2.7.1",Ep={"X-Client-Info":`storage-js/${Tp}`};var Vs=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):r(h.value).then(a,c)}u((n=n.apply(s,e||[])).next())})};class Ap{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Ep),t),this.fetch=lu(n)}listBuckets(){return Vs(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(st(e))return{data:null,error:e};throw e}})}getBucket(e){return Vs(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(st(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Vs(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Vs(this,void 0,void 0,function*(){try{return{data:yield Sp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Vs(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(st(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Vs(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(st(t))return{data:null,error:t};throw t}})}}class Ip extends Ap{constructor(e,t={},n){super(e,t,n)}from(e){return new Pp(this.url,this.headers,e,this.fetch)}}const Rp="2.52.1";let Tn="";typeof Deno<"u"?Tn="deno":typeof document<"u"?Tn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tn="react-native":Tn="node";const Mp={"X-Client-Info":`supabase-js-${Tn}/${Rp}`},Op={headers:Mp},jp={schema:"public"},Lp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Dp={};var Up=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):r(h.value).then(a,c)}u((n=n.apply(s,e||[])).next())})};const xp=s=>{let e;return s?e=s:typeof fetch>"u"?e=Vc:e=fetch,(...t)=>e(...t)},Np=()=>typeof Headers>"u"?Gc:Headers,Kp=(s,e,t)=>{const n=xp(t),r=Np();return(i,o)=>Up(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:s;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Fp=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):r(h.value).then(a,c)}u((n=n.apply(s,e||[])).next())})};function Bp(s){return s.endsWith("/")?s:s+"/"}function zp(s,e){var t,n;const{db:r,auth:i,realtime:o,global:a}=s,{db:c,auth:u,realtime:h,global:f}=e,m={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Fp(this,void 0,void 0,function*(){return""})};return s.accessToken?m.accessToken=s.accessToken:delete m.accessToken,m}const uu="2.71.1",Zs=30*1e3,to=3,Si=to*Zs,Hp="http://localhost:9999",Wp="supabase.auth.token",qp={"X-Client-Info":`gotrue-js/${uu}`},so="X-Supabase-Api-Version",du={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Vp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gp=10*60*1e3;class xo extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Se(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Jp extends xo{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Qp(s){return Se(s)&&s.name==="AuthApiError"}class hu extends xo{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class bs extends xo{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class os extends bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yp(s){return Se(s)&&s.name==="AuthSessionMissingError"}class hr extends bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fr extends bs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pr extends bs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xp(s){return Se(s)&&s.name==="AuthImplicitGrantRedirectError"}class Fa extends bs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class no extends bs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ci(s){return Se(s)&&s.name==="AuthRetryableFetchError"}class Ba extends bs{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class ro extends bs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),za=` 	
\r=`.split(""),Zp=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<za.length;e+=1)s[za[e].charCodeAt(0)]=-2;for(let e=0;e<Mr.length;e+=1)s[Mr[e].charCodeAt(0)]=e;return s})();function Ha(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Mr[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Mr[n]),e.queuedBits-=6}}function fu(s,e,t){const n=Zp[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Wa(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{sg(o,n,t)};for(let o=0;o<s.length;o+=1)fu(s.charCodeAt(o),r,i);return e.join("")}function eg(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function tg(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}eg(n,e)}}function sg(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if(!(s>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ng(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<s.length;r+=1)fu(s.charCodeAt(r),t,n);return new Uint8Array(e)}function rg(s){const e=[];return tg(s,t=>e.push(t)),new Uint8Array(e)}function ig(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};return s.forEach(r=>Ha(r,t,n)),Ha(null,t,n),e.join("")}function og(s){return Math.round(Date.now()/1e3)+s}function ag(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const It=()=>typeof window<"u"&&typeof document<"u",$s={tested:!1,writable:!1},pu=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($s.tested)return $s.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),$s.tested=!0,$s.writable=!0}catch{$s.tested=!0,$s.writable=!1}return $s.writable};function lg(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const gu=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Pe(async()=>{const{default:n}=await Promise.resolve().then(()=>mn);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},cg=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",en=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Ps=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ss=async(s,e)=>{await s.removeItem(e)};class ri{constructor(){this.promise=new ri.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ri.promiseConstructor=Promise;function $i(s){const e=s.split(".");if(e.length!==3)throw new ro("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Vp.test(e[n]))throw new ro("JWT not in base64url format");return{header:JSON.parse(Wa(e[0])),payload:JSON.parse(Wa(e[1])),signature:ng(e[2]),raw:{header:e[0],payload:e[1]}}}async function ug(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function dg(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function hg(s){return("0"+s.toString(16)).substr(-2)}function fg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,hg).join("")}async function pg(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function gg(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await pg(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gs(s,e,t=!1){const n=fg();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await en(s,`${e}-code-verifier`,r);const i=await gg(n);return[i,n===i?"plain":"s256"]}const mg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vg(s){const e=s.headers.get(so);if(!e||!e.match(mg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yg(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function wg(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Js(s){if(!bg.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pi(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qa(s){return JSON.parse(JSON.stringify(s))}var _g=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const Is=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),kg=[502,503,504];async function Va(s){var e;if(!cg(s))throw new no(Is(s),0);if(kg.includes(s.status))throw new no(Is(s),s.status);let t;try{t=await s.json()}catch(i){throw new hu(Is(i),i)}let n;const r=vg(s);if(r&&r.getTime()>=du["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Ba(Is(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new os}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ba(Is(t),s.status,t.weak_password.reasons);throw new Jp(Is(t),s.status||500,n)}const Sg=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function Ee(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[so]||(i[so]=du["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Cg(s,e,t+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Cg(s,e,t,n,r,i){const o=Sg(e,n,r,i);let a;try{a=await s(t,Object.assign({},o))}catch(c){throw console.error(c),new no(Is(c),0)}if(a.ok||await Va(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(c){await Va(c)}}function Ht(s){var e;let t=null;Eg(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=og(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function Ga(s){const e=Ht(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function hs(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function $g(s){return{data:s,error:null}}function Pg(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,o=_g(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Tg(s){return s}function Eg(s){return s.access_token&&s.refresh_token&&s.expires_in}const Ti=["global","local","others"];var Ag=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class Ig{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=gu(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Ti[0]){if(Ti.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ti.join(", ")}`);try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:hs})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Ag(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Pg,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Se(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hs})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Tg});if(h.error)throw h.error;const f=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(d=>{const v=parseInt(d.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(d.split(";")[1].split("=")[1]);u[`${k}Page`]=v}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Se(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Js(e);try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hs})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Js(e);try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:hs})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Js(e);try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:hs})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Js(e.userId);try{const{data:t,error:n}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Js(e.userId),Js(e.id);try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}}}function Ja(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function Rg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qs={debug:!!(globalThis&&pu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Mg extends mu{}async function Og(s,e,t){Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Mg(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Qs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Rg();const jg={url:Hp,storageKey:Wp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Qa(s,e,t){return await t()}const Ys={};class Qn{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qn.nextInstanceID,Qn.nextInstanceID+=1,this.instanceID>0&&It()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},jg),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Ig({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=gu(r.fetch),this.lock=r.lock||Qa,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:It()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Og:this.lock=Qa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:pu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ja(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Ja(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Ys[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ys[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${uu}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=lg(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),It()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Xp(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Se(t)?{error:t}:{error:new hu("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ht}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Se(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:h,password:f,options:m}=e;let p=null,d=null;this.flowType==="pkce"&&([p,d]=await Gs(this.storage,this.storageKey)),i=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:d},xform:Ht})}else if("phone"in e){const{phone:h,password:f,options:m}=e;i=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ht})}else throw new fr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Se(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ga})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ga})}else throw new fr("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new hr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,i,o,a,c,u,h,f,m,p;let d,v;if("message"in e)d=e.message,v=e.signature;else{const{chain:k,wallet:$,statement:R,options:S}=e;let E;if(It())if(typeof $=="object")E=$;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))E=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=$}const M=new URL((t=S==null?void 0:S.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in E&&E.signIn){const A=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),R?{statement:R}:null));let D;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")D=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)D=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)d=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),v=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");d=[`${M.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(r=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=S==null?void 0:S.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((f=(h=S==null?void 0:S.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...S.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const A=await E.signMessage(new TextEncoder().encode(d),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=A}}try{const{data:k,error:$}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:d,signature:ig(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ht});if($)throw $;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new hr}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:$})}catch(k){if(Se(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const t=await Ps(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:o}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ht});if(await ss(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new hr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(Se(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,a=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ht}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new hr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Gs(this.storage,this.storageKey));const{error:f}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:h}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new fr("You must provide either an email or phone number.")}catch(a){if(Se(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Ht});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if(Se(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Gs(this.storage,this.storageKey)),await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:$g})}catch(i){if(Se(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new os;const{error:r}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Se(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await Ee(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await Ee(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new fr("You must provide either an email or phone number and a type")}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ps(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Si:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Ps(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Pi()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hs}):await this._useSession(async t=>{var n,r,i;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new os}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:hs})})}catch(t){if(Se(t))return Yp(t)&&(await this._removeSession(),await ss(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new os;const o=r.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Gs(this.storage,this.storageKey));const{data:u,error:h}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:hs});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new os;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=$i(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Se(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new os;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!It())throw new pr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Fa("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Fa("No code detected.");const{data:R,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!i||!a||!o||!u)throw new pr("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(a);let m=h+f;c&&(m=parseInt(c));const p=m-h;p*1e3<=Zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const d=m-f;h-d>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",d,m,h):h-d<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",d,m,h);const{data:v,error:k}=await this._getUser(i);if(k)throw k;const $={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:e.type},error:null}}catch(n){if(Se(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ps(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Qp(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ss(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=ag(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Gs(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Se(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var o,a,c,u,h;const{data:f,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return It()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Se(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await dg(async r=>(r>0&&await ug(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ht})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Ci(i)&&Date.now()+o-n<Zs})}catch(n){if(this._debug(t,"error",n),Se(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),It()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Ps(this.storage,this.storageKey);if(r&&this.userStorage){let o=await Ps(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await en(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Pi()}else if(r&&!r.user&&!r.user){const o=await Ps(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await ss(this.storage,this.storageKey+"-user"),await en(this.storage,this.storageKey,r)):r.user=Pi()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Si;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Si}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Ci(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(r.access_token);!a&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ri;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new os;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),Se(i)){const o={session:null,error:i};return Ci(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await en(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const i=qa(r);await en(this.storage,this.storageKey,i)}else{const r=qa(t);await en(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await ss(this.storage,this.storageKey),await ss(this.storage,this.storageKey+"-code-verifier"),await ss(this.storage,this.storageKey+"-user"),this.userStorage&&await ss(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Zs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Zs}ms, refresh threshold is ${to} ticks`),r<=to&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof mu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Gs(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Se(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Se(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=$i(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+Gp>r)return n;const{data:i,error:o}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:p,error:d}=await this.getSession();if(d||!p.session)return{data:null,error:d};n=p.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:c}}=$i(n);t!=null&&t.allowExpired||yg(i.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:r,signature:o},error:null}}const h=wg(r.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,rg(`${a}.${c}`)))throw new ro("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}}Qn.nextInstanceID=0;const Lg=Qn;class Dg extends Lg{constructor(e){super(e)}}var Ug=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):r(h.value).then(a,c)}u((n=n.apply(s,e||[])).next())})};class xg{constructor(e,t,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=Bp(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:jp,realtime:Dp,auth:Object.assign(Object.assign({},Lp),{storageKey:u}),global:Op},f=zp(n??{},h);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=Kp(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new sp(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Rf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ip(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ug(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:a,debug:c},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dg({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:o,lock:a,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new vp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ng=(s,e,t)=>new xg(s,e,t);function Kg(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const s=process.version.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Kg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fg=!0,Ya={url:"https://yxywzsmggvxxujuplyly.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl4eXd6c21nZ3Z4eHVqdXBseWx5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1NTk2ODUsImV4cCI6MjA2OTEzNTY4NX0.8w3JYOmbmJKdzz9H0_GfgspIfb0SfjjOvkyxPNvFVSM"};/*! Capacitor: https://capacitorjs.com/ - MIT License */const Bg=s=>{const e=new Map;e.set("web",{name:"web"});const t=s.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(i,o)=>{t.platforms.set(i,o)},r=i=>{t.platforms.has(i)&&(t.currentPlatform=t.platforms.get(i))};return t.addPlatform=n,t.setPlatform=r,t},zg=s=>s.CapacitorPlatforms=Bg(s),vu=zg(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});vu.addPlatform;vu.setPlatform;var un;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(un||(un={}));class Ei extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Hg=s=>{var e,t;return s!=null&&s.androidBridge?"android":!((t=(e=s==null?void 0:s.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Wg=s=>{var e,t,n,r,i;const o=s.CapacitorCustomPlatform||null,a=s.Capacitor||{},c=a.Plugins=a.Plugins||{},u=s.CapacitorPlatforms,h=()=>o!==null?o.name:Hg(s),f=((e=u==null?void 0:u.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||h,m=()=>f()!=="web",p=((t=u==null?void 0:u.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||m,d=D=>{const K=E.get(D);return!!(K!=null&&K.platforms.has(f())||$(D))},v=((n=u==null?void 0:u.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||d,k=D=>{var K;return(K=a.PluginHeaders)===null||K===void 0?void 0:K.find(W=>W.name===D)},$=((r=u==null?void 0:u.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||k,R=D=>s.console.error(D),S=(D,K,W)=>Promise.reject(`${W} does not have an implementation of "${K}".`),E=new Map,M=(D,K={})=>{const W=E.get(D);if(W)return console.warn(`Capacitor plugin "${D}" already registered. Cannot register plugins twice.`),W.proxy;const se=f(),oe=$(D);let V;const I=async()=>(!V&&se in K?V=typeof K[se]=="function"?V=await K[se]():V=K[se]:o!==null&&!V&&"web"in K&&(V=typeof K.web=="function"?V=await K.web():V=K.web),V),T=(Z,ae)=>{var fe,Le;if(oe){const _e=oe==null?void 0:oe.methods.find(De=>ae===De.name);if(_e)return _e.rtype==="promise"?De=>a.nativePromise(D,ae.toString(),De):(De,ve)=>a.nativeCallback(D,ae.toString(),De,ve);if(Z)return(fe=Z[ae])===null||fe===void 0?void 0:fe.bind(Z)}else{if(Z)return(Le=Z[ae])===null||Le===void 0?void 0:Le.bind(Z);throw new Ei(`"${D}" plugin is not implemented on ${se}`,un.Unimplemented)}},z=Z=>{let ae;const fe=(...Le)=>{const _e=I().then(De=>{const ve=T(De,Z);if(ve){const j=ve(...Le);return ae=j==null?void 0:j.remove,j}else throw new Ei(`"${D}.${Z}()" is not implemented on ${se}`,un.Unimplemented)});return Z==="addListener"&&(_e.remove=async()=>ae()),_e};return fe.toString=()=>`${Z.toString()}() { [capacitor code] }`,Object.defineProperty(fe,"name",{value:Z,writable:!1,configurable:!1}),fe},ne=z("addListener"),X=z("removeListener"),ie=(Z,ae)=>{const fe=ne({eventName:Z},ae),Le=async()=>{const De=await fe;X({eventName:Z,callbackId:De},ae)},_e=new Promise(De=>fe.then(()=>De({remove:Le})));return _e.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Le()},_e},L=new Proxy({},{get(Z,ae){switch(ae){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return oe?ie:ne;case"removeListener":return X;default:return z(ae)}}});return c[D]=L,E.set(D,{name:D,proxy:L,platforms:new Set([...Object.keys(K),...oe?[se]:[]])}),L},A=((i=u==null?void 0:u.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||M;return a.convertFileSrc||(a.convertFileSrc=D=>D),a.getPlatform=f,a.handleError=R,a.isNativePlatform=p,a.isPluginAvailable=v,a.pluginMethodNoop=S,a.registerPlugin=A,a.Exception=Ei,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},qg=s=>s.Capacitor=Wg(s),Qe=qg(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),zs=Qe.registerPlugin;Qe.Plugins;class yu{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const i=async()=>this.removeListener(e,t),o=Promise.resolve({remove:i});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),o}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new Qe.Exception(e,un.Unimplemented)}unavailable(e="not available"){return new Qe.Exception(e,un.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Xa=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Za=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Vg extends yu{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[r,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=Za(r).trim(),i=Za(i).trim(),t[r]=i}),t}async setCookie(e){try{const t=Xa(e.key),n=Xa(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${i}; ${o};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}zs("CapacitorCookies",{web:()=>new Vg});const Gg=async s=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const r=n.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},n.onerror=r=>t(r),n.readAsDataURL(s)}),Jg=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(r=>r.toLocaleLowerCase()).reduce((r,i,o)=>(r[i]=s[e[o]],r),{})},Qg=(s,e=!0)=>s?Object.entries(s).reduce((n,r)=>{const[i,o]=r;let a,c;return Array.isArray(o)?(c="",o.forEach(u=>{a=e?encodeURIComponent(u):u,c+=`${i}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(o):o,c=`${i}=${a}`),`${n}&${c}`},"").substr(1):null,Yg=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),r=Jg(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(r.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(s.data||{}))i.set(o,a);t.body=i.toString()}else if(r.includes("multipart/form-data")||s.data instanceof FormData){const i=new FormData;if(s.data instanceof FormData)s.data.forEach((a,c)=>{i.append(c,a)});else for(const a of Object.keys(s.data))i.append(a,s.data[a]);t.body=i;const o=new Headers(t.headers);o.delete("content-type"),t.headers=o}else(r.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class Xg extends yu{async request(e){const t=Yg(e,e.webFetchExtra),n=Qg(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,i=await fetch(r,t),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let c,u;switch(a){case"arraybuffer":case"blob":u=await i.blob(),c=await Gg(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const h={};return i.headers.forEach((f,m)=>{h[m]=f}),{data:c,headers:h,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}zs("CapacitorHttp",{web:()=>new Xg});const ue=Ng(Ya.url,Ya.anonKey,{auth:{autoRefreshToken:!0,persistSession:!Qe.isNativePlatform(),detectSessionInUrl:!0,storage:Qe.isNativePlatform()?{getItem:async s=>null,setItem:async(s,e)=>{},removeItem:async s=>{}}:void 0}});console.log("Supabase   :",!!ue);console.log("Supabase auth:",!!ue.auth);console.log("Supabase URL :",ue.supabaseUrl);var Pl;console.log("Supabase Key :",((Pl=ue.supabaseKey)==null?void 0:Pl.substring(0,20))+"...");const tt={supabase:ue,async getCurrentUser(){try{console.log("authService.getCurrentUser ");const s=new Promise((o,a)=>{setTimeout(()=>a(new Error("Timeout")),5e3)}),e=ue.auth.getSession(),{data:{session:t},error:n}=await Promise.race([e,s]);if(n)return console.log("  :",n.message),null;if(!t||!t.user)return console.log("  "),null;const r=new Date().getTime(),i=t.expires_at?t.expires_at*1e3:0;return i>0&&r>i?(console.log(" "),null):(console.log("getCurrentUser :",t.user),t.user)}catch(s){return console.log("getCurrentUser :",s.message),null}},async signUp(s,e,t){console.log(" Supabase  :",{email:s,userData:t});try{s==="chetchet@nate.com"&&console.log("  rate limit , 1      ");const n=`${window.location.origin}/auth/callback`;console.log("   with redirectTo:",n);const{data:r,error:i}=await ue.auth.signUp({email:s,password:e,options:{emailRedirectTo:n,data:t||{}}});if(console.log("   :",r),console.log("  :",i),i)throw i.message.includes("rate limit")||i.status===429?(console.error("    . 1      "),new Error("   . 1       .")):(console.error(" Supabase   :",{message:i.message,status:i.status,statusText:i.statusText,details:i}),i);return console.log("  "),r}catch(n){throw console.error("  :",n),n}},async signIn(s,e){var t;console.log("  :",s);try{console.log(" Supabase URL:",ue.supabaseUrl),console.log(" Supabase Key :",((t=ue.supabaseKey)==null?void 0:t.substring(0,20))+"...");const{data:n,error:r}=await ue.auth.signInWithPassword({email:s,password:e});if(console.log("   :",n),console.log("  :",r),r)throw console.error(" Supabase   :",{message:r.message,status:r.status,statusText:r.statusText,details:r}),r.message.includes("Invalid login credentials")?new Error("    ."):r.message.includes("Email not confirmed")?new Error("   .  ."):r.message.includes("Database error querying schema")?(console.error("    -    ."),new Error("   .    .")):new Error(r.message||"   .");if(n.user){console.log("  ,   ...");try{const{data:i,error:o}=await ue.from("profiles").select("id, email, name, is_premium").eq("id",n.user.id).single();o?console.warn("   :",o.message):console.log("   :",i)}catch(i){console.warn("    :",i)}}return console.log("  "),n}catch(n){throw console.error("  :",n),n}},async signInWithGoogle(){try{const s=Qe.isNativePlatform()?"com.tarotgarden.app://auth/callback":`${window.location.origin}/auth/callback`;console.log(" Google OAuth , redirectTo:",s);const{data:e,error:t}=await ue.auth.signInWithOAuth({provider:"google",options:{redirectTo:s,queryParams:{access_type:"offline",prompt:"consent"}}});if(t)throw console.error(" Google OAuth :",t),t;return console.log(" Google OAuth URL :",e.url),e}catch(s){throw console.error(" Google  :",s),s}},async signInWithGitHub(){const{data:s,error:e}=await ue.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e;return s},async signInWithDiscord(){const{data:s,error:e}=await ue.auth.signInWithOAuth({provider:"discord",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e;return s},async signOut(){const{error:s}=await ue.auth.signOut();if(s)throw s},async refreshSession(){const{data:s,error:e}=await ue.auth.refreshSession();if(e)throw e;return s},async resetPassword(s){const{error:e}=await ue.auth.resetPasswordForEmail(s,{redirectTo:`${window.location.origin}/auth/reset-password`});if(e)throw e},async updatePassword(s){const{error:e}=await ue.auth.updateUser({password:s});if(e)throw e},async updateProfile(s){const{error:e}=await ue.auth.updateUser({data:s});if(e)throw e},onAuthStateChange(s){return ue.auth.onAuthStateChange(s)},async resendConfirmation(s){const{error:e}=await ue.auth.resend({type:"signup",email:s});if(e)throw e}},Zg={async getAllCards(){const{data:s,error:e}=await ue.from("tarot_cards").select("*").order("id");if(e)throw console.error("   :",e),e;return console.log("   :",(s==null?void 0:s.length)+""),s},async getMajorArcana(){const{data:s,error:e}=await ue.from("tarot_cards").select("*").eq("arcana","major").order("number");if(e)throw e;return s},async getMinorArcana(){const{data:s,error:e}=await ue.from("tarot_cards").select("*").eq("arcana","minor").order("id");if(e)throw e;return s},async getCardsBySuit(s){const{data:e,error:t}=await ue.from("tarot_cards").select("*").eq("suit",s).order("number");if(t)throw t;return e}},em={async getAllSpreads(){const{data:s,error:e}=await ue.from("tarot_spreads").select("*").order("card_count");if(e)throw console.error("   :",e),e;return console.log("   :",(s==null?void 0:s.length)+""),s},async getFreeSpreads(){const{data:s,error:e}=await ue.from("tarot_spreads").select("*").eq("is_premium",!1).order("card_count");if(e)throw e;return s},async getSpreadsByTopic(s){const{data:e,error:t}=await ue.from("tarot_spreads").select("*").contains("topics",[s]).order("card_count");if(t)throw t;return e}},gr={async createSubscription(s){var n;const{data:e,error:t}=await ue.from("subscriptions").insert({...s,start_date:s.start_date.toISOString(),end_date:((n=s.end_date)==null?void 0:n.toISOString())??null}).select().single();if(t)throw t;return e},async getCurrentSubscription(s){const{data:e,error:t}=await ue.from("subscriptions").select("*").eq("user_id",s).order("start_date",{ascending:!1}).limit(1).maybeSingle();if(t)throw t;return e},async cancelSubscription(s){const{data:e,error:t}=await ue.from("subscriptions").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",s).select().single();if(t)throw t;return e}},Je=qc("user",()=>{const s=G(null),e=Ce(()=>!!s.value&&!s.value.isAnonymous),t=Ce(()=>{var L;return((L=s.value)==null?void 0:L.isPremium)||!1}),n=G(!1),r=G(!1),i=G(0),o=G(null),a=Ce(()=>!0),c=()=>(h(),{canUse:!0,remaining:-1,total:-1,used:i.value}),u=()=>new Date().toDateString(),h=()=>{const L=u();o.value!==L&&(i.value=0,o.value=L,f())},f=()=>{const L={count:i.value,date:o.value};localStorage.setItem("tarot_free_readings",JSON.stringify(L))},m=()=>{try{const L=localStorage.getItem("tarot_free_readings");if(L){const Z=JSON.parse(L);i.value=Z.count||0,o.value=Z.date,h()}else o.value=u(),i.value=0,f()}catch(L){console.error("    :",L),o.value=u(),i.value=0,f()}},p=()=>{t.value||(h(),i.value++,f())},d=()=>{i.value=0,o.value=u(),f()},v=async L=>{var Z;try{const ae=await tt.getCurrentUser();if(!ae||ae.id!==L)return console.log("       "),!1;const{data:{user:fe}}=await tt.supabase.auth.getUser();if(((Z=fe==null?void 0:fe.user_metadata)==null?void 0:Z.is_premium)!==void 0)return fe.user_metadata.is_premium;const{data:Le,error:_e}=await tt.supabase.from("profiles").select("is_premium").eq("id",L).maybeSingle();return _e?(console.log("   (   ):",_e.message),!1):(Le==null?void 0:Le.is_premium)||!1}catch(ae){return console.log("    :",ae.message),!1}},k=async(L,Z)=>{try{const{data:ae}=await tt.supabase.from("profiles").select("id").eq("id",L).maybeSingle();if(!ae){console.log("  :",L);const{error:fe}=await tt.supabase.from("profiles").insert({id:L,email:Z,is_premium:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(fe)return console.error("  :",fe),!1;console.log("  ")}return!0}catch(ae){return console.error(" / :",ae),!1}},$=async(L,Z=!0)=>{try{await k(L);const{error:ae}=await tt.supabase.from("profiles").update({is_premium:Z}).eq("id",L);if(ae)throw ae;return s.value&&(s.value.isPremium=Z,A()),console.log(` ${L}   ${Z} `),!0}catch(ae){return console.error("   :",ae),!1}},R=async()=>{s.value&&!s.value.isAnonymous?await $(s.value.id,!0)&&console.log("  "):s.value&&(s.value.isPremium=!0,A())},S=async()=>{s.value&&!s.value.isAnonymous?await $(s.value.id,!1)&&console.log("  "):s.value&&(s.value.isPremium=!1,A())},E=async()=>{if(s.value&&!s.value.isAnonymous){const L=await v(s.value.id);return s.value.isPremium=L,A(),console.log("  :",L),L}return!1},M=()=>({id:`anon_${Date.now()}`,createdAt:new Date,lastLoginAt:new Date,isAnonymous:!0,isPremium:!1,preferences:{theme:"dark",language:"ko",notifications:{dailyReading:!0,weeklyInsight:!1,promotions:!0,newFeatures:!1,weeklyReport:!1},soundEnabled:!0,vibrationEnabled:!0,autoSaveReadings:!0,privateProfile:!1}}),A=()=>{try{s.value&&(localStorage.setItem("tarot_user",JSON.stringify(s.value)),console.log("  :",s.value.isAnonymous?"":""))}catch(L){console.error("  :",L)}},D=()=>{console.log("  ");try{const L=localStorage.getItem("tarot_user");if(L){const Z=JSON.parse(L);if(Z&&typeof Z=="object"&&Z.id){s.value=Z,console.log("  :",Z.isAnonymous?"":"");return}}console.log("  ,    "),s.value=M(),A()}catch(L){console.error("  :",L),s.value=M(),A()}};return{currentUser:s,isLoggedIn:e,isPremium:t,isLoading:n,isInitialized:r,freeReadingsToday:i,canUseFreeReading:a,getFreeReadingStatus:c,initializeUser:async()=>{var L,Z,ae,fe,Le,_e;console.log("===    ===");try{n.value=!0,m(),D(),console.log("    :",(L=s.value)!=null&&L.isAnonymous?"":"");const De=!Qe.isNativePlatform();console.log("Supabase   :",De?"  - ":"  - ");try{let ve=null;if(De)ve=await tt.getCurrentUser(),console.log("Supabase   :",ve?"logged_in":"not_logged_in");else{const{data:{session:j}}=await tt.supabase.auth.getSession();j!=null&&j.user&&(ve=j.user,console.log("  :",ve.email))}if(ve&&ve.email_confirmed_at){console.log("  ,   ..."),await k(ve.id,ve.email);let j=!1;try{j=await v(ve.id),console.log(" :",j)}catch(re){console.warn("   :",re)}s.value={id:ve.id,email:ve.email,name:((Z=ve.user_metadata)==null?void 0:Z.name)||ve.email.split("@")[0],phone:(ae=ve.user_metadata)==null?void 0:ae.phone,avatarUrl:(fe=ve.user_metadata)==null?void 0:fe.avatar_url,createdAt:new Date(ve.created_at),lastLoginAt:new Date,isAnonymous:!1,isPremium:j,preferences:((Le=s.value)==null?void 0:Le.preferences)||{theme:"dark",language:"ko",notifications:{dailyReading:!0,weeklyInsight:!0,promotions:!0,newFeatures:!0,weeklyReport:!1},soundEnabled:!0,vibrationEnabled:!0,autoSaveReadings:!0,privateProfile:!1}},A(),console.log("    ")}else ve&&!ve.email_confirmed_at?(console.log("   -   "),((_e=s.value)==null?void 0:_e.isAnonymous)!==!1&&(s.value=M(),A())):(console.log("  "),s.value&&!s.value.isAnonymous&&(console.log("      "),s.value=M(),A()))}catch(ve){console.warn("Supabase    (  ):",ve.message)}Qe.isNativePlatform()||tt.onAuthStateChange(async(ve,j)=>{var re,ee,le,Re;if(console.log("  :",ve),ve==="SIGNED_IN"&&(j!=null&&j.user)){const g=j.user;await k(g.id,g.email);let y=!1;try{y=await v(g.id)}catch(_){console.warn("     :",_)}s.value={id:g.id,email:g.email,name:((re=g.user_metadata)==null?void 0:re.name)||g.email.split("@")[0],phone:(ee=g.user_metadata)==null?void 0:ee.phone,avatarUrl:(le=g.user_metadata)==null?void 0:le.avatar_url,createdAt:new Date(g.created_at),lastLoginAt:new Date,isAnonymous:!1,isPremium:y,preferences:((Re=s.value)==null?void 0:Re.preferences)||{theme:"dark",language:"ko",notifications:{dailyReading:!0,weeklyInsight:!0,promotions:!0,newFeatures:!0,weeklyReport:!1},soundEnabled:!0,vibrationEnabled:!0,autoSaveReadings:!0,privateProfile:!1}},A(),console.log("   ")}else ve==="SIGNED_OUT"&&(console.log("  "),s.value=M(),A())})}catch(De){console.error("  :",De),s.value||(s.value=M(),A())}finally{n.value=!1,r.value=!0,console.log("  ")}},login:async(L,Z)=>{var ae,fe,Le;try{n.value=!0;const{user:_e}=await tt.signIn(L,Z);if(_e){await k(_e.id,_e.email);const De=await v(_e.id);console.log("   :",De),s.value={id:_e.id,email:_e.email,name:((ae=_e.user_metadata)==null?void 0:ae.name)||L.split("@")[0],phone:(fe=_e.user_metadata)==null?void 0:fe.phone,avatarUrl:(Le=_e.user_metadata)==null?void 0:Le.avatar_url,createdAt:new Date(_e.created_at),lastLoginAt:new Date,isAnonymous:!1,isPremium:De,preferences:{theme:"dark",language:"ko",notifications:{dailyReading:!0,weeklyInsight:!0,promotions:!0,newFeatures:!0,weeklyReport:!1},soundEnabled:!0,vibrationEnabled:!0,autoSaveReadings:!0,privateProfile:!1}},A()}}catch(_e){throw console.error(" :",_e),_e}finally{n.value=!1}},signUp:async(L,Z,ae)=>{try{n.value=!0;const{user:fe}=await tt.signUp(L,Z,ae);fe&&console.log(" :",{email:L,userData:ae})}catch(fe){throw console.error(" :",fe),fe}finally{n.value=!1}},signInWithGoogle:async()=>{try{n.value=!0;const{oauthService:L}=await Pe(async()=>{const{oauthService:Z}=await Promise.resolve().then(()=>dm);return{oauthService:Z}},void 0,import.meta.url);await L.signInWithGoogle()}catch(L){throw console.error("Google  :",L),n.value=!1,L}},signInWithGitHub:async()=>{try{n.value=!0,await tt.signInWithGitHub()}catch(L){throw console.error("GitHub  :",L),n.value=!1,L}},logout:async()=>{try{n.value=!0,await tt.signOut(),s.value=M(),A()}catch(L){console.error(" :",L),s.value=M(),A()}finally{n.value=!1}},updatePreferences:async L=>{if(s.value)try{const Z={...s.value.preferences,...L};s.value.preferences=Z,A()}catch(Z){throw console.error("  :",Z),Z}},updateProfile:async L=>{if(!(!s.value||s.value.isAnonymous))try{L.name&&(s.value.name=L.name),L.phone&&(s.value.phone=L.phone),L.avatarUrl&&(s.value.avatarUrl=L.avatarUrl),A()}catch(Z){throw console.error("  :",Z),Z}},updateSubscription:async L=>{if(!(!s.value||s.value.isAnonymous))try{s.value.subscription=L,s.value.isPremium=L.status==="active",A()}catch(Z){throw console.error("   :",Z),Z}},resetPassword:async L=>{try{await tt.resetPassword(L),console.log("   :",L)}catch(Z){throw console.error("  :",Z),Z}},resendVerificationEmail:async L=>{try{await tt.resendConfirmation(L),console.log("  :",L)}catch(Z){throw console.error("   :",Z),Z}},incrementFreeReading:p,resetFreeReadings:d,upgradeToPremium:R,downgradeToPremium:S,refreshPremiumStatus:E,setTestAccountPremium:$,checkPremiumStatus:v,ensureProfileExists:k}}),Or=Object.freeze(Object.defineProperty({__proto__:null,useUserStore:Je},Symbol.toStringTag,{value:"Module"})),tm={key:0,class:"premium-test-panel"},sm={class:"panel-content"},nm={class:"user-info"},rm={class:"actions"},im=["disabled"],om=["disabled"],am={key:0,class:"free-readings-info"},lm={class:"reading-stats"},cm=Ze({__name:"PremiumTestPanel",setup(s){const e=G(!1);let t=null;const n=Ce(()=>(t==null?void 0:t.isPremium)||!1),r=Ce(()=>(t==null?void 0:t.currentUser)||null),i=Ce(()=>r.value?r.value.isAnonymous?" ":`${r.value.email} (${r.value.name})`:""),o=Ce(()=>{const m=(t==null?void 0:t.getFreeReadingStatus())||{used:0,total:-1,remaining:-1};return{used:m.used,total:m.total===-1?"":m.total,remaining:m.remaining===-1?"":m.remaining}}),a=()=>{e.value=!e.value};window.addEventListener("toggle-test-panel",()=>{e.value=!e.value});const c=async()=>{if(t)try{await t.upgradeToPremium(),alert(" ! ")}catch(m){alert(" : "+m)}},u=async()=>{if(t)try{await t.downgradeToPremium(),alert("  ! ")}catch(m){alert(" : "+m)}},h=async()=>{if(t)try{await t.refreshPremiumStatus(),alert(" ! ")}catch(m){alert(" : "+m)}},f=()=>{t&&(t.resetFreeReadings(),alert("   ! "))};return pt(()=>{t=Je()}),(m,p)=>e.value?(w(),b("div",tm,[l("div",{class:"panel-header"},[p[0]||(p[0]=l("h3",null,"   ",-1)),l("button",{class:"close-btn",onClick:a},"")]),l("div",sm,[l("div",nm,[l("p",null,[p[1]||(p[1]=l("strong",null,":",-1)),Ae(" "+C(i.value),1)]),l("p",null,[p[2]||(p[2]=l("strong",null," :",-1)),l("span",{class:B({premium:n.value,free:!n.value})},C(n.value?" ":" "),3)])]),l("div",rm,[l("button",{class:"btn premium-btn",onClick:c,disabled:n.value},"    ",8,im),l("button",{class:"btn downgrade-btn",onClick:u,disabled:!n.value},"    ",8,om),l("button",{class:"btn refresh-btn",onClick:h},"    ")]),n.value?O("",!0):(w(),b("div",am,[p[3]||(p[3]=l("h4",null,"  ",-1)),l("div",lm,[l("p",null," : "+C(o.value.used)+" / "+C(o.value.total),1),l("p",null," : "+C(o.value.remaining),1),l("button",{class:"btn reset-btn",onClick:f},"     ")])]))])])):O("",!0)}}),et=(s,e)=>{const t=s.__vccOpts||s;for(const[n,r]of e)t[n]=r;return t},um=et(cm,[["__scopeId","data-v-d1cf42c6"]]),el=zs("Browser",{web:()=>Pe(()=>import("./web-KdtLds6A.js"),[],import.meta.url).then(s=>new s.BrowserWeb)}),dn=zs("App",{web:()=>Pe(()=>import("./web-BE1jnOsL.js"),[],import.meta.url).then(s=>new s.AppWeb)}),Ai=Object.freeze(Object.defineProperty({__proto__:null,App:dn},Symbol.toStringTag,{value:"Module"})),Un={async setupDeepLinkListener(){Qe.isNativePlatform()&&dn.addListener("appUrlOpen",async s=>{if(console.log(" Deep link received:",s.url),s.url.includes("auth/callback")||s.url.includes("login-callback")){console.log(" Processing OAuth callback...");try{let e=null,t=null;if(s.url.includes("#")){const n=s.url.split("#")[1],r=new URLSearchParams(n);e=r.get("access_token"),t=r.get("refresh_token")}if(!e&&s.url.includes("?")){const n=s.url.split("?")[1],r=new URLSearchParams(n);e=r.get("access_token"),t=r.get("refresh_token")}if(console.log(" Tokens found:",{access_token:e?"Yes":"No",refresh_token:t?"Yes":"No"}),e&&t){try{await el.close()}catch{console.log(" Browser already closed")}await this.setSession(e,t),console.log(" Dispatching oauth-success event"),window.dispatchEvent(new CustomEvent("oauth-success")),this.authSuccessCallback&&this.authSuccessCallback()}else console.log(" No tokens in URL, checking session..."),await this.restoreSession()&&(console.log(" Session restored, dispatching oauth-success event"),window.dispatchEvent(new CustomEvent("oauth-success")),this.authSuccessCallback&&this.authSuccessCallback())}catch(e){console.error(" OAuth callback processing error:",e)}}})},async setSession(s,e){var t;try{const{data:n,error:r}=await ue.auth.setSession({access_token:s,refresh_token:e});if(r)throw r;if(console.log("   :",(t=n.user)==null?void 0:t.email),Qe.isNativePlatform()){console.log("  OAuth: localStorage ");const i=localStorage.getItem("tarot_user");if(i)try{JSON.parse(i).isAnonymous||(localStorage.removeItem("tarot_user"),console.log("    "))}catch(o){console.error(" localStorage  :",o)}}return n}catch(n){throw console.error("   :",n),n}},async signInWithGoogle(){try{if(Qe.isNativePlatform()){const s="com.tarotgarden.app://auth/callback",{data:e,error:t}=await ue.auth.signInWithOAuth({provider:"google",options:{redirectTo:s,queryParams:{access_type:"offline",prompt:"consent"}}});if(t)throw t;return await el.open({url:e.url,presentationStyle:"popover",toolbarColor:"#1E1B4B"}),{success:!0,url:e.url}}else{const s=`${window.location.origin}/auth/callback`,{data:e,error:t}=await ue.auth.signInWithOAuth({provider:"google",options:{redirectTo:s}});if(t)throw t;return{success:!0,url:e.url}}}catch(s){throw console.error(" Google OAuth :",s),s}},authSuccessCallback:null,setAuthSuccessCallback(s){this.authSuccessCallback=s},async restoreSession(){var s,e,t,n;try{if(Qe.isNativePlatform()){console.log("  : OAuth  ");const{data:{session:c},error:u}=await ue.auth.getSession();return c?(console.log(" OAuth  :",(s=c.user)==null?void 0:s.email),c):(console.log(" :  "),null)}const{data:{session:r},error:i}=await ue.auth.getSession();if(i)throw i;if(r)return console.log("   :",(e=r.user)==null?void 0:e.email),r;const{data:o,error:a}=await ue.auth.refreshSession();return a?(console.log("  refresh :",a.message),null):(console.log("  refresh :",(n=(t=o.session)==null?void 0:t.user)==null?void 0:n.email),o.session)}catch(r){return console.error("   :",r),null}},async checkAuthStatus(){try{const{data:{user:s},error:e}=await ue.auth.getUser();return e||!s?(console.log("   "),{isAuthenticated:!1,user:null}):(console.log("  :",s.email),{isAuthenticated:!0,user:s})}catch(s){return console.error("    :",s),{isAuthenticated:!1,user:null}}}},dm=Object.freeze(Object.defineProperty({__proto__:null,oauthService:Un},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const tn=typeof document<"u";function wu(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function hm(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&wu(s.default)}const Ne=Object.assign;function Ii(s,e){const t={};for(const n in e){const r=e[n];t[n]=Lt(r)?r.map(s):s(r)}return t}const xn=()=>{},Lt=Array.isArray,bu=/#/g,fm=/&/g,pm=/\//g,gm=/=/g,mm=/\?/g,_u=/\+/g,vm=/%5B/g,ym=/%5D/g,ku=/%5E/g,wm=/%60/g,Su=/%7B/g,bm=/%7C/g,Cu=/%7D/g,_m=/%20/g;function No(s){return encodeURI(""+s).replace(bm,"|").replace(vm,"[").replace(ym,"]")}function km(s){return No(s).replace(Su,"{").replace(Cu,"}").replace(ku,"^")}function io(s){return No(s).replace(_u,"%2B").replace(_m,"+").replace(bu,"%23").replace(fm,"%26").replace(wm,"`").replace(Su,"{").replace(Cu,"}").replace(ku,"^")}function Sm(s){return io(s).replace(gm,"%3D")}function Cm(s){return No(s).replace(bu,"%23").replace(mm,"%3F")}function $m(s){return s==null?"":Cm(s).replace(pm,"%2F")}function Yn(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const Pm=/\/$/,Tm=s=>s.replace(Pm,"");function Ri(s,e,t="/"){let n,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(n=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=s(i)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=Rm(n??e,t),{fullPath:n+(i&&"?")+i+o,path:n,query:r,hash:Yn(o)}}function Em(s,e){const t=e.query?s(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function tl(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function Am(s,e,t){const n=e.matched.length-1,r=t.matched.length-1;return n>-1&&n===r&&hn(e.matched[n],t.matched[r])&&$u(e.params,t.params)&&s(e.query)===s(t.query)&&e.hash===t.hash}function hn(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function $u(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(!Im(s[t],e[t]))return!1;return!0}function Im(s,e){return Lt(s)?sl(s,e):Lt(e)?sl(e,s):s===e}function sl(s,e){return Lt(e)?s.length===e.length&&s.every((t,n)=>t===e[n]):s.length===1&&s[0]===e}function Rm(s,e){if(s.startsWith("/"))return s;if(!s)return e;const t=e.split("/"),n=s.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=t.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+n.slice(o).join("/")}const ns={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Xn;(function(s){s.pop="pop",s.push="push"})(Xn||(Xn={}));var Nn;(function(s){s.back="back",s.forward="forward",s.unknown=""})(Nn||(Nn={}));function Mm(s){if(!s)if(tn){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),Tm(s)}const Om=/^[^#]+#/;function jm(s,e){return s.replace(Om,"#")+e}function Lm(s,e){const t=document.documentElement.getBoundingClientRect(),n=s.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const ii=()=>({left:window.scrollX,top:window.scrollY});function Dm(s){let e;if("el"in s){const t=s.el,n=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=Lm(r,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function nl(s,e){return(history.state?history.state.position-e:-1)+s}const oo=new Map;function Um(s,e){oo.set(s,e)}function xm(s){const e=oo.get(s);return oo.delete(s),e}let Nm=()=>location.protocol+"//"+location.host;function Pu(s,e){const{pathname:t,search:n,hash:r}=e,i=s.indexOf("#");if(i>-1){let a=r.includes(s.slice(i))?s.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),tl(c,"")}return tl(t,s)+n+r}function Km(s,e,t,n){let r=[],i=[],o=null;const a=({state:m})=>{const p=Pu(s,location),d=t.value,v=e.value;let k=0;if(m){if(t.value=p,e.value=m,o&&o===d){o=null;return}k=v?m.position-v.position:0}else n(p);r.forEach($=>{$(t.value,d,{delta:k,type:Xn.pop,direction:k?k>0?Nn.forward:Nn.back:Nn.unknown})})};function c(){o=t.value}function u(m){r.push(m);const p=()=>{const d=r.indexOf(m);d>-1&&r.splice(d,1)};return i.push(p),p}function h(){const{history:m}=window;m.state&&m.replaceState(Ne({},m.state,{scroll:ii()}),"")}function f(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function rl(s,e,t,n=!1,r=!1){return{back:s,current:e,forward:t,replaced:n,position:window.history.length,scroll:r?ii():null}}function Fm(s){const{history:e,location:t}=window,n={value:Pu(s,t)},r={value:e.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const f=s.indexOf("#"),m=f>-1?(t.host&&document.querySelector("base")?s:s.slice(f))+c:Nm()+s+c;try{e[h?"replaceState":"pushState"](u,"",m),r.value=u}catch(p){console.error(p),t[h?"replace":"assign"](m)}}function o(c,u){const h=Ne({},e.state,rl(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,h,!0),n.value=c}function a(c,u){const h=Ne({},r.value,e.state,{forward:c,scroll:ii()});i(h.current,h,!0);const f=Ne({},rl(n.value,c,null),{position:h.position+1},u);i(c,f,!1),n.value=c}return{location:n,state:r,push:a,replace:o}}function Bm(s){s=Mm(s);const e=Fm(s),t=Km(s,e.state,e.location,e.replace);function n(i,o=!0){o||t.pauseListeners(),history.go(i)}const r=Ne({location:"",base:s,go:n,createHref:jm.bind(null,s)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function zm(s){return typeof s=="string"||s&&typeof s=="object"}function Tu(s){return typeof s=="string"||typeof s=="symbol"}const Eu=Symbol("");var il;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(il||(il={}));function fn(s,e){return Ne(new Error,{type:s,[Eu]:!0},e)}function zt(s,e){return s instanceof Error&&Eu in s&&(e==null||!!(s.type&e))}const ol="[^/]+?",Hm={sensitive:!1,strict:!1,start:!0,end:!0},Wm=/[.+*?^${}()[\]/\\]/g;function qm(s,e){const t=Ne({},Hm,e),n=[];let r=t.start?"^":"";const i=[];for(const u of s){const h=u.length?[]:[90];t.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const m=u[f];let p=40+(t.sensitive?.25:0);if(m.type===0)f||(r+="/"),r+=m.value.replace(Wm,"\\$&"),p+=40;else if(m.type===1){const{value:d,repeatable:v,optional:k,regexp:$}=m;i.push({name:d,repeatable:v,optional:k});const R=$||ol;if(R!==ol){p+=10;try{new RegExp(`(${R})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${d}" (${R}): `+E.message)}}let S=v?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;f||(S=k&&u.length<2?`(?:/${S})`:"/"+S),k&&(S+="?"),r+=S,p+=20,k&&(p+=-8),v&&(p+=-20),R===".*"&&(p+=-50)}h.push(p)}n.push(h)}if(t.strict&&t.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let m=1;m<h.length;m++){const p=h[m]||"",d=i[m-1];f[d.name]=p&&d.repeatable?p.split("/"):p}return f}function c(u){let h="",f=!1;for(const m of s){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const p of m)if(p.type===0)h+=p.value;else if(p.type===1){const{value:d,repeatable:v,optional:k}=p,$=d in u?u[d]:"";if(Lt($)&&!v)throw new Error(`Provided param "${d}" is an array but it is not repeatable (* or + modifiers)`);const R=Lt($)?$.join("/"):$;if(!R)if(k)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${d}"`);h+=R}}return h||"/"}return{re:o,score:n,keys:i,parse:a,stringify:c}}function Vm(s,e){let t=0;for(;t<s.length&&t<e.length;){const n=e[t]-s[t];if(n)return n;t++}return s.length<e.length?s.length===1&&s[0]===80?-1:1:s.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Au(s,e){let t=0;const n=s.score,r=e.score;for(;t<n.length&&t<r.length;){const i=Vm(n[t],r[t]);if(i)return i;t++}if(Math.abs(r.length-n.length)===1){if(al(n))return 1;if(al(r))return-1}return r.length-n.length}function al(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const Gm={type:0,value:""},Jm=/[a-zA-Z0-9_]/;function Qm(s){if(!s)return[[]];if(s==="/")return[[Gm]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(p){throw new Error(`ERR (${t})/"${u}": ${p}`)}let t=0,n=t;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,u="",h="";function f(){u&&(t===0?i.push({type:0,value:u}):t===1||t===2||t===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;a<s.length;){if(c=s[a++],c==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),t=1):m();break;case 4:m(),t=n;break;case 1:c==="("?t=2:Jm.test(c)?m():(f(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:t=3:h+=c;break;case 3:f(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}function Ym(s,e,t){const n=qm(Qm(s.path),t),r=Ne(n,{record:s,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Xm(s,e){const t=[],n=new Map;e=dl({strict:!1,end:!0,sensitive:!1},e);function r(f){return n.get(f)}function i(f,m,p){const d=!p,v=cl(f);v.aliasOf=p&&p.record;const k=dl(e,f),$=[v];if("alias"in f){const E=typeof f.alias=="string"?[f.alias]:f.alias;for(const M of E)$.push(cl(Ne({},v,{components:p?p.record.components:v.components,path:M,aliasOf:p?p.record:v})))}let R,S;for(const E of $){const{path:M}=E;if(m&&M[0]!=="/"){const A=m.record.path,D=A[A.length-1]==="/"?"":"/";E.path=m.record.path+(M&&D+M)}if(R=Ym(E,m,k),p?p.alias.push(R):(S=S||R,S!==R&&S.alias.push(R),d&&f.name&&!ul(R)&&o(f.name)),Iu(R)&&c(R),v.children){const A=v.children;for(let D=0;D<A.length;D++)i(A[D],R,p&&p.children[D])}p=p||R}return S?()=>{o(S)}:xn}function o(f){if(Tu(f)){const m=n.get(f);m&&(n.delete(f),t.splice(t.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=t.indexOf(f);m>-1&&(t.splice(m,1),f.record.name&&n.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function c(f){const m=tv(f,t);t.splice(m,0,f),f.record.name&&!ul(f)&&n.set(f.record.name,f)}function u(f,m){let p,d={},v,k;if("name"in f&&f.name){if(p=n.get(f.name),!p)throw fn(1,{location:f});k=p.record.name,d=Ne(ll(m.params,p.keys.filter(S=>!S.optional).concat(p.parent?p.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),f.params&&ll(f.params,p.keys.map(S=>S.name))),v=p.stringify(d)}else if(f.path!=null)v=f.path,p=t.find(S=>S.re.test(v)),p&&(d=p.parse(v),k=p.record.name);else{if(p=m.name?n.get(m.name):t.find(S=>S.re.test(m.path)),!p)throw fn(1,{location:f,currentLocation:m});k=p.record.name,d=Ne({},m.params,f.params),v=p.stringify(d)}const $=[];let R=p;for(;R;)$.unshift(R.record),R=R.parent;return{name:k,path:v,params:d,matched:$,meta:ev($)}}s.forEach(f=>i(f));function h(){t.length=0,n.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function ll(s,e){const t={};for(const n of e)n in s&&(t[n]=s[n]);return t}function cl(s){const e={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:Zm(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Zm(s){const e={},t=s.props||!1;if("component"in s)e.default=t;else for(const n in s.components)e[n]=typeof t=="object"?t[n]:t;return e}function ul(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function ev(s){return s.reduce((e,t)=>Ne(e,t.meta),{})}function dl(s,e){const t={};for(const n in s)t[n]=n in e?e[n]:s[n];return t}function tv(s,e){let t=0,n=e.length;for(;t!==n;){const i=t+n>>1;Au(s,e[i])<0?n=i:t=i+1}const r=sv(s);return r&&(n=e.lastIndexOf(r,n-1)),n}function sv(s){let e=s;for(;e=e.parent;)if(Iu(e)&&Au(s,e)===0)return e}function Iu({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function nv(s){const e={};if(s===""||s==="?")return e;const n=(s[0]==="?"?s.slice(1):s).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(_u," "),o=i.indexOf("="),a=Yn(o<0?i:i.slice(0,o)),c=o<0?null:Yn(i.slice(o+1));if(a in e){let u=e[a];Lt(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function hl(s){let e="";for(let t in s){const n=s[t];if(t=Sm(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(Lt(n)?n.map(i=>i&&io(i)):[n&&io(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function rv(s){const e={};for(const t in s){const n=s[t];n!==void 0&&(e[t]=Lt(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const iv=Symbol(""),fl=Symbol(""),oi=Symbol(""),Ko=Symbol(""),ao=Symbol("");function kn(){let s=[];function e(n){return s.push(n),()=>{const r=s.indexOf(n);r>-1&&s.splice(r,1)}}function t(){s=[]}return{add:e,list:()=>s.slice(),reset:t}}function ds(s,e,t,n,r,i=o=>o()){const o=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,c)=>{const u=m=>{m===!1?c(fn(4,{from:t,to:e})):m instanceof Error?c(m):zm(m)?c(fn(2,{from:e,to:m})):(o&&n.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),a())},h=i(()=>s.call(n&&n.instances[r],e,t,u));let f=Promise.resolve(h);s.length<3&&(f=f.then(u)),f.catch(m=>c(m))})}function Mi(s,e,t,n,r=i=>i()){const i=[];for(const o of s)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(wu(c)){const h=(c.__vccOpts||c)[e];h&&i.push(ds(h,t,n,o,a,r))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=hm(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&ds(p,t,n,o,a,r)()}))}}return i}function pl(s){const e=Pt(oi),t=Pt(Ko),n=Ce(()=>{const c=de(s.to);return e.resolve(c)}),r=Ce(()=>{const{matched:c}=n.value,{length:u}=c,h=c[u-1],f=t.matched;if(!h||!f.length)return-1;const m=f.findIndex(hn.bind(null,h));if(m>-1)return m;const p=gl(c[u-2]);return u>1&&gl(h)===p&&f[f.length-1].path!==p?f.findIndex(hn.bind(null,c[u-2])):m}),i=Ce(()=>r.value>-1&&uv(t.params,n.value.params)),o=Ce(()=>r.value>-1&&r.value===t.matched.length-1&&$u(t.params,n.value.params));function a(c={}){if(cv(c)){const u=e[de(s.replace)?"replace":"push"](de(s.to)).catch(xn);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:Ce(()=>n.value.href),isActive:i,isExactActive:o,navigate:a}}function ov(s){return s.length===1?s[0]:s}const av=Ze({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:pl,setup(s,{slots:e}){const t=er(pl(s)),{options:n}=Pt(oi),r=Ce(()=>({[ml(s.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[ml(s.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&ov(e.default(t));return s.custom?i:wt("a",{"aria-current":t.isExactActive?s.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},i)}}}),lv=av;function cv(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function uv(s,e){for(const t in e){const n=e[t],r=s[t];if(typeof n=="string"){if(n!==r)return!1}else if(!Lt(r)||r.length!==n.length||n.some((i,o)=>i!==r[o]))return!1}return!0}function gl(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const ml=(s,e,t)=>s??e??t,dv=Ze({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:t}){const n=Pt(ao),r=Ce(()=>s.route||n.value),i=Pt(fl,0),o=Ce(()=>{let u=de(i);const{matched:h}=r.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=Ce(()=>r.value.matched[o.value]);yr(fl,Ce(()=>o.value+1)),yr(iv,a),yr(ao,r);const c=G();return Yt(()=>[c.value,a.value,s.name],([u,h,f],[m,p,d])=>{h&&(h.instances[f]=u,p&&p!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=p.leaveGuards),h.updateGuards.size||(h.updateGuards=p.updateGuards))),u&&h&&(!p||!hn(h,p)||!m)&&(h.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=r.value,h=s.name,f=a.value,m=f&&f.components[h];if(!m)return vl(t.default,{Component:m,route:u});const p=f.props[h],d=p?p===!0?u.params:typeof p=="function"?p(u):p:null,k=wt(m,Ne({},d,e,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return vl(t.default,{Component:k,route:u})||k}}});function vl(s,e){if(!s)return null;const t=s(e);return t.length===1?t[0]:t}const hv=dv;function fv(s){const e=Xm(s.routes,s),t=s.parseQuery||nv,n=s.stringifyQuery||hl,r=s.history,i=kn(),o=kn(),a=kn(),c=_d(ns);let u=ns;tn&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ii.bind(null,j=>""+j),f=Ii.bind(null,$m),m=Ii.bind(null,Yn);function p(j,re){let ee,le;return Tu(j)?(ee=e.getRecordMatcher(j),le=re):le=j,e.addRoute(le,ee)}function d(j){const re=e.getRecordMatcher(j);re&&e.removeRoute(re)}function v(){return e.getRoutes().map(j=>j.record)}function k(j){return!!e.getRecordMatcher(j)}function $(j,re){if(re=Ne({},re||c.value),typeof j=="string"){const _=Ri(t,j,re.path),P=e.resolve({path:_.path},re),U=r.createHref(_.fullPath);return Ne(_,P,{params:m(P.params),hash:Yn(_.hash),redirectedFrom:void 0,href:U})}let ee;if(j.path!=null)ee=Ne({},j,{path:Ri(t,j.path,re.path).path});else{const _=Ne({},j.params);for(const P in _)_[P]==null&&delete _[P];ee=Ne({},j,{params:f(_)}),re.params=f(re.params)}const le=e.resolve(ee,re),Re=j.hash||"";le.params=h(m(le.params));const g=Em(n,Ne({},j,{hash:km(Re),path:le.path})),y=r.createHref(g);return Ne({fullPath:g,hash:Re,query:n===hl?rv(j.query):j.query||{}},le,{redirectedFrom:void 0,href:y})}function R(j){return typeof j=="string"?Ri(t,j,c.value.path):Ne({},j)}function S(j,re){if(u!==j)return fn(8,{from:re,to:j})}function E(j){return D(j)}function M(j){return E(Ne(R(j),{replace:!0}))}function A(j){const re=j.matched[j.matched.length-1];if(re&&re.redirect){const{redirect:ee}=re;let le=typeof ee=="function"?ee(j):ee;return typeof le=="string"&&(le=le.includes("?")||le.includes("#")?le=R(le):{path:le},le.params={}),Ne({query:j.query,hash:j.hash,params:le.path!=null?{}:j.params},le)}}function D(j,re){const ee=u=$(j),le=c.value,Re=j.state,g=j.force,y=j.replace===!0,_=A(ee);if(_)return D(Ne(R(_),{state:typeof _=="object"?Ne({},Re,_.state):Re,force:g,replace:y}),re||ee);const P=ee;P.redirectedFrom=re;let U;return!g&&Am(n,le,ee)&&(U=fn(16,{to:P,from:le}),ae(le,le,!0,!1)),(U?Promise.resolve(U):se(P,le)).catch(N=>zt(N)?zt(N,2)?N:Z(N):ie(N,P,le)).then(N=>{if(N){if(zt(N,2))return D(Ne({replace:y},R(N.to),{state:typeof N.to=="object"?Ne({},Re,N.to.state):Re,force:g}),re||P)}else N=V(P,le,!0,y,Re);return oe(P,le,N),N})}function K(j,re){const ee=S(j,re);return ee?Promise.reject(ee):Promise.resolve()}function W(j){const re=_e.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(j):j()}function se(j,re){let ee;const[le,Re,g]=pv(j,re);ee=Mi(le.reverse(),"beforeRouteLeave",j,re);for(const _ of le)_.leaveGuards.forEach(P=>{ee.push(ds(P,j,re))});const y=K.bind(null,j,re);return ee.push(y),ve(ee).then(()=>{ee=[];for(const _ of i.list())ee.push(ds(_,j,re));return ee.push(y),ve(ee)}).then(()=>{ee=Mi(Re,"beforeRouteUpdate",j,re);for(const _ of Re)_.updateGuards.forEach(P=>{ee.push(ds(P,j,re))});return ee.push(y),ve(ee)}).then(()=>{ee=[];for(const _ of g)if(_.beforeEnter)if(Lt(_.beforeEnter))for(const P of _.beforeEnter)ee.push(ds(P,j,re));else ee.push(ds(_.beforeEnter,j,re));return ee.push(y),ve(ee)}).then(()=>(j.matched.forEach(_=>_.enterCallbacks={}),ee=Mi(g,"beforeRouteEnter",j,re,W),ee.push(y),ve(ee))).then(()=>{ee=[];for(const _ of o.list())ee.push(ds(_,j,re));return ee.push(y),ve(ee)}).catch(_=>zt(_,8)?_:Promise.reject(_))}function oe(j,re,ee){a.list().forEach(le=>W(()=>le(j,re,ee)))}function V(j,re,ee,le,Re){const g=S(j,re);if(g)return g;const y=re===ns,_=tn?history.state:{};ee&&(le||y?r.replace(j.fullPath,Ne({scroll:y&&_&&_.scroll},Re)):r.push(j.fullPath,Re)),c.value=j,ae(j,re,ee,y),Z()}let I;function T(){I||(I=r.listen((j,re,ee)=>{if(!De.listening)return;const le=$(j),Re=A(le);if(Re){D(Ne(Re,{replace:!0,force:!0}),le).catch(xn);return}u=le;const g=c.value;tn&&Um(nl(g.fullPath,ee.delta),ii()),se(le,g).catch(y=>zt(y,12)?y:zt(y,2)?(D(Ne(R(y.to),{force:!0}),le).then(_=>{zt(_,20)&&!ee.delta&&ee.type===Xn.pop&&r.go(-1,!1)}).catch(xn),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),ie(y,le,g))).then(y=>{y=y||V(le,g,!1),y&&(ee.delta&&!zt(y,8)?r.go(-ee.delta,!1):ee.type===Xn.pop&&zt(y,20)&&r.go(-1,!1)),oe(le,g,y)}).catch(xn)}))}let z=kn(),ne=kn(),X;function ie(j,re,ee){Z(j);const le=ne.list();return le.length?le.forEach(Re=>Re(j,re,ee)):console.error(j),Promise.reject(j)}function L(){return X&&c.value!==ns?Promise.resolve():new Promise((j,re)=>{z.add([j,re])})}function Z(j){return X||(X=!j,T(),z.list().forEach(([re,ee])=>j?ee(j):re()),z.reset()),j}function ae(j,re,ee,le){const{scrollBehavior:Re}=s;if(!tn||!Re)return Promise.resolve();const g=!ee&&xm(nl(j.fullPath,0))||(le||!ee)&&history.state&&history.state.scroll||null;return Fs().then(()=>Re(j,re,g)).then(y=>y&&Dm(y)).catch(y=>ie(y,j,re))}const fe=j=>r.go(j);let Le;const _e=new Set,De={currentRoute:c,listening:!0,addRoute:p,removeRoute:d,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:v,resolve:$,options:s,push:E,replace:M,go:fe,back:()=>fe(-1),forward:()=>fe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ne.add,isReady:L,install(j){const re=this;j.component("RouterLink",lv),j.component("RouterView",hv),j.config.globalProperties.$router=re,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>de(c)}),tn&&!Le&&c.value===ns&&(Le=!0,E(r.location).catch(Re=>{}));const ee={};for(const Re in ns)Object.defineProperty(ee,Re,{get:()=>c.value[Re],enumerable:!0});j.provide(oi,re),j.provide(Ko,Ql(ee)),j.provide(ao,c);const le=j.unmount;_e.add(j),j.unmount=function(){_e.delete(j),_e.size<1&&(u=ns,I&&I(),I=null,c.value=ns,Le=!1,X=!1),le()}}};function ve(j){return j.reduce((re,ee)=>re.then(()=>W(ee)),Promise.resolve())}return De}function pv(s,e){const t=[],n=[],r=[],i=Math.max(e.matched.length,s.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(s.matched.find(u=>hn(u,a))?n.push(a):t.push(a));const c=s.matched[o];c&&(e.matched.find(u=>hn(u,c))||r.push(c))}return[t,n,r]}function Dt(){return Pt(oi)}function Ru(s){return Pt(Ko)}const gv={async logAuthState(){var e,t,n;console.log("===     ==="),console.log(":",Qe.isNativePlatform()?"":"");try{const{data:{session:r}}=await ue.auth.getSession();console.log("Supabase :",r?{user:(e=r.user)==null?void 0:e.email,provider:(n=(t=r.user)==null?void 0:t.app_metadata)==null?void 0:n.provider,expiresAt:new Date(r.expires_at*1e3).toLocaleString()}:"null")}catch(r){console.error("Supabase   :",r)}const s=localStorage.getItem("tarot_user");if(s)try{const r=JSON.parse(s);console.log("localStorage :",{id:r.id,isAnonymous:r.isAnonymous,email:r.email||"none",isPremium:r.isPremium})}catch(r){console.error("localStorage  :",r)}else console.log("localStorage : null");console.log("===   ===")},async clearSession(){console.log("   ...");try{await ue.auth.signOut(),console.log(" Supabase  ")}catch(s){console.error(" Supabase  :",s)}localStorage.removeItem("tarot_user"),localStorage.removeItem("supabase.auth.token"),console.log(" localStorage  "),await this.logAuthState()}};typeof window<"u"&&(window.authDebug=gv);const mv={id:"app"},vv=Ze({__name:"App",setup(s){const e=G(!1),t=Dt();return pt(async()=>{if(console.log("   "),Qe.isNativePlatform()){console.log("    -   ");try{const{data:{session:n}}=await tt.supabase.auth.getSession();if(!n){console.log("  : OAuth  ");const r=localStorage.getItem("tarot_user");r&&(JSON.parse(r).isAnonymous||(console.log("    -   "),localStorage.removeItem("tarot_user")))}}catch(n){console.error("   :",n)}await Un.setupDeepLinkListener(),Un.setAuthSuccessCallback(async()=>{console.log(" OAuth   - userStore    ");const{useUserStore:n}=await Pe(async()=>{const{useUserStore:i}=await Promise.resolve().then(()=>Or);return{useUserStore:i}},void 0,import.meta.url),r=n();await r.initializeUser(),setTimeout(()=>{r.currentUser&&!r.currentUser.isAnonymous?t.push("/app"):t.push("/")},100)}),dn.addListener("appUrlOpen",async n=>{var r,i;if(console.log(" Deep link opened:",n.url),n.url&&(n.url.includes("auth/callback")||n.url.includes("login-callback"))){console.log(" Processing OAuth callback from initial URL...");try{let o=null,a=null;if(n.url.includes("#")){const c=n.url.split("#")[1],u=new URLSearchParams(c);o=u.get("access_token"),a=u.get("refresh_token")}if(console.log(" Tokens extracted:",{access_token:o?"Yes":"No",refresh_token:a?"Yes":"No"}),o&&a){console.log(" Setting session with tokens...");try{const{data:c,error:u}=await tt.supabase.auth.setSession({access_token:o,refresh_token:a});if(console.log(" Session response:",{hasData:!!c,hasSession:!!(c!=null&&c.session),hasError:!!u,error:u==null?void 0:u.message}),!u&&(c!=null&&c.session)){console.log(" Session set successfully:",(r=c.session.user)==null?void 0:r.email),window.dispatchEvent(new CustomEvent("oauth-success"));const{useUserStore:h}=await Pe(async()=>{const{useUserStore:m}=await Promise.resolve().then(()=>Or);return{useUserStore:m}},void 0,import.meta.url),f=h();await f.initializeUser(),console.log(" userStore :",{currentUser:f.currentUser,isLoggedIn:f.isLoggedIn,isAnonymous:(i=f.currentUser)==null?void 0:i.isAnonymous}),setTimeout(()=>{f.currentUser&&!f.currentUser.isAnonymous?(console.log("  : /app"),t.push("/app")):(console.log("  : /"),t.push("/"))},500)}else console.error(" Failed to set session:",u||"No session data"),u!=null&&u.message&&window.dispatchEvent(new CustomEvent("oauth-error",{detail:{message:u.message}}))}catch(c){console.error(" Exception during session setup:",c)}}else console.log(" Missing tokens:",{access_token:!!o,refresh_token:!!a})}catch(o){console.error(" OAuth processing error:",o)}}}),dn.addListener("appStateChange",async n=>{var r;if(n.isActive){console.log("   -  ");const i=await Un.restoreSession();i&&console.log("   :",(r=i.user)==null?void 0:r.email)}})}if(Qe.isNativePlatform())console.log("  :    ");else try{const n=await tt.getCurrentUser();n?console.log("   :",n.email):console.log("   ")}catch(n){console.error("   :",n)}}),(n,r)=>{const i=Vr("router-view");return w(),b("div",mv,[pe(i),e.value?(w(),vt(um,{key:0})):O("",!0)])}}}),Mu={props:{title:String,message:String,confirmText:{type:String,default:""},cancelText:{type:String,default:""},showCancel:{type:Boolean,default:!0}},emits:["confirm","cancel"],setup(s,{emit:e}){const t=()=>{e("confirm")},n=()=>{e("cancel")};return()=>wt("div",{class:"alert-overlay",onClick:n},[wt("div",{class:"alert-container",onClick:r=>r.stopPropagation()},[wt("div",{class:"alert-content"},[wt("h2",{class:"alert-title"},s.title),wt("p",{class:"alert-message"},s.message),wt("div",{class:"alert-buttons"},[s.showCancel&&wt("button",{class:"alert-button alert-button-cancel",onClick:n},s.cancelText),wt("button",{class:"alert-button alert-button-confirm",onClick:t},s.confirmText)])])])])}},Ou=()=>{if(document.getElementById("alert-styles"))return;const s=document.createElement("style");s.id="alert-styles",s.textContent=`
    .alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.2s ease-out;
    }
    
    .alert-container {
      background: #1E1B4B;
      border: 2px solid rgba(168, 85, 247, 0.3);
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      animation: slideIn 0.3s ease-out;
    }
    
    .alert-content {
      text-align: center;
    }
    
    .alert-title {
      color: #A855F7;
      font-size: 24px;
      margin-bottom: 16px;
      font-weight: 600;
    }
    
    .alert-message {
      color: rgba(255, 255, 255, 0.9);
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 24px;
      white-space: pre-line;
    }
    
    .alert-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    
    .alert-button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 100px;
    }
    
    .alert-button-confirm {
      background: linear-gradient(135deg, #A855F7 0%, #7C3AED 100%);
      color: white;
    }
    
    .alert-button-confirm:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
    }
    
    .alert-button-cancel {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .alert-button-cancel:hover {
      background: rgba(255, 255, 255, 0.15);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  `,document.head.appendChild(s)},Be=s=>new Promise(e=>{Ou();const t=document.createElement("div");document.body.appendChild(t);const n=Oo({render(){return wt(Mu,{...s,showCancel:!1,onConfirm:()=>{n.unmount(),document.body.removeChild(t),e()},onCancel:()=>{n.unmount(),document.body.removeChild(t),e()}})}});n.mount(t)}),js=s=>new Promise(e=>{Ou();const t=document.createElement("div");document.body.appendChild(t);const n=Oo({render(){return wt(Mu,{...s,showCancel:s.showCancel!==!1,onConfirm:()=>{n.unmount(),document.body.removeChild(t),e(!0)},onCancel:()=>{n.unmount(),document.body.removeChild(t),e(!1)}})}});n.mount(t)}),yv=Object.freeze(Object.defineProperty({__proto__:null,showAlert:Be,showConfirm:js},Symbol.toStringTag,{value:"Module"})),wv={name:"LoginModal",components:{},props:{isVisible:{type:Boolean,default:!1},initialMode:{type:String,default:"login"}},emits:["close","success","show-email-verification"],setup(s,{emit:e}){const t=Je();console.log("LoginModal setup "),console.log("props.isVisible:",s.isVisible),Yt(()=>s.isVisible,(M,A)=>{console.log(` LoginModal isVisible : ${A} -> ${M}`)},{immediate:!0});const n=G(s.initialMode==="login"),r=G(!1),i=G(!1),o=G(!1),a=G(""),c=G(""),u=G(""),h=G({name:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),f=G({}),m=()=>(f.value={},/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.value.email)||(f.value.email="   "),n.value||(h.value.name.trim()||(f.value.name=" "),/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(h.value.password)||(f.value.password="8 , , ,   "),h.value.password!==h.value.confirmPassword&&(f.value.confirmPassword="  "),h.value.agreeTerms||(f.value.agreeTerms="  ")),Object.keys(f.value).length===0),p=async()=>{if(m()){r.value=!0,a.value="",c.value="";try{n.value?(await t.login(h.value.email,h.value.password),c.value=" !  ...",setTimeout(()=>{e("success","login"),E()},500)):(await t.signUp(h.value.email,h.value.password,{name:h.value.name}),e("show-email-verification",h.value.email),E())}catch(M){a.value=$(M.message)}finally{r.value=!1}}},d=async()=>{r.value=!0,a.value="";let M,A,D;try{M=async()=>{console.log(" OAuth success event received!"),c.value=" !  ...",r.value=!1,D&&clearTimeout(D),window.removeEventListener("oauth-success",M),window.removeEventListener("oauth-error",A);try{await t.initializeUser(),console.log(" userStore  ")}catch(K){console.error(" userStore  :",K)}setTimeout(()=>{e("success","oauth"),E()},500)},A=K=>{var W;console.error(" OAuth error event:",K.detail),a.value=((W=K.detail)==null?void 0:W.message)||"Google    .",r.value=!1,D&&clearTimeout(D),window.removeEventListener("oauth-success",M),window.removeEventListener("oauth-error",A)},window.addEventListener("oauth-success",M),window.addEventListener("oauth-error",A),await t.signInWithGoogle(),D=setTimeout(()=>{r.value&&(console.log(" OAuth timeout - resetting loading state"),r.value=!1,a.value="  .  .",window.removeEventListener("oauth-success",M),window.removeEventListener("oauth-error",A))},3e4)}catch(K){console.error("Google  :",K),a.value="Google    .",r.value=!1,M&&window.removeEventListener("oauth-success",M),A&&window.removeEventListener("oauth-error",A),D&&clearTimeout(D)}},v=async()=>{await Be({title:" ",message:`      .
   .`})},k=async()=>{if(u.value){r.value=!0;try{await t.resetPassword(u.value),c.value="   .",o.value=!1,u.value=""}catch(M){a.value=$(M.message)}finally{r.value=!1}}},$=M=>({"Invalid login credentials":"    ","User already registered":"  ","Password should be at least 6 characters":"  6  ","Invalid email":"   "})[M]||" .  .",R=()=>{console.log("LoginModal  "),E()},S=()=>{n.value=!n.value,a.value="",c.value="",f.value={};const M=h.value.email;h.value={name:"",email:M,password:"",confirmPassword:"",agreeTerms:!1}},E=()=>{e("close"),a.value="",c.value="",f.value={},o.value=!1,h.value={name:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}};return Yt(()=>s.initialMode,M=>{n.value=M==="login"}),{isLoginMode:n,isLoading:r,showPassword:i,showForgotPassword:o,errorMessage:a,successMessage:c,resetEmail:u,formData:h,errors:f,handleEmailAuth:p,handleGoogleLogin:d,handleKakaoLogin:v,handlePasswordReset:k,toggleMode:S,closeModal:E,handleOverlayClick:R}}},bv={class:"login-modal"},_v={class:"modal-header"},kv={class:"modal-title"},Sv={key:0,class:"error-message"},Cv={key:1,class:"success-message"},$v={class:"social-login-section"},Pv=["disabled"],Tv=["disabled"],Ev={key:0,class:"form-group"},Av={key:0,class:"field-error"},Iv={class:"form-group"},Rv={key:0,class:"field-error"},Mv={class:"form-group"},Ov={class:"password-input"},jv=["type"],Lv={key:0,class:"field-error"},Dv={key:1,class:"password-hint"},Uv={key:1,class:"form-group"},xv={key:0,class:"field-error"},Nv={key:2,class:"terms-section"},Kv={class:"checkbox-option"},Fv={key:0,class:"field-error"},Bv=["disabled"],zv={key:0},Hv={key:1},Wv={class:"modal-footer"},qv={class:"mode-switch"},Vv={key:0},Gv={key:1},Jv={key:0,class:"forgot-password"},Qv={key:2,class:"forgot-password-modal"},Yv={class:"modal-content"},Xv={class:"button-group"},Zv=["disabled"];function ey(s,e,t,n,r,i){return w(),vt(je,{name:"modal"},{default:$e(()=>[t.isVisible?(w(),b("div",{key:0,class:"modal-overlay",onClick:e[18]||(e[18]=(...o)=>n.handleOverlayClick&&n.handleOverlayClick(...o))},[l("div",{class:"modal-container",onClick:e[17]||(e[17]=ms(()=>{},["stop"]))},[l("div",bv,[l("div",_v,[l("h2",kv,C(n.isLoginMode?"":""),1),l("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>n.closeModal&&n.closeModal(...o))},"")]),n.errorMessage?(w(),b("div",Sv,C(n.errorMessage),1)):O("",!0),n.successMessage?(w(),b("div",Cv,C(n.successMessage),1)):O("",!0),l("div",$v,[l("button",{class:"social-btn google-btn",onClick:e[1]||(e[1]=(...o)=>n.handleGoogleLogin&&n.handleGoogleLogin(...o)),disabled:n.isLoading},[e[19]||(e[19]=l("svg",{width:"20",height:"20",viewBox:"0 0 48 48",class:"social-icon"},[l("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),l("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),l("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),l("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),l("path",{fill:"none",d:"M0 0h48v48H0z"})],-1)),Ae(" Google "+C(n.isLoginMode?"":""),1)],8,Pv),l("button",{class:"social-btn kakao-btn",onClick:e[2]||(e[2]=(...o)=>n.handleKakaoLogin&&n.handleKakaoLogin(...o)),disabled:n.isLoading},[e[20]||(e[20]=l("svg",{width:"20",height:"20",viewBox:"0 0 48 48",class:"social-icon"},[l("path",{fill:"#3C1E1E",d:"M24 4C12.95 4 4 11.15 4 20c0 5.62 3.58 10.54 9 13.41-.4 1.48-1.44 5.35-1.64 6.19-.25 1.05.39 1.03.82.75.34-.22 5.39-3.68 7.59-5.19 1.38.19 2.79.29 4.23.29 11.05 0 20-7.15 20-16C44 11.15 35.05 4 24 4z"})],-1)),Ae("  "+C(n.isLoginMode?"":"")+" ",1),e[21]||(e[21]=l("span",{class:"coming-soon"},"",-1))],8,Tv)]),e[31]||(e[31]=l("div",{class:"divider"},[l("span",null,"")],-1)),l("form",{onSubmit:e[9]||(e[9]=ms((...o)=>n.handleEmailAuth&&n.handleEmailAuth(...o),["prevent"])),class:"email-form"},[n.isLoginMode?O("",!0):(w(),b("div",Ev,[e[22]||(e[22]=l("label",{for:"name"},"",-1)),St(l("input",{id:"name","onUpdate:modelValue":e[3]||(e[3]=o=>n.formData.name=o),type:"text",placeholder:" ",class:B({error:n.errors.name})},null,2),[[fs,n.formData.name]]),n.errors.name?(w(),b("span",Av,C(n.errors.name),1)):O("",!0)])),l("div",Iv,[e[23]||(e[23]=l("label",{for:"email"},"",-1)),St(l("input",{id:"email","onUpdate:modelValue":e[4]||(e[4]=o=>n.formData.email=o),type:"email",placeholder:" ",class:B({error:n.errors.email}),required:""},null,2),[[fs,n.formData.email]]),n.errors.email?(w(),b("span",Rv,C(n.errors.email),1)):O("",!0)]),l("div",Mv,[e[24]||(e[24]=l("label",{for:"password"},"",-1)),l("div",Ov,[St(l("input",{id:"password","onUpdate:modelValue":e[5]||(e[5]=o=>n.formData.password=o),type:n.showPassword?"text":"password",placeholder:" ",class:B({error:n.errors.password}),required:""},null,10,jv),[[hf,n.formData.password]]),l("button",{type:"button",class:"password-toggle",onClick:e[6]||(e[6]=o=>n.showPassword=!n.showPassword)},C(n.showPassword?"":""),1)]),n.errors.password?(w(),b("span",Lv,C(n.errors.password),1)):O("",!0),n.isLoginMode?O("",!0):(w(),b("div",Dv," 8 , , ,   "))]),n.isLoginMode?O("",!0):(w(),b("div",Uv,[e[25]||(e[25]=l("label",{for:"confirmPassword"}," ",-1)),St(l("input",{id:"confirmPassword","onUpdate:modelValue":e[7]||(e[7]=o=>n.formData.confirmPassword=o),type:"password",placeholder:"  ",class:B({error:n.errors.confirmPassword}),required:""},null,2),[[fs,n.formData.confirmPassword]]),n.errors.confirmPassword?(w(),b("span",xv,C(n.errors.confirmPassword),1)):O("",!0)])),n.isLoginMode?O("",!0):(w(),b("div",Nv,[l("label",Kv,[St(l("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=o=>n.formData.agreeTerms=o),class:B({error:n.errors.agreeTerms}),required:""},null,2),[[Nc,n.formData.agreeTerms]]),e[26]||(e[26]=l("span",null,"    ",-1))]),n.errors.agreeTerms?(w(),b("span",Fv,C(n.errors.agreeTerms),1)):O("",!0)])),l("button",{type:"submit",class:"submit-btn",disabled:n.isLoading},[n.isLoading?(w(),b("span",zv,"...")):(w(),b("span",Hv,C(n.isLoginMode?"":""),1))],8,Bv)],32),l("div",Wv,[l("div",qv,[n.isLoginMode?(w(),b("span",Vv,[e[27]||(e[27]=Ae("  ? ",-1)),l("button",{onClick:e[10]||(e[10]=(...o)=>n.toggleMode&&n.toggleMode(...o)),class:"link-btn"},"")])):(w(),b("span",Gv,[e[28]||(e[28]=Ae("   ? ",-1)),l("button",{onClick:e[11]||(e[11]=(...o)=>n.toggleMode&&n.toggleMode(...o)),class:"link-btn"},"")]))]),n.isLoginMode?(w(),b("div",Jv,[l("button",{onClick:e[12]||(e[12]=o=>n.showForgotPassword=!0),class:"link-btn"},"  ? ")])):O("",!0)]),n.showForgotPassword?(w(),b("div",Qv,[l("div",{class:"modal-overlay",onClick:e[13]||(e[13]=o=>n.showForgotPassword=!1)}),l("div",Yv,[e[29]||(e[29]=l("h3",null," ",-1)),e[30]||(e[30]=l("p",null,"    .",-1)),l("form",{onSubmit:e[16]||(e[16]=ms((...o)=>n.handlePasswordReset&&n.handlePasswordReset(...o),["prevent"]))},[St(l("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>n.resetEmail=o),type:"email",placeholder:" ",required:""},null,512),[[fs,n.resetEmail]]),l("div",Xv,[l("button",{type:"button",onClick:e[15]||(e[15]=o=>n.showForgotPassword=!1)},""),l("button",{type:"submit",disabled:n.isLoading},"",8,Zv)])],32)])])):O("",!0)])])])):O("",!0)]),_:1})}const ju=et(wv,[["render",ey],["__scopeId","data-v-65cdf0bf"]]),ty={class:"verification-modal"},sy={class:"modal-content"},ny={class:"verification-info"},ry={class:"verification-message"},iy={class:"action-buttons"},oy=["disabled"],ay={key:0},ly={key:1},cy={key:2},uy={key:0,class:"success-message"},dy={key:1,class:"error-message"},hy={__name:"EmailVerificationModal",props:{isVisible:{type:Boolean,default:!1},email:{type:String,required:!0}},emits:["close","go-to-login"],setup(s,{emit:e}){const t=s,n=e,r=Je(),i=G(!1),o=G(0),a=G(!1),c=G("");let u=null;const h=()=>{const R=document.querySelector(".verification-modal"),S=document.querySelector(".modal-overlay");if(R&&S){const E=window.innerWidth,M=window.innerHeight;E<=320?(R.style.fontSize="14px",S.style.alignItems="flex-start"):E<=480||E<=640?(R.style.fontSize="15px",S.style.alignItems="flex-start"):(R.style.fontSize="16px",S.style.alignItems="flex-start"),M<=600&&(S.style.alignItems="flex-start",S.style.paddingTop="8px",S.style.paddingBottom="8px"),document.documentElement.style.setProperty("--viewport-width",`${E}px`),document.documentElement.style.setProperty("--viewport-height",`${M}px`)}},f=()=>{o.value=60,u=setInterval(()=>{o.value--,o.value<=0&&(clearInterval(u),u=null)},1e3)},m=async()=>{if(!(i.value||o.value>0)){i.value=!0,c.value="",a.value=!1;try{await r.resendVerificationEmail(t.email),a.value=!0,f(),setTimeout(()=>{a.value=!1},3e3)}catch(R){c.value="  .    .",console.error(" :",R)}finally{i.value=!1}}},p=()=>{n("go-to-login"),v()},d=()=>{v()},v=()=>{n("close"),c.value="",a.value=!1,u&&(clearInterval(u),u=null,o.value=0)};let k=null;const $=()=>{clearTimeout(k),k=setTimeout(h,100)};return Yt(()=>t.isVisible,R=>{if(R)Fs(()=>{h(),window.addEventListener("resize",$,{passive:!0}),window.addEventListener("orientationchange",$,{passive:!0});const S=window.visualViewport;S&&S.addEventListener("resize",$,{passive:!0})});else{window.removeEventListener("resize",$),window.removeEventListener("orientationchange",$);const S=window.visualViewport;S&&S.removeEventListener("resize",$),k&&(clearTimeout(k),k=null)}}),sr(()=>{u&&(clearInterval(u),u=null),k&&(clearTimeout(k),k=null),window.removeEventListener("resize",$),window.removeEventListener("orientationchange",$);const R=window.visualViewport;R&&R.removeEventListener("resize",$)}),(R,S)=>(w(),vt(je,{name:"modal"},{default:$e(()=>[s.isVisible?(w(),b("div",{key:0,class:"modal-overlay",onClick:d},[l("div",{class:"modal-container",onClick:S[0]||(S[0]=ms(()=>{},["stop"]))},[l("div",ty,[l("div",{class:"modal-header"},[S[1]||(S[1]=l("div",{class:"icon-container"},[l("div",{class:"email-icon"},"")],-1)),S[2]||(S[2]=l("h2",{class:"modal-title"}," ",-1)),l("button",{class:"close-btn",onClick:v},"")]),l("div",sy,[l("div",ny,[S[4]||(S[4]=l("h3",null," !",-1)),l("p",ry,[l("strong",null,C(s.email),1),S[3]||(S[3]=Ae("   . ",-1))]),S[5]||(S[5]=l("div",{class:"steps"},[l("div",{class:"step"},[l("span",{class:"step-number"},"1"),l("span",{class:"step-text"},"  ")]),l("div",{class:"step"},[l("span",{class:"step-number"},"2"),l("span",{class:"step-text"},"  ")]),l("div",{class:"step"},[l("span",{class:"step-number"},"3"),l("span",{class:"step-text"},"  ")])],-1)),S[6]||(S[6]=l("div",{class:"warning-box"},[l("div",{class:"warning-icon"},""),l("div",{class:"warning-text"},[l("p",null,[l("strong",null,"  ?")]),l("ul",null,[l("li",null," "),l("li",null,"    "),l("li",null,"     ")])])],-1))]),l("div",iy,[l("button",{class:"resend-btn",onClick:m,disabled:i.value||o.value>0},[o.value>0?(w(),b("span",ay,"   ("+C(o.value)+") ",1)):i.value?(w(),b("span",ly,"  ... ")):(w(),b("span",cy,"     "))],8,oy),l("button",{class:"login-btn",onClick:p},"  ")]),a.value?(w(),b("div",uy,"     ! ")):O("",!0),c.value?(w(),b("div",dy,C(c.value),1)):O("",!0)])])])])):O("",!0)]),_:1}))}},fy=et(hy,[["__scopeId","data-v-d2405328"]]),py={class:"home"},gy={class:"header"},my={class:"header-content"},vy={class:"auth-buttons"},yy={class:"main-content"},wy={class:"hero-section"},by={class:"hero-content"},_y={class:"hero-cta"},ky=Ze({__name:"Home",setup(s){const e=Dt(),t=Je(),n=G(!1),r=G("login"),i=G(!1),o=G("");pt(async()=>{console.log("   "),t.isInitialized||await t.initializeUser(),t.currentUser&&!t.currentUser.isAnonymous?(console.log("   ,   "),e.push("/app")):t.currentUser&&console.log("     ")});const a=(p="login")=>{console.log("   :",p),r.value=p,n.value=!0},c=()=>{console.log("   "),n.value=!1},u=p=>{console.log("  :",p),c(),e.push("/app")},h=p=>{console.log("    :",p),o.value=p,i.value=!0},f=()=>{console.log("    "),i.value=!1,o.value=""},m=()=>{f(),a("login")};return(p,d)=>(w(),b("div",py,[l("header",gy,[l("div",my,[d[3]||(d[3]=l("div",{class:"logo-section"},[l("h1",{class:"app-title"},"  "),l("p",{class:"tagline"},"     ")],-1)),l("div",vy,[l("button",{onClick:d[0]||(d[0]=v=>a("login")),class:"btn btn-login"},"  "),l("button",{onClick:d[1]||(d[1]=v=>a("signup")),class:"btn btn-signup"},"  ")])])]),l("main",yy,[l("section",wy,[l("div",by,[d[5]||(d[5]=l("h2",{class:"hero-title"},[Ae("   "),l("br"),l("span",{class:"highlight"}," "),Ae("  ")],-1)),d[6]||(d[6]=l("p",{class:"hero-description"},[Ae("     "),l("br"),Ae("    ")],-1)),l("div",_y,[l("button",{onClick:d[2]||(d[2]=v=>a("signup")),class:"cta-button"},"    "),d[4]||(d[4]=l("p",{class:"cta-note"},"     ",-1))])]),d[7]||(d[7]=Vn('<div class="hero-visual" data-v-8de8d0d9><div class="floating-cards" data-v-8de8d0d9><div class="card-item" data-v-8de8d0d9></div><div class="card-item" data-v-8de8d0d9></div><div class="card-item" data-v-8de8d0d9></div><div class="card-item" data-v-8de8d0d9></div><div class="card-item" data-v-8de8d0d9></div></div></div>',1))]),d[8]||(d[8]=Vn('<section class="features-section" data-v-8de8d0d9><h3 class="section-title" data-v-8de8d0d9>  </h3><div class="features-grid" data-v-8de8d0d9><div class="feature-card" data-v-8de8d0d9><div class="feature-icon" data-v-8de8d0d9></div><h4 data-v-8de8d0d9> </h4><p data-v-8de8d0d9>       </p></div><div class="feature-card" data-v-8de8d0d9><div class="feature-icon" data-v-8de8d0d9></div><h4 data-v-8de8d0d9> </h4><p data-v-8de8d0d9>     </p></div><div class="feature-card" data-v-8de8d0d9><div class="feature-icon" data-v-8de8d0d9></div><h4 data-v-8de8d0d9> </h4><p data-v-8de8d0d9>3, 5,      </p></div><div class="feature-card" data-v-8de8d0d9><div class="feature-icon" data-v-8de8d0d9></div><h4 data-v-8de8d0d9> </h4><p data-v-8de8d0d9>     </p></div></div></section>',1))]),pe(ju,{isVisible:n.value,initialMode:r.value,onClose:c,onSuccess:u,onShowEmailVerification:h},null,8,["isVisible","initialMode"]),pe(fy,{isVisible:i.value,email:o.value,onClose:f,onGoToLogin:m},null,8,["isVisible","email"])]))}}),Sy=et(ky,[["__scopeId","data-v-8de8d0d9"]]),jr=[{id:"one_card",spreadId:"one_card",name:"One Card Spread",nameKr:"  ",description:"       ",cardCount:1,positions:[{position:1,name:"",description:"   ",x:50,y:50}],isPremium:!1,topics:["general","love","career","money","health"]},{id:"three_card_timeline",spreadId:"three_card_timeline",name:"Past-Present-Future",nameKr:"--",description:"     ",cardCount:3,positions:[{position:1,name:"",description:"     ",x:20,y:50},{position:2,name:"",description:"  ",x:50,y:50},{position:3,name:"",description:"  ",x:80,y:50}],isPremium:!1,topics:["general","love","career","money"]},{id:"seven_star",spreadId:"seven_star",name:"Seven Star",nameKr:" ",description:"7      ",cardCount:7,positions:[{position:1,name:" ",description:"    ",x:50,y:20},{position:2,name:" ",description:"    ",x:50,y:50},{position:3,name:" ",description:"   ",x:20,y:35},{position:4,name:" ",description:"  ",x:80,y:35},{position:5,name:" ",description:"    ",x:20,y:65},{position:6,name:"",description:"  ",x:80,y:65},{position:7,name:" ",description:" ",x:50,y:80}],isPremium:!0,topics:["general","love","career","money"]},{id:"celtic_cross",spreadId:"celtic_cross",name:"Celtic Cross",nameKr:" ",description:"   10  ",cardCount:10,positions:[{position:1,name:"",description:"   ",x:40,y:50},{position:2,name:"",description:"  ",x:40,y:50},{position:3,name:"",description:"   ",x:40,y:80},{position:4,name:"",description:"  ",x:15,y:50},{position:5,name:" ",description:"   ",x:40,y:20},{position:6,name:"",description:"  ",x:65,y:50},{position:7,name:"",description:"   ",x:85,y:80},{position:8,name:"",description:"   ",x:85,y:60},{position:9,name:" ",description:"   ",x:85,y:40},{position:10,name:" ",description:"    ",x:85,y:20}],isPremium:!0,topics:["general","love","career","money"]},{id:"cup_of_relationship",spreadId:"cup_of_relationship",name:"Cup of Relationship",nameKr:"  ",description:"    11  ",cardCount:11,positions:[{position:1,name:"",description:"   ",x:20,y:80},{position:2,name:"",description:"   ",x:80,y:80},{position:3,name:" ",description:"    ",x:50,y:75},{position:4,name:" ",description:"  ",x:35,y:60},{position:5,name:"  ",description:"    ",x:50,y:50},{position:6,name:"  ",description:"    ",x:65,y:60},{position:7,name:"   ?",description:"    ",x:25,y:40},{position:8,name:"   ?",description:"    ",x:75,y:40},{position:9,name:"   ?",description:"   ",x:35,y:20},{position:10,name:"   ?",description:"   ",x:65,y:20},{position:11,name:"",description:"  ",x:50,y:5}],isPremium:!0,topics:["love"]},{id:"career_path",spreadId:"career_path",name:"Career Path",nameKr:" ",description:"   7 ",cardCount:7,positions:[{position:1,name:" ",description:"  ",x:50,y:50},{position:2,name:"",description:"  ",x:25,y:30},{position:3,name:"",description:"  ",x:75,y:30},{position:4,name:"",description:" ",x:25,y:70},{position:5,name:"",description:"  ",x:75,y:70},{position:6,name:"",description:"  ",x:50,y:20},{position:7,name:"",description:" ",x:50,y:80}],isPremium:!0,topics:["career"]}],Sn=s=>jr.find(e=>e.spreadId===s),Cn=s=>jr.filter(e=>e.topics.includes(s));class Cy{constructor(e,t){this.cards=e,this.topic=t}async generateInterpretation(){const e=this.cards.map((c,u)=>({meaning:this.getPositionMeaning(c,u),card:c})),t=this.generateOverallPattern(),n=this.analyzeRelationships(),r=this.extractKeywords(),i=this.generateAdvice(),o=this.generateElementAnalysis(),a=this.generateTimelineAnalysis();return{positions:e,overallPattern:t,relationships:n,keywords:r,advice:i,elementAnalysis:o,timelineAnalysis:a}}getPositionMeaning(e,t){var o,a,c,u;const r=["  ","  ","  ","  ","  ","  ","  ","  "," ","  "][t],i=((a=(o=e.meanings)==null?void 0:o[this.topic])==null?void 0:a[e.orientation])||((u=(c=e.meanings)==null?void 0:c.general)==null?void 0:u[e.orientation])||"     .";return`${r}: ${i}`}generateOverallPattern(){const e=this.cards.filter(r=>r.arcana==="major").length,t=this.cards.filter(r=>r.orientation==="upright").length;let n="";return e>=5?n="    . ":e>=3?n="   . ":n="    . ",t>=7?n+="    .":t<=3?n+="  ,   .":n+=" ,   .",n}analyzeRelationships(){const e=[];this.cards[2].suit===this.cards[0].suit&&this.cards[2].arcana==="minor"&&this.cards[0].arcana==="minor"&&e.push("       ."),this.cards[0].orientation===this.cards[5].orientation&&e.push("      ."),this.cards[6].orientation!==this.cards[8].orientation&&e.push("      .");const t=this.analyzeElements();return t.dominant&&e.push(`${t.dominant}     .`),e}analyzeElements(){const e={fire:0,water:0,air:0,earth:0},t={wands:"fire",cups:"water",swords:"air",pentacles:"earth"};this.cards.forEach(r=>{r.suit&&t[r.suit]&&e[t[r.suit]]++});const n=Object.entries(e).sort(([,r],[,i])=>i-r)[0];return{dominant:n[1]>=3?n[0]:null,counts:e}}extractKeywords(){const e=new Set;return this.cards.forEach(t=>{t.keywords&&t.keywords[t.orientation]&&t.keywords[t.orientation].forEach(n=>e.add(n))}),Array.from(e).slice(0,10)}generateAdvice(){const e=this.cards[9],t=this.cards[6];let n="";return e.orientation==="upright"?n="    . ":n="     ,    . ",t.orientation==="upright"?n+="   ,   .":n+="     .",n}generateElementAnalysis(){const e=this.analyzeElements(),t=[],{fire:n,water:r,air:i,earth:o}=e.counts;return n>=3&&t.push("()   - , ,   ."),r>=3&&t.push("()   - , ,   ."),i>=3&&t.push("()   - , ,   ."),o>=3&&t.push("()   - , ,   ."),n===0&&t.push("()   -      ."),r===0&&t.push("()   -    ."),i===0&&t.push("()   -    ."),o===0&&t.push("()   -    ."),this.cards.filter(c=>c.arcana==="major").length>=4&&t.push("   -   ,  ."),t}generateTimelineAnalysis(){const e=[this.cards[2],this.cards[3]],t=[this.cards[0],this.cards[1]],n=[this.cards[4],this.cards[5],this.cards[9]];return{past:{energy:this.analyzeTimeEnergy(e),lesson:"    "},present:{energy:this.analyzeTimeEnergy(t),challenge:"   "},future:{energy:this.analyzeTimeEnergy(n),potential:"  "},flow:this.analyzeTimeFlow(e,t,n),advice:this.generateTimelineAdvice(e,t,n)}}analyzeTimeEnergy(e){const t=e.filter(r=>r.orientation==="upright").length,n=e.filter(r=>r.arcana==="major").length;return t===e.length?"   ":t===0?"   ":n>=2?"   ":" "}analyzeTimeFlow(e,t,n){const r=e.filter(a=>a.orientation==="upright").length,i=t.filter(a=>a.orientation==="upright").length,o=n.filter(a=>a.orientation==="upright").length;return r<i&&i<o?"        .":r>i&&i>o?"   ,        .":"     ."}generateTimelineAdvice(e,t,n){return n[2].orientation==="upright"?"        .":"   ,    ."}}const $y=s=>{const e={};s.forEach((n,r)=>{const i=r+1;let o="";switch(i){case 1:o=Ts(n,"present_situation");break;case 2:o=Ey(n,s[0]);break;case 3:o=Ts(n,"distant_past");break;case 4:o=Ts(n,"recent_past");break;case 5:o=Ts(n,"possible_future");break;case 6:o=Ts(n,"immediate_future");break;case 7:o=Ts(n,"your_approach");break;case 8:o=Ts(n,"external_influences");break;case 9:o=Ay(n);break;case 10:o=Iy(n,s);break}e[`position_${i}`]=o});const t=Ry(s,e);return{interpretations:e,overallStory:t,specialInsights:Xy(s)}},Py=s=>{const e={};s.forEach((n,r)=>{const i=r+1;let o="";switch(i){case 1:o=getStarInfluenceInterpretation(n,"past_star");break;case 2:o=getStarInfluenceInterpretation(n,"present_star");break;case 3:o=getHiddenInfluenceInterpretation(n);break;case 4:o=getDesireInterpretation(n,"conscious");break;case 5:o=getDesireInterpretation(n,"unconscious");break;case 6:o=getStarAdviceInterpretation(n);break;case 7:o=getStarOutcomeInterpretation(n,s);break}e[`star_${i}`]=o});const t=My(s);return{interpretations:e,constellationReading:t,cosmicGuidance:Zy(s)}},Ty=s=>{const e={};s.forEach((n,r)=>{const i=r+1;let o="";switch(i){case 1:o=getEmotionalStateInterpretation(n,"your_feelings");break;case 2:o=getEmotionalStateInterpretation(n,"partner_feelings");break;case 3:o=getRelationshipFoundationInterpretation(n);break;case 4:o=getCommunicationInterpretation(n);break;case 5:o=getIntimacyInterpretation(n);break;case 6:o=getObstacleInterpretation(n);break;case 7:o=getRelationshipFutureInterpretation(n,s);break}e[`cup_${i}`]=o});const t=Oy(s);return{interpretations:e,loveHarmony:t,relationshipAdvice:e0(s)}};function Ts(s,e){const t=s.card,n=s.orientation,r=lo(t,n,s.topic),i=jy(t,n,e),o=Ly(t,n),a=Dy(t,n,e),c=Uy(t),u=xy(t),h=Ny(t),f=Ky(t),m=Fy(t),p=By(t),d=zy(t,n);return{basic:r,deeper:i,shadow:o,advice:a,timing:c,symbols:u,numerology:h,elements:f,chakras:m,crystals:p,affirmation:d}}function Ey(s,e){const t=s.card,n=e.card,r=Qy(n,t),i=r0(),o=i0(t,s.orientation);return{challengeNature:`  ${Jy(t)}  .`,interaction:r,conflictType:i,resolution:o,hiddenOpportunity:o0(),transformationPath:a0(t,s.orientation)}}function Ay(s){const e=s.card,t=s.orientation,n=t==="upright"?getHopeAspect(e):getShadowHope(e),r=t==="upright"?getUnderlyingFear(e):getDeepFear(e);return{hope:n,fear:r,balance:`   ${n.theme}()   ${r.theme}()   .`,integration:getIntegrationAdvice(n,r),unconsciousPattern:getUnconsciousPattern(e)}}function Iy(s,e){const t=s.card,n=s.orientation;analyzeEnergyFlow(e);const r=estimateTimeline(t,e);return extractKeyLessons(e),{outcome:getOutcomeMeaning(t,n),probability:calculateOutcomeProbability(e),timeline:r,keyFactors:identifyKeyFactors(e),alternativePaths:getAlternativePaths(t,e),finalAdvice:generateFinalAdvice(t,n,e),spiritualMessage:getSpiritualMessage(t),nextSteps:getNextSteps(t,n)}}function Ry(s,e){const t=Hy(s),n=Vy(s),r=findNumerologicalPattern(s);let i=`    ${t.primary}   .

`;return i+=` : ${e.position_3.basic} , `,i+=`${e.position_4.basic}   ${e.position_1.basic}  .

`,i+=`     ${e.position_2.challengeNature}. `,i+=` ${e.position_2.interaction}

`,i+=` : ${e.position_6.basic}   , `,i+=` ${e.position_5.basic}   .

`,i+=` : ${e.position_7.basic}   `,i+=`${e.position_9.balance}

`,i+=` : ${e.position_8.basic}      .

`,i+=`: ${e.position_10.outcome} `,i+=`${e.position_10.finalAdvice}

`,n.imbalance&&(i+=`  : ${n.message}
`),r.pattern&&(i+=`  : ${r.message}
`),i}function My(s){const e=s.map(i=>getStarEnergy(i.card)),t=findDominantElement(e),n=generateCosmicMessage(s);let r=` 7    :

`;return r+=`   (): ${e[0].message}
`,r+=`   (): ${e[1].message}
`,r+=`   ( ): ${e[2].message}
`,r+=`   (): ${e[3].message}
`,r+=`   (): ${e[4].message}
`,r+=`   (): ${e[5].message}
`,r+=`   (): ${e[6].message}

`,r+=`  : ${n}
`,r+=`  : ${t.description}
`,r}function Oy(s){const e=getEmotionalEnergy(s[0]),t=getEmotionalEnergy(s[1]),n=calculateCompatibility(e,t),r=analyzeFoundationStrength(s[2]),i=analyzeCommunicationQuality(s[3]),o=analyzeIntimacyLevel(s[4]),a=analyzeObstacleImpact(s[5]);return{overallHarmony:calculateOverallHarmony(n,r,i,o,a),yourEnergy:e,partnerEnergy:t,compatibility:n,strengths:identifyRelationshipStrengths(s),challenges:identifyRelationshipChallenges(s),growthAreas:identifyGrowthAreas(s),soulConnection:analyzeSoulConnection(s),karmicLessons:identifyKarmicLessons(s)}}function lo(s,e,t){const n=s.card||s;if(n.meanings){if(n.meanings[t]&&n.meanings[t][e])return n.meanings[t][e];if(n.meanings.general&&n.meanings.general[e])return n.meanings.general[e]}return`${n.nameKr||n.name_kr||n.name||"   "}  ${e==="upright"?"":""} .`}function jy(s,e,t){var i;const n={present_situation:{major:"         .",cups:"      .",wands:"      .",swords:"     .",pentacles:",     ."}},r=s.suit||"major";return((i=n[t])==null?void 0:i[r])||"   ."}function Ly(s,e){return e==="reversed"?`   ${s.nameKr}      .`:"    ,      ."}function Dy(s,e,t){return{present_situation:"    ,      .",distant_past:"     ,  .",recent_past:"    ,    .",possible_future:"          .",immediate_future:"   ,     .",your_approach:"    .   .",external_influences:"   ,   .",hopes_fears:"    ,     .",final_outcome:"   ,    ."}[t]||"     ."}function Uy(s){const e={Ace:" , 1-3 ",Two:" , 2 ",Three:", 3-3",Four:", 4-4",Five:", 5-5",Six:", 6-6",Seven:" , 7-7",Eight:", 8 ",Nine:" , 9-9",Ten:"  , 10-10",Page:" ,  ",Knight:" , 2-4",Queen:" , 3-6",King:" , 6-1"};if(s.arcana==="major")return"  ,    ";const t=s.name.split(" ")[0];return e[t]||"     "}function xy(s){const e=[];if(s.arcana==="major"){const t={0:[" ",""," "],1:["","",""],2:["","",""],3:["","",""],4:["","",""],5:[""," ",""],6:["","",""],7:["","",""],8:[" ","",""],9:[" ","",""],10:[" ","",""]};e.push(...t[s.number]||[])}else{const t={cups:["","",""],wands:["","",""],swords:["","",""],pentacles:["","",""]};e.push(...t[s.suit]||[])}return e}function Ny(s){return s.number===void 0||s.number===null?"":{0:"  ",1:" , , ",2:", , ",3:", , ",4:", , ",5:", , ",6:", , ",7:",  , ",8:" , , ",9:", , ",10:"   ",11:",  ,  ",12:",  ,  ",13:", , ",14:", , ",15:" ,  ",16:" , , ",17:", ,  ",18:", , ",19:", , ",20:", , ",21:", ,  "}[s.number]||` ${s.number} `}function Ky(s){const e={cups:" - , , , ",wands:" - , , , ",swords:" - , , , ",pentacles:" - , , , "};return s.suit?e[s.suit]||"":s.arcana==="major"?{0:" -  ",1:"  ",2:" -  ",3:" -  ",4:" -  "}[s.number]||" ":""}function Fy(s){var r;const e={cups:{Ace:"  -  ",Two:"  -  ",Three:"  -  "},wands:{Ace:"  -  ",Two:"  -  "},swords:{Ace:"  -  ",Two:"3   -  "},pentacles:{Ace:"  -  ",Two:"  -  "}},t={0:"  -  ",1:"  -  ",2:"3   -  ",3:"  -  ",4:"  -  ",5:"  -  ",6:"  -  ",7:"  -  ",8:"  -   ",9:"3   -  ",10:"  -  "};if(s.arcana==="major")return t[s.number]||"  -  ";const n=s.name.split(" ")[0];return((r=e[s.suit])==null?void 0:r[n])||"  "}function By(s){const e={cups:["","",""],wands:["",""," "],swords:[" ","",""],pentacles:["","",""]},t={0:[" ",""],1:["",""],2:["",""],3:["",""],4:[" ",""]};return s.arcana==="major"?t[s.number]||[""," "]:e[s.suit]||[" "]}function zy(s,e){const t=` ${s.nameKr}  .`;return e==="upright"?`${t}      .`:`${t}     .`}function Hy(s){const e=[];let t=0;const n={cups:0,wands:0,swords:0,pentacles:0};s.forEach(({card:i})=>{i.arcana==="major"?(t++,e.push(Wy(i))):n[i.suit]++});const r=Object.entries(n).sort(([,i],[,o])=>o-i)[0];return{primary:t>3?"  ":qy(r[0]),secondary:e,balance:analyzeThemeBalance(n,t)}}function Wy(s){return{0:"   ",1:"  ",2:"  ",3:" ",4:" ",5:"  ",6:" ",7:" ",8:"  ",9:" ",10:" ",11:" ",12:"  ",13:" ",14:" ",15:" ",16:" ",17:" ",18:" ",19:" ",20:" ",21:" "}[s.number]||" "}function qy(s){return{cups:"  ",wands:"  ",swords:"  ",pentacles:"  "}[s]||" "}function Vy(s){const e={water:0,fire:0,air:0,earth:0};s.forEach(({card:r})=>{if(r.suit){const i={cups:"water",wands:"fire",swords:"air",pentacles:"earth"};e[i[r.suit]]++}});const t=Object.entries(e).sort(([,r],[,i])=>i-r)[0],n=Object.entries(e).filter(([,r])=>r===0).map(([r])=>r);return{dominant:t[0],missing:n,imbalance:n.length>0,message:Gy(e)}}function Gy(s){const e=Object.values(s).reduce((t,n)=>t+n,0);return s.water>e/2?"    .      .":s.fire>e/2?"   .       .":s.air>e/2?"    .    .":s.earth>e/2?"   .      .":"     ."}function Jy(s){return`${s.nameKr}`}function Qy(s,e){return s.suit===e.suit?"     .":Yy(s.suit,e.suit)}function Yy(s,e){const t={"cups-wands":"    -    .","cups-swords":"    -    .","cups-pentacles":"    -   .","wands-swords":"    -    .","wands-pentacles":"    -    .","swords-pentacles":"    -     ."},n=[s,e].sort().join("-");return t[n]||"      ."}function Xy(s){return{soulLesson:identifySoulLesson(s),karmicDebt:identifyKarmicDebt(s),spiritualGifts:identifySpiritualGifts(s),shadowWork:identifyShadowWork(s),timeline:estimateOverallTimeline(s),actionSteps:generateActionSteps(s)}}function Zy(s){return{stellarAlignment:analyzeStarAlignment(s),cosmicTiming:determineCosmicTiming(s),universalMessage:extractUniversalMessage(s),starSeedActivation:checkStarSeedActivation(s),dimensionalShift:analyzeDimensionalShift(s)}}function e0(s){return{communicationTips:generateCommunicationTips(s),intimacyGuidance:generateIntimacyGuidance(s),conflictResolution:generateConflictResolution(s),growthOpportunities:identifyGrowthOpportunities(s),soulContractInsights:analyzeSoulContract(s),healingRecommendations:generateHealingRecommendations(s)}}function t0(s,e,t){const n=e.map((r,i)=>({card:r.card,position:r.position,orientation:r.orientation,spread:s,topic:t}));switch(s){case"celtic_cross":return $y(n);case"seven_star":return Py(n);case"cup_of_relationship":return Ty(n);default:return{message:"     ."}}}function s0(s,e,t,n){if(e.spreadId==="one_card"||e.spreadId==="three_card_timeline")return{overallMessage:yl(s,t),cards:s.map((i,o)=>{var u,h,f,m,p;const a=i.card||i,c=((h=(u=a.meanings)==null?void 0:u[t])==null?void 0:h[i.orientation])||((m=(f=a.meanings)==null?void 0:f.general)==null?void 0:m[i.orientation])||`${a.nameKr||a.name}  .`;return{...i,interpretation:{basic:c,advice:n0(i,e.spreadId,o),keywords:((p=a.keywords)==null?void 0:p[i.orientation])||[]}}})};if(!n)return{overallMessage:yl(s,t),cards:s.map(i=>({...i,interpretation:{basic:lo(i.card||i,i.orientation,t)}}))};const r=t0(e.spreadId,s,t);return{overallMessage:r.overallStory||r.constellationReading||r.loveHarmony.overallHarmony,cards:s.map((i,o)=>({...i,interpretation:{basic:lo(i.card,i.orientation,t),deeper:r.interpretations[`position_${o+1}`]||r.interpretations[`star_${o+1}`]||r.interpretations[`cup_${o+1}`],premium:!0}})),premiumInsights:r.specialInsights||r.cosmicGuidance||r.relationshipAdvice,isPremium:!0}}function yl(s,e){const t={general:"       .",love:"     .",career:"     .",money:"    .",health:"    ."};return t[e]||t.general}function n0(s,e,t){s.card;const n=s.orientation||"upright";if(e==="one_card")return n==="upright"?"        .":"      .";if(e==="three_card_timeline"){const i=["","",""][t]||"";if(i==="")return"     ,  .";if(i==="")return"    ,      .";if(i==="")return n==="upright"?"    .    .":"     ,      ."}return"     ."}function r0(s,e){return"     "}function i0(s,e){return e==="upright"?"       .":"       ."}function o0(s){return"      ."}function a0(s,e){return"         ."}const l0=[{cards:["The Fool","The World"],meaning:"  .     .",advice:" ,   .",keywords:["","",""]},{cards:["The Lovers","Two of Cups"],meaning:"     .",advice:"    .",keywords:["","",""]},{cards:["Death","The Tower"],meaning:"   .      .",advice:"    .",keywords:["",""," "]},{cards:["The Star","The Sun"],meaning:"   .   .",advice:"     .",keywords:["","",""]},{cards:["The Hermit","The High Priestess"],meaning:"     .",advice:"      .",keywords:[" ","",""]},{cards:["Three of Pentacles","The Emperor"],meaning:"      .",advice:"   .",keywords:["","",""]},{cards:["Nine of Cups","Ten of Cups"],meaning:"     .",advice:"    .",keywords:["","",""]},{cards:["Five of Swords","Five of Cups"],meaning:"    .",advice:"     .",keywords:["","",""]}],wl={"cups-cups":{meaning:"   .  .",element:"    ."},"wands-wands":{meaning:"   .  .",element:"    ."},"swords-swords":{meaning:"     .",element:"    ."},"pentacles-pentacles":{meaning:"     .",element:"    ."},"cups-wands":{meaning:"   .   .",element:"     ."},"swords-pentacles":{meaning:"     .",element:"    ."}};class Lu{static analyzeCardPair(e,t){const n=this.findSpecialCombination([e.name,t.name]);if(n)return{type:"special",...n};if(e.suit&&t.suit){const r=`${e.suit}-${t.suit}`,i=wl[r]||wl[`${t.suit}-${e.suit}`];if(i)return{type:"suit",...i}}if(e.number!==void 0&&t.number!==void 0){const r=this.analyzeNumberRelation(e.number,t.number);if(r)return{type:"number",...r}}return e.arcana!==t.arcana?{type:"arcana_mix",meaning:"    .",advice:"     ."}:null}static analyzeCardPattern(e){const t={majorDominant:0,suitBalance:{},numberSequence:[],elementBalance:{},uprightReversed:{upright:0,reversed:0}};return e.forEach(n=>{n.arcana==="major"&&t.majorDominant++,n.suit&&(t.suitBalance[n.suit]=(t.suitBalance[n.suit]||0)+1),n.number!==void 0&&t.numberSequence.push(n.number),t.uprightReversed[n.orientation]++}),this.interpretPatterns(t,e.length)}static findSpecialCombination(e){return l0.find(t=>t.cards.every(n=>e.includes(n))||t.cards.every((n,r)=>n===e[r]))||null}static analyzeNumberRelation(e,t){const n=Math.abs(e-t);return n===0?{meaning:"      .",advice:` ${e}   .`}:n===1?{meaning:"     .",advice:"   ."}:e+t===10?{meaning:"  (10)   .",advice:"   ."}:null}static interpretPatterns(e,t){const n=[];e.majorDominant/t>.5&&n.push({type:"major_dominant",meaning:"   .   .",advice:"     ."});const i=Object.entries(e.suitBalance).sort(([,a],[,c])=>c-a)[0];if(i&&i[1]>=t*.4){const a={cups:"    .",wands:"   .",swords:"    .",pentacles:"   ."};n.push({type:"suit_dominant",suit:i[0],meaning:a[i[0]],advice:"    ."})}if(e.uprightReversed.reversed/t>.6&&n.push({type:"reversed_dominant",meaning:"    .",advice:"  ,   ."}),e.numberSequence.length>=3){const a=this.analyzeNumberSequence(e.numberSequence);a&&n.push(a)}return n}static analyzeNumberSequence(e){const t=[...e].sort((a,c)=>a-c),n=e.every((a,c)=>c===0||a>=e[c-1]),r=e.every((a,c)=>c===0||a<=e[c-1]);if(n&&t[t.length-1]-t[0]===t.length-1)return{type:"ascending_sequence",meaning:"    .",advice:"   ."};if(r)return{type:"descending_sequence",meaning:"   .",advice:"    ."};const i={};e.forEach(a=>{i[a]=(i[a]||0)+1});const o=Object.entries(i).find(([a,c])=>c>=2);return o?{type:"repeated_number",number:o[0],meaning:` ${o[0]}   .`,advice:"     ."}:null}static analyzeTimelineInfluence(e,t,n){const r={past:this.summarizeCards(e),present:this.summarizeCard(t),future:this.summarizeCards(n),flow:"",advice:""};return r.past.energy==="negative"&&r.future.energy==="positive"?(r.flow="      .",r.advice="     ."):r.past.energy==="positive"&&r.future.energy==="negative"?(r.flow="   .",r.advice="      ."):(r.flow="   .",r.advice="     ."),r}static summarizeCard(e){return{energy:e.orientation==="upright"?"positive":"challenging",theme:e.arcana==="major"?"spiritual":"practical",element:this.getCardElement(e)}}static summarizeCards(e){const t={energy:"",dominantTheme:"",elements:[]},n=e.filter(i=>i.orientation==="upright").length;t.energy=n>e.length/2?"positive":"challenging";const r=e.filter(i=>i.arcana==="major").length;return t.dominantTheme=r>e.length/2?"spiritual":"practical",t.elements=e.map(i=>this.getCardElement(i)),t}static getCardElement(e){const t={cups:"",wands:"",swords:"",pentacles:""};return e.suit?t[e.suit]:{0:"",1:"",2:"",3:"",4:""}[e.number]||""}}class c0{static enhanceInterpretation(e,t,n){var o;const i={basic:((o=e.meanings[t])==null?void 0:o[e.orientation])||e.meanings.general[e.orientation],detailed:"",practical:"",spiritual:"",timing:"",advice:""};switch(t){case"love":i.detailed=this.getLoveDetailed(e,n),i.practical=this.getLovePractical(e),i.spiritual=this.getLoveSpiritual(e),i.timing=this.getLoveTiming(e),i.advice=this.getLoveAdvice(e);break;case"career":i.detailed=this.getCareerDetailed(e,n),i.practical=this.getCareerPractical(e),i.spiritual=this.getCareerSpiritual(e),i.timing=this.getCareerTiming(e),i.advice=this.getCareerAdvice(e);break;case"money":i.detailed=this.getMoneyDetailed(e,n),i.practical=this.getMoneyPractical(e),i.spiritual=this.getMoneySpiritual(e),i.timing=this.getMoneyTiming(e),i.advice=this.getMoneyAdvice(e);break;case"health":i.detailed=this.getHealthDetailed(e,n),i.practical=this.getHealthPractical(e),i.spiritual=this.getHealthSpiritual(e),i.timing=this.getHealthTiming(e),i.advice=this.getHealthAdvice(e);break}return i}static getLoveDetailed(e,t){var r;return((r={"The Lovers":{upright:"   .     .",reversed:"     ."},"Two of Cups":{upright:"     .",reversed:"      ."}}[e.name])==null?void 0:r[e.orientation])||`${e.nameKr}   ${e.orientation==="upright"?"":""}  .`}static getLovePractical(e){return e.suit==="cups"?"      .":e.suit==="pentacles"?"     .":"   ."}static getLoveSpiritual(e){return e.arcana==="major"?"       .":"    ."}static getLoveTiming(e){const t={Ace:"    - 1-3 ",Two:"   - 2-4 ",Three:"   - 3 "},n=e.name.split(" ")[0];return t[n]||"     ."}static getLoveAdvice(e){return e.orientation==="upright"?"        .":"    ."}static getCareerDetailed(e,t){return`${e.nameKr}    .`}static getCareerPractical(e){return"  ."}static getCareerSpiritual(e){return"    ."}static getCareerTiming(e){return"    ."}static getCareerAdvice(e){return"    ."}static getMoneyDetailed(e,t){return`${e.nameKr}     .`}static getMoneyPractical(e){return"   ."}static getMoneySpiritual(e){return"    ."}static getMoneyTiming(e){return"    ."}static getMoneyAdvice(e){return"   ."}static getHealthDetailed(e,t){return`${e.nameKr}      .`}static getHealthPractical(e){return"    ."}static getHealthSpiritual(e){return" ,    ."}static getHealthTiming(e){return"     ."}static getHealthAdvice(e){return"   ."}}class bl{static analyzeTimelineInfluence(e,t,n){const r=this.analyzePastEnergy(e),i=this.analyzePresentEnergy(t),o=this.analyzeFutureEnergy(n),a=this.analyzeEnergyFlow(r,i,o);return{past:r,present:i,future:o,flow:a.description,advice:a.advice}}static analyzePastEnergy(e){const t=this.getDominantSuit(e),n=e.filter(i=>i.arcana==="major").length;let r="";return n>=2?r="  ":t==="cups"?r="  ":t==="wands"?r=" ":t==="swords"?r=" ":t==="pentacles"?r="  ":r="  ",{energy:r,cards:e}}static analyzePresentEnergy(e){let t="";return e.arcana==="major"?t=`${e.nameKr}  `:t={cups:"  ",wands:"  ",swords:"  ",pentacles:" "}[e.suit]||" ",e.orientation==="reversed"&&(t+=" "),{energy:t,card:e}}static analyzeFutureEnergy(e){const t=e.filter(i=>i.orientation==="upright").length,n=e.filter(i=>i.arcana==="major").length;let r="";return t===e.length?r="  ":t===0?r="  ":n>=1?r="  ":r="  ",{energy:r,cards:e}}static analyzeEnergyFlow(e,t,n){let r="",i="";return e.energy.includes("")&&t.energy.includes("")?(r="     .",i="   ."):e.energy.includes("")&&n.energy.includes("")?(r="    .",i="   ."):(r="    .",i="   ."),{description:r,advice:i}}static getDominantSuit(e){var r;const t={cups:0,wands:0,swords:0,pentacles:0};e.forEach(i=>{i.suit&&t[i.suit]++});const n=Math.max(...Object.values(t));return n===0?null:((r=Object.entries(t).find(([i,o])=>o===n))==null?void 0:r[0])||null}}Lu.analyzeTimelineInfluence=bl.analyzeTimelineInfluence.bind(bl);class u0{constructor(e){this.userProfile=e}enhanceInterpretation(e,t){return{personal:this.getPersonalMessage(e),zodiacConnection:this.getZodiacConnection(e),numerological:this.getNumerologicalInsight(e),seasonal:this.getSeasonalMessage(e),lifePhase:this.getLifePhaseGuidance(e)}}getPersonalMessage(e){return!this.userProfile.readingHistory||this.userProfile.readingHistory.length===0?"        .":this.analyzePreviousReadings().includes(e.name)?`${e.nameKr}   .     .`:"     ."}getZodiacConnection(e){var r;return this.userProfile.zodiacSign?((r={Aries:{"The Emperor":"  .    .","The Tower":"    .","Ace of Wands":"    ."},Taurus:{"The Hierophant":"  .   .","The Empress":"   .","King of Pentacles":"   ."},Gemini:{"The Lovers":"  .   .","The Magician":"  .","Eight of Swords":"  ."}}[this.userProfile.zodiacSign])==null?void 0:r[e.name])||`${this.userProfile.zodiacSign}  ${e.nameKr}  .`:""}getNumerologicalInsight(e){if(!this.userProfile.lifePathNumber)return"";const n={1:"    .",2:"     .",3:"    .",4:"     .",5:"     .",6:"   .",7:"    .",8:"    .",9:"    .",11:"     .",22:"      ."}[this.userProfile.lifePathNumber]||"";return e.number!==void 0&&e.number===this.userProfile.lifePathNumber?` ${this.userProfile.lifePathNumber}   !  . ${n}`:n}getSeasonalMessage(e){var o;const n=new Date().getMonth();let r="";return n>=2&&n<=4?r="spring":n>=5&&n<=7?r="summer":n>=8&&n<=10?r="autumn":r="winter",((o={spring:{"The Fool":"    .","Ace of Wands":"    .","Three of Cups":"    ."},summer:{"The Sun":"    .","Eight of Pentacles":"     .","The Star":"    ."},autumn:{Death:"    .","Nine of Pentacles":"     .","The Hermit":"    ."},winter:{"The Hermit":"     .","Four of Swords":"   .","The World":"     ."}}[r])==null?void 0:o[e.name])||`   ${e.nameKr}  .`}getLifePhaseGuidance(e){if(!this.userProfile.birthDate)return"";const t=this.calculateAge(this.userProfile.birthDate);let n="";return t<21?n="youth":t<35?n="youngAdult":t<50?n="midlife":t<65?n="mature":n="elder",{youth:"       .",youngAdult:"     .",midlife:"      .",mature:"    .",elder:"       ."}[n]}analyzePreviousReadings(){if(!this.userProfile.readingHistory)return[];const e=[];return this.userProfile.readingHistory.forEach(t=>{t.cards.forEach(n=>{e.push(n.name)})}),e}calculateAge(e){const t=new Date;let n=t.getFullYear()-e.getFullYear();const r=t.getMonth()-e.getMonth();return(r<0||r===0&&t.getDate()<e.getDate())&&n--,n}}class d0{static calculate(e){const t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();let i=this.reduceNumber(t)+this.reduceNumber(n)+this.reduceNumber(r);return i===11||i===22||i===33?i:this.reduceNumber(i)}static reduceNumber(e){let t=e;for(;t>9&&t!==11&&t!==22&&t!==33;)t=t.toString().split("").reduce((n,r)=>n+parseInt(r),0);return t}}class h0{static getZodiacSign(e){const t=e.getMonth()+1,n=e.getDate();return t===3&&n>=21||t===4&&n<=19?"Aries":t===4&&n>=20||t===5&&n<=20?"Taurus":t===5&&n>=21||t===6&&n<=20?"Gemini":t===6&&n>=21||t===7&&n<=22?"Cancer":t===7&&n>=23||t===8&&n<=22?"Leo":t===8&&n>=23||t===9&&n<=22?"Virgo":t===9&&n>=23||t===10&&n<=22?"Libra":t===10&&n>=23||t===11&&n<=21?"Scorpio":t===11&&n>=22||t===12&&n<=21?"Sagittarius":t===12&&n>=22||t===1&&n<=19?"Capricorn":t===1&&n>=20||t===2&&n<=18?"Aquarius":"Pisces"}}class mr{static generateDeepInterpretation(e){const t=e.cards,n=e.topic||"general",r=t.filter(c=>c.arcana==="major").length,i=t.filter(c=>c.orientation==="upright").length;t.length-i;const o=this.analyzeElements(t),a=this.analyzeNumbers(t);return{layers:this.generateLayers(t,n,o),synthesis:this.generateSynthesis(t,n,r,i),keyInsights:this.generateKeyInsights(t,n,o,a),actionPlan:this.generateActionPlan(t,n),affirmations:this.generateAffirmations(t,n)}}static analyzeCardCombinations(e){const t=[];return t.push(...this.checkSpecialCombinations(e)),t.push(...this.checkSuitCombinations(e)),t.push(...this.checkNumberRelationships(e)),t.push(...this.checkElementCombinations(e)),t}static analyzeCardPattern(e){const t=e.filter(i=>i.arcana==="major").length,n=e.filter(i=>i.orientation==="upright").length,r=e.length-n;return t>=e.length*.6?{name:" ",description:"      .",implication:"     .      ."}:n===e.length?{name:"",description:"      .",implication:"   .        ."}:r===e.length?{name:" ",description:"       .",implication:"  .      ."}:Math.abs(n-r)<=1?{name:" ",description:"      .",implication:" ,     ."}:null}static generateProbabilityAnalysis(e,t){const n=e.filter(f=>f.orientation==="upright").length,r=e.filter(f=>f.arcana==="major").length;let i=n/e.length*60,o=(e.length-n)/e.length*40;i+=r/e.length*20,(t==="love"&&e.some(f=>f.name.includes("Lovers")||f.name.includes("Cups"))||t==="career"&&e.some(f=>f.name.includes("Pentacles")||f.name.includes("Emperor")))&&(i+=10);const a=Math.min(90,Math.max(10,Math.round(i))),c=Math.min(70,Math.max(10,Math.round(o+(100-i)/3))),u=100-a-c;let h="";return a>=70?h="   .   ,   .":a>=50?h="      .":c>=50?h=" .      .":h=" .      .",{successProbability:a,challengeProbability:c,uncertaintyLevel:u,recommendation:h}}static analyzeElements(e){const t={fire:0,water:0,air:0,earth:0,spirit:0};return e.forEach(n=>{if(n.element){const r=n.element.toLowerCase();r in t&&t[r]++}else if(n.suit)switch(n.suit){case"wands":t.fire++;break;case"cups":t.water++;break;case"swords":t.air++;break;case"pentacles":t.earth++;break}else n.arcana==="major"&&t.spirit++}),t}static analyzeNumbers(e){const t={};return e.forEach(n=>{n.number!==void 0&&n.number!==null&&(t[n.number]=(t[n.number]||0)+1)}),t}static generateLayers(e,t,n){const r={};r.psychological={consciousPatterns:this.generateConsciousPatterns(e,t),unconsciousPatterns:this.generateUnconsciousPatterns(e,t),growthOpportunities:this.generateGrowthOpportunities(e,t)},r.spiritual={soulLessons:this.generateSoulLessons(e,t),spiritualGifts:this.generateSpiritualGifts(e),chakraActivations:this.generateChakraActivations(e,n)};const i=e.filter(o=>o.orientation==="reversed");return i.length>0&&(r.shadow={hiddenAspects:i.slice(0,3).map(o=>({card:o.nameKr||o.name,message:this.generateShadowMessage(o,t)}))}),r}static generateConsciousPatterns(e,t){const n=[],r=e.filter(i=>i.arcana==="major"&&i.orientation==="upright");return r.some(i=>i.name.includes("Emperor")||i.name.includes("Empress"))&&n.push("   "),r.some(i=>i.name.includes("Lovers")||i.name.includes("Star"))&&n.push("   "),t==="love"?n.push("    "):t==="career"&&n.push("    "),n}static generateUnconsciousPatterns(e,t){const n=[];return e.filter(i=>i.orientation==="reversed").length>e.length/2&&n.push("   "),e.some(i=>i.name.includes("Moon")||i.name.includes("High Priestess"))&&n.push(" "),e.some(i=>i.name.includes("Death")||i.name.includes("Tower"))&&n.push("   "),n}static generateGrowthOpportunities(e,t){const n=[];return e.some(i=>i.name.includes("Fool"))&&n.push("    "),e.some(i=>i.name.includes("Hermit"))&&n.push("    "),e.filter(i=>i.orientation==="reversed").length>0&&n.push("    "),n}static generateSoulLessons(e,t){const n=[],r=e.filter(i=>i.arcana==="major");return r.some(i=>i.name.includes("World"))&&n.push("    "),r.some(i=>i.name.includes("Wheel of Fortune"))&&n.push("   "),t==="love"&&n.push("    "),n}static generateSpiritualGifts(e){const t=[];return e.some(n=>n.name.includes("Magician"))&&t.push("  "),e.some(n=>n.name.includes("High Priestess"))&&t.push("  "),e.some(n=>n.name.includes("Star"))&&t.push("   "),t}static generateChakraActivations(e,t){const n=[];return t.earth>2&&n.push("  -   "),t.water>2&&n.push("  -   "),t.fire>2&&n.push("  -   "),t.air>2&&n.push("  -   "),t.spirit>2&&n.push("  -   "),n}static generateShadowMessage(e,t){e.nameKr||e.name;const n={"The Fool":"    ","The Magician":"    ","The High Priestess":"   ","The Empress":"  ","The Emperor":"   ","The Lovers":"   ",Death:"   ","The Devil":"   "};for(const[r,i]of Object.entries(n))if(e.name.includes(r))return i;return t==="love"?"    ":t==="career"?"    ":"     "}static generateSynthesis(e,t,n,r){let i="";const o=r/e.length;return n/e.length>.5&&(i+="      .      . "),o>.7?i+="     .    . ":o<.3?i+=" ,       . ":i+="    .   . ",t==="love"?i+="  ,   .        ,    .":t==="career"?i+="       .       .":i+="   .    ,    .",i}static generateKeyInsights(e,t,n,r){const i=[];switch(Object.entries(n).reduce((a,c)=>n[a]>n[c[0]]?a:c[0])){case"fire":i.push("      ");break;case"water":i.push("      ");break;case"air":i.push("     ");break;case"earth":i.push("    ");break;case"spirit":i.push("    ");break}return Object.entries(r).forEach(([a,c])=>{if(c>=2){const u=parseInt(a);u===1?i.push("     "):u===2?i.push("   "):u===3?i.push("  "):u===7?i.push("    "):u===10&&i.push("      ")}}),e.some(a=>a.name.includes("Death"))&&e.some(a=>a.name.includes("Fool"))&&i.push("     "),e.some(a=>a.name.includes("Sun"))&&e.some(a=>a.name.includes("Moon"))&&i.push("     "),i}static generateActionPlan(e,t){var r,i,o,a,c,u,h,f,m;const n={immediate:[],weekly:[],monthly:[]};return e.some(p=>p.name.includes("Fool")||p.name.includes("Magician"))&&((r=n.immediate)==null||r.push("   ")),e.some(p=>p.orientation==="reversed")&&((i=n.immediate)==null||i.push("      ")),t==="love"&&((o=n.immediate)==null||o.push("    ")),e.some(p=>p.name.includes("Hermit"))&&((a=n.weekly)==null||a.push("    ")),e.some(p=>p.suit==="pentacles")&&((c=n.weekly)==null||c.push("     ")),(u=n.weekly)==null||u.push("       "),e.some(p=>p.name.includes("World")||p.name.includes("Ten"))&&((h=n.monthly)==null||h.push("     ")),(f=n.monthly)==null||f.push("        "),(m=n.monthly)==null||m.push("     "),n}static generateAffirmations(e,t){const n=[];return n.push("    "),t==="love"?n.push("   ,   "):t==="career"?n.push("     "):t==="money"&&n.push("   ,   "),e.some(r=>r.name.includes("Star"))&&n.push("    "),e.some(r=>r.name.includes("Strength"))&&n.push("      "),n}static checkSpecialCombinations(e){const t=[],n=e.map(r=>r.name);return n.includes("The Fool")&&n.includes("The Magician")&&n.includes("The World")&&t.push({type:"special",meaning:"   - , ,   ",advice:"   .     "}),n.includes("The Lovers")&&n.includes("The Sun")&&t.push({type:"special",meaning:"   ",advice:"    "}),n.includes("Death")&&n.includes("The Tower")&&t.push({type:"special",meaning:"   ",advice:"       "}),t}static checkSuitCombinations(e){const t=[],n={};return e.forEach(r=>{r.suit&&(n[r.suit]=(n[r.suit]||0)+1)}),Object.entries(n).forEach(([r,i])=>{if(i>=3){let o="",a="";switch(r){case"cups":o="    ",a="     ";break;case"wands":o="    ",a="    ";break;case"swords":o="     ",a="    ";break;case"pentacles":o="     ",a="    ";break}t.push({type:"suit",meaning:o,advice:a})}}),t}static checkNumberRelationships(e){const t=[],n=e.map(a=>a.number).filter(a=>a!=null),r=[...new Set(n)].sort((a,c)=>a-c);let i=1;for(let a=1;a<r.length;a++)if(r[a]===r[a-1]+1?i++:i=1,i>=3){t.push({type:"number",meaning:"    ",advice:"    "});break}const o={};return n.forEach(a=>{o[a]=(o[a]||0)+1}),Object.entries(o).forEach(([a,c])=>{if(c>=2){const u=parseInt(a);u===1?t.push({type:"number",meaning:"     ",advice:"     "}):u===10&&t.push({type:"number",meaning:"    ",advice:"    "})}}),t}static checkElementCombinations(e){const t=[],n=this.analyzeElements(e);return n.fire>=2&&n.water>=2&&t.push({type:"element",meaning:"() ()   ",advice:"     "}),n.air>=2&&n.earth>=2&&t.push({type:"element",meaning:"() ()  ",advice:"    "}),n.fire>0&&n.water>0&&n.air>0&&n.earth>0&&t.push({type:"element",meaning:"      ",advice:"     "}),t}}class Fo{constructor(e,t){this.topic=e,this.cards=t}getCardEnergy(e){if(this.topic==="love")return this.getLoveCardEnergy(e);if(this.topic==="career")return this.getCareerCardEnergy(e);if(e.arcana==="major")return{0:"  ",1:"  ",2:"  ",3:"  ",4:"  ",5:"  ",6:"  ",7:"  ",8:" ",9:"  ",10:" ",11:"  ",12:"   ",13:"  ",14:"  ",15:"  ",16:"  ",17:"  ",18:"  ",19:"  ",20:"  ",21:"  "}[e.number]||" ";{const t={wands:" ",cups:" ",swords:" ",pentacles:" "},n={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:"",13:"",14:""},r=t[e.suit||""]||"",i=n[e.number]||"";return`${r} ${i} `}}getLoveCardEnergy(e){if(e.arcana==="major")return{0:"  ",1:" ",2:"  ",3:" ",4:" ",5:" ",6:" ",7:" ",8:" ",9:"  ",10:" ",11:" ",12:"  ",13:" ",14:" ",15:" ",16:" ",17:" ",18:" ",19:" ",20:" ",21:" "}[e.number]||" ";{const t={wands:"",cups:"",swords:"",pentacles:""},n={1:" ",2:"  ",3:" ",4:" ",5:" ",6:" ",7:" ",8:" ",9:" ",10:" ",11:" ",12:" ",13:" ",14:" "},r=t[e.suit||""]||"",i=n[e.number]||"";return`${r} ${i}`}}getCareerCardEnergy(e){if(e.arcana==="major")return{0:"  ",1:" ",2:" ",3:" ",4:" ",5:" ",6:" ",7:"  ",8:" ",9:" ",10:" ",11:" ",12:" ",13:" ",14:"",15:" ",16:" ",17:" ",18:"",19:" ",20:" ",21:" "}[e.number]||" ";{const t={wands:"",cups:"",swords:"",pentacles:""},n={1:" ",2:"",3:"",4:" ",5:" ",6:"",7:"",8:"",9:" ",10:" ",11:" ",12:"",13:"",14:""},r=t[e.suit||""]||"",i=n[e.number]||"";return`${r} ${i}`}}analyzePatterns(){const e=[];this.cards.filter(r=>r.arcana==="major").length>=Math.ceil(this.cards.length*.6)&&e.push({pattern_name:" ",description:"       .",positions:this.cards.filter(r=>r.arcana==="major").map(r=>r.position.position)});const n=this.groupBySuit();for(const[r,i]of Object.entries(n))i.length>=3&&e.push({pattern_name:`${this.getSuitName(r)}  `,description:this.getSuitDescription(r),positions:i.map(o=>o.position.position)});return e}groupBySuit(){const e={};return this.cards.forEach(t=>{t.suit&&(e[t.suit]||(e[t.suit]=[]),e[t.suit].push(t))}),e}getSuitName(e){return{wands:"",cups:"",swords:"",pentacles:""}[e]||e}getSuitDescription(e){return this.topic==="love"?{wands:"      .",cups:"     .",swords:"      .",pentacles:"    ."}[e]||"":this.topic==="career"?{wands:"    .",cups:"   .",swords:"    .",pentacles:"    ."}[e]||"":{wands:"     .",cups:"     .",swords:" ,     .",pentacles:",     ."}[e]||""}findSynergies(){const e=[];for(let t=0;t<this.cards.length;t++)for(let n=t+1;n<this.cards.length;n++){const r=this.checkSynergy(this.cards[t],this.cards[n]);r&&e.push({card1Name:this.getCardEnergy(this.cards[t]),card2Name:this.getCardEnergy(this.cards[n]),positions:[this.cards[t].position.position,this.cards[n].position.position],description:r})}return e}checkSynergy(e,t){if(e.arcana==="major"&&t.arcana==="major"){if(e.number===6&&t.number===15||e.number===15&&t.number===6)return"  .      .";if(e.number===19&&t.number===18||e.number===18&&t.number===19)return"   .    .";if(e.number===13&&t.number===20||e.number===20&&t.number===13)return"    .    ."}return e.arcana==="minor"&&t.arcana==="minor"&&e.number===t.number?`${e.number}  .     .`:null}generateTopicMessage(){return""}async generateInterpretation(){const e=this.analyzePatterns(),t=this.findSynergies(),n=this.generateTopicMessage(),r=await this.generateActionSuggestions(),i=await this.generatePositionMeanings();return{overallMessage:n,combinationPatterns:e,synergies:t,actionSuggestions:r,positionMeanings:i}}async generateActionSuggestions(){return[]}async generatePositionMeanings(){return[]}}class f0 extends Fo{constructor(e,t){super(e,t),this.positions=t.map(n=>n.position)}analyzePatterns(){const e=super.analyzePatterns(),t=[],n=this.cards.find(h=>h.position.position===4),r=this.cards.filter(h=>[1,2].includes(h.position.position)),i=this.cards.find(h=>h.position.position===6);if(n&&r.length>0&&i){const h=this.analyzeTimeline(n,r,i);h&&t.push(h)}const o=this.cards.find(h=>h.position.position===1),a=this.cards.find(h=>h.position.position===2);o&&a&&(o.suit===a.suit?t.push({pattern_name:" ",description:`${this.getSuitName(o.suit)}    .`,positions:[1,2],topicMeaning:"   ."}):o.arcana==="major"&&a.arcana==="major"&&t.push({pattern_name:"  ",description:"      .",positions:[1,2],topicMeaning:"   ."}));const c=this.cards.find(h=>h.position.position===7),u=this.cards.find(h=>h.position.position===8);if(c&&u){const h=this.analyzePerception(c,u);h&&t.push(h)}return[...e,...t]}analyzeTimeline(e,t,n){return e.arcana==="minor"&&n.arcana==="major"?{pattern_name:" ",description:"     .",positions:[4,1,2,6],topicMeaning:"    ."}:e.suit===n.suit?{pattern_name:" ",description:`${this.getSuitName(e.suit)}     .`,positions:[4,6],topicMeaning:"     ."}:null}analyzePerception(e,t){return e.number===t.number&&e.arcana==="minor"?{pattern_name:" ",description:"    .",positions:[7,8],topicMeaning:"    ."}:e.arcana==="major"&&t.arcana==="minor"?{pattern_name:" ",description:"      .",positions:[7,8],topicMeaning:"     ."}:null}generateTopicMessage(){const e=this.cards.filter(r=>[1,2].includes(r.position.position)),t=this.cards.find(r=>r.position.position===10);let n="";switch(this.topic){case"love":n=this.generateLoveMessage(e,t);break;case"career":n=this.generateCareerMessage(e,t);break;case"general":default:n=this.generateGeneralMessage(e,t)}return n}generateLoveMessage(e,t){let n="   . ";const r=e.find(o=>o.position.position===1),i=e.find(o=>o.position.position===2);if(r){const o=this.getCardEnergy(r);n+=`  ${o} . `,r.suit==="cups"&&(n+="      . ")}if(i){const o=this.getCardEnergy(i);n+=` ${o}  ,   . `}if(t){const o=this.getCardEnergy(t);t.orientation==="upright"?n+=` ${o}   .`:n+=`  ${o}   .`}return n}generateCareerMessage(e,t){let n="    . ";const r=e.find(o=>o.position.position===1),i=e.find(o=>o.position.position===2);if(r){const o=this.getCardEnergy(r);n+=`    ${o} . `,r.suit==="pentacles"?n+="    . ":r.suit==="wands"&&(n+="   . ")}if(i){const o=this.getCardEnergy(i);n+=`${o}       . `}return t&&t.arcana==="major"&&(n+="    ."),n}generateGeneralMessage(e,t){let n="     . ";this.cards.filter(o=>o.arcana==="major").length>=5&&(n+="    . ");const i=e.find(o=>o.position.position===1);if(i){const o=this.getCardEnergy(i);n+=` ${o}. `}if(t){const o=this.getCardEnergy(t);n+=`  ${o}  .`}return n}async generatePositionMeanings(){const e=[];for(const t of this.cards){const n=this.getPositionName(t.position.position),r=await this.getCelticPositionMeaning(t,n);e.push({position:t.position.position,positionName:n,cardName:t.nameKr,meaning:r})}return e}getPositionName(e){return{1:" ",2:" ",3:" ",4:"",5:" ",6:" ",7:"  ",8:"  ",9:" ",10:" "}[e]||`${e} `}async getCelticPositionMeaning(e,t){const n=e.position.position,r=this.getCardInterpretation(e,n),i=this.getCardEnergy(e),o=this.getTopicContext(n);return`${t} ${i} . ${r} ${o}`}getTopicContext(e){return this.topic==="love"?{1:"     .",2:"   .",3:"    .",4:"    .",5:"     .",6:"   .",7:"   .",8:"   .",9:"    .",10:"   ."}[e]||"":this.topic==="career"&&{1:"    .",2:"   .",3:"   .",4:"    .",5:"   .",6:"   .",7:"   .",8:"   .",9:"   .",10:"    ."}[e]||""}async generateActionSuggestions(){const e=[],t=[1,2,6,10];for(const n of t){const r=this.cards.find(i=>i.position.position===n);if(r){const i=this.getActionForPosition(r,n);e.push({position:n,cardName:r.nameKr,action:i.action,context:i.context})}}return e}getActionForPosition(e,t){const n=this.getCardEnergy(e);return{1:{action:`  ${n}  `,context:"    "},2:{action:`  ${n}  `,context:"  "},6:{action:` ${n} `,context:"   "},10:{action:` ${n}   `,context:"     "}}[t]||{action:"   ",context:""}}findSynergies(){const e=super.findSynergies(),t=this.cards.find(u=>u.position.position===4),n=this.cards.find(u=>u.position.position===1),r=this.cards.find(u=>u.position.position===6);t&&n&&r&&t.suit===n.suit&&n.suit===r.suit&&e.push({card1Name:`  ${this.getSuitName(t.suit)} `,card2Name:` ${this.getSuitName(r.suit)} `,positions:[4,1,6],description:`${this.getSuitName(t.suit)}      .`});const i=this.cards.find(u=>u.position.position===1),o=this.cards.find(u=>u.position.position===10);i&&o&&i.number===o.number&&i.arcana==="minor"&&e.push({card1Name:"  ",card2Name:"  ",positions:[1,10],description:"      .    ."});const a=this.cards.find(u=>u.position.position===9),c=this.cards.find(u=>u.position.position===10);return a&&c&&a.suit===c.suit&&e.push({card1Name:" ",card2Name:" ",positions:[9,10],description:"      .     ."}),e}getCardInterpretation(e,t){return e.arcana==="major"?this.getMajorCardInterpretation(e,t):this.getMinorCardInterpretation(e,t)}getMajorCardInterpretation(e,t){return this.topic==="love"?{0:"  ,   ",1:"   ",2:" ,   ",3:" ,  ",4:" ,   ",5:" ,   ",6:" ,  ",7:" ,  ",8:" ,   ",9:" ,  ",10:" ,   ",11:" ,  ",12:"  ,  ",13:"   ",14:" ,   ",15:" ,  ",16:"  ,  ",17:" ,  ",18:" ,  ",19:" ,  ",20:" ,  ",21:" ,  "}[e.number]||"  ":this.topic==="career"?{0:"  ,  ",1:"  , ",2:" ,  ",3:" ,  ",4:"  ,  ",5:" ,  ",6:" ,  ",7:"   ",8:" ,  ",9:" ,   ",10:" ,  ",11:" ,  ",12:" ,   ",13:" ,  ",14:",  ",15:" , ",16:" , ",17:" ,   ",18:" , ",19:" ,  ",20:" ,  ",21:" ,  "}[e.number]||"  ":{0:"   ",1:"  ",2:"  ",3:"  ",4:" ",5:"  ",6:" ",7:" ",8:"  ",9:"  ",10:" ",11:" ",12:"  ",13:" ",14:" ",15:" ",16:"  ",17:" ",18:" ",19:" ",20:"  ",21:" "}[e.number]||" "}getMinorCardInterpretation(e,t){if(this.topic==="love"){const a={wands:" ",cups:" ",swords:" ",pentacles:" "},c={1:"  ",2:" ",3:"  ",4:" ",5:"  ",6:"  ",7:"  ",8:"  ",9:" ",10:"  "},u=a[e.suit||""]||" ",h=c[e.number]||" ";return`${u} ${h}`}if(this.topic==="career"){const a={wands:" ",cups:" ",swords:" ",pentacles:" "},c={1:"  ",2:" ",3:" ",4:"  ",5:" ",6:" ",7:" ",8:"  ",9:"  ",10:"  "},u=a[e.suit||""]||" ",h=c[e.number]||" ";return`${u} ${h}`}const n={wands:" ",cups:" ",swords:" ",pentacles:" "},r={1:" ",2:" ",3:" ",4:" ",5:" ",6:" ",7:" ",8:" ",9:" ",10:"  "},i=n[e.suit||""]||"",o=r[e.number]||"";return`${i} ${o}`}}class p0 extends Fo{constructor(e,t){super(e,t),this.positions=t.map(n=>n.position)}analyzePatterns(){const e=super.analyzePatterns(),t=[],n=this.cards.find(r=>r.position.position===7);if(n){this.cards.filter(i=>i.position.position!==7),n.arcana==="major"&&t.push({pattern_name:"  ",description:`${n.nameKr}      .`,positions:[7],topicMeaning:this.getCenterCardMeaning(n)});const r=[[1,4],[2,5],[3,6]];for(const[i,o]of r){const a=this.cards.find(u=>u.position.position===i),c=this.cards.find(u=>u.position.position===o);a&&c&&a.suit===c.suit&&t.push({pattern_name:" ",description:`${i} ${o}  ${this.getSuitName(a.suit)}   .`,positions:[i,o],topicMeaning:"    ."})}}return[...e,...t]}getCenterCardMeaning(e){const t={love:"    .",career:"    .",general:"    ."};return t[this.topic]||t.general}generateTopicMessage(){const e=this.cards.filter(r=>r.arcana==="major").length,t=this.cards.find(r=>r.position.position===7);let n="";switch(this.topic){case"love":n=this.generateLoveMessage(e,t);break;case"career":n=this.generateCareerMessage(e,t);break;default:n=this.generateGeneralMessage(e,t)}return n}generateLoveMessage(e,t){let n="  . ";return e>=4&&(n+="     . "),t&&(n+=`${t.nameKr}      . `,t.arcana==="major"&&(n+="      . ")),this.cards.filter(i=>i.suit==="cups").length>=3&&(n+="     ,     ."),n}generateCareerMessage(e,t){let n="     . ";return e>=4&&(n+="      . "),t&&(n+=`${t.nameKr}      . `),this.cards.filter(i=>i.suit==="pentacles").length>=3&&(n+="     ."),n}generateGeneralMessage(e,t){let n="     . ";return t&&(n+=` ${t.nameKr}       . `),n+="       ,    .",n}async generatePositionMeanings(){const e=[];for(const t of this.cards){const n=this.getPositionName(t.position.position),r=await this.getPositionMeaning(t,n);e.push({position:t.position.position,positionName:n,cardName:t.nameKr,meaning:r})}return e}getPositionName(e){return{1:" ",2:" ",3:" ",4:" ",5:" ",6:" ",7:" "}[e]||`${e} `}async getPositionMeaning(e,t){var i;return`${((i={love:{1:"   ",2:"   ",3:"  ",4:"  ",5:"  ",6:"   ",7:"  "},career:{1:"  ",2:"   ",3:"  ",4:"  ",5:"  ",6:"  ",7:"  "},general:{1:"  ",2:"  ",3:"  ",4:"  ",5:"  ",6:"  ",7:"  "}}[this.topic])==null?void 0:i[e.position.position])||t}  ${e.nameKr}  ${this.getCardInterpretation(e,e.position.position)}`}getCardInterpretation(e,t){return e.arcana==="major"?this.getMajorCardInterpretation(e,t):this.getMinorCardInterpretation(e,t)}getMajorCardInterpretation(e,t){return this.topic==="love"?this.getLoveMajorInterpretation(e):this.topic==="career"?this.getCareerMajorInterpretation(e):this.getGeneralMajorInterpretation(e)}getLoveMajorInterpretation(e){return{0:"      .",1:"     .",2:"     .",3:"   .",4:"   .",5:"   .",6:"    .",7:"   .",8:"    .",9:"     .",10:"     .",11:"   .",12:"    .",13:"    .",14:"   .",15:"    .",16:"    .",17:"    .",18:"   .",19:"    .",20:"    .",21:"    ."}[e.number]||"     ."}getCareerMajorInterpretation(e){return{0:"    .",1:"    .",2:"    .",3:"   .",4:"   .",5:"    .",6:"   .",7:"    .",8:"    .",9:"    .",10:"    .",11:"    .",12:"    .",13:"    .",14:"   .",15:"     .",16:"   .",17:"     .",18:"  .",19:"   .",20:"   .",21:"    ."}[e.number]||"     ."}getGeneralMajorInterpretation(e){return{0:"    .",1:"   .",2:"   .",6:"   .",10:"    .",13:"   .",17:"   .",19:"   .",21:"    ."}[e.number]||"    ."}getMinorCardInterpretation(e,t){return this.topic==="love"?this.getLoveMinorInterpretation(e):this.topic==="career"?this.getCareerMinorInterpretation(e):this.getGeneralMinorInterpretation(e)}getLoveMinorInterpretation(e){return`${{wands:"   ",cups:"   ",swords:"   ",pentacles:"  "}[e.suit]||"  "} .`}getCareerMinorInterpretation(e){return`${{wands:"   ",cups:"   ",swords:"   ",pentacles:"   "}[e.suit]||"  "} .`}getGeneralMinorInterpretation(e){return`${{wands:"  ",cups:"  ",swords:"  ",pentacles:"  "}[e.suit]||" "} .`}async generateActionSuggestions(){const e=[];for(const t of this.cards){const n=this.getActionForPosition(t);n&&e.push({position:t.position.position,cardName:t.nameKr,action:n,context:this.getActionContext(t.position.position)})}return e}getActionForPosition(e){return{1:` ${e.nameKr}   .`,2:` ${e.nameKr}   .`,3:` ${e.nameKr}   .`,4:`${e.nameKr}   .`,5:` ${e.nameKr}   .`,6:` ${e.nameKr}   .`,7:`${e.nameKr}    .`}[e.position.position]||""}getActionContext(e){return{1:"   .",2:"  .",3:"  .",4:"   .",5:"  .",6:"   .",7:"  ."}[e]||""}}class g0 extends Fo{constructor(e,t){super(e,t),this.positions=t.map(n=>n.position)}analyzePatterns(){const e=super.analyzePatterns(),t=[],n=this.cards.find(c=>c.position.position===1),r=this.cards.find(c=>c.position.position===2);n&&r&&(n.suit&&r.suit&&n.suit===r.suit&&t.push({pattern_name:" ",description:`  ${this.getSuitName(n.suit)}   .`,positions:[1,2],topicMeaning:this.getSuitHarmonyMeaning(n.suit)}),n.arcana==="major"&&r.arcana==="major"&&t.push({pattern_name:" ",description:"      .",positions:[1,2],topicMeaning:"        ."}));const i=this.cards.find(c=>c.position.position===3),o=this.cards.find(c=>c.position.position===4),a=this.cards.find(c=>c.position.position===5);if(i&&o&&a){const c=this.analyzeTimeline(i,o,a);c&&t.push(c)}return[...e,...t]}getSuitHarmonyMeaning(e){const t={wands:"  .    .",cups:"    .    .",swords:"    .   .",pentacles:"  .     ."},n={wands:"   .   .",cups:"     .  .",swords:"   .   .",pentacles:"   .     ."},r={wands:"  .    .",cups:"    .    .",swords:"   .   .",pentacles:"  .     ."};return(this.topic==="love"?t:this.topic==="career"?n:r)[e]||"   ."}analyzeTimeline(e,t,n){return e.number<t.number&&t.number<n.number?{pattern_name:" ",description:"   .",positions:[3,4,5],topicMeaning:"        ."}:e.arcana==="major"&&n.arcana==="minor"?{pattern_name:"  ",description:"      .",positions:[3,4,5],topicMeaning:"     ."}:null}generateTopicMessage(){switch(this.topic){case"love":return this.generateLoveMessage();case"career":return this.generateCareerMessage();default:return this.generateGeneralMessage()}}generateLoveMessage(){const e=this.cards.find(o=>o.position.position===1),t=this.cards.find(o=>o.position.position===2),n=this.cards.find(o=>o.position.position===4);let r="      . ";e&&t&&(r+=` ${e.nameKr} ,  ${t.nameKr}   . `),n&&(r+=`  ${n.nameKr}  , `,n.suit==="cups"?r+="    . ":n.arcana==="major"&&(r+="   . "));const i=this.cards.find(o=>o.position.position===7);return i&&(r+=`     ${i.nameKr}.`),r}generateCareerMessage(){const e=this.cards.find(o=>o.position.position===1),t=this.cards.find(o=>o.position.position===2),n=this.cards.find(o=>o.position.position===4);let r="      . ";e&&t&&(r+=` ${e.nameKr}  , // ${t.nameKr}  . `),n&&(r+=`   ${n.nameKr} , `,n.suit==="pentacles"?r+="     . ":n.suit==="wands"&&(r+="    . "));const i=this.cards.find(o=>o.position.position===7);return i&&(r+=`    ${i.nameKr}.`),r}generateGeneralMessage(){const e=this.cards.find(o=>o.position.position===1),t=this.cards.find(o=>o.position.position===2),n=this.cards.find(o=>o.position.position===4);let r="      . ";e&&t&&(r+=`  ${e.nameKr} ,   ${t.nameKr}  . `),n&&(r+=`  ${n.nameKr}  , `,n.arcana==="major"&&(r+="   . "));const i=this.cards.find(o=>o.position.position===7);return i&&(r+=`   ${i.nameKr}  .`),r}async generatePositionMeanings(){const e=[];for(const t of this.cards){const n=this.getPositionName(t.position.position),r=await this.getRelationshipPositionMeaning(t,n);e.push({position:t.position.position,positionName:n,cardName:t.nameKr,meaning:r})}return e}getPositionName(e){const t={1:" ",2:" ",3:" ",4:" ",5:" ",6:" ",7:" "},n={1:"  ",2:"/ ",3:" ",4:"  ",5:" ",6:" ",7:"  "},r={1:"  ",2:"  ",3:" ",4:" ",5:" ",6:" ",7:" "};return(this.topic==="love"?t:this.topic==="career"?n:r)[e]||`${e} `}async getRelationshipPositionMeaning(e,t){const n=e.position.position;return this.topic==="love"?this.getLovePositionMeaning(e,n,t):this.topic==="career"?this.getCareerPositionMeaning(e,n,t):this.getGeneralPositionMeaning(e,n,t)}getLovePositionMeaning(e,t,n){switch(t){case 1:return`${e.nameKr}    ${this.getMyLoveEnergy(e)} .`;case 2:return`${e.nameKr}   ${this.getPartnerLoveEnergy(e)} .`;case 3:return`${e.nameKr}    ${this.getPastLoveInfluence(e)}  .`;case 4:return`${e.nameKr}    ${this.getCurrentLoveRelationship(e)}  .`;case 5:return`${e.nameKr}    ${this.getFutureLovePotential(e)} .`;case 6:return`${e.nameKr}  ${this.getLoveObstacle(e)}   .`;case 7:return`${e.nameKr}  ${this.getLoveAdvice(e)}   .`;default:return`${n} ${e.nameKr} .`}}getCareerPositionMeaning(e,t,n){switch(t){case 1:return`${e.nameKr}   ${this.getMyCareerEnergy(e)}   .`;case 2:return`${e.nameKr}  / ${this.getPartnerCareerEnergy(e)} .`;case 3:return`${e.nameKr}    ${this.getPastCareerInfluence(e)}  .`;case 4:return`${e.nameKr}     ${this.getCurrentCareerRelationship(e)}  .`;case 5:return`${e.nameKr}   ${this.getFutureCareerPotential(e)} .`;case 6:return`${e.nameKr}  ${this.getCareerObstacle(e)}   .`;case 7:return`${e.nameKr}  ${this.getCareerAdvice(e)}    .`;default:return`${n} ${e.nameKr} .`}}getGeneralPositionMeaning(e,t,n){switch(t){case 1:return`${e.nameKr}    ${this.getMyEnergy(e)} .`;case 2:return`${e.nameKr}    ${this.getPartnerEnergy(e)} .`;case 3:return`${e.nameKr}   ${this.getPastInfluence(e)}  .`;case 4:return`${e.nameKr}    ${this.getCurrentRelationship(e)}  .`;case 5:return`${e.nameKr}   ${this.getFuturePotential(e)} .`;case 6:return`${e.nameKr}  ${this.getObstacle(e)}   .`;case 7:return`${e.nameKr}  ${this.getAdvice(e)}  .`;default:return`${n} ${e.nameKr} .`}}getMyLoveEnergy(e){return e.suit==="cups"?"   ":e.suit==="wands"?"  ":e.suit==="swords"?"   ":e.suit==="pentacles"?"  ":e.arcana==="major"?"   ":"  "}getPartnerLoveEnergy(e){return e.suit==="cups"?"  ":e.suit==="wands"?"  ":e.suit==="swords"?"  ":e.suit==="pentacles"?"   ":e.arcana==="major"?"   ":"  "}getPastLoveInfluence(e){return e.number>=1&&e.number<=3?"   ":e.number>=4&&e.number<=6?"   ":e.number>=7&&e.number<=9?"   ":e.number===10?"  ":e.arcana==="major"?"   ":"  "}getCurrentLoveRelationship(e){return e.suit==="cups"?"  ":e.suit==="wands"?" ":e.suit==="swords"?"  ":e.suit==="pentacles"?" ":e.arcana==="major"?"   ":""}getFutureLovePotential(e){if(e.orientation==="upright"){if(e.suit==="cups")return"    ";if(e.suit==="wands")return"  ";if(e.suit==="swords")return"    ";if(e.suit==="pentacles")return"   ";if(e.arcana==="major")return"  "}else return"    ";return"  "}getLoveObstacle(e){return e.suit==="cups"?"  ":e.suit==="wands"?"  ":e.suit==="swords"?"  ":e.suit==="pentacles"?"   ":e.arcana==="major"?"   ":"   "}getLoveAdvice(e){return e.suit==="cups"?"    ":e.suit==="wands"?"   ":e.suit==="swords"?"   ":e.suit==="pentacles"?"   ":e.arcana==="major"?"     ":"  "}getMyCareerEnergy(e){return e.suit==="cups"?" ":e.suit==="wands"?" ":e.suit==="swords"?" ":e.suit==="pentacles"?" ":e.arcana==="major"?" ":""}getPartnerCareerEnergy(e){return e.suit==="cups"?"  ":e.suit==="wands"?"  ":e.suit==="swords"?"  ":e.suit==="pentacles"?"  ":e.arcana==="major"?"  ":"  "}getPastCareerInfluence(e){return e.number>=1&&e.number<=3?"  ":e.number>=4&&e.number<=6?"  ":e.number>=7&&e.number<=9?"  ":e.number===10?"   ":e.arcana==="major"?"  ":"  "}getCurrentCareerRelationship(e){return e.suit==="cups"?"   ":e.suit==="wands"?" ":e.suit==="swords"?"  ":e.suit==="pentacles"?" ":e.arcana==="major"?"  ":""}getFutureCareerPotential(e){if(e.orientation==="upright"){if(e.suit==="cups")return"   ";if(e.suit==="wands")return"   ";if(e.suit==="swords")return"  ";if(e.suit==="pentacles")return"  ";if(e.arcana==="major")return"  "}else return"    ";return"  "}getCareerObstacle(e){return e.suit==="cups"?"   ":e.suit==="wands"?"  ":e.suit==="swords"?"   ":e.suit==="pentacles"?"   ":e.arcana==="major"?"  ":"   "}getCareerAdvice(e){return e.suit==="cups"?"   ":e.suit==="wands"?"   ":e.suit==="swords"?"   ":e.suit==="pentacles"?"    ":e.arcana==="major"?"    ":"  "}getMyEnergy(e){return e.suit==="cups"?"  ":e.suit==="wands"?" ":e.suit==="swords"?" ":e.suit==="pentacles"?" ":e.arcana==="major"?"  ":" "}getPartnerEnergy(e){return e.suit==="cups"?"   ":e.suit==="wands"?"  ":e.suit==="swords"?"  ":e.suit==="pentacles"?"   ":e.arcana==="major"?"   ":" "}getPastInfluence(e){return e.number>=1&&e.number<=3?"   ":e.number>=4&&e.number<=6?"   ":e.number>=7&&e.number<=9?"  ":e.number===10?" ":e.arcana==="major"?"   ":" "}getCurrentRelationship(e){return e.suit==="cups"?" ":e.suit==="wands"?" ":e.suit==="swords"?"  ":e.suit==="pentacles"?" ":e.arcana==="major"?"  ":""}getFuturePotential(e){if(e.orientation==="upright"){if(e.suit==="cups")return"   ";if(e.suit==="wands")return"  ";if(e.suit==="swords")return"  ";if(e.suit==="pentacles")return"  ";if(e.arcana==="major")return"  "}else return"    ";return" "}getObstacle(e){return e.suit==="cups"?"  ":e.suit==="wands"?" ":e.suit==="swords"?" ":e.suit==="pentacles"?"  ":e.arcana==="major"?"  ":"  "}getAdvice(e){return e.suit==="cups"?"    ":e.suit==="wands"?"   ":e.suit==="swords"?"   ":e.suit==="pentacles"?"   ":e.arcana==="major"?"     ":"  "}async generateActionSuggestions(){const e=[],t={1:{action:"     ",context:"    "},2:{action:"    ",context:"   "},3:{action:"    ",context:"    "},4:{action:"     ",context:"     "},5:{action:"     ",context:"     "},6:{action:"     ",context:"     "},7:{action:"   ",context:"     "}},n={1:{action:"    ",context:"     "},2:{action:"   ",context:"      "},3:{action:"      ",context:"  "},4:{action:"    ",context:"    "},5:{action:"     ",context:"    "},6:{action:"    ",context:"   "},7:{action:"    ",context:"     "}},r={1:{action:"    ",context:"    "},2:{action:"   ",context:"    "},3:{action:"    ",context:"   "},4:{action:"    ",context:"    "},5:{action:"    ",context:"   "},6:{action:"    ",context:"     "},7:{action:"   ",context:"    "}},i=this.topic==="love"?t:this.topic==="career"?n:r;for(const o of this.cards){const a=o.position.position,c=i[a];c&&e.push({position:a,cardName:o.nameKr,action:c.action,context:c.context})}return e}findSynergies(){const e=super.findSynergies(),t=this.cards.find(r=>r.position.position===1),n=this.cards.find(r=>r.position.position===2);return t&&n&&(this.areComplementary(t,n)&&e.push({card1Name:t.nameKr,card2Name:n.nameKr,positions:[1,2],description:"     .     ."}),t.number===n.number&&t.arcana==="minor"&&e.push({card1Name:t.nameKr,card2Name:n.nameKr,positions:[1,2],description:`${t.number}  .       .`})),e}areComplementary(e,t){const n=[["wands","cups"],["swords","pentacles"]];for(const[r,i]of n)if(e.suit===r&&t.suit===i||e.suit===i&&t.suit===r)return!0;return!1}}const Hs=qc("tarot",()=>{const s=Je(),e=G([]),t=G(null),n=G(null),r=G(!0),i=G(!1),o=G([]),a=G([]),c=G(null),u=G(null),h=G(null),f=G(""),m=()=>{try{localStorage.setItem("tarot_readings",JSON.stringify(e.value))}catch(g){console.warn("Failed to save readings:",g)}},p=()=>{try{const g=localStorage.getItem("tarot_readings");g&&(e.value=JSON.parse(g))}catch(g){console.warn("Failed to load readings:",g)}},d=()=>{try{t.value&&localStorage.setItem("tarot_daily_card",JSON.stringify(t.value))}catch(g){console.warn("Failed to save daily card:",g)}},v=()=>{try{const g=localStorage.getItem("tarot_daily_card");g&&(t.value=JSON.parse(g))}catch(g){console.warn("Failed to load daily card:",g)}},k=g=>{h.value=g},$=()=>h.value,R=async()=>{try{console.log("   ..."),i.value=!0;const g=await Zg.getAllCards();g&&g.length>0?(o.value=g.map(y=>({id:y.id,name:y.name,nameKr:y.name_kr,arcana:y.arcana,number:y.number,keywords:typeof y.keywords=="string"?JSON.parse(y.keywords):y.keywords,meanings:typeof y.meanings=="string"?JSON.parse(y.meanings):y.meanings,element:y.element,astrology:y.astrology,imageUrl:y.image_url})),console.log(`  : ${o.value.length}`)):(console.warn("  ,   "),S())}catch(g){console.error("  :",g),console.log("  "),S()}finally{i.value=!1}},S=()=>{o.value=[{id:0,name:"The Fool",nameKr:"",arcana:"major",number:0,keywords:{upright:[" ","","",""],reversed:["","",""," "]},meanings:{general:{upright:"    .",reversed:"   ."},love:{upright:"    .",reversed:"  ."},career:{upright:"     .",reversed:"     ."},money:{upright:"     .",reversed:"   ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/00-the-fool.png"},{id:1,name:"The Magician",nameKr:"",arcana:"major",number:1,keywords:{upright:["","","","",""],reversed:["",""," "," "]},meanings:{general:{upright:"        .",reversed:"    ."},love:{upright:" .  .",reversed:"      ."},career:{upright:"   .",reversed:"  ."},money:{upright:"     .",reversed:"  ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/01-the-magician.png"},{id:2,name:"The High Priestess",nameKr:"",arcana:"major",number:2,keywords:{upright:["",""," ",""],reversed:[" ","",""," "]},meanings:{general:{upright:"     .",reversed:"    ."},love:{upright:"     .",reversed:"      ."},career:{upright:"      .",reversed:"    ."},money:{upright:"    .",reversed:"     ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/02-the-high-priestess.png"},{id:3,name:"The Empress",nameKr:"",arcana:"major",number:3,keywords:{upright:["","","",""],reversed:[""," ","",""]},meanings:{general:{upright:"    .",reversed:"       ."},love:{upright:"      .",reversed:"      ."},career:{upright:"    .",reversed:"      ."},money:{upright:"     .",reversed:"     ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/03-the-empress.png"},{id:4,name:"The Emperor",nameKr:"",arcana:"major",number:4,keywords:{upright:["","","",""],reversed:["",""," ",""]},meanings:{general:{upright:"      .",reversed:"       ."},love:{upright:"       .",reversed:"      ."},career:{upright:"      .",reversed:"       ."},money:{upright:"      .",reversed:"     ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/04-the-emperor.png"},{id:5,name:"The Hierophant",nameKr:"",arcana:"major",number:5,keywords:{upright:["","","",""],reversed:["",""," "," "]},meanings:{general:{upright:"       .",reversed:"       ."},love:{upright:"    .",reversed:"     ."},career:{upright:"     .",reversed:"     ."},money:{upright:"    .",reversed:"     ."}},element:"",astrology:"",imageUrl:"/assets/tarot-cards/major/05-the-hierophant.png"}],console.log("    :",o.value.length+"")},E=g=>{if(console.log(`  : ${g},   : ${o.value.length}`),o.value.length===0)return console.error("   !"),[];g>o.value.length&&console.warn(`  (${g})    (${o.value.length}) .`);const _=[...o.value].sort(()=>Math.random()-.5).slice(0,g);return console.log(" :",_.map(P=>P.nameKr)),_},M=g=>a.value.find(y=>y.spreadId===g),A=async()=>{const g=new Date().toDateString();if(t.value&&t.value.date===g)return t.value.card;try{const _=E(1)[0],P=Math.random()<.5?"upright":"reversed";return t.value={date:g,card:_,orientation:P},d(),_}catch(y){console.error("   :",y);const P=E(1)[0],U=Math.random()<.5?"upright":"reversed";return t.value={date:g,card:P,orientation:U},d(),P}},D=g=>E(g).map(_=>({..._,orientation:Math.random()<.5?"upright":"reversed"})),K=async(g,y,_,P)=>{var U,N,Q;try{i.value=!0,console.log("  :",{spreadId:g,topic:y,question:_});const F=M(g);if(!F)throw new Error("Invalid spread ID: "+g);console.log(" :",F),console.log("   :",o.value.length);const q=P&&P.length>0?P:h.value&&h.value.length===F.cardCount?h.value:D(F.cardCount);console.log(" :",q);const x=q.map((te,ce)=>({...te,position:F.positions[ce]}));let H;if(console.log("  :",{spreadId:g,cardCount:x.length,topic:y,isPremium:s.isPremium}),g==="celtic_cross"&&s.isPremium){const ce=await new f0(y,x).generateInterpretation();H={cards:x.map((we,xe)=>{var ke,Fe,Ge;const Ie=(ke=ce.positionMeanings)==null?void 0:ke.find(rt=>rt.position===xe+1);return{...we,interpretation:{basic:(Ie==null?void 0:Ie.meaning)||`${we.position.name} ${we.nameKr}`,advice:((Ge=(Fe=ce.actionSuggestions)==null?void 0:Fe.find(rt=>rt.position===xe+1))==null?void 0:Ge.action)||""}}}),overallMessage:ce.overallMessage,enhancedInterpretation:ce,premiumInsights:{combinationPatterns:ce.combinationPatterns,synergies:ce.synergies,actionSuggestions:ce.actionSuggestions,positionMeanings:ce.positionMeanings}}}else if(g==="celtic_cross"){const ce=await new Cy(x,y).generateInterpretation();H={cards:x.map((we,xe)=>({...we,interpretation:{basic:ce.positions[xe].meaning,advice:ce.advice}})),overallMessage:ce.overallPattern,premiumInsights:{relationships:ce.relationships||[],elementAnalysis:ce.elementAnalysis||[],timelineAnalysis:ce.timelineAnalysis||{},keywords:ce.keywords||[]}}}else if(g==="seven_star"&&s.isPremium){const ce=await new p0(y,x).generateInterpretation();H={cards:x.map((we,xe)=>{var ke,Fe,Ge;const Ie=(ke=ce.positionMeanings)==null?void 0:ke.find(rt=>rt.position===xe+1);return{...we,interpretation:{basic:(Ie==null?void 0:Ie.meaning)||`${we.position.name} ${we.nameKr}`,advice:((Ge=(Fe=ce.actionSuggestions)==null?void 0:Fe.find(rt=>rt.position===xe+1))==null?void 0:Ge.action)||""}}}),overallMessage:ce.overallMessage,enhancedInterpretation:ce,premiumInsights:{combinationPatterns:ce.combinationPatterns,synergies:ce.synergies,actionSuggestions:ce.actionSuggestions,positionMeanings:ce.positionMeanings}}}else if(g==="cup_of_relationship"&&s.isPremium){const ce=await new g0(y,x).generateInterpretation();H={cards:x.map((we,xe)=>{var ke,Fe,Ge;const Ie=(ke=ce.positionMeanings)==null?void 0:ke.find(rt=>rt.position===xe+1);return{...we,interpretation:{basic:(Ie==null?void 0:Ie.meaning)||`${we.position.name} ${we.nameKr}`,advice:((Ge=(Fe=ce.actionSuggestions)==null?void 0:Fe.find(rt=>rt.position===xe+1))==null?void 0:Ge.action)||""}}}),overallMessage:ce.overallMessage,enhancedInterpretation:ce,premiumInsights:{combinationPatterns:ce.combinationPatterns,synergies:ce.synergies,actionSuggestions:ce.actionSuggestions,positionMeanings:ce.positionMeanings}}}else H=s0(x,F,y,s.isPremium),(g==="one_card"||g==="three_card_timeline")&&H.cards&&(console.log("1/3   :",{spreadId:g,cardCount:H.cards.length,hasOverallMessage:!!H.overallMessage}),H.cards=H.cards.map((te,ce)=>{var we,xe,Ie,ke,Fe;if(!te.interpretation||!te.interpretation.basic){const Ge=te.card||te,rt=((xe=(we=Ge.meanings)==null?void 0:we[y])==null?void 0:xe[te.orientation])||((ke=(Ie=Ge.meanings)==null?void 0:Ie.general)==null?void 0:ke[te.orientation])||`${Ge.nameKr||Ge.name||"   "}  .`;return console.log(` ${ce}  :`,{cardName:Ge.nameKr||Ge.name,hasInterpretation:!!te.interpretation,meaning:rt}),{...te,interpretation:{basic:rt,advice:W(te,y),keywords:((Fe=Ge.keywords)==null?void 0:Fe[te.orientation])||[]}}}return te}),H.overallMessage||(H.overallMessage=oe(x,F,y)));let J=[],Y=null;s.isPremium&&(J=mr.analyzeCardCombinations(x),Y=mr.analyzeCardPattern(x));const me=x.map((te,ce)=>{const we=c0.enhanceInterpretation(te,y,F.positions[ce]);return{...te,interpretation:{...te.interpretation,...we}}});let he=null,Me=null;if(s.isPremium){const te={id:`temp_${Date.now()}`,userId:(U=s.currentUser)==null?void 0:U.id,spreadId:g,topic:y,question:_,cards:x,overallMessage:"",createdAt:new Date,isPremium:!0,shared:!1};he=mr.generateDeepInterpretation(te),Me=mr.generateProbabilityAnalysis(x,y)}let Te=null;if(g==="celtic_cross"){const te=[x[2],x[3]],ce=x[0],we=[x[4],x[5]];Te=Lu.analyzeTimelineInfluence(te,ce,we)}if(H={...H,cards:me,cardCombinations:J,cardPattern:Y,deepInterpretation:he,probabilityAnalysis:Me,timelineAnalysis:Te,premiumInsights:s.isPremium?{...H.premiumInsights,deepLayers:he==null?void 0:he.layers,synthesis:he==null?void 0:he.synthesis,keyInsights:he==null?void 0:he.keyInsights,actionPlan:he==null?void 0:he.actionPlan,affirmations:he==null?void 0:he.affirmations,journalPrompts:he==null?void 0:he.journalPrompts,cardCombinations:J,cardPattern:Y,probabilityAnalysis:Me,timelineAnalysis:Te}:void 0},(N=s.currentUser)!=null&&N.birthDate){const te={birthDate:new Date(s.currentUser.birthDate),zodiacSign:h0.getZodiacSign(new Date(s.currentUser.birthDate)),lifePathNumber:d0.calculate(new Date(s.currentUser.birthDate)),readingHistory:e.value},ce=new u0(te);H.cards=H.cards.map(we=>{const xe=ce.enhanceInterpretation(we,{spread:F,topic:y});return{...we,interpretation:{...we.interpretation,personalized:xe}}})}const ze={id:`reading_${Date.now()}`,userId:(Q=s.currentUser)==null?void 0:Q.id,spreadId:g,topic:y,question:_,cards:H.cards||x,overallMessage:H.overallMessage||oe(x,F,y),createdAt:new Date,isPremium:F.isPremium,shared:!1,premiumInsights:H.premiumInsights,cardCombinations:s.isPremium?J:void 0,cardPattern:s.isPremium?Y:void 0,deepInterpretation:s.isPremium?he:void 0,probabilityAnalysis:s.isPremium?Me:void 0,timelineAnalysis:s.isPremium?Te:void 0,enhancedInterpretation:H.enhancedInterpretation,improvedInterpretation:j.value};return console.log(" :",ze),console.log("   :",{improvedInterpretationFromRef:j.value,enhancedInterpretationFromInterpretation:H.enhancedInterpretation,readingImprovedInterpretation:ze.improvedInterpretation,readingEnhancedInterpretation:ze.enhancedInterpretation}),(g==="one_card"||g==="three_card_timeline")&&(console.log("=== 1/3    ==="),console.log(" :",ze.overallMessage),ze.cards.forEach((te,ce)=>{var we;console.log(` ${ce+1}:`,{name:te.nameKr||te.name,orientation:te.orientation,hasInterpretation:!!te.interpretation,interpretationBasic:(we=te.interpretation)==null?void 0:we.basic})})),V(ze),n.value=ze,s.isPremium||s.incrementFreeReading(),h.value=null,console.log("  :",ze.id),ze}catch(F){throw console.error("  :",F),F}finally{i.value=!1}},W=(g,y)=>{const P={upright:["    .","  .","   ."],reversed:["   .","   .","   ."]}[g.orientation];return P[Math.floor(Math.random()*P.length)]},se=(g,y)=>{const _=g[0],P=g[1],U=g[2],N=g[3],Q=g[4],F=g[5],q=g[6],x=g[7],H=g[8],J=g[9];let Y=[];switch(_.arcana==="major"?Y.push(`  ${_.nameKr}       `):Y.push(`   ${_.orientation==="upright"?" ":"   "}`),P.orientation==="reversed"?Y.push(` ${P.nameKr}       `):Y.push(`${P.nameKr}         `),(U.arcana==="major"||N.arcana==="major")&&Y.push("      "),Q.orientation==="upright"&&F.orientation==="upright"?Y.push("   "):Q.orientation==="reversed"&&F.orientation==="reversed"?Y.push("  ,     "):Y.push("    "),q.orientation==="upright"?Y.push("      "):Y.push("     "),J.arcana==="major"?Y.push(` ${J.nameKr}      `):J.orientation==="upright"?Y.push("     "):Y.push("    ,       "),y){case"love":Y.push(`  ${H.nameKr}       `);break;case"career":Y.push(` ${x.nameKr}      `);break;case"money":Y.push("      ");break;case"health":Y.push("      ");break;default:Y.push("    ")}return Y.join(". ")+"."},oe=(g,y,_)=>{if(y.spreadId==="celtic_cross")return se(g,_);const U=g.filter(H=>H.orientation==="upright").length/g.length,N=g.filter(H=>H.arcana==="major"),Q=N.length>0;let F=[];if(y.cardCount===1){const H=g[0];console.log("1   :",{cardName:H.nameKr||H.name,orientation:H.orientation,hasMeanings:!!H.meanings,topic:_}),H.arcana==="major"&&F.push(`${H.nameKr||H.name}     `),H.orientation==="upright"?F.push("        "):F.push("      "),H.meanings&&H.meanings[_]&&H.meanings[_][H.orientation]?F.push(H.meanings[_][H.orientation]):H.meanings&&H.meanings.general&&H.meanings.general[H.orientation]?F.push(H.meanings.general[H.orientation]):console.warn("1    - meanings  :",H)}else if(y.cardCount===3){const H=g[0],J=g[1],Y=g[2];H.orientation==="reversed"?F.push("  "):F.push("      "),J.arcana==="major"?F.push("   "):J.orientation==="upright"?F.push("   "):F.push("    "),Y.orientation==="upright"?Y.arcana==="major"?F.push("     "):F.push("  "):F.push("      ")}let q="";switch(_){case"love":U>.6?q="      .":q="      .";break;case"career":U>.6?q="      .":q="       .";break;case"money":Q?q="    .":U>.5?q="     .":q="       .";break;case"health":U>.7?q="    .":q="     .";break;default:q=""}let x=F.join(", ");return x&&(x+="."),x+=q,N.length>=2&&(x+="       ."),U>.7?x+="     .":U<.3&&(x+="      ."),x},V=g=>{e.value.unshift(g),!s.isPremium&&e.value.length>10&&(e.value=e.value.slice(0,10)),m()},I=async()=>{try{p()}catch(g){console.error("  :",g)}},T=async g=>{try{e.value=e.value.filter(y=>y.id!==g),m()}catch(y){throw console.error("  :",y),y}},z=async()=>{try{await R(),await ne(),p(),v()}catch(g){console.error("   :",g)}},ne=async()=>{try{console.log("   ...");const g=await em.getAllSpreads();g&&g.length>0?(a.value=g.map(y=>({spreadId:y.spread_id,name:y.name,nameKr:y.name_kr,description:y.description,cardCount:y.card_count,positions:y.positions,isPremium:y.is_premium,topics:y.topics})),console.log("Supabase   :",a.value.length+"")):(console.warn("Supabase   ,   "),a.value=jr)}catch(g){console.error("  :",g),console.log("  "),a.value=jr}console.log("  :",a.value.length+""),console.log("  :",a.value.map(g=>g.nameKr))},X=async()=>{try{v();const g=new Date().toDateString();(!t.value||t.value.date!==g)&&(console.log("    "),o.value.length===0&&(console.log("  ,  "),await R()),await A())}catch(g){console.error("   :",g)}},ie=()=>t.value,L=()=>e.value,Z=()=>n.value,ae=g=>e.value.find(y=>y.id===g),fe=g=>{c.value=g},Le=g=>{u.value=g},_e=g=>{f.value=g,g?localStorage.setItem("tarotCustomQuestion",g):localStorage.removeItem("tarotCustomQuestion")},De=()=>(f.value||(f.value=localStorage.getItem("tarotCustomQuestion")||""),f.value),ve=()=>{f.value="",localStorage.removeItem("tarotCustomQuestion")},j=G(null);return{readings:e,dailyCard:t,currentReading:n,vibrationEnabled:r,isLoading:i,tarotCards:o,spreads:a,selectedTopic:c,selectedSpread:u,improvedInterpretation:j,customQuestion:f,initialize:z,loadTarotCards:R,drawDailyCard:A,drawCards:D,createReading:K,loadReadings:I,deleteReading:T,loadDailyCard:X,loadDailyCardFromStorage:v,getDailyCard:ie,getReadings:L,getCurrentReading:Z,getReadingById:ae,setSelectedTopic:fe,setSelectedSpread:Le,setCustomQuestion:_e,getCustomQuestion:De,clearCustomQuestion:ve,setTempDrawnCards:k,getTempDrawnCards:$,setImprovedInterpretation:g=>{j.value=g},getImprovedInterpretation:()=>j.value,clearImprovedInterpretation:()=>{j.value=null},updateReading:g=>{const y=e.value.findIndex(_=>_.id===g.id);y!==-1&&(e.value[y]=g,m()),n.value=g}}}),m0=Object.freeze(Object.defineProperty({__proto__:null,useTarotStore:Hs},Symbol.toStringTag,{value:"Module"})),v0={class:"main-app"},y0={class:"app-header"},w0={class:"header-content"},b0={class:"user-section"},_0={class:"user-info"},k0={class:"welcome-text"},S0={key:0,class:"premium-badge"},C0={class:"user-avatar"},$0=["src","alt"],P0={key:1,class:"avatar-placeholder"},T0={key:0,class:"user-dropdown"},E0={class:"main-content"},A0={key:0,class:"loading-state"},I0={key:1,class:"app-content"},R0={class:"welcome-section"},M0={class:"main-menu"},O0=Ze({__name:"MainApp",setup(s){const e=Dt(),t=Je(),n=Hs(),r=G(!1),i=G(!1),o=G(!1),a=()=>{o.value=!o.value,window.dispatchEvent(new CustomEvent("toggle-test-panel"))};pt(async()=>{console.log("    "),t.currentUser&&!t.isLoading?(console.log("  ,   "),n.loadReadings(),n.loadDailyCard()):t.isLoading||(console.log(" ,  "),await t.initializeUser(),n.loadReadings(),n.loadDailyCard()),document.addEventListener("click",v)});const c=()=>{var R;const k=new Date().getHours(),$=((R=t.currentUser)==null?void 0:R.name)||"";return k<12?` , ${$}! `:k<18?`, ${$}! `:` , ${$}! `},u=async()=>{var k;console.log("   !"),console.log(" :",t.isPremium),console.log(":",(k=t.currentUser)==null?void 0:k.email),e.push("/daily-card")},h=k=>{r.value=!r.value,r.value&&setTimeout(()=>{var R;const $=(R=k.target.closest(".user-menu"))==null?void 0:R.querySelector(".user-dropdown");if($){const S=$.getBoundingClientRect(),E=window.innerWidth;if(S.right>E-10){const M=S.right-E+20;$.style.transform=`translateX(-${M}px)`}}},10)},f=async()=>{try{await t.logout(),r.value=!1,e.push("/")}catch(k){console.error(" :",k)}},m=()=>{console.log(" "),r.value=!1},p=()=>{console.log(" "),r.value=!1,e.push("/premium")},d=async()=>{await Be({title:" ",message:"    ."})},v=k=>{if(!k.target.closest(".user-menu")){r.value=!1;const R=document.querySelector(".user-dropdown");R&&(R.style.transform="translateX(0)")}};return(k,$)=>{var S,E,M;const R=Vr("router-link");return w(),b("div",v0,[l("header",y0,[l("div",w0,[$[2]||($[2]=l("div",{class:"logo-section"},[l("h1",{class:"app-title"},"  ")],-1)),l("div",b0,[i.value?(w(),b("button",{key:0,class:B(["test-mode-btn",{active:o.value}]),onClick:a},"  ",2)):O("",!0),l("div",_0,[l("span",k0,C(c()),1),de(t).isPremium?(w(),b("span",S0,"Premium")):O("",!0)]),l("div",{class:"user-menu",onClick:$[0]||($[0]=A=>h(A))},[l("div",C0,[(S=de(t).currentUser)!=null&&S.avatarUrl?(w(),b("img",{key:0,src:de(t).currentUser.avatarUrl,alt:de(t).currentUser.name,class:"avatar-image"},null,8,$0)):(w(),b("div",P0,C(((M=(E=de(t).currentUser)==null?void 0:E.name)==null?void 0:M.charAt(0))||"U"),1))]),r.value?(w(),b("div",T0,[l("button",{onClick:m,class:"menu-item"},"    "),l("button",{onClick:p,class:"menu-item"},"    "),$[1]||($[1]=l("div",{class:"menu-divider"},null,-1)),l("button",{onClick:f,class:"menu-item"},"   ")])):O("",!0)])])])]),l("main",E0,[de(t).isLoading?(w(),b("div",A0,$[3]||($[3]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"   ...",-1)]))):(w(),b("div",I0,[l("div",R0,[l("h2",null,C(c()),1),$[4]||($[4]=l("p",{class:"subtitle"},"  ",-1))]),l("div",M0,[pe(R,{to:"/reading-select",class:"menu-card"},{default:$e(()=>$[5]||($[5]=[l("div",{class:"menu-icon"},"",-1),l("div",{class:"menu-content"},[l("h3",null,"  "),l("p",null,"   ")],-1)])),_:1,__:[5]}),l("div",{class:"menu-card",onClick:u},$[6]||($[6]=[l("div",{class:"menu-icon"},"",-1),l("div",{class:"menu-content"},[l("h3",null," "),l("p",null,"    ")],-1)])),l("div",{class:"menu-card",onClick:d},$[7]||($[7]=[l("div",{class:"menu-icon"},"",-1),l("div",{class:"menu-content"},[l("h3",null," "),l("p",null,"   ")],-1)])),de(t).isPremium?O("",!0):(w(),vt(R,{key:0,to:"/premium",class:"menu-card premium-card"},{default:$e(()=>$[8]||($[8]=[l("div",{class:"menu-icon"},"",-1),l("div",{class:"menu-content"},[l("h3",null," "),l("p",null,"    ")],-1)])),_:1,__:[8]}))])]))])])}}}),j0=et(O0,[["__scopeId","data-v-aeecce91"]]),L0={class:"modal-body"},D0={class:"input-container"},U0={class:"char-count"},x0={class:"modal-footer"},N0=["disabled"],K0=Ze({__name:"CustomQuestionModal",props:{isOpen:{type:Boolean}},emits:["close","confirm"],setup(s,{emit:e}){const t=s,n=e,r=G(""),i=G();pt(()=>{t.isOpen&&i.value&&i.value.focus()});const o=()=>{r.value="",n("close")},a=()=>{r.value.trim()&&r.value.length>=10&&(n("confirm",r.value.trim()),r.value="")};return(c,u)=>(w(),b("div",{class:"modal-overlay",onClick:o},[l("div",{class:"modal-content",onClick:u[1]||(u[1]=ms(()=>{},["stop"]))},[l("div",{class:"modal-header"},[u[2]||(u[2]=l("h2",null," ",-1)),l("button",{class:"close-button",onClick:o},"")]),l("div",L0,[u[3]||(u[3]=l("p",{class:"description"},"       .       . ",-1)),l("div",D0,[St(l("textarea",{"onUpdate:modelValue":u[0]||(u[0]=h=>r.value=h),placeholder:":        ?",maxlength:"200",rows:"4",ref_key:"textareaRef",ref:i},null,512),[[fs,r.value]]),l("div",U0,C(r.value.length)+"/200",1)]),u[4]||(u[4]=l("div",{class:"tips"},[l("p",{class:"tip-title"},"   "),l("ul",null,[l("li",null,"     ?"),l("li",null,"     ?"),l("li",null,"      ?")])],-1))]),l("div",x0,[l("button",{class:"btn btn-secondary",onClick:o},""),l("button",{class:"btn btn-primary",onClick:a,disabled:!r.value.trim()||r.value.length<10},"  ",8,N0)])])]))}}),F0=et(K0,[["__scopeId","data-v-1f471a91"]]),B0=["celtic_cross","seven_star","cup_of_relationship"],Du="test@example.com";function Uu(){const s=new Date,e=s.getFullYear(),t=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");return`${e}-${t}-${n}`}function Lr(s){return B0.includes(s)}async function Dr(s){var e;try{if(!s)return!1;const t=Uu(),{data:n,error:r}=await ue.from("premium_spread_usage").select("id, spread_id").eq("user_id",s).gte("used_at",`${t}T00:00:00`).lt("used_at",`${t}T23:59:59`).maybeSingle();return r?r.code==="406"||(e=r.message)!=null&&e.includes("Not Acceptable")?(console.warn("Premium spread usage check skipped - user might be anonymous"),!1):r.code==="42P01"?(console.warn("Premium spread usage table not found"),!1):(console.error("Error checking premium spread usage:",r),!1):!!n}catch(t){return console.error("Error checking premium spread usage:",t),!1}}async function z0(s){var e;try{if(!s)return null;const t=Uu(),{data:n,error:r}=await ue.from("premium_spread_usage").select("spread_id").eq("user_id",s).gte("used_at",`${t}T00:00:00`).lt("used_at",`${t}T23:59:59`).maybeSingle();return r?(r.code==="406"||(e=r.message)!=null&&e.includes("Not Acceptable")||r.code==="42P01"||console.error("Error getting today used spread:",r),null):(n==null?void 0:n.spread_id)||null}catch(t){return console.error("Error getting today used spread:",t),null}}async function H0(s,e,t,n){return e||!Lr(s)||n===Du?!0:!await Dr(t)}async function W0(s,e,t){var n;if(Lr(s)){if(!e){console.warn("Cannot record premium spread usage without userId");return}if(t===Du){console.log("Test account - skipping premium spread usage recording");return}try{const r=new Date,{error:i}=await ue.from("premium_spread_usage").insert({user_id:e,spread_id:s,used_at:r.toISOString()});if(i){if(i.code==="406"||(n=i.message)!=null&&n.includes("Not Acceptable")){console.warn("Cannot record premium spread usage - insufficient permissions");return}if(i.code==="42P01"){console.warn("Premium spread usage table not found");return}console.error("Error recording premium spread usage:",i)}}catch(r){console.error("Error recording premium spread usage:",r)}}}async function q0(s){if(await Dr(s)){const t=await z0(s);return`     . (${V0(t)})
    .`}return" ( , ,   )  1   ."}function V0(s){return s?{celtic_cross:" ",seven_star:"",cup_of_relationship:"  "}[s]||s:""}function G0(){const s=new Date,e=new Date(s);e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const t=e.getTime()-s.getTime(),n=Math.floor(t/(1e3*60*60)),r=Math.floor(t%(1e3*60*60)/(1e3*60));return n>0?`${n} ${r}`:`${r}`}const J0={class:"reading-select"},Q0={class:"container"},Y0={class:"mobile-view"},X0={key:0,class:"mobile-selected-topic"},Z0={class:"selected-info-card card"},ew={class:"selected-content"},tw={key:0},sw={key:1,class:"mobile-all-selected"},nw={class:"selected-info-card card"},rw={class:"selected-content"},iw={class:"selection-item"},ow={class:"item-value"},aw={class:"selection-item"},lw={class:"item-value"},cw={class:"selection-item"},uw={class:"item-value"},dw={class:"mobile-actions"},hw=["disabled"],fw={class:"desktop-view"},pw={class:"section"},gw={class:"topic-grid"},mw=["onClick"],vw={class:"topic-icon"},yw={key:0,class:"premium-badge"},ww={key:0},bw={key:1},_w={class:"section"},kw={key:0,class:"custom-notice"},Sw={key:1,class:"premium-spread-notice"},Cw={class:"notice-text"},$w={key:0,class:"reset-time"},Pw={key:2,class:"test-account-notice"},Tw={class:"spread-grid"},Ew=["onClick"],Aw={class:"spread-header"},Iw={key:0,class:"premium-badge"},Rw={class:"spread-description"},Mw={class:"spread-info"},Ow={class:"card-count"},jw={key:0,class:"premium-overlay"},Lw={key:1,class:"free-badge"},Dw={key:2,class:"test-badge"},Uw={key:3,class:"updating-overlay"},xw={key:0,class:"selection-summary"},Nw={class:"summary-card card"},Kw={class:"summary-details"},Fw={class:"summary-item"},Bw={class:"summary-item"},zw={class:"summary-item"},Hw={class:"action-section"},Ww=["disabled"],qw={key:0,class:"free-usage-info"},Vw=Ze({__name:"ReadingSelect",setup(s){const e=Dt(),t=Je(),n=Hs(),r=G(""),i=G(""),o=G(!1),a=G(""),c=G(!1),u=G(!1),h=G(!1),f=G(""),m=G(!1),p=()=>{c.value=window.innerWidth<=768};pt(async()=>{var T,z;p(),window.addEventListener("resize",p);const I=((T=t.currentUser)==null?void 0:T.email)==="test@example.com";if(t.currentUser&&!t.isPremium&&!t.currentUser.isAnonymous&&!I){u.value=!0;try{h.value=await Dr(t.currentUser.id),f.value=await q0(t.currentUser.id)}catch(ne){console.error("Error checking premium usage:",ne)}finally{u.value=!1}}if((z=t.currentUser)!=null&&z.isAnonymous&&!t.isPremium){const{hasUsedPremiumSpreadToday:ne,getFreeUserMessage:X}=await Pe(async()=>{const{hasUsedPremiumSpreadToday:ie,getFreeUserMessage:L}=await import("./premiumSpreadTracker-BWx_XfC9.js");return{hasUsedPremiumSpreadToday:ie,getFreeUserMessage:L}},[],import.meta.url);h.value=ne(),f.value=X()}I&&!t.isPremium&&(h.value=!1,f.value="  -     ")}),sr(()=>{window.removeEventListener("resize",p)});const d=Ce(()=>{const I=[{id:"love",name:"/",description:", ,     ",icon:""},{id:"career",name:"/",description:", , ,     ",icon:""},{id:"money",name:"/",description:", ,     ",icon:""},{id:"health",name:"/",description:", ,    ",icon:""},{id:"general",name:"",description:"   ",icon:""}];return t.isPremium&&I.push({id:"custom",name:"  ",description:"    ",icon:""}),I}),v=Ce(()=>{if(!r.value)return[];if(r.value==="custom"){const I=Sn("celtic_cross");return I?[{id:I.spreadId,name:I.nameKr,description:I.description,cardCount:I.cardCount,difficulty:"hard",isPremium:I.isPremium}]:[]}return Cn(r.value).map(I=>({id:I.spreadId,name:I.nameKr,description:I.description,cardCount:I.cardCount,difficulty:I.cardCount<=1?"easy":I.cardCount<=3?"medium":"hard",isPremium:I.isPremium}))}),k=Ce(()=>{var T,z,ne;if(console.log("[CanStartReading]  ",{selectedTopic:r.value,selectedSpread:i.value,isPremium:t.isPremium,hasPremiumUsageToday:h.value,isAnonymous:(T=t.currentUser)==null?void 0:T.isAnonymous,userId:(z=t.currentUser)==null?void 0:z.id}),!r.value||!i.value)return console.log("[CanStartReading]   "),!1;if(i.value==="seven_star"||i.value==="cup_of_relationship")return console.log("[CanStartReading]   "),!1;if(r.value==="custom"){const X=Sn(i.value);return X?X.isPremium&&!t.isPremium?(console.log("[CanStartReading]  -  "),!1):!0:(console.log("[CanStartReading]  -  "),!1)}const I=Cn(r.value).find(X=>X.spreadId===i.value);if(!I)return console.log("[CanStartReading]  -  "),!1;if(I.isPremium&&!t.isPremium){if(((ne=t.currentUser)==null?void 0:ne.email)==="test@example.com")return console.log("[CanStartReading]   -  "),!0;const X=!h.value;return console.log("[CanStartReading]   ",{isPremium:I.isPremium,userIsPremium:t.isPremium,hasPremiumUsageToday:h.value,canStart:X,spreadId:I.spreadId,spreadName:I.nameKr}),X}return console.log("[CanStartReading]  - true "),!0}),$=I=>{if(I==="custom"){if(!t.isPremium){e.push("/premium");return}o.value=!0}else r.value=I,a.value=""},R=I=>{a.value=I,r.value="custom",o.value=!1},S=()=>{o.value=!1,r.value==="custom"&&!a.value&&(r.value="")},E=async I=>{var T;if(I.id==="seven_star"||I.id==="cup_of_relationship"){await Be({title:" ",message:`${I.name}    !

     .`});return}if(I.isPremium&&!t.isPremium){if(t.currentUser&&!t.currentUser.isAnonymous&&t.currentUser.email==="test@example.com"){i.value=I.id;return}if((T=t.currentUser)!=null&&T.isAnonymous){const{canUsePremiumSpread:z}=await Pe(async()=>{const{canUsePremiumSpread:ne}=await import("./premiumSpreadTracker-BWx_XfC9.js");return{canUsePremiumSpread:ne}},[],import.meta.url);if(!z(I.id,t.isPremium)){await Be({title:"   ",message:`     .

     .`});return}}else if(t.currentUser&&!await H0(I.id,t.isPremium,t.currentUser.id,t.currentUser.email)){await Be({title:"   ",message:`     .

     .`});return}}i.value=I.id},M=I=>{var T;return I==="custom"&&a.value?`: ${a.value.substring(0,30)}${a.value.length>30?"...":""}`:((T=d.value.find(z=>z.id===I))==null?void 0:T.name)||""},A=I=>{if(r.value==="custom"){const z=Sn(I);return(z==null?void 0:z.nameKr)||""}const T=Cn(r.value||"general").find(z=>z.spreadId===I);return(T==null?void 0:T.nameKr)||""},D=I=>{if(r.value==="custom"){const z=Sn(I);return(z==null?void 0:z.cardCount)||0}const T=Cn(r.value||"general").find(z=>z.spreadId===I);return(T==null?void 0:T.cardCount)||0},K=I=>({easy:"",medium:"",hard:""})[I]||"",W=()=>{var T;if(!r.value||!i.value)return"  ";const I=v.value.find(z=>z.id===i.value);return I!=null&&I.isPremium&&!t.isPremium?((T=t.currentUser)==null?void 0:T.email)==="test@example.com"?"   ()":h.value?"   (   )":" 1  ":"  "},se=async()=>{var z,ne,X;if(m.value){console.log("[StartReading]   ");return}if(m.value=!0,console.log("[StartReading] ",{canStartReading:k.value,selectedTopic:r.value,selectedSpread:i.value,isPremium:t.isPremium,hasPremiumUsageToday:h.value,currentUser:t.currentUser}),typeof window<"u"&&window.debugPremiumSpread&&(console.log("[StartReading] debugPremiumSpread   "),await window.debugPremiumSpread()),!k.value){console.log("[StartReading] canStartReading false "),await Be({title:" ",message:"   .   ."}),m.value=!1;return}if(i.value==="seven_star"||i.value==="cup_of_relationship"){const ie=A(i.value);await Be({title:" ",message:`${ie}    !

     .`}),m.value=!1;return}const I=d.value.find(ie=>ie.id===r.value);let T;if(r.value==="custom"?T=Sn(i.value):T=Cn(r.value).find(ie=>ie.spreadId===i.value),console.log("[StartReading]  ",{selectedTopicData:I,selectedSpreadData:T}),!I){console.error("[StartReading]    "),await Be({title:"",message:"   ."}),m.value=!1;return}if(!T){console.error("[StartReading]    "),await Be({title:"",message:"   ."}),m.value=!1;return}try{if(t.currentUser&&!t.currentUser.isAnonymous&&t.currentUser.email==="test@example.com"&&!t.isPremium&&Lr(i.value)){const L=await Dr(t.currentUser.id)?` !

  1  ,
   .

?`:`    .

    .

?`;if(!await js({title:"   ",message:L,confirmText:"",cancelText:""})){m.value=!1;return}}if(!t.isPremium&&Lr(i.value))if(console.log("[StartReading]     ",{spreadId:i.value,isAnonymous:(z=t.currentUser)==null?void 0:z.isAnonymous,userId:(ne=t.currentUser)==null?void 0:ne.id}),(X=t.currentUser)!=null&&X.isAnonymous){console.log("[StartReading]   -   ");const{recordPremiumSpreadUsage:ie}=await Pe(async()=>{const{recordPremiumSpreadUsage:L}=await import("./premiumSpreadTracker-BWx_XfC9.js");return{recordPremiumSpreadUsage:L}},[],import.meta.url);ie(i.value)}else t.currentUser&&(console.log("[StartReading]   - DB "),await W0(i.value,t.currentUser.id,t.currentUser.email));console.log("[StartReading]    ");try{n.setSelectedTopic(I),console.log("[StartReading]   ",n.selectedTopic)}catch(ie){console.error("[StartReading]   :",ie),await Be({title:"",message:"    ."}),m.value=!1;return}try{n.setSelectedSpread(T),console.log("[StartReading]   ",n.selectedSpread)}catch(ie){console.error("[StartReading]   :",ie),await Be({title:"",message:"    ."}),m.value=!1;return}r.value==="custom"&&a.value?n.setCustomQuestion(a.value):n.setCustomQuestion(""),console.log("[StartReading]    "),console.log("[StartReading]     ",{routerReady:e.isReady,currentRoute:e.currentRoute.value.path,targetRoute:"/card-drawing"}),console.log("[StartReading]     "),console.log("[StartReading]  :",e.currentRoute.value.path),console.log("[StartReading]    :",{selectedTopic:n.selectedTopic,selectedSpread:n.selectedSpread,customQuestion:n.customQuestion}),await Fs(),console.log("[StartReading]    "),e.push("/card-drawing")}catch(ie){console.error("[StartReading]  :",ie),await Be({title:"",message:`      : ${ie.message}`})}finally{m.value=!1}},oe=()=>{e.go(-1)},V=()=>{r.value="",i.value="",a.value=""};return(I,T)=>{var ne,X,ie;const z=Vr("router-link");return w(),b("div",J0,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:oe}," "),T[0]||(T[0]=l("h1",null," ",-1))]),l("div",Q0,[l("div",Y0,[r.value&&!i.value?(w(),b("div",X0,[l("div",Z0,[l("div",{class:"selected-info-header"},[T[1]||(T[1]=l("span",{class:"selected-label"}," ",-1)),l("button",{class:"change-btn",onClick:V},"")]),l("div",ew,[l("h3",null,C(M(r.value)),1),r.value==="custom"&&a.value?(w(),b("p",tw,C(a.value),1)):O("",!0)])])])):r.value&&i.value?(w(),b("div",sw,[l("div",nw,[T[5]||(T[5]=l("div",{class:"selected-info-header"},[l("span",{class:"selected-label"}," ")],-1)),l("div",rw,[l("div",iw,[T[2]||(T[2]=l("span",{class:"item-label"},":",-1)),l("span",ow,C(M(r.value)),1)]),l("div",aw,[T[3]||(T[3]=l("span",{class:"item-label"},":",-1)),l("span",lw,C(A(i.value)),1)]),l("div",cw,[T[4]||(T[4]=l("span",{class:"item-label"}," :",-1)),l("span",uw,C(D(i.value))+"",1)])]),l("div",dw,[l("button",{class:"btn btn-secondary",onClick:V}," "),l("button",{class:"btn btn-primary",disabled:!k.value,onClick:se},C(W()),9,hw)])])])):O("",!0)]),l("div",fw,[St(l("section",pw,[T[6]||(T[6]=l("h2",{class:"section-title"},"   ",-1)),l("div",gw,[(w(!0),b(ye,null,Ue(d.value,L=>(w(),b("div",{key:L.id,class:B(["topic-card card",{selected:r.value===L.id,premium:L.id==="custom"&&!de(t).isPremium}]),onClick:Z=>$(L.id)},[l("div",vw,C(L.icon),1),l("h3",null,[Ae(C(L.name)+" ",1),L.id==="custom"?(w(),b("span",yw,"")):O("",!0)]),L.id==="custom"&&a.value?(w(),b("p",ww,C(a.value),1)):(w(),b("p",bw,C(L.description),1))],10,mw))),128))])],512),[[vi,!r.value||!c.value]]),St(l("section",_w,[T[14]||(T[14]=l("h2",{class:"section-title"},"  ",-1)),r.value==="custom"?(w(),b("div",kw,T[7]||(T[7]=[l("p",null,"          .",-1)]))):O("",!0),!de(t).isPremium&&((ne=de(t).currentUser)==null?void 0:ne.email)!=="test@example.com"?(w(),b("div",Sw,[l("p",Cw,[T[8]||(T[8]=l("span",{class:"icon"},"",-1)),Ae(" "+C(f.value||" ( , ,   )  1   ."),1)]),h.value?(w(),b("p",$w,"   : "+C(de(G0)())+"  ",1)):O("",!0)])):O("",!0),!de(t).isPremium&&((X=de(t).currentUser)==null?void 0:X.email)==="test@example.com"?(w(),b("div",Pw,T[9]||(T[9]=[l("p",{class:"notice-text"},[l("span",{class:"icon"},""),Ae("   .      . ")],-1)]))):O("",!0),l("div",Tw,[(w(!0),b(ye,null,Ue(v.value,L=>{var Z,ae,fe;return w(),b("div",{key:L.id,class:B(["spread-card card",{selected:i.value===L.id,premium:L.isPremium&&!de(t).isPremium,updating:L.id==="seven_star"||L.id==="cup_of_relationship"}]),onClick:Le=>E(L)},[l("div",Aw,[l("h3",null,C(L.name),1),L.isPremium&&!de(t).isPremium?(w(),b("span",Iw,"")):O("",!0)]),l("p",Rw,C(L.description),1),l("div",Mw,[l("span",Ow," "+C(L.cardCount)+"",1),l("span",{class:B(["difficulty",L.difficulty])},C(K(L.difficulty)),3)]),L.isPremium&&!de(t).isPremium&&h.value&&((Z=de(t).currentUser)==null?void 0:Z.email)!=="test@example.com"?(w(),b("div",jw,T[10]||(T[10]=[l("p",null,"  ",-1)]))):L.isPremium&&!de(t).isPremium&&!h.value&&((ae=de(t).currentUser)==null?void 0:ae.email)!=="test@example.com"?(w(),b("div",Lw,T[11]||(T[11]=[l("span",null," 1 ",-1)]))):L.isPremium&&!de(t).isPremium&&((fe=de(t).currentUser)==null?void 0:fe.email)==="test@example.com"?(w(),b("div",Dw,T[12]||(T[12]=[l("span",null," ",-1)]))):L.id==="seven_star"||L.id==="cup_of_relationship"?(w(),b("div",Uw,T[13]||(T[13]=[l("p",null,"  ",-1)]))):O("",!0)],10,Ew)}),128))])],512),[[vi,r.value&&(!i.value||!c.value)]]),r.value&&i.value&&!c.value?(w(),b("section",xw,[l("div",Nw,[T[18]||(T[18]=l("h3",null," ",-1)),l("div",Kw,[l("div",Fw,[T[15]||(T[15]=l("strong",null,":",-1)),Ae(" "+C(M(r.value)),1)]),l("div",Bw,[T[16]||(T[16]=l("strong",null,":",-1)),Ae(" "+C(A(i.value)),1)]),l("div",zw,[T[17]||(T[17]=l("strong",null," :",-1)),Ae(" "+C(D(i.value))+" ",1)])])])])):O("",!0),St(l("div",Hw,[l("button",{class:"btn btn-primary start-button",disabled:!k.value,onClick:se},C(W()),9,Ww),de(t).isPremium?O("",!0):(w(),b("div",qw,[l("p",null,C((ie=de(t).currentUser)!=null&&ie.isAnonymous?" ":" "),1),pe(z,{to:"/premium",class:"premium-link"},{default:$e(()=>T[19]||(T[19]=[Ae("     ",-1)])),_:1,__:[19]})]))],512),[[vi,!c.value]])])]),o.value?(w(),vt(F0,{key:0,"is-open":o.value,onClose:S,onConfirm:R},null,8,["is-open"])):O("",!0)])}}}),Gw=et(Vw,[["__scopeId","data-v-d7de3112"]]);var Kn;(function(s){s.Heavy="HEAVY",s.Medium="MEDIUM",s.Light="LIGHT"})(Kn||(Kn={}));var _l;(function(s){s.Success="SUCCESS",s.Warning="WARNING",s.Error="ERROR"})(_l||(_l={}));const Jw=zs("Haptics",{web:()=>Pe(()=>import("./web-c4MqPMTG.js"),[],import.meta.url).then(s=>new s.HapticsWeb)});var Ur;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(Ur||(Ur={}));var kl;(function(s){s.None="NONE",s.Slide="SLIDE",s.Fade="FADE"})(kl||(kl={}));const Qw=zs("StatusBar");var Sl;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(Sl||(Sl={}));var Cl;(function(s){s.Body="body",s.Ionic="ionic",s.Native="native",s.None="none"})(Cl||(Cl={}));const Yw=zs("Keyboard");class co{static get isNative(){return Qe.isNativePlatform()}static get isWeb(){return!Qe.isNativePlatform()}static get platform(){return Qe.getPlatform()}static async playHaptic(e="medium"){if(this.isNative)try{const t={light:Kn.Light,medium:Kn.Medium,heavy:Kn.Heavy}[e];await Jw.impact({style:t})}catch(t){console.warn("Haptic feedback not available:",t)}}static async cardDrawHaptic(){await this.playHaptic("medium")}static async buttonTapHaptic(){await this.playHaptic("light")}static async importantActionHaptic(){await this.playHaptic("heavy")}static async setStatusBarStyle(e=!0){if(this.isNative)try{await Qw.setStyle({style:e?Ur.Dark:Ur.Light})}catch(t){console.warn("Status bar style not available:",t)}}static async hideKeyboard(){if(this.isNative)try{await Yw.hide()}catch(e){console.warn("Keyboard hide not available:",e)}}static async initializeApp(){if(this.isNative)try{await this.setStatusBarStyle(!0),console.log("Native app initialized successfully")}catch(e){console.warn("Native initialization failed:",e)}}static async getAppInfo(){if(!this.isNative)return null;try{const{App:e}=await Pe(async()=>{const{App:t}=await Promise.resolve().then(()=>Ai);return{App:t}},void 0,import.meta.url);return await e.getInfo()}catch(e){return console.warn("App info not available:",e),null}}static setupUrlListener(e){this.isNative&&Pe(async()=>{const{App:t}=await Promise.resolve().then(()=>Ai);return{App:t}},void 0,import.meta.url).then(({App:t})=>{t.addListener("appUrlOpen",n=>{e(n.url)})}).catch(t=>{console.warn("URL listener setup failed:",t)})}static setupAppStateListener(e,t){this.isNative&&Pe(async()=>{const{App:n}=await Promise.resolve().then(()=>Ai);return{App:n}},void 0,import.meta.url).then(({App:n})=>{n.addListener("appStateChange",r=>{r.isActive?e():t()})}).catch(n=>{console.warn("App state listener setup failed:",n)})}}const Xw={playHaptic:()=>Promise.resolve(),cardDrawHaptic:()=>Promise.resolve(),buttonTapHaptic:()=>Promise.resolve(),importantActionHaptic:()=>Promise.resolve(),setStatusBarStyle:()=>Promise.resolve(),hideKeyboard:()=>Promise.resolve(),initializeApp:()=>Promise.resolve()},bt=co.isNative?co:Xw,ai={get isWeb(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform()==="web":!0},get isIOS(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform()==="ios":!1},get isAndroid(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform()==="android":!1},get isMobile(){return this.isIOS||this.isAndroid},get name(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform():"web"}},rs={appId:"ca-app-pub-3940256099942544~3347511713",bannerAdId:"ca-app-pub-3940256099942544/6300978111",interstitialAdId:"ca-app-pub-3940256099942544/1033173712",rewardedAdId:"ca-app-pub-3940256099942544/5224354917",testMode:Fg};class Zw{constructor(){this.adShowCount=0}async initializeAdMob(){console.log(" [Web] AdMob  ()")}async showInterstitialAd(){this.adShowCount++,console.log(` [Web]    () - ${this.adShowCount} `),console.log(` [Web]  : ${new Date().toISOString()}`);const e=document.createElement("div");return e.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      z-index: 99999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
    `,e.innerHTML=`
      <div style="text-align: center;">
        <h2 style="margin-bottom: 20px;">  #${this.adShowCount}</h2>
        <p>    </p>
        <p style="font-size: 18px; margin-top: 20px;">3   ...</p>
        <div style="margin-top: 20px; font-size: 48px;"></div>
        <button onclick="this.parentElement.parentElement.remove()" style="
          margin-top: 30px;
          padding: 10px 20px;
          font-size: 16px;
          background: white;
          color: black;
          border: none;
          border-radius: 5px;
          cursor: pointer;
        "> </button>
      </div>
    `,document.body.appendChild(e),new Promise(t=>{setTimeout(()=>{e.parentElement&&e.remove(),console.log(` [Web]   #${this.adShowCount} `),t(!0)},3e3);const n=e.querySelector("button");n&&n.addEventListener("click",()=>{console.log(` [Web]   #${this.adShowCount} `),t(!0)})})}async showRewardedAd(){console.log(" [Web] 15     ()"),console.log(" [Web]  :",new Date().toISOString());const e=document.createElement("div");e.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.95);
      z-index: 99999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
    `;let t=15,n=!1;const r=()=>{e.innerHTML=`
        <div style="text-align: center;">
          <h2 style="margin-bottom: 20px;">   </h2>
          <p style="font-size: 24px; font-weight: bold;">15   </p>
          <p style="font-size: 18px; margin-top: 20px; color: #ffd700;">${t} </p>
          <div style="margin-top: 30px; font-size: 72px;"></div>
          <div style="margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px;">
            <p style="font-size: 16px;">    </p>
            <p style="font-size: 14px; margin-top: 10px; opacity: 0.8;">    </p>
          </div>
          ${t>0?`<p style="margin-top: 30px; font-size: 14px; opacity: 0.7;">  (${t})</p>`:`<button onclick="this.parentElement.parentElement.remove()" style="
              margin-top: 30px;
              padding: 12px 24px;
              font-size: 16px;
              background: #4CAF50;
              color: white;
              border: none;
              border-radius: 5px;
              cursor: pointer;
            ">  </button>`}
        </div>
      `};return r(),document.body.appendChild(e),new Promise(i=>{const o=setInterval(()=>{if(t--,r(),t<=0){clearInterval(o),n=!0;const c=e.querySelector("button");c&&c.addEventListener("click",()=>{console.log(" [Web]   "),i(!0)})}},1e3),a=c=>{c.key==="Escape"&&t>0&&(c.preventDefault(),console.log(" [Web]   ESC  "))};document.addEventListener("keydown",a),e.addEventListener("DOMNodeRemoved",()=>{document.removeEventListener("keydown",a),n||(console.log(" [Web]  "),i(!1))})})}async createBannerAd(e){console.log(` [Web]    (${e}) ()`)}async hideBannerAd(){console.log(" [Web]    ()")}shouldShowAds(){return!0}}class eb{constructor(){this.isInitialized=!1,this.adShowCount=0,this.listenerMap=new Map}async initializeAdMob(){try{if(this.isInitialized)return;console.log(" [Mobile] AdMob  ...");const{AdMob:e}=await Pe(async()=>{const{AdMob:t}=await import("./index-C-etsW8e.js");return{AdMob:t}},[],import.meta.url);await e.initialize({requestTrackingAuthorization:!0,testingDevices:rs.testMode?["YOUR_TEST_DEVICE_ID"]:[],initializeForTesting:rs.testMode}),this.isInitialized=!0,console.log(" [Mobile] AdMob  ")}catch(e){throw console.error(" [Mobile] AdMob  :",e),e}}async showInterstitialAd(){try{this.isInitialized||await this.initializeAdMob(),this.adShowCount++,console.log(` [Mobile]    ... (${this.adShowCount} )`),console.log(` [Mobile]  : ${new Date().toISOString()}`);const{AdMob:e,InterstitialAdPluginEvents:t}=await Pe(async()=>{const{AdMob:n,InterstitialAdPluginEvents:r}=await import("./index-C-etsW8e.js");return{AdMob:n,InterstitialAdPluginEvents:r}},[],import.meta.url);return this.removeAllListeners(),await e.prepareInterstitial({adId:rs.interstitialAdId,isTesting:rs.testMode}),new Promise(n=>{let r=!1;const i=e.addListener(t.Dismissed,()=>{r||(r=!0,console.log(` [Mobile]   #${this.adShowCount} `),this.removeAllListeners(),n(!0))});this.listenerMap.set("dismissed",i);const o=e.addListener(t.FailedToLoad,a=>{r||(r=!0,console.error(` [Mobile]   #${this.adShowCount}  :`,a),this.removeAllListeners(),n(!1))});this.listenerMap.set("failed",o),e.showInterstitial().catch(a=>{r||(r=!0,console.error(` [Mobile]   #${this.adShowCount}  :`,a),this.removeAllListeners(),n(!1))}),setTimeout(()=>{r||(r=!0,console.warn(` [Mobile]   #${this.adShowCount} `),this.removeAllListeners(),n(!0))},3e4)})}catch(e){return console.error(` [Mobile]   #${this.adShowCount}  :`,e),this.removeAllListeners(),!1}}removeAllListeners(){try{this.listenerMap.forEach(e=>{e&&typeof e.remove=="function"&&e.remove()}),this.listenerMap.clear()}catch(e){console.error(" [Mobile]   :",e)}}async showRewardedAd(){try{this.isInitialized||await this.initializeAdMob(),console.log(" [Mobile] 15      ..."),console.log(" [Mobile]  :",new Date().toISOString());const{AdMob:e,RewardAdPluginEvents:t}=await Pe(async()=>{const{AdMob:n,RewardAdPluginEvents:r}=await import("./index-C-etsW8e.js");return{AdMob:n,RewardAdPluginEvents:r}},[],import.meta.url);return this.removeAllListeners(),await e.prepareRewardVideoAd({adId:rs.rewardedAdId,isTesting:rs.testMode}),new Promise(n=>{let r=!1,i=!1;const o=e.addListener(t.Rewarded,h=>{console.log(" [Mobile]    :",h),console.log(" [Mobile] 15   "),r=!0});this.listenerMap.set("rewarded",o);const a=e.addListener(t.Dismissed,()=>{i||(i=!0,console.log(" [Mobile]   "),console.log(" [Mobile]   :",r),this.removeAllListeners(),n(r))});this.listenerMap.set("dismissed",a);const c=e.addListener(t.FailedToLoad,h=>{i||(i=!0,console.error(" [Mobile]    :",h),this.removeAllListeners(),n(!1))});this.listenerMap.set("failed",c);const u=e.addListener(t.Showed,()=>{console.log(" [Mobile]     (15  )")});this.listenerMap.set("showed",u),e.showRewardVideoAd().catch(h=>{i||(i=!0,console.error(" [Mobile]    :",h),this.removeAllListeners(),n(!1))}),setTimeout(()=>{i||(i=!0,console.warn(" [Mobile]   "),this.removeAllListeners(),n(r))},6e4)})}catch(e){return console.error(" [Mobile]    :",e),this.removeAllListeners(),!1}}async createBannerAd(e){try{this.isInitialized||await this.initializeAdMob(),console.log(` [Mobile]    (${e})`);const{AdMob:t,BannerAdOptions:n,BannerAdSize:r,BannerAdPosition:i}=await Pe(async()=>{const{AdMob:a,BannerAdOptions:c,BannerAdSize:u,BannerAdPosition:h}=await import("./index-C-etsW8e.js");return{AdMob:a,BannerAdOptions:c,BannerAdSize:u,BannerAdPosition:h}},[],import.meta.url),o={adId:rs.bannerAdId,adSize:r.BANNER,position:e==="top"?i.TOP_CENTER:i.BOTTOM_CENTER,margin:0,isTesting:rs.testMode};await t.showBanner(o),console.log(" [Mobile]    ")}catch(t){throw console.error(" [Mobile]    :",t),t}}async hideBannerAd(){try{const{AdMob:e}=await Pe(async()=>{const{AdMob:t}=await import("./index-C-etsW8e.js");return{AdMob:t}},[],import.meta.url);await e.hideBanner(),console.log(" [Mobile]    ")}catch(e){console.error(" [Mobile]    :",e)}}shouldShowAds(){return ai.isMobile}}const tb=()=>ai.isWeb?new Zw:new eb,Bo=tb(),xu=()=>Bo.initializeAdMob(),zo=()=>Bo.showInterstitialAd(),uo=()=>Bo.showRewardedAd(),UE=Object.freeze(Object.defineProperty({__proto__:null,initializeAdMob:xu,showInterstitialAd:zo,showRewardedAd:uo},Symbol.toStringTag,{value:"Module"})),Os=class Os{constructor(){this.userStore=null,this.userStoreGetter=null,this.config={freeReadingLimit:3,adFrequency:2,rewardedAdBonus:2,temporaryPremiumHours:24},this.dailyReadingCount=G(0),this.lastReadingDate=G(""),this.bonusReadings=G(0),this.temporaryPremiumExpiry=G(null),this.lastAdShownAt=G(0),this.loadState(),this.checkDailyReset()}getUserStore(){if(!this.userStore&&this.userStoreGetter)try{this.userStore=this.userStoreGetter()}catch(e){console.warn("userStore  :",e)}return this.userStore?this.userStore:{isPremium:!1,canUseFreeReading:!0,incrementFreeReading:()=>{},user:null}}static getInstance(){return Os.instance||(Os.instance=new Os),Os.instance}setUserStoreGetter(e){this.userStoreGetter=e,this.userStore=null}saveState(){var e;try{const t={dailyReadingCount:this.dailyReadingCount.value,lastReadingDate:this.lastReadingDate.value,bonusReadings:this.bonusReadings.value,temporaryPremiumExpiry:(e=this.temporaryPremiumExpiry.value)==null?void 0:e.toISOString(),lastAdShownAt:this.lastAdShownAt.value};localStorage.setItem("adManagerState",JSON.stringify(t))}catch(t){console.error("    :",t)}}loadState(){try{const e=localStorage.getItem("adManagerState");if(e){const t=JSON.parse(e);this.dailyReadingCount.value=t.dailyReadingCount||0,this.lastReadingDate.value=t.lastReadingDate||"",this.bonusReadings.value=t.bonusReadings||0,this.temporaryPremiumExpiry.value=t.temporaryPremiumExpiry?new Date(t.temporaryPremiumExpiry):null,this.lastAdShownAt.value=t.lastAdShownAt||0}}catch(e){console.error("    :",e)}}checkDailyReset(){const e=new Date().toDateString();this.lastReadingDate.value!==e&&(this.dailyReadingCount.value=0,this.bonusReadings.value=0,this.lastReadingDate.value=e,this.saveState())}isTemporaryPremium(){return this.temporaryPremiumExpiry.value?new Date<this.temporaryPremiumExpiry.value?!0:(this.temporaryPremiumExpiry.value=null,this.saveState(),!1):!1}canDoReading(){return this.getUserStore().isPremium||this.isTemporaryPremium(),!0}getRemainingReadings(){return this.getUserStore().isPremium||this.isTemporaryPremium(),-1}shouldShowAd(e){return!(this.getUserStore().isPremium||this.isTemporaryPremium()||e&&["one_card","three_card_timeline"].includes(e))}async startReading(e){var c;console.log(" [AdManager.startReading] , spreadId:",e);const t=this.getUserStore().isPremium,n=this.isTemporaryPremium();if(console.log(" [AdManager.startReading] isPremium:",t,"isTempPremium:",n),t||n)return console.log(" [AdManager.startReading]   -  "),!0;const r=(c=this.getUserStore().user)==null?void 0:c.email,i=r==="test@example.com";console.log(" [AdManager.startReading] userEmail:",r,"isTestAccount:",i);const a=e&&["celtic_cross","seven_star","cup_of_relationship"].includes(e);if(console.log(" [AdManager.startReading] isPremiumSpread:",a),a){if(i)return console.log(" [AdManager.startReading]   -    "),setTimeout(async()=>{const{showAlert:u}=await Pe(async()=>{const{showAlert:h}=await Promise.resolve().then(()=>yv);return{showAlert:h}},void 0,import.meta.url);await u({title:"  ",message:"       ."})},100),!0;{console.log(" [AdManager.startReading]      ...");const{hasUsedPremiumSpreadToday:u}=await Pe(async()=>{const{hasUsedPremiumSpreadToday:f}=await import("./premiumSpreadTracker-BWx_XfC9.js");return{hasUsedPremiumSpreadToday:f}},[],import.meta.url),h=await u();if(console.log(" [AdManager.startReading] hasUsed:",h),h)return console.log(" [AdManager.startReading]   - false "),!1}}return this.dailyReadingCount.value++,this.saveState(),!0}async recordPremiumSpreadUsage(e){console.log(" [AdManager.recordPremiumSpreadUsage]    :",e);const{recordPremiumSpreadUsage:t}=await Pe(async()=>{const{recordPremiumSpreadUsage:n}=await import("./premiumSpreadTracker-BWx_XfC9.js");return{recordPremiumSpreadUsage:n}},[],import.meta.url);await t(e)}async showAd(){try{console.log("   ...");const e=await zo();return e&&(this.lastAdShownAt.value=this.dailyReadingCount.value,this.saveState()),e}catch(e){return console.error("  :",e),!0}}async showRewardedAdForBonus(){try{return console.log("    ..."),await uo()?(this.bonusReadings.value+=this.config.rewardedAdBonus,this.saveState(),!0):!1}catch(e){return console.error("   :",e),!1}}async showRewardedAdForPremium(){try{if(console.log("     ..."),await uo()){const t=new Date;return t.setHours(t.getHours()+this.config.temporaryPremiumHours),this.temporaryPremiumExpiry.value=t,this.saveState(),!0}return!1}catch(e){return console.error("    :",e),!1}}getStatus(){return{isPremium:this.getUserStore().isPremium,isTemporaryPremium:this.isTemporaryPremium(),temporaryPremiumExpiry:this.temporaryPremiumExpiry.value,dailyReadingCount:this.dailyReadingCount.value,remainingReadings:this.getRemainingReadings(),bonusReadings:this.bonusReadings.value,canDoReading:this.canDoReading()}}updateConfig(e){this.config={...this.config,...e}}};Os.instance=null;let xr=Os,Qt=null,ho=!1;const sb=()=>{if(Qt||(Qt=xr.getInstance()),!ho)try{Pe(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>Or);return{useUserStore:s}},void 0,import.meta.url).then(({useUserStore:s})=>{Qt&&(Qt.setUserStoreGetter(()=>s()),ho=!0)}).catch(s=>{console.warn("AdManager userStore  :",s)})}catch(s){console.warn("AdManager  :",s)}return Qt},nb=s=>{Qt||(Qt=xr.getInstance()),s&&Qt&&(Qt.setUserStoreGetter(s),ho=!0)};class rb{constructor(e){this.cards=[],this.positionNames=["  ()","  "," ",""," "," "," "," "," "," "],e&&(this.cards=e)}getPositionName(e){return this.positionNames[e]||` ${e+1}`}async generateInterpretation(e){return this.cards=e.map(t=>({id:t.card.id,name:t.card.name,nameKr:t.card.nameKr,arcana:t.card.arcana,number:t.card.number,suit:t.card.suit,element:t.card.element,keywords:t.card.keywords,orientation:t.orientation,position:{name:t.positionName,description:""}})),this.getInterpretation()}getInterpretation(){return{positiveAspects:this.analyzePositiveAspects(),negativeAspects:this.analyzeNegativeAspects(),advice:this.generateAdvice(),keyThemes:this.extractKeyThemes(),elementalBalance:this.analyzeElementalBalance(),timeFlow:this.analyzeTimeFlow(),relationships:this.analyzeRelationships()}}analyzePositiveAspects(){const e=[],t=this.cards.filter(i=>i.orientation==="upright");this.cards.filter(i=>i.orientation==="reversed"),t.length>=6&&e.push("       "),this.cards.filter(i=>i.arcana==="major").length>=5&&e.push("  ,    "),this.cards[5]&&this.cards[5].orientation==="upright"&&e.push(`(${this.cards[5].nameKr}) ,   `),this.cards[9]&&this.cards[9].orientation==="upright"&&e.push(` (${this.cards[9].nameKr})  `);const r=this.analyzeElementalBalance();return Math.max(...Object.values(r).filter(i=>typeof i=="number"))<=4&&e.push("    "),e}analyzeNegativeAspects(){var n,r,i,o;const e=[];return this.cards.filter(a=>a.orientation==="reversed").length>=6&&e.push("      "),this.cards[1]&&this.cards[1].orientation==="reversed"&&e.push(` (${this.cards[1].nameKr}) `),this.cards[2]&&this.cards[2].orientation==="reversed"&&e.push(` (${this.cards[2].nameKr})  `),((n=this.cards[0])==null?void 0:n.orientation)!==((r=this.cards[1])==null?void 0:r.orientation)&&e.push("     "),((i=this.cards[8])==null?void 0:i.orientation)==="upright"&&((o=this.cards[9])==null?void 0:o.orientation)==="reversed"&&e.push("       "),e}generateAdvice(){const e=[],t=this.cards[0],n=this.cards[1];t&&n&&(t.orientation==="upright"&&n.orientation==="reversed"?e.push("     "):t.orientation==="reversed"&&n.orientation==="upright"&&e.push("     "));const r=this.cards[3],i=this.cards[5];(r==null?void 0:r.orientation)==="reversed"&&(i==null?void 0:i.orientation)==="upright"&&e.push("     ");const o=this.cards[6],a=this.cards[7];o&&a&&o.orientation!==a.orientation&&e.push("        ");const c=this.analyzeElementalBalance(),u=Object.entries(c).filter(([h])=>h!=="analysis").sort((h,f)=>f[1]-h[1])[0];if(u&&u[1]>=5){const h={fire:"   ",water:"     ",air:"    ",earth:"    "};e.push(h[u[0]])}return e.join(". ")+"."}extractKeyThemes(){var t,n;const e=new Set;return this.cards.forEach(r=>{if(r.arcana==="major"){const i={"The Fool":" ","The Magician":" ","The High Priestess":" ","The Empress":" ","The Emperor":" ","The Hierophant":" ","The Lovers":" ","The Chariot":" ",Strength:" ","The Hermit":" ","Wheel of Fortune":" ",Justice:" ","The Hanged Man":"  ",Death:" ",Temperance:" ","The Devil":" ","The Tower":" ","The Star":" ","The Moon":" ","The Sun":" ",Judgement:" ","The World":" "};i[r.name]&&e.add(i[r.name])}if(r.suit){const i={wands:" ",cups:" ",swords:" ",pentacles:" "};i[r.suit]&&e.add(i[r.suit])}}),((t=this.cards[0])==null?void 0:t.arcana)==="major"&&((n=this.cards[1])==null?void 0:n.arcana)==="major"&&e.add(" "),Array.from(e)}analyzeElementalBalance(){var o,a;const e={fire:0,water:0,air:0,earth:0};this.cards.forEach(c=>{if(c.element)e[c.element]++;else if(c.suit){const u={wands:"fire",cups:"water",swords:"air",pentacles:"earth"};u[c.suit]&&e[u[c.suit]]++}});const t=Object.values(e),n=Math.max(...t),r=Math.min(...t);let i="";if(n-r<=2)i="  ,    .";else{const c=(o=Object.entries(e).find(([f,m])=>m===n))==null?void 0:o[0],u=(a=Object.entries(e).find(([f,m])=>m===r))==null?void 0:a[0],h={fire:"()",water:"()",air:"()",earth:"()"};i=`${h[c]}   ${h[u]}  .     .`}return{...e,analysis:i}}analyzeTimeFlow(){var r,i;const e=this.cards[3],t=`${(r=this.cards[0])==null?void 0:r.nameKr}() ${(i=this.cards[1])==null?void 0:i.nameKr}()`,n=this.cards[5];return{past:e?`${e.nameKr}${e.orientation==="reversed"?"()":""}    `:"",present:` ${t}   `,future:n?`${n.nameKr}${n.orientation==="reversed"?"()":""}  `:""}}analyzeRelationships(){const e=this.cards[0],t=this.cards[1],n=this.cards[6],r=this.cards[7],i=this.cards[8],o=this.cards[9];return{innerOuter:this.compareCards(e,t," "),selfPerception:this.compareCards(n,r," "),expectations:this.compareCards(i,o," ")}}compareCards(e,t,n){return!e||!t?"":e.orientation===t.orientation?`${n}   `:`${n}    `}}class ib{async generateInterpretation(e){try{const{data:{session:t}}=await ue.auth.getSession();if(!t)throw console.error(" "),new Error(" ");console.log(" Edge Function  ..."),console.log("-  :",{...e,isPremium:!0});const{data:n,error:r}=await ue.functions.invoke("generate-interpretation",{body:{...e,isPremium:!0},headers:{Authorization:`Bearer ${t.access_token}`}});if(r)throw console.error("Edge Function  :",r),new Error(r.message||"AI     .");if(console.log(" Edge Function  :",n),n&&n.interpretation)return console.log(" AI  !"),console.log("-  :",n.interpretation.length),console.log("-   300:",n.interpretation.substring(0,300)),console.log("-   300:",n.interpretation.substring(n.interpretation.length-300)),{success:!0,interpretation:n.interpretation,interpretationId:n.interpretationId,probabilityAnalysis:n.probabilityAnalysis};throw console.error(" AI    :",n),new Error("AI    ")}catch(t){return console.error("AI   :",t),{success:!1,error:t instanceof Error?t.message:"    ."}}}async getPreviousInterpretations(e,t=5){try{const{data:n,error:r}=await ue.from("ai_interpretations").select(`
          id,
          reading_id,
          interpretation_text,
          created_at,
          rating,
          reading:tarot_readings(
            spread_id,
            topic,
            created_at
          )
        `).eq("user_id",e).order("created_at",{ascending:!1}).limit(t);return r?(console.error("   :",r),[]):n||[]}catch(n){return console.error("   :",n),[]}}async submitRating(e,t){try{const{error:n}=await ue.from("ai_interpretations").update({rating:t}).eq("id",e);if(n)throw console.error("  :",n),new Error("    .");return{success:!0}}catch(n){return console.error("  :",n),{success:!1,error:n.message}}}}const Nu=new ib;class Ho{constructor(e){this.cache=new Map,this.CACHE_DURATION=1e3*60*60,this.isPremium=e}async getSingleCardInterpretation(e,t,n,r,i){var c;if(!this.isPremium)return this.getTemplateInterpretation(e,t,n);const o=this.generateCacheKey({card:e,position:t,topic:n,spreadType:r,interpretationType:"single"}),a=this.getFromCache(o);if(a)return a;try{console.log(" [generateInterpretation] Edge Function  :",{cardsCount:cards.length,topic:n,spreadType:r,isPremium:this.isPremium});const{data:u,error:h}=await ue.functions.invoke("generate-interpretation",{body:{card:e,position:t,topic:n,spreadType:r,allCards:i,userId:(c=(await ue.auth.getUser()).data.user)==null?void 0:c.id,isPremium:this.isPremium,interpretationType:"single"}});if(h)throw h;const f=u.interpretation;return this.setCache(o,f),f}catch(u){return console.error("AI  :",u),this.getTemplateInterpretation(e,t,n)}}async getOverallInterpretation(e,t,n){var o;if(!this.isPremium)return this.getTemplateOverallInterpretation(e,t,n);const r=this.generateCacheKey({allCards:e,topic:t,spreadType:n,interpretationType:"overall"}),i=this.getFromCache(r);if(i)return i;try{const{data:a,error:c}=await ue.functions.invoke("generate-interpretation",{body:{allCards:e,topic:t,spreadType:n,userId:(o=(await ue.auth.getUser()).data.user)==null?void 0:o.id,isPremium:this.isPremium,interpretationType:"overall"}});if(c)throw c;const u=a.interpretation;return this.setCache(r,u),u}catch(a){return console.error("AI   :",a),this.getTemplateOverallInterpretation(e,t,n)}}generateCacheKey(e){const t=[];if(e.card&&t.push(`card:${e.card.id}_${e.card.orientation}`),e.position&&t.push(`pos:${e.position.position}`),e.allCards){const n=e.allCards.map(r=>`${r.id}_${r.orientation}_${r.position.position}`).sort().join("|");t.push(`cards:${n}`)}return t.push(`topic:${e.topic}`),t.push(`spread:${e.spreadType}`),t.push(`type:${e.interpretationType}`),t.join("_")}getFromCache(e){const t=this.cache.get(e);return t&&Date.now()-t.timestamp<this.CACHE_DURATION?t.interpretation:null}setCache(e,t){if(this.cache.set(e,{interpretation:t,timestamp:Date.now()}),this.cache.size>100){const n=this.cache.keys().next().value;this.cache.delete(n)}}getTemplateInterpretation(e,t,n){var o;const r={love:{upright:"     .",reversed:"    ."},career:{upright:"    .",reversed:"     ."},money:{upright:"    .",reversed:"    ."},general:{upright:"    .",reversed:"      ."}},i=((o=r[n])==null?void 0:o[e.orientation])||r.general[e.orientation];return`${t.name} ${i}`}async getInterpretation(e,t,n){var r;if(!this.isPremium)return this.getTemplateOverallInterpretation(n,t,e);try{const i=n.map((c,u)=>({id:u,name_kr:c.cardName,nameKr:c.cardName,orientation:c.orientation,position:{position:u+1,name:c.position}})),{data:o,error:a}=await ue.functions.invoke("generate-interpretation",{body:{cards:i,topic:t,spreadType:"celtic_cross",userId:(r=(await ue.auth.getUser()).data.user)==null?void 0:r.id,isPremium:this.isPremium}});if(a)throw a;return o.interpretation}catch(i){return console.error("AI    :",i),this.getCelticCrossTemplateInterpretation(n,t)}}getCelticCrossTemplateInterpretation(e,t){const n={:{intro:" ",ending:"      ."},:{intro:" ",ending:"     ."},:{intro:" ",ending:"      ."},:{intro:" ",ending:"        ."}},r=n[t]||n.;return`${r.intro}      .
    
  ${e[0].cardName}       .

 ${e[3].cardName}  ${e[0].cardName}  ,  ${e[5].cardName}  .

${r.ending}`}getTemplateOverallInterpretation(e,t,n){const r=e.filter(c=>c.orientation==="upright").length,i=e.filter(c=>c.arcana==="major").length;let o="";r>e.length/2?o+="    . ":o+="    . ";const a={love:"     .",career:"     .",money:"    .",general:"      ."};return o+=a[t]||a.general,i>=e.length/2&&(o+="      ,    ."),o}async submitRating(e,t,n){var r;try{console.log("  :",{interpretationId:e,rating:t});const{data:i,error:o}=await ue.from("ai_interpretations").update({rating:t,updated_at:new Date().toISOString()}).eq("id",e).select();if(o){console.error("  :",o);const{data:a,error:c}=await ue.functions.invoke("submit-feedback",{body:{interpretationId:e,rating:t,userId:(r=(await ue.auth.getUser()).data.user)==null?void 0:r.id,editedInterpretation:n}});if(c)throw c;console.log("Edge Function    :",a)}else console.log("  :",i)}catch(i){throw console.error("  :",i),i}}async generateInterpretation(e,t,n){var r;try{const i=this.generateCacheKey({allCards:e,topic:t,spreadType:n,interpretationType:"overall"}),o=this.getFromCache(i);if(o)return{text:o};console.log(" [generateInterpretation] Edge Function  :",{cardsCount:e.length,topic:t,spreadType:n,isPremium:this.isPremium});const{data:a,error:c}=await ue.functions.invoke("generate-interpretation",{body:{cards:e,topic:t,spreadType:n,userId:(r=(await ue.auth.getUser()).data.user)==null?void 0:r.id,isPremium:this.isPremium}});if(console.log(" [generateInterpretation] Edge Function :",{data:a,error:c}),c)throw c;const u=a.interpretation;return this.setCache(i,u),{text:u,interpretationId:a.interpretationId}}catch(i){return console.error("AI   :",i),{text:this.getTemplateOverallInterpretation(e,t,n)}}}}const ob=Object.freeze(Object.defineProperty({__proto__:null,AIInterpretationService:Ho},Symbol.toStringTag,{value:"Module"})),pn=s=>{try{if(s.imageUrl&&!s.imageUrl.includes("undefined")){let e=s.imageUrl;if(e=e.replace("/assets/tarot-cards/minor/cups/","/assets/tarot-cards/minor/"),e=e.replace("/assets/tarot-cards/minor/wands/","/assets/tarot-cards/minor/"),e=e.replace("/assets/tarot-cards/minor/swords/","/assets/tarot-cards/minor/"),e=e.replace("/assets/tarot-cards/minor/pentacles/","/assets/tarot-cards/minor/"),e.includes("/assets/tarot-cards/major/")){const t={"00-the-fool.png":"00-the-Fool.png","01-the-magician.png":"01-The-Magician.png","02-the-high-priestess.png":"02-The-High-Priestess.png","03-the-empress.png":"03-The-Empress.png","04-the-emperor.png":"04-The-Emperor.png","05-the-hierophant.png":"05-The-Hierophant.png","06-the-lovers.png":"06-The-Lovers.png","07-the-chariot.png":"07-The-Chariot.png","08-strength.png":"08-Strength.png","09-the-hermit.png":"09-The-Hermit.png","10-wheel-of-fortune.png":"10-Wheel-of-Fortune.png","11-justice.png":"11-Justice.png","12-the-hanged-man.png":"12-The-Hanged-Man.png","13-death.png":"13-Death.png","14-temperance.png":"14-Temperance.png","15-the-devil.png":"15-The-Devil.png","16-the-tower.png":"16-The-Tower.png","17-the-star.png":"17-The-Star.png","18-the-moon.png":"18-The-Moon.png","19-the-sun.png":"19-The-Sun.png","20-judgement.png":"20-Judgement.png","21-the-world.png":"21-The-World.png"};for(const[n,r]of Object.entries(t))if(e.includes(n)){e=e.replace(n,r);break}}return e}if(s.arcana==="minor"){const e=String(s.number||1).padStart(2,"0");let t;if(s.suit)if(s.number<=10)t=`${{1:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten"}[s.number]}-of-${s.suit}`;else{const n={11:"Page",12:"Knight",13:"Queen",14:"King"},r=s.suit.charAt(0).toUpperCase()+s.suit.slice(1);t=`${n[s.number]}-of-${r}`}else t=s.name.toLowerCase().replace(/\s+/g,"-");return`/assets/tarot-cards/minor/${e}-${t}.png`}return s.arcana==="major"?`/assets/tarot-cards/major/${{0:"00-the-Fool.png",1:"01-The-Magician.png",2:"02-The-High-Priestess.png",3:"03-The-Empress.png",4:"04-The-Emperor.png",5:"05-The-Hierophant.png",6:"06-The-Lovers.png",7:"07-The-Chariot.png",8:"08-Strength.png",9:"09-The-Hermit.png",10:"10-Wheel-of-Fortune.png",11:"11-Justice.png",12:"12-The-Hanged-Man.png",13:"13-Death.png",14:"14-Temperance.png",15:"15-The-Devil.png",16:"16-The-Tower.png",17:"17-The-Star.png",18:"18-The-Moon.png",19:"19-The-Sun.png",20:"20-Judgement.png",21:"21-The-World.png"}[s.number]||"00-the-Fool.png"}`:"/assets/tarot-cards/major/00-the-Fool.png"}catch(e){return console.error("  URL  :",e),"/assets/tarot-cards/major/00-the-Fool.png"}},$n=s=>s.is_reversed||s.orientation==="reversed"||!1,Ls=s=>{const e=s.target;if(e&&e.parentElement&&(e.style.display="none",!e.parentElement.querySelector(".fallback-emoji"))){const t=document.createElement("div");t.className="fallback-emoji",t.textContent="",t.style.cssText=`
        font-size: 48px; text-align: center; display: flex;
        align-items: center; justify-content: center;
        width: 100%; height: 100%; position: absolute;
        top: 0; left: 0; background: rgba(75, 85, 99, 0.9);
        border-radius: 6px; z-index: 10;
      `,e.parentElement.appendChild(t)}},ab={celtic_cross:{name:" ",positions:[{position:1,title:" ",description:"     .      .",keywords:[""," "," "]},{position:2,title:"/",description:"   .       .",keywords:["",""," "]},{position:3,title:" ",description:"      .     .",keywords:[" ","",""]},{position:4,title:" ",description:"   ,      .",keywords:[" "," "," "]},{position:5,title:" ",description:"      .      .",keywords:[" ",""," "]},{position:6,title:" ",description:"     .       .",keywords:[" ","  "," "]},{position:7,title:" ",description:"      .      .",keywords:[""," "," "]},{position:8,title:" ",description:"    .       .",keywords:[""," "," "]},{position:9,title:" ",description:"     .      .",keywords:["",""," "]},{position:10,title:" ",description:"     .       .",keywords:[" ",""," "]}]},seven_star:{name:" ",positions:[{position:1,title:"",description:"    .      .",keywords:["","",""]},{position:2,title:"",description:"     .     .",keywords:["",""," "]},{position:3,title:"",description:"    .    .",keywords:["","",""]},{position:4,title:"",description:"    .     .",keywords:["",""," "]},{position:5,title:" ",description:"    .      .",keywords:[""," "," "]},{position:6,title:"",description:"   .     .",keywords:["","",""]},{position:7,title:"",description:"    .      .",keywords:["","",""]}]},cup_of_relationship:{name:"  ",positions:[{position:1,title:"",description:"    .    .",keywords:[""," "," "]},{position:2,title:"",description:"   .    .",keywords:[""," "," "]},{position:3,title:" ",description:"      .    .",keywords:[" ","",""]},{position:4,title:" ",description:"     .    .",keywords:["","",""]},{position:5,title:"",description:"    .    .",keywords:["","",""]},{position:6,title:"",description:"   .      .",keywords:["","",""]},{position:7,title:" ",description:"   .    .",keywords:["","",""]}]}};function lb(s,e){const t=ab[s];return t&&t.positions.find(n=>n.position===e)||null}const cb={key:0,class:"position-meaning-inline"},ub={class:"meaning-content"},db={class:"position-header"},hb={class:"position-number"},fb={class:"position-title"},pb={class:"position-description"},gb={key:0,class:"keywords"},mb=Ze({__name:"PositionMeaningInline",props:{visible:{type:Boolean},spreadId:{},position:{}},setup(s){const e=s,t=Ce(()=>lb(e.spreadId,e.position));return(n,r)=>(w(),vt(je,{name:"fade-slide"},{default:$e(()=>[n.visible&&t.value?(w(),b("div",cb,[l("div",ub,[l("div",db,[l("span",hb,"Position "+C(n.position),1),l("h3",fb,C(t.value.title),1)]),l("p",pb,C(t.value.description),1),t.value.keywords?(w(),b("div",gb,[(w(!0),b(ye,null,Ue(t.value.keywords,i=>(w(),b("span",{class:"keyword",key:i},C(i),1))),128))])):O("",!0)])])):O("",!0)]),_:1}))}}),Wo=et(mb,[["__scopeId","data-v-eec6bef5"]]),vb={class:"celtic-cross-layout"},yb={class:"card-slot"},wb={key:0,class:"card-content"},bb={key:0,class:"card-back"},_b={key:1,class:"card-front"},kb=["src","alt"],Sb={class:"card-info"},Cb={key:0,class:"card-placeholder"},$b={class:"card-slot"},Pb={key:0,class:"card-content"},Tb={key:0,class:"card-back"},Eb={key:1,class:"card-front"},Ab=["src","alt"],Ib={class:"card-info"},Rb={key:0,class:"card-placeholder"},Mb={class:"card-slot"},Ob={key:0,class:"card-content"},jb={key:0,class:"card-back"},Lb={key:1,class:"card-front"},Db=["src","alt"],Ub={class:"card-info"},xb={key:0,class:"card-placeholder"},Nb={class:"card-slot"},Kb={key:0,class:"card-content"},Fb={key:0,class:"card-back"},Bb={key:1,class:"card-front"},zb=["src","alt"],Hb={class:"card-info"},Wb={key:0,class:"card-placeholder"},qb={class:"card-slot"},Vb={key:0,class:"card-content"},Gb={key:0,class:"card-back"},Jb={key:1,class:"card-front"},Qb=["src","alt"],Yb={class:"card-info"},Xb={key:0,class:"card-placeholder"},Zb={class:"card-slot"},e1={key:0,class:"card-content"},t1={key:0,class:"card-back"},s1={key:1,class:"card-front"},n1=["src","alt"],r1={class:"card-info"},i1={key:0,class:"card-placeholder"},o1={class:"card-slot"},a1={key:0,class:"card-content"},l1={key:0,class:"card-back"},c1={key:1,class:"card-front"},u1=["src","alt"],d1={class:"card-info"},h1={key:0,class:"card-placeholder"},f1={class:"card-slot"},p1={key:0,class:"card-content"},g1={key:0,class:"card-back"},m1={key:1,class:"card-front"},v1=["src","alt"],y1={class:"card-info"},w1={key:0,class:"card-placeholder"},b1={class:"card-slot"},_1={key:0,class:"card-content"},k1={key:0,class:"card-back"},S1={key:1,class:"card-front"},C1=["src","alt"],$1={class:"card-info"},P1={key:0,class:"card-placeholder"},T1={class:"card-slot"},E1={key:0,class:"card-content"},A1={key:0,class:"card-back"},I1={key:1,class:"card-front"},R1=["src","alt"],M1={class:"card-info"},O1={key:0,class:"card-placeholder"},j1={key:0,class:"action-buttons-container"},L1={key:1,class:"progress-indicator"},D1={class:"progress-bar"},U1={key:2,class:"interpretation-section"},x1={class:"interpretation-container"},N1={key:0,class:"aspect-section positive"},K1={key:1,class:"aspect-section negative"},F1={key:2,class:"advice-section"},B1={key:3,class:"themes-section"},z1={class:"theme-tags"},H1={key:4,class:"elemental-section"},W1={class:"elemental-grid"},q1={class:"element-item fire"},V1={class:"element-count"},G1={class:"element-item water"},J1={class:"element-count"},Q1={class:"element-item air"},Y1={class:"element-count"},X1={class:"element-item earth"},Z1={class:"element-count"},e_={class:"elemental-analysis"},t_=Ze({__name:"CelticCrossLayout",props:{cards:{},isDrawing:{type:Boolean},drawProgress:{},interpretation:{},showInterpretation:{type:Boolean},topic:{}},emits:["card-click","reveal-all"],setup(s,{emit:e}){const t=s,n=e,r=G(),i=Je(),o=Ce(()=>t.cards.some(p=>p&&!p.revealed)),a=G(!1),c=G(0),u=async()=>{await bt.buttonTapHaptic(),n("reveal-all")},h=async p=>{t.cards[p]&&(await bt.buttonTapHaptic(),t.cards[p].revealed||n("card-click",p),i.isPremium&&(c.value=p+1,a.value=!0))},f=p=>{try{if(p.imageUrl&&!p.imageUrl.includes("undefined")){let d=p.imageUrl;if(d=d.replace("/assets/tarot-cards/minor/cups/","/assets/tarot-cards/minor/"),d=d.replace("/assets/tarot-cards/minor/wands/","/assets/tarot-cards/minor/"),d=d.replace("/assets/tarot-cards/minor/swords/","/assets/tarot-cards/minor/"),d=d.replace("/assets/tarot-cards/minor/pentacles/","/assets/tarot-cards/minor/"),d.includes("/assets/tarot-cards/major/")){const v={"00-the-fool.png":"00-the-Fool.png","01-the-magician.png":"01-The-Magician.png","02-the-high-priestess.png":"02-The-High-Priestess.png","03-the-empress.png":"03-The-Empress.png","04-the-emperor.png":"04-The-Emperor.png","05-the-hierophant.png":"05-The-Hierophant.png","06-the-lovers.png":"06-The-Lovers.png","07-the-chariot.png":"07-The-Chariot.png","08-strength.png":"08-Strength.png","09-the-hermit.png":"09-The-Hermit.png","10-wheel-of-fortune.png":"10-Wheel-of-Fortune.png","11-justice.png":"11-Justice.png","12-the-hanged-man.png":"12-The-Hanged-Man.png","13-death.png":"13-Death.png","14-temperance.png":"14-Temperance.png","15-the-devil.png":"15-The-Devil.png","16-the-tower.png":"16-The-Tower.png","17-the-star.png":"17-The-Star.png","18-the-moon.png":"18-The-Moon.png","19-the-sun.png":"19-The-Sun.png","20-judgement.png":"20-Judgement.png","21-the-world.png":"21-The-World.png"};for(const[k,$]of Object.entries(v))if(d.includes(k)){d=d.replace(k,$);break}}return d}if(p.arcana==="minor"){const d=String(p.number||1).padStart(2,"0");let v;if(p.suit)if(p.number<=10)v=`${{1:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten"}[p.number]}-of-${p.suit}`;else{const k={11:"Page",12:"Knight",13:"Queen",14:"King"},$=p.suit.charAt(0).toUpperCase()+p.suit.slice(1);v=`${k[p.number]}-of-${$}`}else v=p.name.toLowerCase().replace(/\s+/g,"-");return`/assets/tarot-cards/minor/${d}-${v}.png`}return p.arcana==="major"?`/assets/tarot-cards/major/${{0:"00-the-Fool.png",1:"01-The-Magician.png",2:"02-The-High-Priestess.png",3:"03-The-Empress.png",4:"04-The-Emperor.png",5:"05-The-Hierophant.png",6:"06-The-Lovers.png",7:"07-The-Chariot.png",8:"08-Strength.png",9:"09-The-Hermit.png",10:"10-Wheel-of-Fortune.png",11:"11-Justice.png",12:"12-The-Hanged-Man.png",13:"13-Death.png",14:"14-Temperance.png",15:"15-The-Devil.png",16:"16-The-Tower.png",17:"17-The-Star.png",18:"18-The-Moon.png",19:"19-The-Sun.png",20:"20-Judgement.png",21:"21-The-World.png"}[p.number]||"00-the-Fool.png"}`:"/assets/tarot-cards/major/00-the-Fool.png"}catch(d){return console.error("  URL  :",d),"/assets/tarot-cards/major/00-the-Fool.png"}},m=p=>{const d=p.target;d.style.display="none";const v=d.parentElement;if(v&&!v.querySelector(".fallback-emoji")){const k=document.createElement("div");k.className="fallback-emoji",k.textContent="",v.appendChild(k)}};return(p,d)=>{var v,k,$,R,S,E,M,A,D,K,W,se,oe;return w(),b(ye,null,[l("div",vb,[d[56]||(d[56]=Vn('<div class="layout-background" data-v-275ec6fb><svg class="celtic-knot" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" data-v-275ec6fb><defs data-v-275ec6fb><linearGradient id="celticGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-275ec6fb><stop offset="0%" style="stop-color:#A855F7;stop-opacity:0.3;" data-v-275ec6fb></stop><stop offset="50%" style="stop-color:#7C3AED;stop-opacity:0.2;" data-v-275ec6fb></stop><stop offset="100%" style="stop-color:#6D28D9;stop-opacity:0.3;" data-v-275ec6fb></stop></linearGradient></defs><circle cx="200" cy="200" r="60" fill="none" stroke="url(#celticGradient)" stroke-width="3" opacity="0.6" data-v-275ec6fb></circle><path d="M 200 140 Q 260 140 260 200 T 200 260 Q 140 260 140 200 T 200 140" fill="none" stroke="url(#celticGradient)" stroke-width="2" opacity="0.5" data-v-275ec6fb></path><path d="M 140 200 Q 140 140 200 140 T 260 200 Q 260 260 200 260 T 140 200" fill="none" stroke="url(#celticGradient)" stroke-width="2" opacity="0.5" data-v-275ec6fb></path><path d="M 200 80 L 200 120 M 200 280 L 200 320 M 120 200 L 80 200 M 280 200 L 320 200" stroke="url(#celticGradient)" stroke-width="3" opacity="0.4" data-v-275ec6fb></path></svg><div class="mystic-cross" data-v-275ec6fb><div class="cross-vertical" data-v-275ec6fb></div><div class="cross-horizontal" data-v-275ec6fb></div><div class="cross-center" data-v-275ec6fb></div></div><div class="floating-orbs" data-v-275ec6fb><div class="orb orb-1" data-v-275ec6fb></div><div class="orb orb-2" data-v-275ec6fb></div><div class="orb orb-3" data-v-275ec6fb></div><div class="orb orb-4" data-v-275ec6fb></div></div><div class="mystic-fog" data-v-275ec6fb></div></div>',1)),l("div",{class:"cards-container",ref_key:"cardsContainer",ref:r},[l("div",{class:B(["card-position position-1",{"has-card":p.cards[0],revealed:(v=p.cards[0])==null?void 0:v.revealed}]),onClick:d[0]||(d[0]=V=>h(0))},[d[12]||(d[12]=l("div",{class:"position-label"},"1. ",-1)),l("div",yb,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[0]?(w(),b("div",wb,[p.cards[0].revealed?(w(),b("div",_b,[l("img",{src:f(p.cards[0].card),alt:p.cards[0].card.nameKr,onError:m},null,40,kb),l("div",Sb,[l("h4",null,C(p.cards[0].card.nameKr),1),l("span",{class:B(["orientation",p.cards[0].orientation])},C(p.cards[0].orientation==="upright"?"":""),3)])])):(w(),b("div",bb,d[10]||(d[10]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[0]&&p.isDrawing?(w(),b("div",Cb,d[11]||(d[11]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-2",{"has-card":p.cards[1],revealed:(k=p.cards[1])==null?void 0:k.revealed}]),onClick:d[1]||(d[1]=V=>h(1))},[d[15]||(d[15]=l("div",{class:"position-label"},"2. ",-1)),l("div",$b,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[1]?(w(),b("div",Pb,[p.cards[1].revealed?(w(),b("div",Eb,[l("img",{src:f(p.cards[1].card),alt:p.cards[1].card.nameKr,onError:m},null,40,Ab),l("div",Ib,[l("h4",null,C(p.cards[1].card.nameKr),1),l("span",{class:B(["orientation",p.cards[1].orientation])},C(p.cards[1].orientation==="upright"?"":""),3)])])):(w(),b("div",Tb,d[13]||(d[13]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[1]&&p.isDrawing?(w(),b("div",Rb,d[14]||(d[14]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-3",{"has-card":p.cards[2],revealed:($=p.cards[2])==null?void 0:$.revealed}]),onClick:d[2]||(d[2]=V=>h(2))},[d[18]||(d[18]=l("div",{class:"position-label"},"3. ",-1)),l("div",Mb,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[2]?(w(),b("div",Ob,[p.cards[2].revealed?(w(),b("div",Lb,[l("img",{src:f(p.cards[2].card),alt:p.cards[2].card.nameKr,onError:m},null,40,Db),l("div",Ub,[l("h4",null,C(p.cards[2].card.nameKr),1),l("span",{class:B(["orientation",p.cards[2].orientation])},C(p.cards[2].orientation==="upright"?"":""),3)])])):(w(),b("div",jb,d[16]||(d[16]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[2]&&p.isDrawing?(w(),b("div",xb,d[17]||(d[17]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-4",{"has-card":p.cards[3],revealed:(R=p.cards[3])==null?void 0:R.revealed}]),onClick:d[3]||(d[3]=V=>h(3))},[d[21]||(d[21]=l("div",{class:"position-label"},"4. ",-1)),l("div",Nb,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[3]?(w(),b("div",Kb,[p.cards[3].revealed?(w(),b("div",Bb,[l("img",{src:f(p.cards[3].card),alt:p.cards[3].card.nameKr,onError:m},null,40,zb),l("div",Hb,[l("h4",null,C(p.cards[3].card.nameKr),1),l("span",{class:B(["orientation",p.cards[3].orientation])},C(p.cards[3].orientation==="upright"?"":""),3)])])):(w(),b("div",Fb,d[19]||(d[19]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[3]&&p.isDrawing?(w(),b("div",Wb,d[20]||(d[20]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-5",{"has-card":p.cards[4],revealed:(S=p.cards[4])==null?void 0:S.revealed}]),onClick:d[4]||(d[4]=V=>h(4))},[d[24]||(d[24]=l("div",{class:"position-label"},"5.  ",-1)),l("div",qb,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[4]?(w(),b("div",Vb,[p.cards[4].revealed?(w(),b("div",Jb,[l("img",{src:f(p.cards[4].card),alt:p.cards[4].card.nameKr,onError:m},null,40,Qb),l("div",Yb,[l("h4",null,C(p.cards[4].card.nameKr),1),l("span",{class:B(["orientation",p.cards[4].orientation])},C(p.cards[4].orientation==="upright"?"":""),3)])])):(w(),b("div",Gb,d[22]||(d[22]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[4]&&p.isDrawing?(w(),b("div",Xb,d[23]||(d[23]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-6",{"has-card":p.cards[5],revealed:(E=p.cards[5])==null?void 0:E.revealed}]),onClick:d[5]||(d[5]=V=>h(5))},[d[27]||(d[27]=l("div",{class:"position-label"},"6. ",-1)),l("div",Zb,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[5]?(w(),b("div",e1,[p.cards[5].revealed?(w(),b("div",s1,[l("img",{src:f(p.cards[5].card),alt:p.cards[5].card.nameKr,onError:m},null,40,n1),l("div",r1,[l("h4",null,C(p.cards[5].card.nameKr),1),l("span",{class:B(["orientation",p.cards[5].orientation])},C(p.cards[5].orientation==="upright"?"":""),3)])])):(w(),b("div",t1,d[25]||(d[25]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[5]&&p.isDrawing?(w(),b("div",i1,d[26]||(d[26]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-7",{"has-card":p.cards[6],revealed:(M=p.cards[6])==null?void 0:M.revealed}]),onClick:d[6]||(d[6]=V=>h(6))},[d[30]||(d[30]=l("div",{class:"position-label"},"7. ",-1)),l("div",o1,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[6]?(w(),b("div",a1,[p.cards[6].revealed?(w(),b("div",c1,[l("img",{src:f(p.cards[6].card),alt:p.cards[6].card.nameKr,onError:m},null,40,u1),l("div",d1,[l("h4",null,C(p.cards[6].card.nameKr),1),l("span",{class:B(["orientation",p.cards[6].orientation])},C(p.cards[6].orientation==="upright"?"":""),3)])])):(w(),b("div",l1,d[28]||(d[28]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[6]&&p.isDrawing?(w(),b("div",h1,d[29]||(d[29]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-8",{"has-card":p.cards[7],revealed:(A=p.cards[7])==null?void 0:A.revealed}]),onClick:d[7]||(d[7]=V=>h(7))},[d[33]||(d[33]=l("div",{class:"position-label"},"8. ",-1)),l("div",f1,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[7]?(w(),b("div",p1,[p.cards[7].revealed?(w(),b("div",m1,[l("img",{src:f(p.cards[7].card),alt:p.cards[7].card.nameKr,onError:m},null,40,v1),l("div",y1,[l("h4",null,C(p.cards[7].card.nameKr),1),l("span",{class:B(["orientation",p.cards[7].orientation])},C(p.cards[7].orientation==="upright"?"":""),3)])])):(w(),b("div",g1,d[31]||(d[31]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[7]&&p.isDrawing?(w(),b("div",w1,d[32]||(d[32]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-9",{"has-card":p.cards[8],revealed:(D=p.cards[8])==null?void 0:D.revealed}]),onClick:d[8]||(d[8]=V=>h(8))},[d[36]||(d[36]=l("div",{class:"position-label"},"9.  ",-1)),l("div",b1,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[8]?(w(),b("div",_1,[p.cards[8].revealed?(w(),b("div",S1,[l("img",{src:f(p.cards[8].card),alt:p.cards[8].card.nameKr,onError:m},null,40,C1),l("div",$1,[l("h4",null,C(p.cards[8].card.nameKr),1),l("span",{class:B(["orientation",p.cards[8].orientation])},C(p.cards[8].orientation==="upright"?"":""),3)])])):(w(),b("div",k1,d[34]||(d[34]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[8]&&p.isDrawing?(w(),b("div",P1,d[35]||(d[35]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-10",{"has-card":p.cards[9],revealed:(K=p.cards[9])==null?void 0:K.revealed}]),onClick:d[9]||(d[9]=V=>h(9))},[d[39]||(d[39]=l("div",{class:"position-label"},"10.  ",-1)),l("div",T1,[pe(je,{name:"card-flip"},{default:$e(()=>[p.cards[9]?(w(),b("div",E1,[p.cards[9].revealed?(w(),b("div",I1,[l("img",{src:f(p.cards[9].card),alt:p.cards[9].card.nameKr,onError:m},null,40,R1),l("div",M1,[l("h4",null,C(p.cards[9].card.nameKr),1),l("span",{class:B(["orientation",p.cards[9].orientation])},C(p.cards[9].orientation==="upright"?"":""),3)])])):(w(),b("div",A1,d[37]||(d[37]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!p.cards[9]&&p.isDrawing?(w(),b("div",O1,d[38]||(d[38]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2)],512),p.isDrawing?O("",!0):(w(),b("div",j1,[o.value?(w(),b("button",{key:0,class:"btn-action btn-reveal-all",onClick:u},d[40]||(d[40]=[l("span",{class:"icon"},"",-1),Ae("    ",-1)]))):O("",!0),Eo(p.$slots,"action-button",{},void 0)])),p.isDrawing?(w(),b("div",L1,[d[41]||(d[41]=l("p",null,"  ...",-1)),l("div",D1,[l("div",{class:"progress-fill",style:Ct({width:p.drawProgress+"%"})},null,4)])])):O("",!0),p.showInterpretation&&p.interpretation&&!o.value?(w(),b("div",U1,[l("div",x1,[d[55]||(d[55]=l("h3",null,"   ",-1)),((W=p.interpretation.positiveAspects)==null?void 0:W.length)>0?(w(),b("div",N1,[d[42]||(d[42]=l("h4",null,"  ",-1)),l("ul",null,[(w(!0),b(ye,null,Ue(p.interpretation.positiveAspects,(V,I)=>(w(),b("li",{key:"positive-"+I},C(V),1))),128))])])):O("",!0),((se=p.interpretation.negativeAspects)==null?void 0:se.length)>0?(w(),b("div",K1,[d[43]||(d[43]=l("h4",null,"  ",-1)),l("ul",null,[(w(!0),b(ye,null,Ue(p.interpretation.negativeAspects,(V,I)=>(w(),b("li",{key:"negative-"+I},C(V),1))),128))])])):O("",!0),p.interpretation.advice?(w(),b("div",F1,[d[44]||(d[44]=l("h4",null," ",-1)),l("p",null,C(p.interpretation.advice),1)])):O("",!0),((oe=p.interpretation.keyThemes)==null?void 0:oe.length)>0?(w(),b("div",B1,[d[45]||(d[45]=l("h4",null,"  ",-1)),l("div",z1,[(w(!0),b(ye,null,Ue(p.interpretation.keyThemes,(V,I)=>(w(),b("span",{key:"theme-"+I,class:"theme-tag"},C(V),1))),128))])])):O("",!0),p.interpretation.elementalBalance?(w(),b("div",H1,[d[54]||(d[54]=l("h4",null,"  ",-1)),l("div",W1,[l("div",q1,[d[46]||(d[46]=l("span",{class:"element-icon"},"",-1)),d[47]||(d[47]=l("span",{class:"element-name"},"",-1)),l("span",V1,C(p.interpretation.elementalBalance.fire),1)]),l("div",G1,[d[48]||(d[48]=l("span",{class:"element-icon"},"",-1)),d[49]||(d[49]=l("span",{class:"element-name"},"",-1)),l("span",J1,C(p.interpretation.elementalBalance.water),1)]),l("div",Q1,[d[50]||(d[50]=l("span",{class:"element-icon"},"",-1)),d[51]||(d[51]=l("span",{class:"element-name"},"",-1)),l("span",Y1,C(p.interpretation.elementalBalance.air),1)]),l("div",X1,[d[52]||(d[52]=l("span",{class:"element-icon"},"",-1)),d[53]||(d[53]=l("span",{class:"element-name"},"",-1)),l("span",Z1,C(p.interpretation.elementalBalance.earth),1)])]),l("p",e_,C(p.interpretation.elementalBalance.analysis),1)])):O("",!0)])])):O("",!0)]),de(i).isPremium?(w(),vt(Wo,{key:0,visible:a.value,"spread-id":"celtic_cross",position:c.value},null,8,["visible","position"])):O("",!0)],64)}}}),s_=et(t_,[["__scopeId","data-v-275ec6fb"]]),n_={class:"seven-star-layout"},r_={class:"layout-background"},i_={class:"star-constellation"},o_={class:"sparkles"},a_={class:"card-slot"},l_={key:0,class:"card-content"},c_={key:0,class:"card-back"},u_={key:1,class:"card-front"},d_=["src","alt"],h_={class:"card-info"},f_={key:0,class:"card-placeholder"},p_={class:"card-slot"},g_={key:0,class:"card-content"},m_={key:0,class:"card-back"},v_={key:1,class:"card-front"},y_=["src","alt"],w_={class:"card-info"},b_={key:0,class:"card-placeholder"},__={class:"card-slot"},k_={key:0,class:"card-content"},S_={key:0,class:"card-back"},C_={key:1,class:"card-front"},$_=["src","alt"],P_={class:"card-info"},T_={key:0,class:"card-placeholder"},E_={class:"card-slot"},A_={key:0,class:"card-content"},I_={key:0,class:"card-back"},R_={key:1,class:"card-front"},M_=["src","alt"],O_={class:"card-info"},j_={key:0,class:"card-placeholder"},L_={class:"card-slot"},D_={key:0,class:"card-content"},U_={key:0,class:"card-back"},x_={key:1,class:"card-front"},N_=["src","alt"],K_={class:"card-info"},F_={key:0,class:"card-placeholder"},B_={class:"card-slot"},z_={key:0,class:"card-content"},H_={key:0,class:"card-back"},W_={key:1,class:"card-front"},q_=["src","alt"],V_={class:"card-info"},G_={key:0,class:"card-placeholder"},J_={class:"card-slot"},Q_={key:0,class:"card-content"},Y_={key:0,class:"card-back"},X_={key:1,class:"card-front"},Z_=["src","alt"],ek={class:"card-info"},tk={key:0,class:"card-placeholder"},sk={key:0,class:"action-buttons-container"},nk={key:1,class:"button-placeholder"},rk={key:1,class:"progress-indicator"},ik={class:"progress-bar"},ok=Ze({__name:"SevenStarLayout",props:{cards:{},isDrawing:{type:Boolean},drawProgress:{}},emits:["card-click","reveal-all"],setup(s,{emit:e}){const t=s,n=e,r=Je(),i=Ce(()=>t.cards.some(d=>d&&!d.revealed)),o=G(!1),a=G(0),c=G(),u=d=>{const v=Math.random()*100,k=Math.random()*100,$=Math.random()*5,R=3+Math.random()*4;return{left:`${v}%`,top:`${k}%`,animationDelay:`${$}s`,animationDuration:`${R}s`}},h=async()=>{await bt.buttonTapHaptic(),n("reveal-all")},f=async d=>{t.cards[d]&&!t.cards[d].revealed&&(await bt.buttonTapHaptic(),n("card-click",d),r.isPremium&&(a.value=d+1,o.value=!0))},m=d=>{try{if(d.imageUrl&&!d.imageUrl.includes("undefined")){let v=d.imageUrl;if(v=v.replace("/assets/tarot-cards/minor/cups/","/assets/tarot-cards/minor/"),v=v.replace("/assets/tarot-cards/minor/wands/","/assets/tarot-cards/minor/"),v=v.replace("/assets/tarot-cards/minor/swords/","/assets/tarot-cards/minor/"),v=v.replace("/assets/tarot-cards/minor/pentacles/","/assets/tarot-cards/minor/"),v.includes("/assets/tarot-cards/major/")){const k={"00-the-fool.png":"00-the-Fool.png","01-the-magician.png":"01-The-Magician.png","02-the-high-priestess.png":"02-The-High-Priestess.png","03-the-empress.png":"03-The-Empress.png","04-the-emperor.png":"04-The-Emperor.png","05-the-hierophant.png":"05-The-Hierophant.png","06-the-lovers.png":"06-The-Lovers.png","07-the-chariot.png":"07-The-Chariot.png","08-strength.png":"08-Strength.png","09-the-hermit.png":"09-The-Hermit.png","10-wheel-of-fortune.png":"10-Wheel-of-Fortune.png","11-justice.png":"11-Justice.png","12-the-hanged-man.png":"12-The-Hanged-Man.png","13-death.png":"13-Death.png","14-temperance.png":"14-Temperance.png","15-the-devil.png":"15-The-Devil.png","16-the-tower.png":"16-The-Tower.png","17-the-star.png":"17-The-Star.png","18-the-moon.png":"18-The-Moon.png","19-the-sun.png":"19-The-Sun.png","20-judgement.png":"20-Judgement.png","21-the-world.png":"21-The-World.png"};for(const[$,R]of Object.entries(k))if(v.includes($)){v=v.replace($,R);break}}return v}if(d.arcana==="minor"){const v=String(d.number||1).padStart(2,"0");let k;if(d.suit)if(d.number<=10)k=`${{1:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten"}[d.number]}-of-${d.suit}`;else{const $={11:"Page",12:"Knight",13:"Queen",14:"King"},R=d.suit.charAt(0).toUpperCase()+d.suit.slice(1);k=`${$[d.number]}-of-${R}`}else k=d.name.toLowerCase().replace(/\s+/g,"-");return`/assets/tarot-cards/minor/${v}-${k}.png`}return d.arcana==="major"?`/assets/tarot-cards/major/${{0:"00-the-Fool.png",1:"01-The-Magician.png",2:"02-The-High-Priestess.png",3:"03-The-Empress.png",4:"04-The-Emperor.png",5:"05-The-Hierophant.png",6:"06-The-Lovers.png",7:"07-The-Chariot.png",8:"08-Strength.png",9:"09-The-Hermit.png",10:"10-Wheel-of-Fortune.png",11:"11-Justice.png",12:"12-The-Hanged-Man.png",13:"13-Death.png",14:"14-Temperance.png",15:"15-The-Devil.png",16:"16-The-Tower.png",17:"17-The-Star.png",18:"18-The-Moon.png",19:"19-The-Sun.png",20:"20-Judgement.png",21:"21-The-World.png"}[d.number]||"00-the-Fool.png"}`:"/assets/tarot-cards/major/00-the-Fool.png"}catch(v){return console.error("  URL  :",v),"/assets/tarot-cards/major/00-the-Fool.png"}},p=d=>{const v=d.target;v.style.display="none";const k=v.parentElement;if(k&&!k.querySelector(".fallback-emoji")){const $=document.createElement("div");$.className="fallback-emoji",$.textContent="",k.appendChild($)}};return(d,v)=>{var k,$,R,S,E,M,A;return w(),b(ye,null,[l("div",n_,[l("div",r_,[l("div",i_,[v[8]||(v[8]=Vn('<svg class="constellation-lines" viewBox="0 0 100 100" preserveAspectRatio="none" data-v-b313ba66><line x1="50" y1="20" x2="20" y2="35" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="20" y1="35" x2="20" y2="65" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="20" y1="65" x2="50" y2="80" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="50" y1="80" x2="80" y2="65" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="80" y1="65" x2="80" y2="35" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="80" y1="35" x2="50" y2="20" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="50" y1="20" x2="50" y2="50" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line><line x1="50" y1="50" x2="50" y2="80" stroke="rgba(255, 215, 0, 0.3)" stroke-width="0.5" data-v-b313ba66></line></svg>',1)),(w(),b(ye,null,Ue(7,D=>l("div",{class:B(["star",`star-${D}`]),key:D},v[7]||(v[7]=[l("span",{class:"star-icon"},"",-1)]),2)),64))]),l("div",o_,[(w(),b(ye,null,Ue(20,D=>l("div",{class:"sparkle",key:D,style:Ct(u())},"",4)),64))])]),l("div",{class:"cards-container",ref_key:"cardsContainer",ref:c},[l("div",{class:B(["card-position position-1",{"has-card":d.cards[0],revealed:(k=d.cards[0])==null?void 0:k.revealed}]),onClick:v[0]||(v[0]=D=>f(0))},[v[11]||(v[11]=l("div",{class:"position-label"},"1.  ",-1)),l("div",a_,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[0]?(w(),b("div",l_,[d.cards[0].revealed?(w(),b("div",u_,[l("img",{src:m(d.cards[0].card),alt:d.cards[0].card.nameKr,onError:p},null,40,d_),l("div",h_,[l("h4",null,C(d.cards[0].card.nameKr),1),l("span",{class:B(["orientation",d.cards[0].orientation])},C(d.cards[0].orientation==="upright"?"":""),3)])])):(w(),b("div",c_,v[9]||(v[9]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[0]&&d.isDrawing?(w(),b("div",f_,v[10]||(v[10]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-2",{"has-card":d.cards[1],revealed:($=d.cards[1])==null?void 0:$.revealed}]),onClick:v[1]||(v[1]=D=>f(1))},[v[14]||(v[14]=l("div",{class:"position-label"},"2.  ",-1)),l("div",p_,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[1]?(w(),b("div",g_,[d.cards[1].revealed?(w(),b("div",v_,[l("img",{src:m(d.cards[1].card),alt:d.cards[1].card.nameKr,onError:p},null,40,y_),l("div",w_,[l("h4",null,C(d.cards[1].card.nameKr),1),l("span",{class:B(["orientation",d.cards[1].orientation])},C(d.cards[1].orientation==="upright"?"":""),3)])])):(w(),b("div",m_,v[12]||(v[12]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[1]&&d.isDrawing?(w(),b("div",b_,v[13]||(v[13]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-3",{"has-card":d.cards[2],revealed:(R=d.cards[2])==null?void 0:R.revealed}]),onClick:v[2]||(v[2]=D=>f(2))},[v[17]||(v[17]=l("div",{class:"position-label"},"3.  ",-1)),l("div",__,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[2]?(w(),b("div",k_,[d.cards[2].revealed?(w(),b("div",C_,[l("img",{src:m(d.cards[2].card),alt:d.cards[2].card.nameKr,onError:p},null,40,$_),l("div",P_,[l("h4",null,C(d.cards[2].card.nameKr),1),l("span",{class:B(["orientation",d.cards[2].orientation])},C(d.cards[2].orientation==="upright"?"":""),3)])])):(w(),b("div",S_,v[15]||(v[15]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[2]&&d.isDrawing?(w(),b("div",T_,v[16]||(v[16]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-4",{"has-card":d.cards[3],revealed:(S=d.cards[3])==null?void 0:S.revealed}]),onClick:v[3]||(v[3]=D=>f(3))},[v[20]||(v[20]=l("div",{class:"position-label"},"4.  ",-1)),l("div",E_,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[3]?(w(),b("div",A_,[d.cards[3].revealed?(w(),b("div",R_,[l("img",{src:m(d.cards[3].card),alt:d.cards[3].card.nameKr,onError:p},null,40,M_),l("div",O_,[l("h4",null,C(d.cards[3].card.nameKr),1),l("span",{class:B(["orientation",d.cards[3].orientation])},C(d.cards[3].orientation==="upright"?"":""),3)])])):(w(),b("div",I_,v[18]||(v[18]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[3]&&d.isDrawing?(w(),b("div",j_,v[19]||(v[19]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-5",{"has-card":d.cards[4],revealed:(E=d.cards[4])==null?void 0:E.revealed}]),onClick:v[4]||(v[4]=D=>f(4))},[v[23]||(v[23]=l("div",{class:"position-label"},"5.  ",-1)),l("div",L_,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[4]?(w(),b("div",D_,[d.cards[4].revealed?(w(),b("div",x_,[l("img",{src:m(d.cards[4].card),alt:d.cards[4].card.nameKr,onError:p},null,40,N_),l("div",K_,[l("h4",null,C(d.cards[4].card.nameKr),1),l("span",{class:B(["orientation",d.cards[4].orientation])},C(d.cards[4].orientation==="upright"?"":""),3)])])):(w(),b("div",U_,v[21]||(v[21]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[4]&&d.isDrawing?(w(),b("div",F_,v[22]||(v[22]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-6",{"has-card":d.cards[5],revealed:(M=d.cards[5])==null?void 0:M.revealed}]),onClick:v[5]||(v[5]=D=>f(5))},[v[26]||(v[26]=l("div",{class:"position-label"},"6. ",-1)),l("div",B_,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[5]?(w(),b("div",z_,[d.cards[5].revealed?(w(),b("div",W_,[l("img",{src:m(d.cards[5].card),alt:d.cards[5].card.nameKr,onError:p},null,40,q_),l("div",V_,[l("h4",null,C(d.cards[5].card.nameKr),1),l("span",{class:B(["orientation",d.cards[5].orientation])},C(d.cards[5].orientation==="upright"?"":""),3)])])):(w(),b("div",H_,v[24]||(v[24]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[5]&&d.isDrawing?(w(),b("div",G_,v[25]||(v[25]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-7",{"has-card":d.cards[6],revealed:(A=d.cards[6])==null?void 0:A.revealed}]),onClick:v[6]||(v[6]=D=>f(6))},[v[29]||(v[29]=l("div",{class:"position-label"},"7.  ",-1)),l("div",J_,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[6]?(w(),b("div",Q_,[d.cards[6].revealed?(w(),b("div",X_,[l("img",{src:m(d.cards[6].card),alt:d.cards[6].card.nameKr,onError:p},null,40,Z_),l("div",ek,[l("h4",null,C(d.cards[6].card.nameKr),1),l("span",{class:B(["orientation",d.cards[6].orientation])},C(d.cards[6].orientation==="upright"?"":""),3)])])):(w(),b("div",Y_,v[27]||(v[27]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[6]&&d.isDrawing?(w(),b("div",tk,v[28]||(v[28]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2)],512),d.isDrawing?O("",!0):(w(),b("div",sk,[i.value?(w(),b("button",{key:0,class:"btn-action btn-reveal-all",onClick:h},v[30]||(v[30]=[l("span",{class:"icon"},"",-1),Ae("    ",-1)]))):(w(),b("div",nk)),Eo(d.$slots,"action-button",{},void 0)])),d.isDrawing?(w(),b("div",rk,[v[31]||(v[31]=l("p",null,"    ...",-1)),l("div",ik,[l("div",{class:"progress-fill",style:Ct({width:d.drawProgress+"%"})},null,4)])])):O("",!0)]),de(r).isPremium?(w(),vt(Wo,{key:0,visible:o.value,"spread-id":"seven_star",position:a.value},null,8,["visible","position"])):O("",!0)],64)}}}),ak=et(ok,[["__scopeId","data-v-b313ba66"]]),lk={class:"cup-of-relationship-layout"},ck={class:"layout-background"},uk={class:"floating-hearts"},dk={class:"ripples"},hk={class:"card-slot"},fk={key:0,class:"card-content"},pk={key:0,class:"card-back"},gk={key:1,class:"card-front"},mk=["src","alt"],vk={class:"card-info"},yk={key:0,class:"card-placeholder"},wk={class:"card-slot"},bk={key:0,class:"card-content"},_k={key:0,class:"card-back"},kk={key:1,class:"card-front"},Sk=["src","alt"],Ck={class:"card-info"},$k={key:0,class:"card-placeholder"},Pk={class:"card-slot"},Tk={key:0,class:"card-content"},Ek={key:0,class:"card-back"},Ak={key:1,class:"card-front"},Ik=["src","alt"],Rk={class:"card-info"},Mk={key:0,class:"card-placeholder"},Ok={class:"card-slot"},jk={key:0,class:"card-content"},Lk={key:0,class:"card-back"},Dk={key:1,class:"card-front"},Uk=["src","alt"],xk={class:"card-info"},Nk={key:0,class:"card-placeholder"},Kk={class:"card-slot"},Fk={key:0,class:"card-content"},Bk={key:0,class:"card-back"},zk={key:1,class:"card-front"},Hk=["src","alt"],Wk={class:"card-info"},qk={key:0,class:"card-placeholder"},Vk={class:"card-slot"},Gk={key:0,class:"card-content"},Jk={key:0,class:"card-back"},Qk={key:1,class:"card-front"},Yk=["src","alt"],Xk={class:"card-info"},Zk={key:0,class:"card-placeholder"},eS={class:"card-slot"},tS={key:0,class:"card-content"},sS={key:0,class:"card-back"},nS={key:1,class:"card-front"},rS=["src","alt"],iS={class:"card-info"},oS={key:0,class:"card-placeholder"},aS={class:"card-slot"},lS={key:0,class:"card-content"},cS={key:0,class:"card-back"},uS={key:1,class:"card-front"},dS=["src","alt"],hS={class:"card-info"},fS={key:0,class:"card-placeholder"},pS={class:"card-slot"},gS={key:0,class:"card-content"},mS={key:0,class:"card-back"},vS={key:1,class:"card-front"},yS=["src","alt"],wS={class:"card-info"},bS={key:0,class:"card-placeholder"},_S={class:"card-slot"},kS={key:0,class:"card-content"},SS={key:0,class:"card-back"},CS={key:1,class:"card-front"},$S=["src","alt"],PS={class:"card-info"},TS={key:0,class:"card-placeholder"},ES={class:"card-slot"},AS={key:0,class:"card-content"},IS={key:0,class:"card-back"},RS={key:1,class:"card-front"},MS=["src","alt"],OS={class:"card-info"},jS={key:0,class:"card-placeholder"},LS={key:0,class:"action-buttons-container"},DS={key:1,class:"button-placeholder"},US={key:1,class:"progress-indicator"},xS={class:"progress-bar"},NS=Ze({__name:"CupOfRelationshipLayout",props:{cards:{},isDrawing:{type:Boolean},drawProgress:{}},emits:["card-click","reveal-all"],setup(s,{emit:e}){const t=s,n=e,r=Je(),i=Ce(()=>t.cards.some(d=>d&&!d.revealed)),o=G(!1),a=G(0),c=G(),u=d=>{const v=Math.random()*100,k=Math.random()*100,$=Math.random()*10,R=10+Math.random()*10,S=.5+Math.random()*1;return{left:`${v}%`,top:`${k}%`,animationDelay:`${$}s`,animationDuration:`${R}s`,fontSize:`${S}em`}},h=async()=>{await bt.buttonTapHaptic(),n("reveal-all")},f=async d=>{t.cards[d]&&!t.cards[d].revealed&&(await bt.buttonTapHaptic(),n("card-click",d),r.isPremium&&(a.value=d+1,o.value=!0))},m=d=>{try{if(d.imageUrl&&!d.imageUrl.includes("undefined")){let v=d.imageUrl;if(v=v.replace("/assets/tarot-cards/minor/cups/","/assets/tarot-cards/minor/"),v=v.replace("/assets/tarot-cards/minor/wands/","/assets/tarot-cards/minor/"),v=v.replace("/assets/tarot-cards/minor/swords/","/assets/tarot-cards/minor/"),v=v.replace("/assets/tarot-cards/minor/pentacles/","/assets/tarot-cards/minor/"),v.includes("/assets/tarot-cards/major/")){const k={"00-the-fool.png":"00-the-Fool.png","01-the-magician.png":"01-The-Magician.png","02-the-high-priestess.png":"02-The-High-Priestess.png","03-the-empress.png":"03-The-Empress.png","04-the-emperor.png":"04-The-Emperor.png","05-the-hierophant.png":"05-The-Hierophant.png","06-the-lovers.png":"06-The-Lovers.png","07-the-chariot.png":"07-The-Chariot.png","08-strength.png":"08-Strength.png","09-the-hermit.png":"09-The-Hermit.png","10-wheel-of-fortune.png":"10-Wheel-of-Fortune.png","11-justice.png":"11-Justice.png","12-the-hanged-man.png":"12-The-Hanged-Man.png","13-death.png":"13-Death.png","14-temperance.png":"14-Temperance.png","15-the-devil.png":"15-The-Devil.png","16-the-tower.png":"16-The-Tower.png","17-the-star.png":"17-The-Star.png","18-the-moon.png":"18-The-Moon.png","19-the-sun.png":"19-The-Sun.png","20-judgement.png":"20-Judgement.png","21-the-world.png":"21-The-World.png"};for(const[$,R]of Object.entries(k))if(v.includes($)){v=v.replace($,R);break}}return v}if(d.arcana==="minor"){const v=String(d.number||1).padStart(2,"0");let k;if(d.suit)if(d.number<=10)k=`${{1:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten"}[d.number]}-of-${d.suit}`;else{const $={11:"Page",12:"Knight",13:"Queen",14:"King"},R=d.suit.charAt(0).toUpperCase()+d.suit.slice(1);k=`${$[d.number]}-of-${R}`}else k=d.name.toLowerCase().replace(/\s+/g,"-");return`/assets/tarot-cards/minor/${v}-${k}.png`}return d.arcana==="major"?`/assets/tarot-cards/major/${{0:"00-the-Fool.png",1:"01-The-Magician.png",2:"02-The-High-Priestess.png",3:"03-The-Empress.png",4:"04-The-Emperor.png",5:"05-The-Hierophant.png",6:"06-The-Lovers.png",7:"07-The-Chariot.png",8:"08-Strength.png",9:"09-The-Hermit.png",10:"10-Wheel-of-Fortune.png",11:"11-Justice.png",12:"12-The-Hanged-Man.png",13:"13-Death.png",14:"14-Temperance.png",15:"15-The-Devil.png",16:"16-The-Tower.png",17:"17-The-Star.png",18:"18-The-Moon.png",19:"19-The-Sun.png",20:"20-Judgement.png",21:"21-The-World.png"}[d.number]||"00-the-Fool.png"}`:"/assets/tarot-cards/major/00-the-Fool.png"}catch(v){return console.error("  URL  :",v),"/assets/tarot-cards/major/00-the-Fool.png"}},p=d=>{const v=d.target;v.style.display="none";const k=v.parentElement;if(k&&!k.querySelector(".fallback-emoji")){const $=document.createElement("div");$.className="fallback-emoji",$.textContent="",k.appendChild($)}};return(d,v)=>{var k,$,R,S,E,M,A,D,K,W,se;return w(),b(ye,null,[l("div",lk,[l("div",ck,[v[11]||(v[11]=l("div",{class:"cup-shape"},[l("svg",{viewBox:"0 0 200 200",preserveAspectRatio:"none"},[l("path",{d:"M50 30 Q50 10, 70 10 L130 10 Q150 10, 150 30 L140 120 Q140 140, 120 150 L80 150 Q60 140, 60 120 Z",fill:"none",stroke:"rgba(236, 72, 153, 0.3)","stroke-width":"2"}),l("path",{d:"M100 60 C100 50, 85 40, 75 50 C65 40, 50 50, 50 60 C50 80, 100 110, 100 110 C100 110, 150 80, 150 60 C150 50, 135 40, 125 50 C115 40, 100 50, 100 60 Z",fill:"rgba(236, 72, 153, 0.2)",stroke:"rgba(236, 72, 153, 0.4)","stroke-width":"1"})])],-1)),l("div",uk,[(w(),b(ye,null,Ue(15,oe=>l("div",{class:"heart",key:oe,style:Ct(u())},"",4)),64))]),l("div",dk,[(w(),b(ye,null,Ue(3,oe=>l("div",{class:"ripple",key:oe,style:Ct({animationDelay:`${oe*2}s`})},null,4)),64))])]),l("div",{class:"cards-container",ref_key:"cardsContainer",ref:c},[l("div",{class:B(["card-position position-1",{"has-card":d.cards[0],revealed:(k=d.cards[0])==null?void 0:k.revealed}]),onClick:v[0]||(v[0]=oe=>f(0))},[v[14]||(v[14]=l("div",{class:"position-label"},"1. ",-1)),l("div",hk,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[0]?(w(),b("div",fk,[d.cards[0].revealed?(w(),b("div",gk,[l("img",{src:m(d.cards[0].card),alt:d.cards[0].card.nameKr,onError:p},null,40,mk),l("div",vk,[l("h4",null,C(d.cards[0].card.nameKr),1),l("span",{class:B(["orientation",d.cards[0].orientation])},C(d.cards[0].orientation==="upright"?"":""),3)])])):(w(),b("div",pk,v[12]||(v[12]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[0]&&d.isDrawing?(w(),b("div",yk,v[13]||(v[13]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-2",{"has-card":d.cards[1],revealed:($=d.cards[1])==null?void 0:$.revealed}]),onClick:v[1]||(v[1]=oe=>f(1))},[v[17]||(v[17]=l("div",{class:"position-label"},"2. ",-1)),l("div",wk,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[1]?(w(),b("div",bk,[d.cards[1].revealed?(w(),b("div",kk,[l("img",{src:m(d.cards[1].card),alt:d.cards[1].card.nameKr,onError:p},null,40,Sk),l("div",Ck,[l("h4",null,C(d.cards[1].card.nameKr),1),l("span",{class:B(["orientation",d.cards[1].orientation])},C(d.cards[1].orientation==="upright"?"":""),3)])])):(w(),b("div",_k,v[15]||(v[15]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[1]&&d.isDrawing?(w(),b("div",$k,v[16]||(v[16]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-3",{"has-card":d.cards[2],revealed:(R=d.cards[2])==null?void 0:R.revealed}]),onClick:v[2]||(v[2]=oe=>f(2))},[v[20]||(v[20]=l("div",{class:"position-label"},"3.  ",-1)),l("div",Pk,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[2]?(w(),b("div",Tk,[d.cards[2].revealed?(w(),b("div",Ak,[l("img",{src:m(d.cards[2].card),alt:d.cards[2].card.nameKr,onError:p},null,40,Ik),l("div",Rk,[l("h4",null,C(d.cards[2].card.nameKr),1),l("span",{class:B(["orientation",d.cards[2].orientation])},C(d.cards[2].orientation==="upright"?"":""),3)])])):(w(),b("div",Ek,v[18]||(v[18]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[2]&&d.isDrawing?(w(),b("div",Mk,v[19]||(v[19]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-4",{"has-card":d.cards[3],revealed:(S=d.cards[3])==null?void 0:S.revealed}]),onClick:v[3]||(v[3]=oe=>f(3))},[v[23]||(v[23]=l("div",{class:"position-label"},"4.  ",-1)),l("div",Ok,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[3]?(w(),b("div",jk,[d.cards[3].revealed?(w(),b("div",Dk,[l("img",{src:m(d.cards[3].card),alt:d.cards[3].card.nameKr,onError:p},null,40,Uk),l("div",xk,[l("h4",null,C(d.cards[3].card.nameKr),1),l("span",{class:B(["orientation",d.cards[3].orientation])},C(d.cards[3].orientation==="upright"?"":""),3)])])):(w(),b("div",Lk,v[21]||(v[21]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[3]&&d.isDrawing?(w(),b("div",Nk,v[22]||(v[22]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-5",{"has-card":d.cards[4],revealed:(E=d.cards[4])==null?void 0:E.revealed}]),onClick:v[4]||(v[4]=oe=>f(4))},[v[26]||(v[26]=l("div",{class:"position-label"},"5.   ",-1)),l("div",Kk,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[4]?(w(),b("div",Fk,[d.cards[4].revealed?(w(),b("div",zk,[l("img",{src:m(d.cards[4].card),alt:d.cards[4].card.nameKr,onError:p},null,40,Hk),l("div",Wk,[l("h4",null,C(d.cards[4].card.nameKr),1),l("span",{class:B(["orientation",d.cards[4].orientation])},C(d.cards[4].orientation==="upright"?"":""),3)])])):(w(),b("div",Bk,v[24]||(v[24]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[4]&&d.isDrawing?(w(),b("div",qk,v[25]||(v[25]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-6",{"has-card":d.cards[5],revealed:(M=d.cards[5])==null?void 0:M.revealed}]),onClick:v[5]||(v[5]=oe=>f(5))},[v[29]||(v[29]=l("div",{class:"position-label"},"6.   ",-1)),l("div",Vk,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[5]?(w(),b("div",Gk,[d.cards[5].revealed?(w(),b("div",Qk,[l("img",{src:m(d.cards[5].card),alt:d.cards[5].card.nameKr,onError:p},null,40,Yk),l("div",Xk,[l("h4",null,C(d.cards[5].card.nameKr),1),l("span",{class:B(["orientation",d.cards[5].orientation])},C(d.cards[5].orientation==="upright"?"":""),3)])])):(w(),b("div",Jk,v[27]||(v[27]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[5]&&d.isDrawing?(w(),b("div",Zk,v[28]||(v[28]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-7",{"has-card":d.cards[6],revealed:(A=d.cards[6])==null?void 0:A.revealed}]),onClick:v[6]||(v[6]=oe=>f(6))},[v[32]||(v[32]=l("div",{class:"position-label"},"7.    ?",-1)),l("div",eS,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[6]?(w(),b("div",tS,[d.cards[6].revealed?(w(),b("div",nS,[l("img",{src:m(d.cards[6].card),alt:d.cards[6].card.nameKr,onError:p},null,40,rS),l("div",iS,[l("h4",null,C(d.cards[6].card.nameKr),1),l("span",{class:B(["orientation",d.cards[6].orientation])},C(d.cards[6].orientation==="upright"?"":""),3)])])):(w(),b("div",sS,v[30]||(v[30]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[6]&&d.isDrawing?(w(),b("div",oS,v[31]||(v[31]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-8",{"has-card":d.cards[7],revealed:(D=d.cards[7])==null?void 0:D.revealed}]),onClick:v[7]||(v[7]=oe=>f(7))},[v[35]||(v[35]=l("div",{class:"position-label"},"8.    ?",-1)),l("div",aS,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[7]?(w(),b("div",lS,[d.cards[7].revealed?(w(),b("div",uS,[l("img",{src:m(d.cards[7].card),alt:d.cards[7].card.nameKr,onError:p},null,40,dS),l("div",hS,[l("h4",null,C(d.cards[7].card.nameKr),1),l("span",{class:B(["orientation",d.cards[7].orientation])},C(d.cards[7].orientation==="upright"?"":""),3)])])):(w(),b("div",cS,v[33]||(v[33]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[7]&&d.isDrawing?(w(),b("div",fS,v[34]||(v[34]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-9",{"has-card":d.cards[8],revealed:(K=d.cards[8])==null?void 0:K.revealed}]),onClick:v[8]||(v[8]=oe=>f(8))},[v[38]||(v[38]=l("div",{class:"position-label"},"9.    ?",-1)),l("div",pS,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[8]?(w(),b("div",gS,[d.cards[8].revealed?(w(),b("div",vS,[l("img",{src:m(d.cards[8].card),alt:d.cards[8].card.nameKr,onError:p},null,40,yS),l("div",wS,[l("h4",null,C(d.cards[8].card.nameKr),1),l("span",{class:B(["orientation",d.cards[8].orientation])},C(d.cards[8].orientation==="upright"?"":""),3)])])):(w(),b("div",mS,v[36]||(v[36]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[8]&&d.isDrawing?(w(),b("div",bS,v[37]||(v[37]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-10",{"has-card":d.cards[9],revealed:(W=d.cards[9])==null?void 0:W.revealed}]),onClick:v[9]||(v[9]=oe=>f(9))},[v[41]||(v[41]=l("div",{class:"position-label"},"10.    ?",-1)),l("div",_S,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[9]?(w(),b("div",kS,[d.cards[9].revealed?(w(),b("div",CS,[l("img",{src:m(d.cards[9].card),alt:d.cards[9].card.nameKr,onError:p},null,40,$S),l("div",PS,[l("h4",null,C(d.cards[9].card.nameKr),1),l("span",{class:B(["orientation",d.cards[9].orientation])},C(d.cards[9].orientation==="upright"?"":""),3)])])):(w(),b("div",SS,v[39]||(v[39]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[9]&&d.isDrawing?(w(),b("div",TS,v[40]||(v[40]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2),l("div",{class:B(["card-position position-11",{"has-card":d.cards[10],revealed:(se=d.cards[10])==null?void 0:se.revealed}]),onClick:v[10]||(v[10]=oe=>f(10))},[v[44]||(v[44]=l("div",{class:"position-label"},"11. ",-1)),l("div",ES,[pe(je,{name:"card-flip"},{default:$e(()=>[d.cards[10]?(w(),b("div",AS,[d.cards[10].revealed?(w(),b("div",RS,[l("img",{src:m(d.cards[10].card),alt:d.cards[10].card.nameKr,onError:p},null,40,MS),l("div",OS,[l("h4",null,C(d.cards[10].card.nameKr),1),l("span",{class:B(["orientation",d.cards[10].orientation])},C(d.cards[10].orientation==="upright"?"":""),3)])])):(w(),b("div",IS,v[42]||(v[42]=[l("div",{class:"card-back-design"},"",-1),l("p",{class:"click-hint"}," ",-1)])))])):O("",!0)]),_:1}),!d.cards[10]&&d.isDrawing?(w(),b("div",jS,v[43]||(v[43]=[l("div",{class:"loading-spinner"},null,-1)]))):O("",!0)])],2)],512),d.isDrawing?O("",!0):(w(),b("div",LS,[i.value?(w(),b("button",{key:0,class:"btn-action btn-reveal-all",onClick:h},v[45]||(v[45]=[l("span",{class:"icon"},"",-1),Ae("    ",-1)]))):(w(),b("div",DS)),Eo(d.$slots,"action-button",{},void 0)])),d.isDrawing?(w(),b("div",US,[v[46]||(v[46]=l("p",null,"     ...",-1)),l("div",xS,[l("div",{class:"progress-fill",style:Ct({width:d.drawProgress+"%"})},null,4)])])):O("",!0)]),de(r).isPremium?(w(),vt(Wo,{key:0,visible:o.value,"spread-id":"cup_of_relationship",position:a.value},null,8,["visible","position"])):O("",!0)],64)}}}),KS=et(NS,[["__scopeId","data-v-1945f307"]]),FS={key:0,class:"loading-overlay"},BS={class:"loading-content"},zS={class:"loading-messages"},HS={class:"progress-container"},WS={class:"progress-bar"},qS=Ze({__name:"TarotLoadingScreen",props:{isVisible:{type:Boolean},progress:{default:0}},emits:["animation-complete"],setup(s,{emit:e}){const t=s,n=["     ","   ","    ","      ","    ","     ","       ","     "],r=G(0),i=G(null),o=Ce(()=>n[r.value]),a=()=>{i.value=window.setInterval(()=>{r.value=(r.value+1)%n.length},3e3)},c=()=>{i.value&&(clearInterval(i.value),i.value=null)},u=f=>{a()},h=f=>{c()};return Yt(()=>t.isVisible,f=>{f?a():c()}),pt(()=>{t.isVisible&&a()}),sr(()=>{c()}),(f,m)=>(w(),vt(je,{name:"fade",onEnter:u,onLeave:h},{default:$e(()=>[f.isVisible?(w(),b("div",FS,[l("div",BS,[m[2]||(m[2]=l("div",{class:"cards-animation"},[l("div",{class:"floating-card card-1"},""),l("div",{class:"floating-card card-2"},""),l("div",{class:"floating-card card-3"},""),l("div",{class:"floating-card card-4"},""),l("div",{class:"floating-card card-5"},"")],-1)),m[3]||(m[3]=l("div",{class:"loading-icon-wrapper"},[l("div",{class:"loading-icon"},[l("div",{class:"crystal-ball"},""),l("div",{class:"magic-circle"}),l("div",{class:"sparkles"},[l("span",{class:"sparkle s1"},""),l("span",{class:"sparkle s2"},""),l("span",{class:"sparkle s3"},""),l("span",{class:"sparkle s4"},"")])])],-1)),l("div",zS,[pe(je,{name:"message-fade",mode:"out-in"},{default:$e(()=>[(w(),b("p",{key:r.value,class:"loading-message"},C(o.value),1))]),_:1}),m[0]||(m[0]=l("p",{class:"sub-message"}," ...",-1))]),l("div",HS,[l("div",WS,[l("div",{class:"progress-fill",style:Ct({width:`${f.progress}%`})},null,4),m[1]||(m[1]=l("div",{class:"progress-glow"},null,-1))])])])])):O("",!0)]),_:1}))}}),Ku=et(qS,[["__scopeId","data-v-5f0811be"]]),VS={class:"page-header"},GS={class:"header-top"},JS={key:0,class:"spread-name"},QS={key:0,class:"premium-status-indicator"},YS={class:"expiry-time"},XS={class:"container"},ZS={key:0,class:"draw-method-selection"},eC={class:"method-buttons"},tC={key:1,class:"deck-container"},sC={key:2,class:"manual-selection-container"},nC={class:"instruction"},rC={key:0,class:"sub-instruction"},iC={key:1},oC={key:0,class:"selected-cards-preview"},aC=["onClick"],lC={class:"selection-number"},cC={class:"card-spread-container"},uC={class:"card-spread"},dC=["onClick"],hC=["disabled"],fC={key:3,class:"drawing-container"},pC={class:"instruction"},gC={class:"card-animation"},mC={class:"progress-bar"},vC={key:4,class:"cards-container"},yC={key:0,class:"celtic-cross-container"},wC=["disabled"],bC={key:1,class:"seven-star-container"},_C=["disabled"],kC={key:2,class:"cup-relationship-container"},SC=["disabled"],CC={key:3},$C={class:"drawn-cards"},PC=["onClick"],TC={key:0,class:"card-front"},EC={class:"card-image"},AC=["src","alt"],IC={class:"card-number"},RC={key:1,class:"card-back"},MC=["disabled"],OC=Ze({__name:"CardDrawing",setup(s){const e=Dt(),t=Je(),n=Hs(),r=G(null),i=G(!1),o=G(!1),a=G(0),c=G([]),u=G([]),h=G([]),f=G(null),m=G(!1),p=G(0),d=Ce(()=>c.value.length>0&&c.value.every(g=>g.revealed)),v=sb(),k=G(v.getStatus()),$=()=>{k.value=v.getStatus()},R=()=>{if(!k.value.temporaryPremiumExpiry)return"";const g=new Date,_=new Date(k.value.temporaryPremiumExpiry).getTime()-g.getTime();if(_<=0)return"";const P=Math.floor(_/(1e3*60*60)),U=Math.floor(_%(1e3*60*60)/(1e3*60));return P>0?`${P} ${U} `:`${U} `},S=Ce(()=>{var g;return((g=n.selectedSpread)==null?void 0:g.spreadId)==="celtic_cross"}),E=Ce(()=>{var g;return((g=n.selectedSpread)==null?void 0:g.spreadId)==="seven_star"}),M=Ce(()=>{var g;return((g=n.selectedSpread)==null?void 0:g.spreadId)==="cup_of_relationship"}),A=Ce(()=>S.value||E.value||M.value),D=()=>S.value?" ":E.value?" ":M.value?"  ":"",K=()=>" ",W=g=>pn(g),se=()=>{var g;return((g=n.selectedSpread)==null?void 0:g.cardCount)||1},oe=()=>{console.log("[CardDrawing]  "),console.log("[CardDrawing] drawMethod:",r.value),console.log("[CardDrawing] isDrawing:",i.value),console.log("[CardDrawing] isComplete:",o.value),console.log("[CardDrawing]  URL:",window.location.pathname)},V=()=>{console.log(" [resetState]   "),r.value=null,i.value=!1,o.value=!1,a.value=0,c.value=[],u.value=[],f.value=null,m.value=!1,p.value=0,j.value=!1,console.log(" [resetState]   ")};pt(async()=>{if(console.log(" [CardDrawing] onMounted "),console.log(" [CardDrawing]  :",n.selectedTopic),console.log(" [CardDrawing]  :",n.selectedSpread),console.log(" [CardDrawing]  :",n.getCustomQuestion()),console.log(" [CardDrawing]  :",n.tarotCards.length),console.log(" [CardDrawing]  URL:",window.location.pathname),console.log(" [CardDrawing]  :",e.currentRoute.value.path),console.log(" [CardDrawing]   :",{selectedTopic:JSON.stringify(n.selectedTopic),selectedSpread:JSON.stringify(n.selectedSpread),drawMethod:r.value,isDrawing:i.value,isComplete:o.value}),V(),console.log(" [CardDrawing] DOM :",{hasRootElement:document.querySelector(".card-drawing")!==null,body:document.body.innerHTML.substring(0,200)}),!n.selectedTopic||!n.selectedSpread){console.error("[CardDrawing]     "),console.log("[CardDrawing]   "),await Be({title:" ",message:"   ."}),e.push("/reading-select");return}await Fs(),console.log("[CardDrawing] nextTick  -   "),setTimeout(()=>{},1e3),z(),n.tarotCards.length===0&&(console.log("[CardDrawing]    "),await n.initialize(),console.log("[CardDrawing]    :",n.tarotCards.length))});const I=()=>{e.go(-1)},T=g=>{console.log(" [selectDrawMethod]  :",g),V(),r.value=g,g==="manual"&&(u.value=[])},z=()=>{if(n.tarotCards.length>0){const g=[...n.tarotCards];for(let y=g.length-1;y>0;y--){const _=Math.floor(Math.random()*(y+1));[g[y],g[_]]=[g[_],g[y]]}h.value=g}},ne=g=>{const F=-120+g*3.116883116883117,q=F*Math.PI/180,x=45,H=30,J=50+x*Math.sin(q),Y=75-H*Math.cos(q),me=78-Math.abs(g-39);return{position:"absolute",left:`${J}%`,top:`${Y}%`,transform:`translate(-50%, -50%) rotate(${F*.7}deg)`,transformOrigin:"center center",zIndex:me}},X=g=>u.value.some(y=>y.id===g.id),ie=async g=>{await bt.buttonTapHaptic();const y=X(g),_=se();if(y)u.value=u.value.filter(P=>P.id!==g.id);else if(u.value.length<_){const P=Math.random()>.5?"upright":"reversed";u.value.push({...g,orientation:P})}},L=async g=>{await bt.buttonTapHaptic(),u.value.splice(g,1)},Z=async()=>{var y;console.log(" [confirmManualSelection] ");const g=((y=n.selectedSpread)==null?void 0:y.spreadId)||"one_card";console.log(" [confirmManualSelection] spreadId:",g);try{const _=await v.startReading(g);if(console.log(" [confirmManualSelection] canStart:",_),!_){console.log(" [confirmManualSelection]     -   "),await Re();return}await ae()}catch(_){console.error(" [confirmManualSelection] :",_),await Be({title:"",message:"    .  ."})}},ae=async()=>{n.setTempDrawnCards(u.value),c.value=u.value.map(g=>({card:g,orientation:g.orientation,revealed:!1})),o.value=!0},fe=async()=>{var y,_;console.log(" [startDrawing] "),console.log(" [startDrawing]  :",new Date().toISOString()),console.log(" [startDrawing]  user:",t.user),console.log(" [startDrawing] isProcessingResult:",j.value),await bt.buttonTapHaptic();const g=((y=n.selectedSpread)==null?void 0:y.spreadId)||"one_card";console.log(" [startDrawing] spreadId:",g),console.log(" [startDrawing] isPremium:",t.isPremium),console.log(" [startDrawing] userEmail:",(_=t.user)==null?void 0:_.email);try{const P=await v.startReading(g);if(console.log(" [startDrawing] canStart:",P),!P){console.log(" [startDrawing]     -   "),await Re();return}$(),console.log(" [startDrawing]   "),await Le()}catch(P){console.error(" [startDrawing] :",P),await Be({title:"",message:"    .  ."})}},Le=async()=>{var P,U;console.log(" [drawCards]   "),i.value=!0,a.value=0,await bt.cardDrawHaptic();const g=setInterval(()=>{a.value+=10,a.value>=100&&clearInterval(g)},200);await new Promise(N=>setTimeout(N,2500));const y=((P=n.selectedSpread)==null?void 0:P.cardCount)||1;console.log(" [drawCards]  :",y);const _=n.drawCards(y);console.log(" [drawCards]  :",_),n.setTempDrawnCards(_),c.value=_.map(N=>({card:N,orientation:N.orientation,revealed:!1})),console.log(" [drawCards] drawnCards  :",c.value),i.value=!1,o.value=!0,console.log(" [drawCards]   , isComplete:",o.value),((U=t.user)==null?void 0:U.email)==="test@example.com"&&(console.log(" [] 2     "),setTimeout(async()=>{console.log(" []    "),await De(),console.log(" []    ")},2e3))},_e=async g=>{console.log(" [revealCard]  :",g),await bt.buttonTapHaptic(),c.value[g].revealed=!0,console.log(" [revealCard]    :",c.value[g]),console.log(" [revealCard]    :",c.value.map(y=>y.revealed)),console.log(" [revealCard] allCardsRevealed:",d.value),S.value&&d.value&&!f.value&&ve()},De=async()=>{console.log(" [revealAllCards]    "),await bt.buttonTapHaptic();for(let g=0;g<c.value.length;g++)c.value[g].revealed=!0,console.log(` [revealAllCards]  ${g} `),await new Promise(y=>setTimeout(y,100));console.log(" [revealAllCards]    "),console.log(" [revealAllCards] allCardsRevealed:",d.value),S.value&&!f.value&&ve()},ve=async()=>{if(!(!S.value||c.value.length!==10))try{const g=new rb,y=c.value.map((P,U)=>({position:U,card:P.card,orientation:P.orientation,positionName:g.getPositionName(U)})),_=await g.generateInterpretation(y);f.value=_,n.setImprovedInterpretation(_)}catch(g){console.error("    :",g)}},j=G(!1),re=async()=>{var g;console.log(" [handleInterpretationClick]   !"),console.log(" [handleInterpretationClick]  :",new Date().toISOString()),console.log(" [handleInterpretationClick]  allCardsRevealed:",d.value),console.log(" [handleInterpretationClick]  drawnCards:",c.value),console.log(" [handleInterpretationClick] userStore.user:",t.user),console.log(" [handleInterpretationClick] userStore.isPremium:",t.isPremium),console.log(" [handleInterpretationClick]   :",((g=t.user)==null?void 0:g.email)==="test@example.com"),await bt.buttonTapHaptic();try{console.log(" [handleInterpretationClick] goToResult  "),await ee(),console.log(" [handleInterpretationClick] goToResult  ")}catch(y){console.error(" [handleInterpretationClick] goToResult :",y)}},ee=async()=>{var F,q,x,H,J,Y,me,he,Me,Te,ze;if(console.log(" [goToResult]  !"),console.log(" [goToResult] isProcessingResult:",j.value),console.log(" [goToResult] allCardsRevealed:",d.value),console.log(" [goToResult] drawnCards:",c.value),console.log(" [goToResult]  :",new Date().toISOString()),console.log(" [goToResult] spreadId:",(F=n.selectedSpread)==null?void 0:F.spreadId),console.log(" [goToResult]  :",(q=t.user)==null?void 0:q.email),j.value){console.log(" [goToResult]    -   ");return}if(!d.value){console.log(" [goToResult]    "),await Be({title:"  ",message:"   !"});return}j.value=!0;const g=((x=n.selectedSpread)==null?void 0:x.spreadId)||"one_card",y=g==="one_card"||g==="three_card_timeline",_=((H=t.user)==null?void 0:H.email)==="test@example.com",P=k.value.isTemporaryPremium;if(console.log(" [goToResult]   :",{isPremium:t.isPremium,isSimpleSpread:y,hasTempPremium:P,isTestAccount:_,spreadId:g}),!t.isPremium&&!y&&!P){console.log(" [goToResult]   -  "),console.log(" [goToResult] spreadId:",g),console.log(" [goToResult] isTestAccount:",_),console.log(" [goToResult] hasTempPremium:",P);try{const te=await js({title:" ",message:`    .
?`});if(console.log(" [goToResult] confirm :",te),!te){console.log(" [goToResult]  "),j.value=!1;return}}catch(te){console.error(" [goToResult] confirm :",te)}try{console.log(" [goToResult]   ..."),console.log(" [goToResult]  :",new Date().toISOString()),await new Promise(ce=>setTimeout(ce,100));const te=await zo();if(console.log(" [goToResult]   :",te),console.log(" [goToResult]    :",new Date().toISOString()),!te){console.log(" [goToResult]   "),await Be({title:" ",message:"  .  ."}),j.value=!1;return}$()}catch(te){console.error(" [goToResult]   :",te),console.error(" [goToResult]  :",{message:te.message,stack:te.stack,name:te.name}),await Be({title:"",message:"    .   ."})}}else y?console.log(" [goToResult] 1/3  -   "):(t.isPremium||P)&&console.log(" [goToResult] /   -   ");["celtic_cross","seven_star","cup_of_relationship"].includes(g)&&!t.isPremium&&!k.value.isTemporaryPremium&&!_&&(console.log(" [goToResult]     :",g),await v.recordPremiumSpreadUsage(g)),m.value=!0,p.value=0;const Q=setInterval(()=>{p.value<90&&(p.value+=Math.random()*15)},500);try{S.value&&f.value&&n.setImprovedInterpretation(f.value);const te=await n.createReading(((J=n.selectedSpread)==null?void 0:J.spreadId)||"one_card",((Y=n.selectedTopic)==null?void 0:Y.id)||"general",void 0,n.getTempDrawnCards()||void 0),ce=n.getCustomQuestion();if((t.isPremium||_)&&ce&&te)try{p.value=30;const we={readingId:te.id,cards:te.cards.map((Ie,ke)=>{var Fe,Ge;return{id:Ie.id,name:Ie.name||Ie.nameEn||"",nameKr:Ie.nameKr||Ie.name_kr||Ie.name||"",arcana:Ie.arcana||"unknown",suit:Ie.suit||null,number:Ie.number||null,orientation:Ie.orientation||"upright",position:{name:((Fe=Ie.position)==null?void 0:Fe.name)||` ${ke+1}`,description:((Ge=Ie.position)==null?void 0:Ge.description)||""},meanings:Ie.meanings||{}}}),spreadId:((me=n.selectedSpread)==null?void 0:me.spreadId)||"three_cards",topic:((he=n.selectedTopic)==null?void 0:he.id)||"general",customQuestion:ce,userId:(Me=t.user)==null?void 0:Me.id},xe=await Nu.generateInterpretation(we);p.value=70,xe.success&&xe.interpretation&&(te.aiInterpretation=xe.interpretation,te.aiInterpretationId=xe.interpretationId||null,xe.probabilityAnalysis&&(te.probabilityAnalysis=xe.probabilityAnalysis)),n.updateReading(te)}catch{}else if((t.isPremium||_)&&S.value&&te&&!ce)try{p.value=30;const we=new Ho(t.isPremium||_),xe=te.cards.map((ke,Fe)=>{var Ge;return{id:ke.id,name:ke.name||ke.nameEn||"",name_kr:ke.nameKr||ke.name_kr||ke.name||"",nameKr:ke.nameKr||ke.name_kr||ke.name||"",arcana:ke.arcana||"unknown",suit:ke.suit||null,number:ke.number||null,orientation:ke.orientation||"upright",position:{position:Fe+1,name:((Ge=ke.position)==null?void 0:Ge.name)||["","","",""," ","","",""," "," "][Fe]||` ${Fe+1}`}}});console.log(" [goToResult] AI   - topic:",(Te=n.selectedTopic)==null?void 0:Te.id);const Ie=await we.generateInterpretation(xe,((ze=n.selectedTopic)==null?void 0:ze.id)||"general","celtic_cross");p.value=70,Ie&&Ie.text&&(te.aiInterpretation=Ie.text,te.aiInterpretationId=Ie.interpretationId||null),n.updateReading(te)}catch{}console.log("   :",te.id),clearInterval(Q),p.value=100,await new Promise(we=>setTimeout(we,500)),m.value=!1,console.log(" [goToResult]    :",`/reading-result?readingId=${te.id}`),e.push(`/reading-result?readingId=${te.id}`),console.log(" [goToResult] router.push  ")}catch(te){clearInterval(Q),m.value=!1,p.value=0,await Be({title:"  ",message:`  : ${te.message||"   "}`})}finally{j.value=!1}},le=g=>{if(!g||!g.target){console.warn("    ");return}const y=g.target;if(!y){console.warn("  ");return}console.warn("  :",y.src);const _=y.parentElement;if(_)try{if(y.style.display="none",!_.querySelector(".fallback-emoji")){const P=document.createElement("div");P.className="fallback-emoji",P.textContent="",P.style.fontSize="48px",P.style.textAlign="center",P.style.display="flex",P.style.alignItems="center",P.style.justifyContent="center",P.style.width="100%",P.style.height="100%",P.style.position="absolute",P.style.top="0",P.style.left="0",P.style.zIndex="10",P.style.background="rgba(75, 85, 99, 0.9)",P.style.borderRadius="6px",_.appendChild(P)}}catch(P){console.error("    :",P)}else console.warn("   ")},Re=async()=>{var q,x;console.log(" [showPremiumSpreadLimit] ");const g={celtic_cross:" ",seven_star:" ",cup_of_relationship:"  "},y=((q=n.selectedSpread)==null?void 0:q.spreadId)||"",_=g[y]||" ";console.log(" [showPremiumSpreadLimit] spreadId:",y),console.log(" [showPremiumSpreadLimit] spreadName:",_);const P=((x=t.user)==null?void 0:x.email)==="test@example.com";if(console.log(" [showPremiumSpreadLimit] isTestAccount:",P),P){console.log(" [showPremiumSpreadLimit]   -     "),await Le();return}const U=new Date,N=new Date;N.setDate(N.getDate()+1),N.setHours(0,0,0,0);const Q=Math.floor((N.getTime()-U.getTime())/(1e3*60*60)),F=Math.floor((N.getTime()-U.getTime())%(1e3*60*60)/(1e3*60));await Be({title:"   ",message:`${_}       .

   : ${Q} ${F} 

  (1, 3)     !`}),e.push("/spread-selection")};return(g,y)=>(w(),b("div",{class:B(["card-drawing",{"celtic-cross-mode":S.value,"seven-star-mode":E.value,"cup-relationship-mode":M.value,"special-layout-mode":A.value}]),onClick:oe},[l("header",VS,[l("div",GS,[l("button",{class:"back-button",onClick:I}," "),l("h1",null,[y[2]||(y[2]=Ae("   ",-1)),A.value?(w(),b("span",JS," - "+C(D()),1)):O("",!0)])]),k.value.isTemporaryPremium?(w(),b("div",QS,[y[3]||(y[3]=Ae("      ",-1)),l("span",YS,C(R()),1)])):O("",!0)]),l("div",XS,[!r.value&&!i.value&&!o.value?(w(),b("div",ZS,[y[6]||(y[6]=l("p",{class:"instruction"},"  ?",-1)),l("div",eC,[l("button",{class:"method-button",onClick:y[0]||(y[0]=_=>T("random"))},y[4]||(y[4]=[l("div",{class:"method-icon"},"",-1),l("h3",null," ",-1),l("p",null,"   ",-1)])),l("button",{class:"method-button",onClick:y[1]||(y[1]=_=>T("manual"))},y[5]||(y[5]=[l("div",{class:"method-icon"},"",-1),l("h3",null," ",-1),l("p",null,"   ",-1)]))])])):O("",!0),r.value==="random"&&!i.value&&!o.value?(w(),b("div",tC,[y[7]||(y[7]=l("p",{class:"instruction"},"  ...",-1)),y[8]||(y[8]=l("div",{class:"card-back shuffling"},"  ",-1)),l("button",{class:"btn btn-primary draw-button",onClick:fe},C(K()),1)])):O("",!0),r.value==="manual"&&!o.value?(w(),b("div",sC,[l("p",nC,[Ae(C(u.value.length)+"/"+C(se())+" . ",1),u.value.length>0?(w(),b("span",rC," (     ) ")):(w(),b("span",iC,"   . "))]),u.value.length>0?(w(),b("div",oC,[(w(!0),b(ye,null,Ue(u.value,(_,P)=>(w(),b("div",{key:P,class:"selected-card-mini",onClick:U=>L(P),title:"  "},[l("span",lC,C(P+1),1)],8,aC))),128))])):O("",!0),l("div",cC,[y[10]||(y[10]=l("div",{class:"spread-background"},null,-1)),l("div",uC,[(w(!0),b(ye,null,Ue(h.value,(_,P)=>(w(),b("div",{key:P,class:B(["spread-card",{selected:X(_),disabled:u.value.length>=se()&&!X(_)}]),style:Ct(ne(P)),onClick:U=>ie(_)},y[9]||(y[9]=[l("div",{class:"card-back-small"},"",-1)]),14,dC))),128))])]),l("button",{class:"btn btn-primary confirm-button",disabled:u.value.length!==se(),onClick:Z},"    ",8,hC)])):O("",!0),i.value?(w(),b("div",fC,[l("p",pC,C(se())+"   ...",1),l("div",gC,[(w(!0),b(ye,null,Ue(se(),_=>(w(),b("div",{class:B(["card-back",`card-${_}`]),key:_},"  ",2))),128))]),l("div",mC,[l("div",{class:"progress",style:Ct({width:a.value+"%"})},null,4)])])):O("",!0),o.value&&c.value.length>0?(w(),b("div",vC,[S.value?(w(),b("div",yC,[pe(s_,{cards:c.value,isDrawing:!1,drawProgress:100,showInterpretation:d.value,onCardClick:_e,onRevealAll:De},{"action-button":$e(()=>[l("button",{class:"btn-action btn-result",onClick:re,disabled:!d.value},"   ",8,wC)]),_:1},8,["cards","showInterpretation"])])):E.value?(w(),b("div",bC,[pe(ak,{cards:c.value,isDrawing:!1,drawProgress:100,onCardClick:_e,onRevealAll:De},{"action-button":$e(()=>[l("button",{class:"btn-action btn-result",onClick:re,disabled:!d.value},"   ",8,_C)]),_:1},8,["cards"])])):M.value?(w(),b("div",kC,[pe(KS,{cards:c.value,isDrawing:!1,drawProgress:100,onCardClick:_e,onRevealAll:De},{"action-button":$e(()=>[l("button",{class:"btn-action btn-result",onClick:re,disabled:!d.value},"   ",8,SC)]),_:1},8,["cards"])])):(w(),b("div",CC,[y[12]||(y[12]=l("p",{class:"instruction"}," ",-1)),l("div",$C,[(w(!0),b(ye,null,Ue(c.value,(_,P)=>(w(),b("div",{key:P,class:B(["drawn-card",{revealed:_.revealed}]),onClick:U=>_e(P)},[_.revealed?(w(),b("div",TC,[l("div",EC,[l("img",{src:W(_.card),alt:_.card.nameKr,onError:le},null,40,AC)]),l("h3",null,C(_.card.nameKr),1),l("p",IC,C(_.card.name),1),l("div",{class:B(["card-orientation",_.orientation])},C(_.orientation==="upright"?"":""),3)])):(w(),b("div",RC,y[11]||(y[11]=[Ae("  ",-1),l("p",null," ",-1)])))],10,PC))),128))])])),A.value?O("",!0):(w(),b("button",{key:4,class:"btn btn-primary result-button",onClick:ee,disabled:!d.value},"   ",8,MC))])):O("",!0),pe(Ku,{isVisible:m.value,progress:p.value},null,8,["isVisible","progress"])])],2))}}),jC=et(OC,[["__scopeId","data-v-8425a398"]]),LC=["","","",""," ","","",""," "," "],Oi=async s=>{const{reading:e,customQuestion:t,isPremium:n,getPositionName:r,userId:i}=s,o=new Ho(n);if(t){const a={readingId:e.id,cards:e.cards.map((c,u)=>{var h,f;return{id:c.id,name:c.name||c.nameEn||"",nameKr:c.nameKr||c.name_kr||c.name||"",arcana:c.arcana||"unknown",suit:c.suit||null,number:c.number||null,orientation:c.orientation||"upright",position:{name:((h=c.position)==null?void 0:h.name)||r(e.spreadId,u),description:((f=c.position)==null?void 0:f.description)||""},meanings:c.meanings||{}}}),spreadId:e.spreadId,topic:e.topic,customQuestion:t,userId:i};return await Nu.generateInterpretation(a)}else{const a=e.cards.map((u,h)=>{var m;const f=e.spreadId==="celtic_cross"?((m=u.position)==null?void 0:m.name)||LC[h]||` ${h+1}`:r(e.spreadId,h);return{id:u.id,name:u.name||u.nameEn||"",name_kr:u.nameKr||u.name_kr||u.name||"",nameKr:u.nameKr||u.name_kr||u.name||"",arcana:u.arcana||"unknown",suit:u.suit||null,number:u.number||null,orientation:u.orientation||"upright",position:{position:h+1,name:f}}}),c=await o.generateInterpretation(a,e.topic||"general",e.spreadId);return{success:c&&c.text,interpretation:c==null?void 0:c.text,interpretationId:c==null?void 0:c.interpretationId}}};class DC{constructor(){this.initialized=!1,this.isTestMode=!0,this.adIds={android:{interstitial:"ca-app-pub-3940256099942544/1033173712",rewarded:"ca-app-pub-3940256099942544/5224354917",banner:"ca-app-pub-3940256099942544/6300978111"},ios:{interstitial:"ca-app-pub-3940256099942544/4411468910",rewarded:"ca-app-pub-3940256099942544/1712485313",banner:"ca-app-pub-3940256099942544/2934735716"}},this.isLoading=G(!1),this.isAdReady=G(!1)}getPlatform(){return typeof window.Capacitor<"u"?window.Capacitor.getPlatform():"web"}async initialize(){var e;if(!this.initialized)try{if(this.getPlatform()==="web"){console.log("   ."),this.initialized=!0;return}typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)&&(await window.Capacitor.Plugins.AdMob.initialize({requestTrackingAuthorization:!0,testingDevices:this.isTestMode?["YOUR_TEST_DEVICE_ID","2077ef9a63d2b398840261c8221a0c9b"]:[],initializeForTesting:this.isTestMode}),console.log(" AdMob  :",this.isTestMode),this.initialized=!0,console.log("AdMob  "),this.setupEventListeners())}catch(t){console.error("AdMob  :",t),this.initialized=!0}}setupEventListeners(){var e;try{if(typeof window.Capacitor>"u"||!((e=window.Capacitor.Plugins)!=null&&e.AdMob))return;const t=window.Capacitor.Plugins.AdMob;t.addListener("onAdLoaded",n=>{console.log("   "),this.isAdReady.value=!0,this.isLoading.value=!1}),t.addListener("onAdFailedToLoad",n=>{console.error("   :",n),this.isAdReady.value=!1,this.isLoading.value=!1}),t.addListener("onAdOpened",()=>{console.log("  ")}),t.addListener("onAdClosed",()=>{console.log("  "),this.isAdReady.value=!1,this.isLoading.value=!1})}catch(t){console.error("   :",t)}}async loadInterstitialAd(){var e,t;if(this.initialized||await this.initialize(),this.isLoading.value)return console.log("    ..."),!1;this.isAdReady.value=!1;try{const n=this.getPlatform();if(n==="web")return console.log("   "),!0;if(typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)){const r=window.Capacitor.Plugins.AdMob;this.isLoading.value=!0;const i={adId:n==="ios"?this.adIds.ios.interstitial:this.adIds.android.interstitial,isTesting:this.isTestMode};console.log("   :",i);const o=new Promise(u=>{setTimeout(()=>{console.warn("   "),this.isLoading.value=!1,u(!1)},1e4)}),a=r.prepareInterstitial(i).then(()=>(console.log("   "),this.isAdReady.value=!0,this.isLoading.value=!1,!0)),c=await Promise.race([a,o]);return c||(this.isAdReady.value=!1,console.warn("      ")),c}return!1}catch(n){return console.error("   :",n.message||n),this.isLoading.value=!1,(t=n.message)!=null&&t.includes("Network error")&&console.warn("   "),!1}}async showInterstitialAd(){var e;try{if(this.getPlatform()==="web"){console.log(" :   (5)");const n=document.createElement("div");return n.style.cssText=`
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.9);
          z-index: 9999;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: white;
          font-size: 24px;
        `,n.innerHTML=`
          <div style="text-align: center;">
            <h2 style="margin-bottom: 20px;"> </h2>
            <p>    </p>
            <p style="font-size: 18px; margin-top: 20px;">5   ...</p>
            <div style="margin-top: 20px; font-size: 48px;"></div>
          </div>
        `,document.body.appendChild(n),await new Promise(r=>setTimeout(r,5e3)),document.body.removeChild(n),!0}if(typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)){const n=window.Capacitor.Plugins.AdMob;if(this.isAdReady.value=!1,console.log("   ..."),!await this.loadInterstitialAd())return console.warn("    -   "),!0;try{return await n.showInterstitial(),this.isAdReady.value=!1,!0}catch(i){return console.warn("   :",i),this.isAdReady.value=!1,!0}}return console.log("AdMob      "),!0}catch(t){return console.error("   :",t),this.isAdReady.value=!1,!0}}async showRewardedAd(){var e;try{const t=this.getPlatform();if(t==="web")return console.log(" :   "),!0;if(typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)){const n=window.Capacitor.Plugins.AdMob,r={adId:t==="ios"?this.adIds.ios.rewarded:this.adIds.android.rewarded,isTesting:this.isTestMode};await n.prepareRewardVideoAd(r);const i=await n.showRewardVideoAd();if(i&&i.type&&i.amount>0)return console.log(` : ${i.type} x ${i.amount}`),!0}return!0}catch(t){return console.error("  :",t),!0}}async showBannerAd(e="bottom"){var t;try{const n=this.getPlatform();if(n==="web"){console.log(" :   ");return}if(typeof window.Capacitor<"u"&&((t=window.Capacitor.Plugins)!=null&&t.AdMob)){const r=window.Capacitor.Plugins.AdMob,i={adId:n==="ios"?this.adIds.ios.banner:this.adIds.android.banner,isTesting:this.isTestMode,position:e==="top"?"TOP_CENTER":"BOTTOM_CENTER",margin:0};await r.showBanner(i),console.log("  ")}}catch(n){console.error("   :",n)}}async hideBannerAd(){var e;try{typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)&&(await window.Capacitor.Plugins.AdMob.hideBanner(),console.log("  "))}catch(t){console.error("   :",t)}}async removeBannerAd(){var e;try{typeof window.Capacitor<"u"&&((e=window.Capacitor.Plugins)!=null&&e.AdMob)&&(await window.Capacitor.Plugins.AdMob.removeBanner(),console.log("  "))}catch(t){console.error("   :",t)}}setProductionMode(e,t){this.isTestMode=!1,this.adIds.android.interstitial=e,this.adIds.ios.interstitial=t}}const Es=new DC,UC=()=>{const s=Je(),e=Ce(()=>s.isPremium),t=Ce(()=>!s.isPremium),n=Ce(()=>s.isPremium);return{isSubscribed:e,showAds:t,canAccessPremiumFeatures:n}},xC={class:"reading-result"},NC={key:0,class:"container"},KC={key:0,class:"custom-question-section"},FC={class:"custom-question-content"},BC={class:"cards-layout-section"},zC={key:0,class:"celtic-cross-layout"},HC={class:"cards-container"},WC={class:"card-position position-1"},qC=["src","alt"],VC={class:"card-position position-2"},GC=["src","alt"],JC={class:"card-position position-3"},QC=["src","alt"],YC={class:"card-position position-4"},XC=["src","alt"],ZC={class:"card-position position-5"},e$=["src","alt"],t$={class:"card-position position-6"},s$=["src","alt"],n$={class:"card-position position-7"},r$=["src","alt"],i$={class:"card-position position-8"},o$=["src","alt"],a$={class:"card-position position-9"},l$=["src","alt"],c$={class:"card-position position-10"},u$=["src","alt"],d$={key:1,class:"cards-grid"},h$={class:"card-image"},f$=["src","alt"],p$={class:"card-name"},g$={key:1,class:"basic-interpretation-section"},m$={class:"basic-interpretation-content"},v$={key:0,class:"card-interpretations"},y$={class:"position-name"},w$={class:"interpretation-text"},b$={key:0},_$={key:1},k$={key:1,class:"ai-interpretation-cta"},S$={key:2,class:"ai-interpretation-loading"},C$={key:3,class:"ai-interpretation-result"},$$={class:"ai-content"},P$={key:2,class:"ai-interpretation-section"},T$={key:0,class:"ai-loading-content"},E$={key:1,class:"ai-interpretation-content"},A$={key:2,class:"rating-section"},I$={class:"star-rating"},R$=["onClick","onMouseenter"],M$={class:"rating-hint"},O$={key:3,class:"rating-submitted"},j$={key:1,class:"container"},L$=Ze({__name:"ReadingResult",setup(s){const e=Dt(),t=Ru(),n=Hs(),r=Je(),{isSubscribed:i}=UC(),o=Ce(()=>t.query.readingId||t.params.readingId),a=Ce(()=>o.value?n.getReadingById(o.value)||n.getCurrentReading():null),c=Ce(()=>n.getCustomQuestion()),u=G(0),h=G(0),f=G(0),m=G(!1),p=G(0),d=I=>pn(I),v=I=>Ls(I),k=()=>{e.go(-1)},$=()=>{e.push("/app")},R=()=>{e.push("/reading-select")},S=(I,T)=>{var ne;return((ne={three_card_timeline:["","",""],celtic_cross:[" "," ","",""," ","","  ","  "," "," "]}[I])==null?void 0:ne[T])||` ${T+1}`},E=async I=>{try{const T="http://localhost:8082",z={spread_type:I.spreadId,cards:I.cards.map(L=>({cardNumber:L.cardNumber||L.number||L.id||0,nameKr:L.nameKr||L.name_kr||"",name:L.name||"",orientation:L.orientation||"upright",position:L.position})),custom_question:I.customQuestion||null,basic_interpretation:I.overallMessage||null,ai_interpretation:I.aiInterpretation||null,shared_by:I.userId||null};console.log("Creating share link with data:",z);const{data:ne,error:X}=await ue.from("shared_readings").insert(z).select("id").single();if(X)throw console.error("Error creating share:",X),X;const ie=`${T}/share/${ne.id}`;return console.log("Share URL created:",ie),ie}catch(T){throw console.error("   :",T),T}},M=(I,T)=>{let z=`    

`;return I.customQuestion&&(z+=` : ${I.customQuestion}

`),z+=` : ${{one_card:" ",three_card_timeline:"  (3)",celtic_cross:"  (10)"}[I.spreadId]||I.spreadId}

`,z+=`  :
`,I.cards.forEach((X,ie)=>{var ae;const L=((ae=X.position)==null?void 0:ae.name)||S(I.spreadId,ie),Z=X.orientation==="reversed"?"()":"";z+=`${ie+1}. ${L}: ${X.nameKr||X.name}${Z}
`}),z+=`
   
${T}

`,z+="   -    ",z},A=async()=>{var I;try{if(!a.value){await Be({title:"",message:"   ."});return}const T={...a.value,userId:((I=r.user)==null?void 0:I.id)||null,customQuestion:c.value||null},z=await E(T),ne=M(T,z),{shareWithNative:X,initializeShare:ie}=await Pe(async()=>{const{shareWithNative:Z,initializeShare:ae}=await import("./shareUtils-DTGu5JEF.js");return{shareWithNative:Z,initializeShare:ae}},[],import.meta.url);await ie(),await X("  ",ne,z)||await Be({title:"  ",message:"  .    ."})}catch(T){console.error(" :",T),await Be({title:" ",message:"   .    ."})}},D=async I=>{var T;if(!(!((T=a.value)!=null&&T.aiInterpretationId)||f.value>0)){h.value=I,f.value=I;try{const{AIInterpretationService:z}=await Pe(async()=>{const{AIInterpretationService:X}=await Promise.resolve().then(()=>ob);return{AIInterpretationService:X}},void 0,import.meta.url);await new z(i.value).submitRating(a.value.aiInterpretationId,I)}catch(z){console.error("  :",z)}}},K=()=>{const I=u.value||h.value;return I===0?" ":I===1?"   ":I===2?"   ":I===3?"":I===4?" ":I===5?"  !":""},W=(I,T)=>I.meanings&&I.meanings[T]?I.meanings[T][I.orientation]:I.meanings&&I.meanings.general?I.meanings.general[I.orientation]:`${I.nameKr||I.name}  ${I.orientation==="upright"?"":""} .`,se=async()=>{var T;if(!a.value||a.value.aiInterpretation)return;m.value=!0,p.value=0;const I=setInterval(()=>{p.value<90&&(p.value+=Math.random()*15)},500);try{const z=await Oi({reading:a.value,customQuestion:n.getCustomQuestion(),isPremium:!0,getPositionName:S,userId:(T=r.user)==null?void 0:T.id});if(clearInterval(I),p.value=100,z.success&&z.interpretation)a.value.aiInterpretation=z.interpretation,a.value.aiInterpretationId=z.interpretationId||null,n.updateReading(a.value);else throw new Error("AI   ")}catch(z){clearInterval(I),console.error("AI   :",z),await js({title:"",message:"AI     .  .",confirmText:"",showCancel:!1})}finally{await new Promise(z=>setTimeout(z,300)),m.value=!1,p.value=0}},oe=async()=>{var X,ie;console.log(" [showAIInterpretationWithAd]  "),console.log("  :",new Date().toISOString()),console.log(" reading.value:",a.value),console.log(" readingId.value:",o.value),console.log(" reading.aiInterpretation ?:",!!((X=a.value)!=null&&X.aiInterpretation)),console.log(" adService.isAdReady:",Es.isAdReady.value),console.log(" adService.isLoading:",Es.isLoading.value);const I=a.value,T=o.value,z=n.getCustomQuestion();if(!I){console.log(" [showAIInterpretationWithAd] currentReading  ");return}if(!await js({title:"  ",message:`        .
?`,confirmText:"   ",cancelText:""})){console.log(" [showAIInterpretationWithAd]  ");return}try{console.log(" [showAIInterpretationWithAd]   ..."),console.log("   - isAdReady:",Es.isAdReady.value,"isLoading:",Es.isLoading.value);const L=await Es.showInterstitialAd();if(console.log(" [showAIInterpretationWithAd]   :",L),console.log("     - isAdReady:",Es.isAdReady.value,"isLoading:",Es.isLoading.value),!L){console.log(" [showAIInterpretationWithAd]    ");return}m.value=!0,p.value=0;const Z=setInterval(()=>{p.value<90&&(p.value+=Math.random()*15)},500),ae=await Oi({reading:I,customQuestion:z,isPremium:!1,getPositionName:S,userId:(ie=r.user)==null?void 0:ie.id});if(clearInterval(Z),p.value=100,o.value!==T){console.warn(" . AI  .");return}if(ae.success&&ae.interpretation){const fe=n.getReadingById(T)||n.getCurrentReading();fe&&fe.id===I.id&&(fe.aiInterpretation=ae.interpretation,fe.aiInterpretationId=ae.interpretationId||null,n.updateReading(fe))}else throw new Error("AI   ")}catch(L){console.error("AI   :",L),await js({title:"",message:"AI     .  .",confirmText:"",showCancel:!1})}finally{await new Promise(L=>setTimeout(L,300)),m.value=!1,p.value=0}},V=async()=>{var z;if(!a.value)return;const I=a.value.spreadId==="celtic_cross",T=!!c.value;if(!(!I&&(!T||!r.isPremium))){m.value=!0;try{const ne=await Oi({reading:a.value,customQuestion:n.getCustomQuestion(),isPremium:!0,getPositionName:S,userId:(z=r.user)==null?void 0:z.id});if(ne.success&&ne.interpretation)a.value.aiInterpretation=ne.interpretation,a.value.aiInterpretationId=ne.interpretationId||null,ne.probabilityAnalysis&&(a.value.probabilityAnalysis=ne.probabilityAnalysis),n.updateReading(a.value);else throw new Error("AI   ")}catch(ne){console.error("AI   :",ne),await js({title:"",message:"AI     .  .",confirmText:"",showCancel:!1})}finally{m.value=!1}}};return pt(async()=>{var I;if(console.log(" [ReadingResult] onMounted "),console.log(" readingId:",o.value),console.log(" reading:",a.value),console.log(" aiInterpretation ?:",!!((I=a.value)!=null&&I.aiInterpretation)),!a.value&&!o.value){e.push("/app");return}a.value&&!a.value.aiInterpretation?a.value.spreadId==="celtic_cross"?(console.log(" [ReadingResult]   - AI  "),await V()):c.value&&r.isPremium?(console.log(" [ReadingResult]   - AI  "),await V()):console.log(" [ReadingResult] AI   ",{spreadId:a.value.spreadId,hasCustomQuestion:!!c.value,isPremium:r.isPremium}):console.log(" [ReadingResult]  AI  ")}),(I,T)=>(w(),b("div",xC,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:k}," "),T[2]||(T[2]=l("h1",null," ",-1))]),a.value?(w(),b("div",NC,[c.value?(w(),b("section",KC,[T[3]||(T[3]=l("h2",null,"  ",-1)),l("div",FC,[l("p",null,C(c.value),1)])])):O("",!0),l("section",BC,[T[14]||(T[14]=l("h2",null," ",-1)),a.value.spreadId==="celtic_cross"?(w(),b("div",zC,[l("div",HC,[l("div",WC,[l("div",{class:B(["card-mini",a.value.cards[0].orientation])},[l("img",{src:d(a.value.cards[0]),alt:a.value.cards[0].nameKr,onError:v,class:B({reversed:a.value.cards[0].orientation==="reversed"})},null,42,qC),T[4]||(T[4]=l("span",{class:"position-label"},"1",-1))],2)]),l("div",VC,[l("div",{class:B(["card-mini",a.value.cards[1].orientation])},[l("img",{src:d(a.value.cards[1]),alt:a.value.cards[1].nameKr,onError:v,class:B({reversed:a.value.cards[1].orientation==="reversed"})},null,42,GC),T[5]||(T[5]=l("span",{class:"position-label"},"2",-1))],2)]),l("div",JC,[l("div",{class:B(["card-mini",a.value.cards[2].orientation])},[l("img",{src:d(a.value.cards[2]),alt:a.value.cards[2].nameKr,onError:v,class:B({reversed:a.value.cards[2].orientation==="reversed"})},null,42,QC),T[6]||(T[6]=l("span",{class:"position-label"},"3",-1))],2)]),l("div",YC,[l("div",{class:B(["card-mini",a.value.cards[3].orientation])},[l("img",{src:d(a.value.cards[3]),alt:a.value.cards[3].nameKr,onError:v,class:B({reversed:a.value.cards[3].orientation==="reversed"})},null,42,XC),T[7]||(T[7]=l("span",{class:"position-label"},"4",-1))],2)]),l("div",ZC,[l("div",{class:B(["card-mini",a.value.cards[4].orientation])},[l("img",{src:d(a.value.cards[4]),alt:a.value.cards[4].nameKr,onError:v,class:B({reversed:a.value.cards[4].orientation==="reversed"})},null,42,e$),T[8]||(T[8]=l("span",{class:"position-label"},"5",-1))],2)]),l("div",t$,[l("div",{class:B(["card-mini",a.value.cards[5].orientation])},[l("img",{src:d(a.value.cards[5]),alt:a.value.cards[5].nameKr,onError:v,class:B({reversed:a.value.cards[5].orientation==="reversed"})},null,42,s$),T[9]||(T[9]=l("span",{class:"position-label"},"6",-1))],2)]),l("div",n$,[l("div",{class:B(["card-mini",a.value.cards[6].orientation])},[l("img",{src:d(a.value.cards[6]),alt:a.value.cards[6].nameKr,onError:v,class:B({reversed:a.value.cards[6].orientation==="reversed"})},null,42,r$),T[10]||(T[10]=l("span",{class:"position-label"},"7",-1))],2)]),l("div",i$,[l("div",{class:B(["card-mini",a.value.cards[7].orientation])},[l("img",{src:d(a.value.cards[7]),alt:a.value.cards[7].nameKr,onError:v,class:B({reversed:a.value.cards[7].orientation==="reversed"})},null,42,o$),T[11]||(T[11]=l("span",{class:"position-label"},"8",-1))],2)]),l("div",a$,[l("div",{class:B(["card-mini",a.value.cards[8].orientation])},[l("img",{src:d(a.value.cards[8]),alt:a.value.cards[8].nameKr,onError:v,class:B({reversed:a.value.cards[8].orientation==="reversed"})},null,42,l$),T[12]||(T[12]=l("span",{class:"position-label"},"9",-1))],2)]),l("div",c$,[l("div",{class:B(["card-mini",a.value.cards[9].orientation])},[l("img",{src:d(a.value.cards[9]),alt:a.value.cards[9].nameKr,onError:v,class:B({reversed:a.value.cards[9].orientation==="reversed"})},null,42,u$),T[13]||(T[13]=l("span",{class:"position-label"},"10",-1))],2)])])])):(w(),b("div",d$,[(w(!0),b(ye,null,Ue(a.value.cards,(z,ne)=>(w(),b("div",{key:ne,class:"card-display"},[l("div",h$,[l("img",{src:d(z),alt:z.nameKr||z.name,onError:v,class:B({reversed:z.orientation==="reversed"})},null,42,f$)]),l("div",p$,C(z.nameKr||z.name),1),l("div",{class:B(["card-orientation",z.orientation])},C(z.orientation==="upright"?"":""),3)]))),128))]))]),(a.value.spreadId==="one_card"||a.value.spreadId==="three_card_timeline")&&a.value.overallMessage?(w(),b("section",g$,[T[19]||(T[19]=l("h2",null,"  ",-1)),l("div",m$,[l("p",null,C(a.value.overallMessage),1)]),a.value.cards?(w(),b("div",v$,[(w(!0),b(ye,null,Ue(a.value.cards,(z,ne)=>{var X,ie;return w(),b("div",{key:ne,class:"card-interpretation-item"},[l("h3",null,[l("span",y$,C(((X=z.position)==null?void 0:X.name)||S(a.value.spreadId,ne)),1),Ae(" - "+C(z.nameKr||z.name),1)]),l("p",{class:B(["orientation-status",z.orientation])},C(z.orientation==="upright"?"":""),3),l("div",w$,[(ie=z.interpretation)!=null&&ie.basic?(w(),b("p",b$,C(z.interpretation.basic),1)):(w(),b("p",_$,C(W(z,a.value.topic)),1))])])}),128))])):O("",!0),a.value.aiInterpretation?m.value?(w(),b("div",S$,T[17]||(T[17]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"AI    ...",-1)]))):a.value.aiInterpretation?(w(),b("div",C$,[T[18]||(T[18]=l("h3",null,"   ",-1)),l("div",$$,[l("p",null,C(a.value.aiInterpretation),1)])])):O("",!0):(w(),b("div",k$,[l("button",{class:"crystal-ball-button",onClick:T[0]||(T[0]=z=>de(r).isPremium?se():oe())},T[15]||(T[15]=[l("span",{class:"crystal-icon"},"",-1),l("span",{class:"button-text"},"    ",-1),l("span",{class:"sparkle-effect"},"",-1)])),T[16]||(T[16]=l("p",{class:"cta-description"},"    ",-1))]))])):O("",!0),a.value.spreadId==="celtic_cross"&&(a.value.aiInterpretation||m.value)?(w(),b("section",P$,[T[23]||(T[23]=l("h2",null," ",-1)),m.value?(w(),b("div",T$,T[20]||(T[20]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"AI    ...",-1)]))):(w(),b("div",E$,[l("p",null,C(a.value.aiInterpretation),1)])),a.value.aiInterpretationId&&!f.value?(w(),b("div",A$,[T[21]||(T[21]=l("h4",null,"   ?",-1)),l("div",I$,[(w(),b(ye,null,Ue(5,z=>l("button",{key:z,onClick:ne=>D(z),class:B(["star-btn",{active:u.value>=z||h.value>=z}]),onMouseenter:ne=>u.value=z,onMouseleave:T[1]||(T[1]=ne=>u.value=0)},"  ",42,R$)),64))]),l("p",M$,C(K()),1)])):O("",!0),f.value?(w(),b("div",O$,T[22]||(T[22]=[l("p",null,"   !",-1)]))):O("",!0)])):O("",!0),l("section",{class:"actions"},[l("button",{class:"btn btn-share",onClick:A},"    "),l("button",{class:"btn btn-primary",onClick:R},"    "),l("button",{class:"btn btn-secondary",onClick:$},"   ")])])):(w(),b("div",j$,[l("div",{class:"error-state"},[T[24]||(T[24]=l("h2",null,"    ",-1)),T[25]||(T[25]=l("p",null,"   .",-1)),l("button",{class:"btn btn-primary",onClick:$},"   ")])])),pe(Ku,{isVisible:m.value,progress:p.value},null,8,["isVisible","progress"])]))}}),D$=et(L$,[["__scopeId","data-v-9a66dfd4"]]),an={monthly:{id:"tarot_premium_monthly",price:2900,currency:"KRW",period:"monthly",displayPrice:"2,900/"},yearly:{id:"tarot_premium_yearly",price:29900,currency:"KRW",period:"yearly",displayPrice:"29,900/",discountText:"12  17% "}},U$={card:{id:"card",name:"/",icon:""},bank:{id:"bank",name:"",icon:""},kakao:{id:"kakaopay",name:"",icon:""},toss:{id:"tosspay",name:"",icon:""}};class x${constructor(){this.isInitialized=!1}async initialize(){try{if(this.isInitialized)return;console.log(" [Web]   ..."),await this.loadPaymentSDK(),this.isInitialized=!0,console.log(" [Web]    ")}catch(e){throw console.error(" [Web]    :",e),e}}async loadPaymentSDK(){return new Promise((e,t)=>{const n=document.createElement("script");n.src="https://js.tosspayments.com/v1/payment",n.onload=()=>e(),n.onerror=()=>t(new Error("Failed to load payment SDK")),document.head.appendChild(n)})}async purchaseSubscription(e,t){var n,r,i,o;try{const a=Je(),c=an[e];if(!c)throw new Error("Invalid product ID");console.log(` [Web]   : ${e}, : ${t}`);const u=`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,h={amount:c.price,orderId:u,orderName:`   (${c.period})`,customerName:((n=a.currentUser)==null?void 0:n.name)||"",customerEmail:((r=a.currentUser)==null?void 0:r.email)||"",successUrl:`${window.location.origin}/payment-success`,failUrl:`${window.location.origin}/payment-fail`,method:t},f=await this.processPayment(h);if(f.success){const m=await gr.createSubscription({user_id:(i=a.currentUser)==null?void 0:i.id,plan:c.period,status:"active",price:c.price,currency:c.currency,platform_order_id:u,payment_method:t,start_date:new Date,end_date:this.getSubscriptionEndDate(c.period)});return a.updateSubscription({id:m.id,userId:((o=a.currentUser)==null?void 0:o.id)||"",plan:c.period,status:"active",startDate:new Date,endDate:this.getSubscriptionEndDate(c.period),price:c.price,currency:c.currency,paymentMethod:t}),console.log(" [Web]   "),{success:!0,subscription:m}}return{success:!1,error:f.error}}catch(a){return console.error(" [Web]   :",a),{success:!1,error:a}}}async processPayment(e){try{return ai.isWeb,{success:!0}}catch(t){return{success:!1,error:t}}}async restoreSubscription(){try{const e=Je();if(!e.currentUser)return{success:!1,error:"User not logged in"};const t=await gr.getCurrentSubscription(e.currentUser.id);return t&&t.status==="active"?(e.updateSubscription(t),console.log(" [Web]   "),{success:!0}):{success:!1,error:"No active subscription found"}}catch(e){return console.error(" [Web]   :",e),{success:!1,error:e}}}async cancelSubscription(){try{const e=Je();return e.currentSubscription?(await gr.cancelSubscription(e.currentSubscription.id),e.updateSubscription({...e.currentSubscription,status:"cancelled"}),console.log(" [Web]   "),{success:!0}):{success:!1,error:"No active subscription"}}catch(e){return console.error(" [Web]   :",e),{success:!1,error:e}}}getSubscriptionEndDate(e){const t=new Date;return e==="yearly"?new Date(t.setFullYear(t.getFullYear()+1)):new Date(t.setMonth(t.getMonth()+1))}async checkSubscriptionStatus(){try{const e=Je();if(!e.currentUser)return!1;const t=await gr.getCurrentSubscription(e.currentUser.id);return t&&t.status==="active"}catch(e){return console.error(" [Web]    :",e),!1}}}class N${async initialize(){const{initializeRevenueCat:e}=await Pe(async()=>{const{initializeRevenueCat:t}=await import("./purchases-CEKSzWbh.js").then(n=>n.p);return{initializeRevenueCat:t}},[],import.meta.url);return e()}async purchaseSubscription(e){const{getOfferings:t,purchaseSubscription:n}=await Pe(async()=>{const{getOfferings:r,purchaseSubscription:i}=await import("./purchases-CEKSzWbh.js").then(o=>o.p);return{getOfferings:r,purchaseSubscription:i}},[],import.meta.url);try{const i=(await t()).find(a=>a.availablePackages.some(c=>c.identifier===e));if(!i)throw new Error("Product not found");const o=i.availablePackages.find(a=>a.identifier===e);if(!o)throw new Error("Package not found");return await n(o)}catch(r){return{success:!1,error:r}}}async restoreSubscription(){const{restoreSubscription:e}=await Pe(async()=>{const{restoreSubscription:t}=await import("./purchases-CEKSzWbh.js").then(n=>n.p);return{restoreSubscription:t}},[],import.meta.url);return e()}async cancelSubscription(){const{cancelSubscription:e}=await Pe(async()=>{const{cancelSubscription:t}=await import("./purchases-CEKSzWbh.js").then(n=>n.p);return{cancelSubscription:t}},[],import.meta.url);return e()}async checkSubscriptionStatus(){const{checkSubscriptionStatus:e}=await Pe(async()=>{const{checkSubscriptionStatus:t}=await import("./purchases-CEKSzWbh.js").then(n=>n.p);return{checkSubscriptionStatus:t}},[],import.meta.url);return e()}}const K$=()=>ai.isWeb?new x$:new N$,Fu=K$(),F$=()=>Fu.initialize(),B$=(s,e)=>Fu.purchaseSubscription(s,e),ji=(s,e="KRW")=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:e}).format(s),Li=()=>{const s=an.monthly.price*12,e=an.yearly.price;return Math.round((s-e)/s*100)},z$={class:"premium"},H$={class:"container"},W$={class:"features-section"},q$={class:"features-grid"},V$={class:"feature-icon"},G$={class:"pricing-section"},J$={class:"pricing-grid"},Q$={key:0,class:"best-value"},Y$={class:"plan-header"},X$={class:"price"},Z$={key:0,class:"original-price"},eP={class:"amount"},tP={class:"period"},sP={key:0,class:"savings"},nP={class:"plan-features"},rP={key:0},iP={key:1},oP=["onClick","disabled"],aP={key:0},lP={class:"selected-plan"},cP={class:"plan-price"},uP={class:"payment-methods"},dP=["onClick"],hP={class:"method-icon"},fP={class:"method-name"},pP={class:"payment-actions"},gP=["disabled"],mP={key:1,class:"current-status"},vP={class:"status-card card"},yP={key:0,class:"premium-status"},wP={key:0,class:"subscription-info"},bP={key:1,class:"free-status"},_P={class:"faq-section"},kP={class:"faq-list"},SP=Ze({__name:"Premium",setup(s){const e=Dt(),t=Je(),n=G(!1),r=G(!1),i=G("monthly"),o=G(""),a=Ce(()=>({removeAds:{icon:"",title:" ",description:"       "},unlimitedReadings:{icon:"",title:" ",description:"         "},premiumSpreads:{icon:"",title:" ",description:" ,        "},detailedInterpretation:{icon:"",title:" ",description:"     "},unlimitedHistory:{icon:"",title:" ",description:"         "},prioritySupport:{icon:"",title:" ",description:"      "}})),c=[{id:1,question:"    ?",answer:",    .      ."},{id:2,question:"    ?",answer:"   3   ,     ,   ."},{id:3,question:"  ?",answer:"         ."},{id:4,question:" ?",answer:"   7    ."}],u=()=>{e.go(-1)},h=v=>{i.value=v,o.value="",r.value=!0},f=()=>{r.value=!1,o.value=""},m=async()=>{if(o.value)try{n.value=!0;const v=await B$(i.value,o.value);v.success?(await Be({title:" ",message:" ! "}),f(),await t.loadUserProfile()):(await Be({title:" ",message:" .  ."}),console.error("Purchase failed:",v.error))}catch(v){console.error("Purchase error:",v),await Be({title:"",message:"   ."})}finally{n.value=!1}},p=async()=>{await Be({title:"",message:"     ."})},d=v=>new Date(v).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"});return(v,k)=>(w(),b("div",z$,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:u}," "),k[1]||(k[1]=l("h1",null," ",-1))]),l("div",H$,[k[15]||(k[15]=l("div",{class:"hero-section"},[l("div",{class:"premium-icon"},""),l("h2",null,"  "),l("p",{class:"hero-subtitle"},[Ae("   "),l("br"),Ae("    ")])],-1)),l("div",W$,[k[2]||(k[2]=l("h3",null," ",-1)),l("div",q$,[(w(!0),b(ye,null,Ue(a.value,($,R)=>(w(),b("div",{class:"feature-card card",key:R},[l("div",V$,C($.icon),1),l("h4",null,C($.title),1),l("p",null,C($.description),1)]))),128))])]),l("div",G$,[k[6]||(k[6]=l("h3",null,"",-1)),l("div",J$,[(w(!0),b(ye,null,Ue(de(an),($,R)=>(w(),b("div",{class:B(["pricing-card card",{featured:R==="yearly"}]),key:R},[R==="yearly"?(w(),b("div",Q$," ")):O("",!0),l("div",Y$,[l("h4",null,C(R==="monthly"?" ":" "),1),l("div",X$,[R==="yearly"?(w(),b("span",Z$,C(de(ji)(de(an).monthly.price*12)),1)):O("",!0),l("span",eP,C(de(ji)($.price)),1),l("span",tP,"/"+C(R==="monthly"?"":""),1)]),R==="yearly"?(w(),b("div",sP,C(de(Li)())+"% !",1)):O("",!0)]),l("ul",nP,[k[3]||(k[3]=l("li",null,"   ",-1)),k[4]||(k[4]=l("li",null,"  ",-1)),k[5]||(k[5]=l("li",null,"  ",-1)),R==="yearly"?(w(),b("li",rP," "+C(de(Li)())+"%  ",1)):(w(),b("li",iP,"   "))]),l("button",{class:B(["btn btn-primary subscribe-btn",{featured:R==="yearly"}]),onClick:S=>h(R),disabled:n.value},[Ae(C(R==="monthly"?" ":" ")+" ",1),R==="yearly"?(w(),b("span",aP," ("+C(de(Li)())+"% )",1)):O("",!0)],10,oP)],2))),128))])]),r.value?(w(),b("div",{key:0,class:"payment-modal",onClick:f},[l("div",{class:"payment-content",onClick:k[0]||(k[0]=ms(()=>{},["stop"]))},[k[7]||(k[7]=l("h3",null,"  ",-1)),l("div",lP,[l("p",null,[l("strong",null,C(i.value==="monthly"?" ":" "),1)]),l("p",cP,C(de(ji)(de(an)[i.value].price)),1)]),l("div",uP,[(w(!0),b(ye,null,Ue(de(U$),($,R)=>(w(),b("div",{key:R,class:B(["payment-method",{selected:o.value===R}]),onClick:S=>o.value=R},[l("span",hP,C($.icon),1),l("span",fP,C($.name),1)],10,dP))),128))]),l("div",pP,[l("button",{class:"btn btn-secondary",onClick:f},""),l("button",{class:"btn btn-primary",onClick:m,disabled:!o.value||n.value},C(n.value?"  ...":""),9,gP)])])])):O("",!0),de(t).isAuthenticated?(w(),b("div",mP,[l("div",vP,[k[13]||(k[13]=l("h3",null," ",-1)),de(t).isPremium?(w(),b("div",yP,[k[8]||(k[8]=l("div",{class:"status-icon"},"",-1)),k[9]||(k[9]=l("p",null,[l("strong",null," ")],-1)),k[10]||(k[10]=l("p",null,"    !",-1)),de(t).currentSubscription?(w(),b("div",wP,[l("p",null," : "+C(d(de(t).currentSubscription.endDate)),1),l("button",{class:"btn btn-outline",onClick:p}," ")])):O("",!0)])):(w(),b("div",bP,[k[11]||(k[11]=l("div",{class:"status-icon"},"",-1)),k[12]||(k[12]=l("p",null,[l("strong",null," ")],-1)),l("p",null,"  : "+C(de(t).freeReadingsToday)+"/"+C(de(t).maxFreeReadingsPerDay),1)]))])])):O("",!0),l("div",_P,[k[14]||(k[14]=l("h3",null,"  ",-1)),l("div",kP,[(w(),b(ye,null,Ue(c,$=>l("div",{class:"faq-item card",key:$.id},[l("h4",null,C($.question),1),l("p",null,C($.answer),1)])),64))])])])]))}}),CP=et(SP,[["__scopeId","data-v-72956602"]]),$P={class:"history"},PP={class:"container"},TP={key:0,class:"login-prompt"},EP={class:"prompt-card card"},AP={key:1,class:"loading-state"},IP={key:2,class:"empty-state"},RP={class:"empty-card card"},MP={key:3,class:"readings-section"},OP={class:"section-header"},jP={class:"filters"},LP={class:"readings-grid"},DP=["onClick"],UP={class:"reading-header"},xP={class:"reading-date"},NP={class:"reading-content"},KP={class:"reading-summary"},FP={class:"cards-preview"},BP=["src","alt"],zP={key:0,class:"more-cards"},HP={class:"reading-footer"},WP={class:"card-count"},qP={key:0,class:"premium-badge"},VP={key:0,class:"pagination"},GP=["disabled"],JP={class:"page-info"},QP=["disabled"],YP={class:"modal-header"},XP={class:"modal-body"},ZP={class:"reading-info"},eT={class:"info-row"},tT={class:"info-row"},sT={class:"info-row"},nT={class:"cards-section"},rT={class:"drawn-cards"},iT={class:"card-visual"},oT=["src","alt"],aT={class:"card-details"},lT={class:"card-name"},cT={class:"card-meaning"},uT={key:0,class:"interpretation-section"},dT={class:"full-interpretation"},Di=6,hT=Ze({__name:"History",setup(s){const e=Dt(),t=Je(),n=G(!1),r=G("all"),i=G(null),o=G(1),a=G([]),c=G(!1),u=Ce(()=>{let M=a.value;r.value!=="all"&&(M=M.filter(K=>K.topic===r.value)),M.sort((K,W)=>new Date(W.created_at).getTime()-new Date(K.created_at).getTime());const A=(o.value-1)*Di,D=A+Di;return M.slice(A,D)}),h=Ce(()=>{const M=a.value.filter(A=>r.value==="all"||A.topic===r.value);return Math.ceil(M.length/Di)}),f=()=>{e.go(-1)},m=M=>({love:"/",career:"/",money:"/",health:"/",general:""})[M]||M,p=M=>new Date(M).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),d=M=>new Date(M).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=M=>pn(M),k=M=>M.ai_interpretation?M.ai_interpretation.substring(0,100)+"...":"   .",$=M=>{i.value=M},R=()=>{i.value=null},S=M=>{o.value=M},E=async()=>{var M;if((M=t.user)!=null&&M.id){c.value=!0;try{const{data:A,error:D}=await ue.from("reading_history").select(`
        *,
        cards:reading_cards(
          *,
          card:tarot_cards(*)
        )
      `).eq("user_id",t.user.id).order("created_at",{ascending:!1});if(D)throw D;a.value=(A||[]).map(K=>({...K,cards:K.cards.map(W=>({...W.card,position:W.position,card_name:W.card.name_kr,is_reversed:W.is_reversed}))}))}catch(A){console.error("Error fetching readings:",A)}finally{c.value=!1}}};return pt(()=>{t.isAuthenticated&&E()}),(M,A)=>{const D=Vr("router-link");return w(),b("div",$P,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:f}," "),A[8]||(A[8]=l("h1",null," ",-1))]),l("div",PP,[de(t).isAuthenticated?c.value?(w(),b("div",AP,A[12]||(A[12]=[l("div",{class:"spinner"},null,-1),l("p",null,"   ...",-1)]))):a.value.length===0?(w(),b("div",IP,[l("div",RP,[A[14]||(A[14]=l("div",{class:"empty-icon"},"",-1)),A[15]||(A[15]=l("h2",null,"   ",-1)),A[16]||(A[16]=l("p",null,"    !",-1)),pe(D,{to:"/reading-select",class:"btn btn-primary"},{default:$e(()=>A[13]||(A[13]=[Ae("   ",-1)])),_:1,__:[13]})])])):(w(),b("div",MP,[l("div",OP,[A[18]||(A[18]=l("h2",null,"  ",-1)),l("div",jP,[St(l("select",{"onUpdate:modelValue":A[1]||(A[1]=K=>r.value=K),class:"filter-select"},A[17]||(A[17]=[Vn('<option value="all" data-v-3ae44dc2></option><option value="love" data-v-3ae44dc2>/</option><option value="career" data-v-3ae44dc2>/</option><option value="money" data-v-3ae44dc2>/</option><option value="general" data-v-3ae44dc2></option>',5)]),512),[[Kc,r.value]])])]),l("div",LP,[(w(!0),b(ye,null,Ue(u.value,K=>(w(),b("div",{key:K.id,class:"reading-card card",onClick:W=>$(K)},[l("div",UP,[l("div",xP,C(p(K.created_at)),1),l("div",{class:B(["reading-topic",K.topic])},C(m(K.topic)),3)]),l("div",NP,[l("h3",null,C(K.spread_name),1),l("p",KP,C(k(K)),1),l("div",FP,[(w(!0),b(ye,null,Ue(K.cards.slice(0,3),(W,se)=>(w(),b("div",{key:se,class:B(["mini-card",{reversed:de($n)(W)}])},[l("img",{src:v(W),alt:W.card_name,onError:A[2]||(A[2]=(...oe)=>de(Ls)&&de(Ls)(...oe))},null,40,BP)],2))),128)),K.cards.length>3?(w(),b("span",zP," +"+C(K.cards.length-3),1)):O("",!0)])]),l("div",HP,[l("span",WP,C(K.cards.length)+"",1),K.spread_name===" "?(w(),b("span",qP,"   ")):O("",!0)])],8,DP))),128))]),h.value>1?(w(),b("div",VP,[l("button",{class:"page-btn",disabled:o.value===1,onClick:A[3]||(A[3]=K=>S(o.value-1))},"  ",8,GP),l("span",JP,C(o.value)+" / "+C(h.value),1),l("button",{class:"page-btn",disabled:o.value===h.value,onClick:A[4]||(A[4]=K=>S(o.value+1))},"  ",8,QP)])):O("",!0)])):(w(),b("div",TP,[l("div",EP,[A[9]||(A[9]=l("div",{class:"prompt-icon"},"",-1)),A[10]||(A[10]=l("h2",null," ",-1)),A[11]||(A[11]=l("p",null,"    .",-1)),l("button",{class:"btn btn-primary",onClick:A[0]||(A[0]=K=>n.value=!0)},"  ")])])),i.value?(w(),b("div",{key:4,class:"modal-backdrop",onClick:R},[l("div",{class:"modal-content",onClick:A[6]||(A[6]=ms(()=>{},["stop"]))},[l("div",YP,[l("h2",null,C(i.value.spread_name),1),l("button",{class:"close-button",onClick:R},"")]),l("div",XP,[l("div",ZP,[l("div",eT,[A[19]||(A[19]=l("strong",null,":",-1)),Ae(" "+C(d(i.value.created_at)),1)]),l("div",tT,[A[20]||(A[20]=l("strong",null,":",-1)),Ae(" "+C(m(i.value.topic)),1)]),l("div",sT,[A[21]||(A[21]=l("strong",null,":",-1)),Ae(" "+C(i.value.question||" "),1)])]),l("div",nT,[A[22]||(A[22]=l("h4",null," ",-1)),l("div",rT,[(w(!0),b(ye,null,Ue(i.value.cards,(K,W)=>(w(),b("div",{key:W,class:"drawn-card"},[l("div",iT,[l("img",{src:de(pn)(K),alt:K.card_name,class:B(["card-image",{reversed:de($n)(K)}]),onError:A[5]||(A[5]=(...se)=>de(Ls)&&de(Ls)(...se))},null,42,oT),l("div",{class:B(["card-orientation",{reversed:de($n)(K)}])},C(de($n)(K)?"":""),3)]),l("div",aT,[l("h5",null,C(K.position||` ${W+1}`),1),l("p",lT,C(K.card_name),1),l("p",cT,C(de($n)(K)?K.meaning_reverse:K.meaning_upright),1)])]))),128))])]),i.value.ai_interpretation?(w(),b("div",uT,[A[23]||(A[23]=l("h4",null,"AI  ",-1)),l("p",dT,C(i.value.ai_interpretation),1)])):O("",!0)])])])):O("",!0),n.value?(w(),vt(ju,{key:5,onClose:A[7]||(A[7]=K=>n.value=!1)})):O("",!0)])])}}}),fT=et(hT,[["__scopeId","data-v-3ae44dc2"]]),pT={class:"tarot-dictionary"},gT={class:"container"},mT={class:"search-section"},vT={class:"search-bar"},yT={class:"filter-tabs"},wT=["onClick"],bT={class:"cards-grid"},_T=["onClick"],kT={class:"card-image"},ST=["src","alt"],CT={class:"card-info"},$T={class:"card-name-en"},PT={class:"card-meta"},TT={key:0,class:"suit"},ET={class:"modal-header"},AT={class:"modal-body"},IT={class:"card-visual"},RT={class:"card-image-large"},MT=["src","alt"],OT={class:"card-basic-info"},jT={key:0},LT={key:1},DT={key:0,class:"card-meanings"},UT={class:"meaning-section"},xT={class:"keywords"},NT={class:"meaning-section"},KT={class:"keywords"},FT={key:1,class:"detailed-meanings"},BT={class:"meaning-tabs"},zT=["onClick"],HT={key:0,class:"meaning-content"},WT={class:"meaning-orientation"},qT={class:"meaning-orientation"},VT=Ze({__name:"TarotDictionary",setup(s){const e=Hs(),t=G([]),n=Dt(),r=G(""),i=G("all"),o=G(null),a=G("general"),c=[{id:"all",name:""},{id:"major",name:" "},{id:"minor",name:" "},{id:"cups",name:""},{id:"wands",name:""},{id:"swords",name:""},{id:"pentacles",name:""}],u=[{id:"general",name:""},{id:"love",name:""},{id:"career",name:""},{id:"money",name:""}],h=Ce(()=>{let S=t.value;if(r.value){const E=r.value.toLowerCase();S=S.filter(M=>M.nameKr.toLowerCase().includes(E)||M.name.toLowerCase().includes(E))}return i.value!=="all"&&(i.value==="major"||i.value==="minor"?S=S.filter(E=>E.arcana===i.value):S=S.filter(E=>E.suit===i.value)),S}),f=()=>{n.go(-1)},m=S=>{i.value=S},p=S=>{a.value=S},d=S=>pn(S),v=S=>{o.value=S,a.value="general"};pt(async()=>{await e.initialize(),t.value=e.tarotCards});const k=()=>{o.value=null},$=S=>({cups:" ()",wands:" ()",swords:" ()",pentacles:" ()"})[S]||S,R=S=>Ls(S);return(S,E)=>{var M,A;return w(),b("div",pT,[l("header",{class:"page-header"},[l("button",{class:"back-button",onClick:f}," "),E[2]||(E[2]=l("h1",null," ",-1))]),l("div",gT,[l("div",mT,[l("div",vT,[St(l("input",{type:"text","onUpdate:modelValue":E[0]||(E[0]=D=>r.value=D),placeholder:"  ...",class:"search-input"},null,512),[[fs,r.value]]),E[3]||(E[3]=l("button",{class:"search-button"},"",-1))]),l("div",yT,[(w(),b(ye,null,Ue(c,D=>l("button",{key:D.id,class:B(["filter-tab",{active:i.value===D.id}]),onClick:K=>m(D.id)},C(D.name),11,wT)),64))])]),l("div",bT,[(w(!0),b(ye,null,Ue(h.value,D=>(w(),b("div",{key:D.id,class:"card-item card",onClick:K=>v(D)},[l("div",kT,[l("img",{src:d(D),alt:D.nameKr,onError:R},null,40,ST)]),l("div",CT,[l("h3",null,C(D.nameKr),1),l("p",$T,C(D.name),1),l("div",PT,[l("span",{class:B(["arcana-type",D.arcana])},C(D.arcana==="major"?"":""),3),D.suit?(w(),b("span",TT,C($(D.suit)),1)):O("",!0)])])],8,_T))),128))]),o.value?(w(),b("div",{key:0,class:"modal-backdrop",onClick:k},[l("div",{class:"modal-content",onClick:E[1]||(E[1]=ms(()=>{},["stop"]))},[l("div",ET,[l("h2",null,C(o.value.nameKr),1),l("button",{class:"close-button",onClick:k},"")]),l("div",AT,[l("div",IT,[l("div",RT,[l("img",{src:d(o.value),alt:o.value.nameKr,onError:R},null,40,MT)]),l("div",OT,[l("p",null,[E[4]||(E[4]=l("strong",null,":",-1)),Ae(" "+C(o.value.name),1)]),l("p",null,[E[5]||(E[5]=l("strong",null,":",-1)),Ae(" "+C(o.value.arcana==="major"?" ":" "),1)]),o.value.suit?(w(),b("p",jT,[E[6]||(E[6]=l("strong",null,":",-1)),Ae(" "+C($(o.value.suit)),1)])):O("",!0),o.value.number?(w(),b("p",LT,[E[7]||(E[7]=l("strong",null,":",-1)),Ae(" "+C(o.value.number),1)])):O("",!0)])]),o.value.keywords?(w(),b("div",DT,[l("div",UT,[E[8]||(E[8]=l("h4",null,"  ",-1)),l("div",xT,[(w(!0),b(ye,null,Ue(o.value.keywords.upright,D=>(w(),b("span",{key:D,class:"keyword upright"},C(D),1))),128))])]),l("div",NT,[E[9]||(E[9]=l("h4",null,"  ",-1)),l("div",KT,[(w(!0),b(ye,null,Ue(o.value.keywords.reversed,D=>(w(),b("span",{key:D,class:"keyword reversed"},C(D),1))),128))])])])):O("",!0),o.value.meanings?(w(),b("div",FT,[E[12]||(E[12]=l("h4",null,"  ",-1)),l("div",BT,[(w(),b(ye,null,Ue(u,D=>l("button",{key:D.id,class:B(["meaning-tab",{active:a.value===D.id}]),onClick:K=>p(D.id)},C(D.name),11,zT)),64))]),o.value.meanings[a.value]?(w(),b("div",HT,[l("div",WT,[E[10]||(E[10]=l("h5",null,"",-1)),l("p",null,C((M=o.value.meanings[a.value])==null?void 0:M.upright),1)]),l("div",qT,[E[11]||(E[11]=l("h5",null,"",-1)),l("p",null,C((A=o.value.meanings[a.value])==null?void 0:A.reversed),1)])])):O("",!0)])):O("",!0)])])])):O("",!0)])])}}}),$l=et(VT,[["__scopeId","data-v-ee533f27"]]),GT={class:"auth-callback"},JT=Ze({__name:"AuthCallback",setup(s){const e=Dt(),t=Je();return pt(async()=>{console.log(" OAuth   "),console.log(" URL:",window.location.href);try{if(Qe.isNativePlatform()){console.log("    -  ");return}const n=new URLSearchParams(window.location.hash.substring(1)),r=n.get("access_token"),i=n.get("refresh_token"),o=n.get("error"),a=n.get("error_description");if(o){console.error(" OAuth :",o,a),await e.push({path:"/login",query:{error:a||"   ."}});return}r&&i?(console.log("   -   ..."),await Un.setSession(r,i),await t.initializeUser(),console.log("   -  "),await e.push("/home")):(console.log("   -   "),await e.push("/login"))}catch(n){console.error("   :",n),await e.push({path:"/login",query:{error:"    ."}})}}),(n,r)=>(w(),b("div",GT,r[0]||(r[0]=[l("div",{class:"loading-container"},[l("div",{class:"spinner"}),l("h2",null,"  ..."),l("p",null," ")],-1)])))}}),QT=et(JT,[["__scopeId","data-v-a8aaaa70"]]),YT={class:"shared-reading"},XT={key:0,class:"loading-state"},ZT={key:1,class:"expired-state"},eE={key:2,class:"reading-content"},tE={class:"share-header"},sE={class:"share-info"},nE={class:"container"},rE={key:0,class:"custom-question-section"},iE={class:"custom-question-content"},oE={class:"cards-layout-section"},aE={key:0,class:"celtic-cross-layout"},lE={class:"cards-container"},cE=["src","alt"],uE={class:"position-label"},dE={key:1,class:"cards-grid"},hE={class:"card-image"},fE=["src","alt"],pE={class:"card-name"},gE={key:1,class:"interpretation-section"},mE={key:0,class:"basic-interpretation-content"},vE={key:1,class:"ai-interpretation-result"},yE={class:"ai-content"},wE={key:3,class:"error-state"},bE=Ze({__name:"SharedReading",setup(s){const e=Ru(),t=Dt(),n=e.params.id,r=G(!0),i=G(!1),o=G(null),a=f=>pn({cardNumber:f.cardNumber,name:f.name,nameKr:f.nameKr,orientation:f.orientation}),c=f=>Ls(f),u=f=>{const m=new Date(f),p=m.getFullYear(),d=String(m.getMonth()+1).padStart(2,"0"),v=String(m.getDate()).padStart(2,"0"),k=String(m.getHours()).padStart(2,"0"),$=String(m.getMinutes()).padStart(2,"0");return`${p}.${d}.${v} ${k}:${$}`},h=()=>{t.push("/")};return pt(async()=>{try{const{data:f,error:m}=await ue.from("shared_readings").select("*").eq("id",n).eq("is_active",!0).single();if(m||!f){console.error("   :",m),i.value=!1,r.value=!1;return}if(new Date(f.expires_at)<new Date){i.value=!0,r.value=!1;return}o.value=f}catch(f){console.error("   :",f),i.value=!1}finally{r.value=!1}}),(f,m)=>(w(),b("div",YT,[r.value?(w(),b("div",XT,m[0]||(m[0]=[l("div",{class:"spinner"},null,-1),l("p",null,"  ...",-1)]))):i.value?(w(),b("div",ZT,[l("div",{class:"container"},[l("div",{class:"expired-content"},[m[1]||(m[1]=l("div",{class:"expired-icon"},"",-1)),m[2]||(m[2]=l("h2",null,"  ",-1)),m[3]||(m[3]=l("p",null,"  24   .",-1)),l("button",{onClick:h,class:"cta-button"},"      ")])])])):o.value?(w(),b("div",eE,[l("header",tE,[m[4]||(m[4]=l("h1",null,"   ",-1)),l("p",sE," : "+C(u(o.value.created_at)),1)]),l("div",nE,[o.value.custom_question?(w(),b("section",rE,[m[5]||(m[5]=l("h2",null," ",-1)),l("div",iE,[l("p",null,C(o.value.custom_question),1)])])):O("",!0),l("section",oE,[m[6]||(m[6]=l("h2",null," ",-1)),o.value.spread_type==="celtic_cross"?(w(),b("div",aE,[l("div",lE,[(w(!0),b(ye,null,Ue(o.value.cards,(p,d)=>(w(),b("div",{key:d,class:B(`card-position position-${d+1}`)},[l("div",{class:B(["card-mini",p.orientation])},[l("img",{src:a(p),alt:p.nameKr,onError:c,class:B({reversed:p.orientation==="reversed"})},null,42,cE),l("span",uE,C(d+1),1)],2)],2))),128))])])):(w(),b("div",dE,[(w(!0),b(ye,null,Ue(o.value.cards,(p,d)=>(w(),b("div",{key:d,class:"card-display"},[l("div",hE,[l("img",{src:a(p),alt:p.nameKr,onError:c,class:B({reversed:p.orientation==="reversed"})},null,42,fE)]),l("div",pE,C(p.nameKr),1),l("div",{class:B(["card-orientation",p.orientation])},C(p.orientation==="upright"?"":""),3)]))),128))]))]),o.value.basic_interpretation||o.value.ai_interpretation?(w(),b("section",gE,[m[8]||(m[8]=l("h2",null,"  ",-1)),o.value.basic_interpretation?(w(),b("div",mE,[l("p",null,C(o.value.basic_interpretation),1)])):O("",!0),o.value.ai_interpretation?(w(),b("div",vE,[m[7]||(m[7]=l("h3",null,"   ",-1)),l("div",yE,[l("p",null,C(o.value.ai_interpretation),1)])])):O("",!0)])):O("",!0)]),l("section",{class:"cta-section"},[l("div",{class:"container"},[m[9]||(m[9]=l("h2",null,"   ?",-1)),m[10]||(m[10]=l("p",null,"    AI  !",-1)),l("button",{onClick:h,class:"primary-cta"},"    ")])])])):(w(),b("div",wE,[l("div",{class:"container"},[l("div",{class:"error-content"},[m[11]||(m[11]=l("div",{class:"error-icon"},"",-1)),m[12]||(m[12]=l("h2",null,"   ",-1)),m[13]||(m[13]=l("p",null,"    .",-1)),l("button",{onClick:h,class:"cta-button"},"      ")])])]))]))}}),_E=et(bE,[["__scopeId","data-v-59ecb2fe"]]),kE=[{path:"/",name:"Home",component:Sy},{path:"/app",name:"App",component:j0,meta:{requiresAuth:!0}},{path:"/reading-select",name:"ReadingSelect",component:Gw,meta:{requiresAuth:!0}},{path:"/card-drawing",name:"CardDrawing",component:jC,meta:{requiresAuth:!0}},{path:"/reading-result",name:"ReadingResult",component:D$,meta:{requiresAuth:!0}},{path:"/premium",name:"Premium",component:CP,meta:{requiresAuth:!0}},{path:"/share/:id",name:"SharedReading",component:_E,meta:{requiresAuth:!1,isPublic:!0}},{path:"/history",name:"History",component:fT,meta:{requiresAuth:!0}},{path:"/card-dictionary",name:"TarotDictionary",component:$l,meta:{requiresAuth:!0}},{path:"/dictionary",name:"Dictionary",component:$l,meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:()=>Pe(()=>import("./Settings-G6Hympmn.js"),__vite__mapDeps([0,1]),import.meta.url),meta:{requiresAuth:!0}},{path:"/auth/callback",name:"AuthCallback",component:QT},{path:"/test-premium",name:"TestPremium",component:()=>Pe(()=>import("./TestPremium-DgUlsOUV.js"),__vite__mapDeps([2,3]),import.meta.url),meta:{requiresAuth:!0}},{path:"/daily-card",name:"DailyCard",component:()=>Pe(()=>import("./DailyCard-D8nXHWKC.js"),__vite__mapDeps([4,5,6]),import.meta.url),meta:{requiresAuth:!0}}],Ds=fv({history:Bm(),routes:kE});Ds.beforeEach(async(s,e,t)=>{console.log(" [Router Guard]  :",e.path,"->",s.path),console.log(" [Router Guard] to :",{name:s.name,path:s.path,params:s.params,meta:s.meta});try{const{useUserStore:n}=await Pe(async()=>{const{useUserStore:i}=await Promise.resolve().then(()=>Or);return{useUserStore:i}},void 0,import.meta.url),r=n();if(s.name==="CardDrawing"){console.log(" [Router Guard] CardDrawing  ");const{useTarotStore:i}=await Pe(async()=>{const{useTarotStore:a}=await Promise.resolve().then(()=>m0);return{useTarotStore:a}},void 0,import.meta.url),o=i();console.log(" [Router Guard]   :",{selectedTopic:o.selectedTopic,selectedSpread:o.selectedSpread,hasData:!!(o.selectedTopic&&o.selectedSpread)})}if(r.isInitialized||(console.log(" [Router Guard] userStore  "),await r.initializeUser()),s.meta.requiresAuth&&(console.log(" [Router Guard]   :",s.path),r.isLoading&&(console.log(" [Router Guard]   ..."),await new Promise(i=>{const o=r.$subscribe((a,c)=>{c.isLoading||(o(),i(void 0))})})),console.log(" [Router Guard]  :",r.currentUser?r.currentUser.isAnonymous?"":"":""),!r.currentUser)){console.log(" [Router Guard]   -  "),t({name:"Home"});return}console.log(" [Router Guard]  "),t()}catch(n){console.error(" [Router Guard]  :",n),t(!1)}});Ds.afterEach((s,e)=>{console.log(" [Router AfterEach]  :",e.path,"->",s.path),console.log(" [Router AfterEach]  URL:",window.location.pathname)});const SE=()=>{Qe.isNativePlatform()&&(dn.addListener("appUrlOpen",async s=>{console.log(" Deep link opened:",s.url);const e=new URL(s.url);if(e.pathname.includes("auth/callback")||e.href.includes("#access_token")){let t=null,n=null;if(e.hash){const r=new URLSearchParams(e.hash.slice(1));t=r.get("access_token"),n=r.get("refresh_token")}if(!t&&s.url.includes("#")){const r=s.url.split("#")[1],i=new URLSearchParams(r);t=i.get("access_token"),n=i.get("refresh_token")}if(console.log(" Tokens found:",{access:!!t,refresh:!!n}),t&&n)try{const{data:r,error:i}=await ue.auth.setSession({access_token:t,refresh_token:n});!i&&r.session?(console.log(" OAuth login successful"),Ds.push("/")):(console.error(" OAuth session error:",i),Ds.push("/login?error=auth_failed"))}catch(r){console.error(" OAuth processing error:",r),Ds.push("/login?error=auth_failed")}else console.error(" No tokens in callback URL"),Ds.push("/login?error=no_tokens")}}),dn.getLaunchUrl().then(s=>{s!=null&&s.url&&console.log(" App launched with URL:",s.url)}))};co.initializeApp();SE();const CE=bf(),or=Oo(vv);or.use(CE);or.use(Ds);or.config.errorHandler=(s,e,t)=>{console.error("[Vue Error Handler]",s),console.error("[Vue Error Info]",t),console.error("[Vue Error Stack]",s.stack)};or.config.warnHandler=(s,e,t)=>{console.warn("[Vue Warning]",s),console.warn("[Vue Warning Trace]",t)};or.mount("#app");const fo=Je(),$E=Hs();nb(()=>fo);const PE=async()=>{try{console.log("   ..."),fo.initializeUser().catch(s=>{console.error("  :",s)}),$E.initialize().catch(s=>{console.error("   :",s)}),setTimeout(async()=>{try{fo.isPremium||(console.log("   ..."),await xu())}catch(s){console.error("   :",s)}},1e3),setTimeout(async()=>{try{console.log("   ..."),await F$()}catch(s){console.error("   :",s)}},2e3),console.log("     (  )")}catch(s){console.error("   :",s)}};PE();"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const s=await navigator.serviceWorker.getRegistrations();console.log(`  Service Worker: ${s.length}`);for(const e of s){const t=await e.unregister();console.log(` Service Worker  ${t?"":""}: ${e.scope}`)}if("caches"in window){const e=await caches.keys();console.log(`  : ${e.length}`);for(const t of e)await caches.delete(t),console.log(`  : ${t}`)}if(s.length>0){console.log("  Service Worker  ...");const e=await navigator.serviceWorker.register("/sw-remove.js",{scope:"/",updateViaCache:"none"});setTimeout(()=>{console.log(" Service Worker  ")},3e3)}}catch(s){console.error(" Service Worker   :",s)}});export{Pe as A,zs as B,gr as C,_l as D,Qe as E,ye as F,UE as G,Kn as I,co as N,yu as W,et as _,UC as a,l as b,b as c,Ze as d,O as e,de as f,ue as g,Be as h,Dt as i,w as j,Hs as k,Yt as l,Ce as m,Ct as n,pt as o,pe as p,Ae as q,G as r,js as s,C as t,Je as u,Nc as v,St as w,B as x,Ue as y,Fs as z};
