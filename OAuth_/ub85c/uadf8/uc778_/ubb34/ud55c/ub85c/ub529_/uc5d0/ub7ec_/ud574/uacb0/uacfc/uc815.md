# OAuth \ub85c\uadf8\uc778 \ubb34\ud55c\ub85c\ub529 \uc5d0\ub7ec \ud574\uacb0\uacfc\uc815

## \ubb38\uc81c \uc0c1\ud669
\uad00\ub9ac\uc790 \ub85c\uadf8\uc778 -> \ub85c\uadf8\uc544\uc6c3 \ud6c4 \uad6c\uae00 OAuth \ub85c\uadf8\uc778 \uc2dc \ucf5c\ubc31 \ud6c4 \ubb34\ud55c\ub85c\ub529 \ud604\uc0c1 \ubc1c\uc0dd

## \ud574\uacb0 \uacfc\uc815

### 1\ucc28 \uc2dc\ub3c4 (2025-08-28)

#### \ubb38\uc81c 1: OAuth \uc11c\ube44\uc2a4 \uc911\ubcf5
- **\uc6d0\uc778**: 3\uac1c\uc758 OAuth \uc11c\ube44\uc2a4\uac00 \ub09c\ub9bd (mobileAuth.ts, oauth-mobile.ts, oauth.ts)
- **\ud574\uacb0**: oauth.ts\ub85c \ud1b5\ud569, \ub098\uba38\uc9c0\ub294 deprecated \ucc98\ub9ac
```typescript
// mobileAuth.ts - deprecated \ucc98\ub9ac
async signInWithGoogle() {
  console.warn('[mobileAuth] \u26a0\ufe0f \uc774 \ud568\uc218\ub294 \ub354 \uc774\uc0c1 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. oauth.ts\ub97c \uc0ac\uc6a9\ud558\uc138\uc694.');
  const { oauthService } = await import('./oauth');
  return oauthService.signInWithGoogle();
}
```

#### \ubb38\uc81c 2: OAuth \ub9ac\ub2e4\uc774\ub809\ud2b8 URL \ubb38\uc81c
- **\uc6d0\uc778**: \ubaa8\ubc14\uc77c\uc5d0\uc11c localhost URL\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8
- **\ud574\uacb0**: \uc571 \uc2a4\ud0b4 URL\ub85c \ubcc0\uacbd
```typescript
// oauth.ts
const redirectUrl = 'com.tarotgarden.app://auth/callback';
// skipBrowserRedirect: false\ub85c \uc124\uc815
```

#### \ubb38\uc81c 3: \ub514\ubc84\uae45 \uc815\ubcf4 \ud654\uba74 \ucd9c\ub825
- **\uc6d0\uc778**: debugLogger.ts\uac00 \ud654\uba74 \uc0c1\ub2e8\uc5d0 \ub514\ubc84\uadf8 \ud328\ub110 \uc0dd\uc131
- **\ud574\uacb0**: 
  - debugLogger.ts\uc758 isDebugMode = false \uc124\uc815
  - showPanelOnScreen = false \uc124\uc815
  - App.vue\uc5d0\uc11c logger.removeDebugPanel() \ud638\ucd9c

#### \ubb38\uc81c 4: \ub85c\uadf8\uc778 \ubaa8\ub2ec \ubbf8\ud45c\uc2dc
- **\uc6d0\uc778**: LoginModal.vue\uc5d0\uc11c debugLogs \ubcc0\uc218 \uc81c\uac70\ud588\uc73c\ub098 return\ubb38\uc5d0 \uc794\ub958
- **\ud574\uacb0**: return\ubb38\uc5d0\uc11c debugLogs \ucc38\uc870 \uc81c\uac70

#### \ubb38\uc81c 5: \ubc84\uc804 \uc815\ubcf4 \uc798\ubabb \ud45c\uc2dc
- **\uc6d0\uc778**: MainApp.vue\uc5d0 \ud558\ub4dc\ucf54\ub529\ub41c \ubc84\uc804 \ubc88\ud638
- **\ud574\uacb0**: 
  - \ucd08\uae30: buildVersion '97' -> '114' \uc218\uc815
  - \uc790\ub3d9\ud654 \uc2a4\ud06c\ub9bd\ud2b8 \uc791\uc131 (scripts/update-build-version.js)
  - \ucd5c\uc885: buildVersion '114' -> '116' \uc5c5\ub370\uc774\ud2b8 (version.properties\uc640 \ub3d9\uae30\ud654)

### 2\ucc28 \uc2dc\ub3c4 (2025-08-28)

#### \ubb38\uc81c 6: \uad6c\uae00 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ubbf8\ud45c\uc2dc
- **\uc6d0\uc778**: Google OAuth\ub294 avatar_url\uc774 \uc544\ub2cc picture \uc18d\uc131 \uc0ac\uc6a9
- **\ud574\uacb0**: user.ts\uc5d0\uc11c \ub450 \uc18d\uc131 \ubaa8\ub450 \uccb4\ud06c
```typescript
avatarUrl: user.user_metadata?.avatar_url || user.user_metadata?.picture,
```

#### \ubb38\uc81c 7: \ube4c\ub4dc \uc2dc \uce90\uc2dc \ubb38\uc81c
- **\uc6d0\uc778**: MainActivity.java\uc5d0 \ub514\ubc84\uae45\uc6a9 WebView \uce90\uc2dc \ud074\ub9ac\uc5b4 \ucf54\ub4dc
- **\ud574\uacb0**: \ud504\ub85c\ub355\uc158 \ube4c\ub4dc\ub97c \uc704\ud574 \uce90\uc2dc \ud074\ub9ac\uc5b4 \ucf54\ub4dc \uc81c\uac70

## \ucd5c\uc885 \uc218\uc815 \uc0ac\ud56d

1. **OAuth \uc11c\ube44\uc2a4 \ud1b5\ud569**: oauth.ts\ub85c \ud1b5\ud569 \uc644\ub8cc
2. **\ub9ac\ub2e4\uc774\ub809\ud2b8 URL**: com.tarotgarden.app://auth/callback \uc0ac\uc6a9
3. **\ub514\ubc84\uadf8 \ud45c\uc2dc**: \ud654\uba74 \ub514\ubc84\uadf8 \ud328\ub110 \ube44\ud65c\uc131\ud654
4. **\ucf58\uc194 \ub85c\uadf8**: OAuth \ub514\ubc84\uae45\uc6a9 \ucf58\uc194 \ub85c\uadf8\ub294 \uc720\uc9c0, UI \ud45c\uc2dc\ub9cc \uc81c\uac70
5. **\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0**: Google OAuth picture \uc18d\uc131 \uc9c0\uc6d0
6. **\ubc84\uc804 \uad00\ub9ac**: \ube4c\ub4dc \ubc84\uc804 \uc790\ub3d9\ud654 \uc2a4\ud06c\ub9bd\ud2b8 \ucd94\uac00
7. **\ube4c\ub4dc \ucd5c\uc801\ud654**: \ub514\ubc84\uae45\uc6a9 \uce90\uc2dc \ud074\ub9ac\uc5b4 \ucf54\ub4dc \uc81c\uac70

## \ud14c\uc2a4\ud2b8 \uacb0\uacfc
- \u2705 \uad00\ub9ac\uc790 \ub85c\uadf8\uc778/\ub85c\uadf8\uc544\uc6c3 \uc815\uc0c1 \uc791\ub3d9
- \u2705 Google OAuth \ub85c\uadf8\uc778 \uc131\uacf5
- \u2705 \ucf5c\ubc31 \ud6c4 \ubb34\ud55c\ub85c\ub529 \ud604\uc0c1 \ud574\uacb0
- \u2705 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc815\uc0c1 \ud45c\uc2dc
- \u2705 \ubc84\uc804 \uc815\ubcf4 \uc62c\ubc14\ub978 \ud45c\uc2dc

## \ube4c\ub4dc \ubc0f \ubc30\ud3ec \uc21c\uc11c
```bash
npm run build:cap
npx cap sync
# Android Studio\uc5d0\uc11c Gradle Sync
# Generate signed app bundle (AAB) \uc0dd\uc131
```