# OAuth 로그인 문제 해결 시도 로그

## 문제 상황
- **현상**: 관리자 로그인 → 로그아웃 → 구글 로그인 시 무한 로딩
- **환경**: 구글 배포 앱 (Android)
- **시작일**: 2025-08-26

## 시도한 해결책들

### 2025-08-26
1. ✅ Vercel URL 수정
2. ✅ Capacitor 서버 URL 설정
3. ✅ 중간 리다이렉트 페이지 구현
4. ✅ OAuth 리스너 재등록 디버깅
5. ✅ 세션 재시도 시간 증가 (30초)

### 2025-08-27
1. ✅ OAuth 리스너 강제 재등록 추가
2. ✅ 로그아웃 시 리스너 정리 로직 추가
3. 🔄 **현재 시도**: OAuth 서비스 완전 재작성
   - 싱글톤 패턴으로 리스너 관리
   - 리스너 중복 방지 메커니즘 추가
   - 세션 정리와 리스너 정리 분리

## 핵심 발견사항
1. **리스너 중복 문제**: 같은 이벤트 리스너가 여러 번 등록되어 충돌
2. **세션 정리 타이밍**: 로그아웃 직후 바로 로그인하면 세션 정리가 불완전
3. **모바일 특수성**: Capacitor Deep Link 리스너가 제대로 정리되지 않음

## 다음 시도할 것
- OAuth 서비스를 싱글톤으로 관리하여 리스너 중복 완전 방지
- 리스너 등록 상태를 전역으로 관리
- 로그아웃 시 모든 OAuth 관련 상태 완전 초기화